#! /bin/sh
# Guess values for system-dependent variables and create Makefiles.
# Generated by GNU Autoconf 2.69.
#
#
# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.
#
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.
## -------------------- ##
## M4sh Initialization. ##
## -------------------- ##

# Be more Bourne compatible
DUALCASE=1; export DUALCASE # for MKS sh
if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
  emulate sh
  NULLCMD=:
  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
  # is contrary to our usage.  Disable this feature.
  alias -g '${1+"$@"}'='"$@"'
  setopt NO_GLOB_SUBST
else
  case `(set -o) 2>/dev/null` in #(
  *posix*) :
    set -o posix ;; #(
  *) :
     ;;
esac
fi


as_nl='
'
export as_nl
# Printing a long string crashes Solaris 7 /usr/bin/printf.
as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
# Prefer a ksh shell builtin over an external printf program on Solaris,
# but without wasting forks for bash or zsh.
if test -z "$BASH_VERSION$ZSH_VERSION" \
    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
  as_echo='print -r --'
  as_echo_n='print -rn --'
elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
  as_echo='printf %s\n'
  as_echo_n='printf %s'
else
  if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
    as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
    as_echo_n='/usr/ucb/echo -n'
  else
    as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
    as_echo_n_body='eval
      arg=$1;
      case $arg in #(
      *"$as_nl"*)
	expr "X$arg" : "X\\(.*\\)$as_nl";
	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
      esac;
      expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
    '
    export as_echo_n_body
    as_echo_n='sh -c $as_echo_n_body as_echo'
  fi
  export as_echo_body
  as_echo='sh -c $as_echo_body as_echo'
fi

# The user is always right.
if test "${PATH_SEPARATOR+set}" != set; then
  PATH_SEPARATOR=:
  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
    (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
      PATH_SEPARATOR=';'
  }
fi


# IFS
# We need space, tab and new line, in precisely that order.  Quoting is
# there to prevent editors from complaining about space-tab.
# (If _AS_PATH_WALK were called with IFS unset, it would disable word
# splitting by setting IFS to empty value.)
IFS=" ""	$as_nl"

# Find who we are.  Look in the path if we contain no directory separator.
as_myself=
case $0 in #((
  *[\\/]* ) as_myself=$0 ;;
  *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
  done
IFS=$as_save_IFS

     ;;
esac
# We did not find ourselves, most probably we were run as `sh COMMAND'
# in which case we are not to be found in the path.
if test "x$as_myself" = x; then
  as_myself=$0
fi
if test ! -f "$as_myself"; then
  $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
  exit 1
fi

# Unset variables that we do not need and which cause bugs (e.g. in
# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
# suppresses any "Segmentation fault" message there.  '((' could
# trigger a bug in pdksh 5.2.14.
for as_var in BASH_ENV ENV MAIL MAILPATH
do eval test x\${$as_var+set} = xset \
  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
done
PS1='$ '
PS2='> '
PS4='+ '

# NLS nuisances.
LC_ALL=C
export LC_ALL
LANGUAGE=C
export LANGUAGE

# CDPATH.
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH

# Use a proper internal environment variable to ensure we don't fall
  # into an infinite loop, continuously re-executing ourselves.
  if test x"${_as_can_reexec}" != xno && test "x$CONFIG_SHELL" != x; then
    _as_can_reexec=no; export _as_can_reexec;
    # We cannot yet assume a decent shell, so we have to provide a
# neutralization value for shells without unset; and this also
# works around shells that cannot unset nonexistent variables.
# Preserve -v and -x to the replacement shell.
BASH_ENV=/dev/null
ENV=/dev/null
(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
case $- in # ((((
  *v*x* | *x*v* ) as_opts=-vx ;;
  *v* ) as_opts=-v ;;
  *x* ) as_opts=-x ;;
  * ) as_opts= ;;
esac
exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
# Admittedly, this is quite paranoid, since all the known shells bail
# out after a failed `exec'.
$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
as_fn_exit 255
  fi
  # We don't want this to propagate to other subprocesses.
          { _as_can_reexec=; unset _as_can_reexec;}
if test "x$CONFIG_SHELL" = x; then
  as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
  emulate sh
  NULLCMD=:
  # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
  # is contrary to our usage.  Disable this feature.
  alias -g '\${1+\"\$@\"}'='\"\$@\"'
  setopt NO_GLOB_SUBST
else
  case \`(set -o) 2>/dev/null\` in #(
  *posix*) :
    set -o posix ;; #(
  *) :
     ;;
esac
fi
"
  as_required="as_fn_return () { (exit \$1); }
as_fn_success () { as_fn_return 0; }
as_fn_failure () { as_fn_return 1; }
as_fn_ret_success () { return 0; }
as_fn_ret_failure () { return 1; }

exitcode=0
as_fn_success || { exitcode=1; echo as_fn_success failed.; }
as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
if ( set x; as_fn_ret_success y && test x = \"\$1\" ); then :

else
  exitcode=1; echo positional parameters were not saved.
fi
test x\$exitcode = x0 || exit 1
test -x / || exit 1"
  as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
  as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
  eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
  test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
test \$(( 1 + 1 )) = 2 || exit 1"
  if (eval "$as_required") 2>/dev/null; then :
  as_have_required=yes
else
  as_have_required=no
fi
  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null; then :

else
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_found=false
for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
  as_found=:
  case $as_dir in #(
	 /*)
	   for as_base in sh bash ksh sh5; do
	     # Try only shells that exist, to save several forks.
	     as_shell=$as_dir/$as_base
	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
		    { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$as_shell"; } 2>/dev/null; then :
  CONFIG_SHELL=$as_shell as_have_required=yes
		   if { $as_echo "$as_bourne_compatible""$as_suggested" | as_run=a "$as_shell"; } 2>/dev/null; then :
  break 2
fi
fi
	   done;;
       esac
  as_found=false
done
$as_found || { if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
	      { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$SHELL"; } 2>/dev/null; then :
  CONFIG_SHELL=$SHELL as_have_required=yes
fi; }
IFS=$as_save_IFS


      if test "x$CONFIG_SHELL" != x; then :
  export CONFIG_SHELL
             # We cannot yet assume a decent shell, so we have to provide a
# neutralization value for shells without unset; and this also
# works around shells that cannot unset nonexistent variables.
# Preserve -v and -x to the replacement shell.
BASH_ENV=/dev/null
ENV=/dev/null
(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
case $- in # ((((
  *v*x* | *x*v* ) as_opts=-vx ;;
  *v* ) as_opts=-v ;;
  *x* ) as_opts=-x ;;
  * ) as_opts= ;;
esac
exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
# Admittedly, this is quite paranoid, since all the known shells bail
# out after a failed `exec'.
$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
exit 255
fi

    if test x$as_have_required = xno; then :
  $as_echo "$0: This script requires a shell more modern than all"
  $as_echo "$0: the shells that I found on your system."
  if test x${ZSH_VERSION+set} = xset ; then
    $as_echo "$0: In particular, zsh $ZSH_VERSION has bugs and should"
    $as_echo "$0: be upgraded to zsh 4.3.4 or later."
  else
    $as_echo "$0: Please tell bug-autoconf@gnu.org about your system,
$0: including any error possibly output before this
$0: message. Then install a modern shell, or manually run
$0: the script under such a shell if you do have one."
  fi
  exit 1
fi
fi
fi
SHELL=${CONFIG_SHELL-/bin/sh}
export SHELL
# Unset more variables known to interfere with behavior of common tools.
CLICOLOR_FORCE= GREP_OPTIONS=
unset CLICOLOR_FORCE GREP_OPTIONS

## --------------------- ##
## M4sh Shell Functions. ##
## --------------------- ##
# as_fn_unset VAR
# ---------------
# Portably unset VAR.
as_fn_unset ()
{
  { eval $1=; unset $1;}
}
as_unset=as_fn_unset

# as_fn_set_status STATUS
# -----------------------
# Set $? to STATUS, without forking.
as_fn_set_status ()
{
  return $1
} # as_fn_set_status

# as_fn_exit STATUS
# -----------------
# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
as_fn_exit ()
{
  set +e
  as_fn_set_status $1
  exit $1
} # as_fn_exit

# as_fn_mkdir_p
# -------------
# Create "$as_dir" as a directory, including parents if necessary.
as_fn_mkdir_p ()
{

  case $as_dir in #(
  -*) as_dir=./$as_dir;;
  esac
  test -d "$as_dir" || eval $as_mkdir_p || {
    as_dirs=
    while :; do
      case $as_dir in #(
      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
      *) as_qdir=$as_dir;;
      esac
      as_dirs="'$as_qdir' $as_dirs"
      as_dir=`$as_dirname -- "$as_dir" ||
$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
	 X"$as_dir" : 'X\(//\)[^/]' \| \
	 X"$as_dir" : 'X\(//\)$' \| \
	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
$as_echo X"$as_dir" |
    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)[^/].*/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\).*/{
	    s//\1/
	    q
	  }
	  s/.*/./; q'`
      test -d "$as_dir" && break
    done
    test -z "$as_dirs" || eval "mkdir $as_dirs"
  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"


} # as_fn_mkdir_p

# as_fn_executable_p FILE
# -----------------------
# Test if FILE is an executable regular file.
as_fn_executable_p ()
{
  test -f "$1" && test -x "$1"
} # as_fn_executable_p
# as_fn_append VAR VALUE
# ----------------------
# Append the text in VALUE to the end of the definition contained in VAR. Take
# advantage of any shell optimizations that allow amortized linear growth over
# repeated appends, instead of the typical quadratic growth present in naive
# implementations.
if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
  eval 'as_fn_append ()
  {
    eval $1+=\$2
  }'
else
  as_fn_append ()
  {
    eval $1=\$$1\$2
  }
fi # as_fn_append

# as_fn_arith ARG...
# ------------------
# Perform arithmetic evaluation on the ARGs, and store the result in the
# global $as_val. Take advantage of shells that can avoid forks. The arguments
# must be portable across $(()) and expr.
if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
  eval 'as_fn_arith ()
  {
    as_val=$(( $* ))
  }'
else
  as_fn_arith ()
  {
    as_val=`expr "$@" || test $? -eq 1`
  }
fi # as_fn_arith


# as_fn_error STATUS ERROR [LINENO LOG_FD]
# ----------------------------------------
# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
# script with STATUS, using 1 if that was 0.
as_fn_error ()
{
  as_status=$1; test $as_status -eq 0 && as_status=1
  if test "$4"; then
    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
  fi
  $as_echo "$as_me: error: $2" >&2
  as_fn_exit $as_status
} # as_fn_error

if expr a : '\(a\)' >/dev/null 2>&1 &&
   test "X`expr 00001 : '.*\(...\)'`" = X001; then
  as_expr=expr
else
  as_expr=false
fi

if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
  as_basename=basename
else
  as_basename=false
fi

if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
  as_dirname=dirname
else
  as_dirname=false
fi

as_me=`$as_basename -- "$0" ||
$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
	 X"$0" : 'X\(//\)$' \| \
	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
$as_echo X/"$0" |
    sed '/^.*\/\([^/][^/]*\)\/*$/{
	    s//\1/
	    q
	  }
	  /^X\/\(\/\/\)$/{
	    s//\1/
	    q
	  }
	  /^X\/\(\/\).*/{
	    s//\1/
	    q
	  }
	  s/.*/./; q'`

# Avoid depending upon Character Ranges.
as_cr_letters='abcdefghijklmnopqrstuvwxyz'
as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
as_cr_Letters=$as_cr_letters$as_cr_LETTERS
as_cr_digits='0123456789'
as_cr_alnum=$as_cr_Letters$as_cr_digits


  as_lineno_1=$LINENO as_lineno_1a=$LINENO
  as_lineno_2=$LINENO as_lineno_2a=$LINENO
  eval 'test "x$as_lineno_1'$as_run'" != "x$as_lineno_2'$as_run'" &&
  test "x`expr $as_lineno_1'$as_run' + 1`" = "x$as_lineno_2'$as_run'"' || {
  # Blame Lee E. McMahon (1931-1989) for sed's syntax.  :-)
  sed -n '
    p
    /[$]LINENO/=
  ' <$as_myself |
    sed '
      s/[$]LINENO.*/&-/
      t lineno
      b
      :lineno
      N
      :loop
      s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
      t loop
      s/-\n.*//
    ' >$as_me.lineno &&
  chmod +x "$as_me.lineno" ||
    { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }

  # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
  # already done that, so ensure we don't try to do so again and fall
  # in an infinite loop.  This has already happened in practice.
  _as_can_reexec=no; export _as_can_reexec
  # Don't try to exec as it changes $[0], causing all sort of problems
  # (the dirname of $[0] is not the place where we might find the
  # original and so on.  Autoconf is especially sensitive to this).
  . "./$as_me.lineno"
  # Exit status is that of the last command.
  exit
}

ECHO_C= ECHO_N= ECHO_T=
case `echo -n x` in #(((((
-n*)
  case `echo 'xy\c'` in
  *c*) ECHO_T='	';;	# ECHO_T is single tab character.
  xy)  ECHO_C='\c';;
  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
       ECHO_T='	';;
  esac;;
*)
  ECHO_N='-n';;
esac

rm -f conf$$ conf$$.exe conf$$.file
if test -d conf$$.dir; then
  rm -f conf$$.dir/conf$$.file
else
  rm -f conf$$.dir
  mkdir conf$$.dir 2>/dev/null
fi
if (echo >conf$$.file) 2>/dev/null; then
  if ln -s conf$$.file conf$$ 2>/dev/null; then
    as_ln_s='ln -s'
    # ... but there are two gotchas:
    # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
    # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
    # In both cases, we have to default to `cp -pR'.
    ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
      as_ln_s='cp -pR'
  elif ln conf$$.file conf$$ 2>/dev/null; then
    as_ln_s=ln
  else
    as_ln_s='cp -pR'
  fi
else
  as_ln_s='cp -pR'
fi
rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
rmdir conf$$.dir 2>/dev/null

if mkdir -p . 2>/dev/null; then
  as_mkdir_p='mkdir -p "$as_dir"'
else
  test -d ./-p && rmdir ./-p
  as_mkdir_p=false
fi

as_test_x='test -x'
as_executable_p=as_fn_executable_p

# Sed expression to map a string onto a valid CPP name.
as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"

# Sed expression to map a string onto a valid variable name.
as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"



# Check that we are running under the correct shell.
SHELL=${CONFIG_SHELL-/bin/sh}

case X$ECHO in
X*--fallback-echo)
  # Remove one level of quotation (which was required for Make).
  ECHO=`echo "$ECHO" | sed 's,\\\\\$\\$0,'$0','`
  ;;
esac

echo=${ECHO-echo}
if test "X$1" = X--no-reexec; then
  # Discard the --no-reexec flag, and continue.
  shift
elif test "X$1" = X--fallback-echo; then
  # Avoid inline document here, it may be left over
  :
elif test "X`($echo '\t') 2>/dev/null`" = 'X\t' ; then
  # Yippee, $echo works!
  :
else
  # Restart under the correct shell.
  exec $SHELL "$0" --no-reexec ${1+"$@"}
fi

if test "X$1" = X--fallback-echo; then
  # used as fallback echo
  shift
  cat <<EOF
$*
EOF
  exit 0
fi

# The HP-UX ksh and POSIX shell print the target directory to stdout
# if CDPATH is set.
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH

if test -z "$ECHO"; then
if test "X${echo_test_string+set}" != Xset; then
# find a string as large as possible, as long as the shell can cope with it
  for cmd in 'sed 50q "$0"' 'sed 20q "$0"' 'sed 10q "$0"' 'sed 2q "$0"' 'echo test'; do
    # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
    if (echo_test_string=`eval $cmd`) 2>/dev/null &&
       echo_test_string=`eval $cmd` &&
       (test "X$echo_test_string" = "X$echo_test_string") 2>/dev/null
    then
      break
    fi
  done
fi

if test "X`($echo '\t') 2>/dev/null`" = 'X\t' &&
   echo_testing_string=`($echo "$echo_test_string") 2>/dev/null` &&
   test "X$echo_testing_string" = "X$echo_test_string"; then
  :
else
  # The Solaris, AIX, and Digital Unix default echo programs unquote
  # backslashes.  This makes it impossible to quote backslashes using
  #   echo "$something" | sed 's/\\/\\\\/g'
  #
  # So, first we look for a working echo in the user's PATH.

  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for dir in $PATH /usr/ucb; do
    IFS="$lt_save_ifs"
    if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &&
       test "X`($dir/echo '\t') 2>/dev/null`" = 'X\t' &&
       echo_testing_string=`($dir/echo "$echo_test_string") 2>/dev/null` &&
       test "X$echo_testing_string" = "X$echo_test_string"; then
      echo="$dir/echo"
      break
    fi
  done
  IFS="$lt_save_ifs"

  if test "X$echo" = Xecho; then
    # We didn't find a better echo, so look for alternatives.
    if test "X`(print -r '\t') 2>/dev/null`" = 'X\t' &&
       echo_testing_string=`(print -r "$echo_test_string") 2>/dev/null` &&
       test "X$echo_testing_string" = "X$echo_test_string"; then
      # This shell has a builtin print -r that does the trick.
      echo='print -r'
    elif (test -f /bin/ksh || test -f /bin/ksh$ac_exeext) &&
	 test "X$CONFIG_SHELL" != X/bin/ksh; then
      # If we have ksh, try running configure again with it.
      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
      export ORIGINAL_CONFIG_SHELL
      CONFIG_SHELL=/bin/ksh
      export CONFIG_SHELL
      exec $CONFIG_SHELL "$0" --no-reexec ${1+"$@"}
    else
      # Try using printf.
      echo='printf %s\n'
      if test "X`($echo '\t') 2>/dev/null`" = 'X\t' &&
	 echo_testing_string=`($echo "$echo_test_string") 2>/dev/null` &&
	 test "X$echo_testing_string" = "X$echo_test_string"; then
	# Cool, printf works
	:
      elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
	   test "X$echo_testing_string" = 'X\t' &&
	   echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
	   test "X$echo_testing_string" = "X$echo_test_string"; then
	CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
	export CONFIG_SHELL
	SHELL="$CONFIG_SHELL"
	export SHELL
	echo="$CONFIG_SHELL $0 --fallback-echo"
      elif echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
	   test "X$echo_testing_string" = 'X\t' &&
	   echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
	   test "X$echo_testing_string" = "X$echo_test_string"; then
	echo="$CONFIG_SHELL $0 --fallback-echo"
      else
	# maybe with a smaller string...
	prev=:

	for cmd in 'echo test' 'sed 2q "$0"' 'sed 10q "$0"' 'sed 20q "$0"' 'sed 50q "$0"'; do
	  if (test "X$echo_test_string" = "X`eval $cmd`") 2>/dev/null
	  then
	    break
	  fi
	  prev="$cmd"
	done

	if test "$prev" != 'sed 50q "$0"'; then
	  echo_test_string=`eval $prev`
	  export echo_test_string
	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "$0" ${1+"$@"}
	else
	  # Oops.  We lost completely, so just stick with echo.
	  echo=echo
	fi
      fi
    fi
  fi
fi
fi

# Copy echo and quote the copy suitably for passing to libtool from
# the Makefile, instead of quoting the original, which is used later.
ECHO=$echo
if test "X$ECHO" = "X$CONFIG_SHELL $0 --fallback-echo"; then
   ECHO="$CONFIG_SHELL \\\$\$0 --fallback-echo"
fi




tagnames=${tagnames+${tagnames},}CXX

test -n "$DJDIR" || exec 7<&0 </dev/null
exec 6>&1

# Name of the host.
# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
# so uname gets run too.
ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`

#
# Initializations.
#
ac_default_prefix=/usr/local
ac_clean_files=
ac_config_libobj_dir=.
LIBOBJS=
cross_compiling=no
subdirs=
MFLAGS=
MAKEFLAGS=

# Identity of this package.
PACKAGE_NAME=
PACKAGE_TARNAME=
PACKAGE_VERSION=
PACKAGE_STRING=
PACKAGE_BUGREPORT=
PACKAGE_URL=

ac_unique_file="README.GIT-RULES"
# Factoring default headers for most tests.
ac_includes_default="\
#include <stdio.h>
#ifdef HAVE_SYS_TYPES_H
# include <sys/types.h>
#endif
#ifdef HAVE_SYS_STAT_H
# include <sys/stat.h>
#endif
#ifdef STDC_HEADERS
# include <stdlib.h>
# include <stddef.h>
#else
# ifdef HAVE_STDLIB_H
#  include <stdlib.h>
# endif
#endif
#ifdef HAVE_STRING_H
# if !defined STDC_HEADERS && defined HAVE_MEMORY_H
#  include <memory.h>
# endif
# include <string.h>
#endif
#ifdef HAVE_STRINGS_H
# include <strings.h>
#endif
#ifdef HAVE_INTTYPES_H
# include <inttypes.h>
#endif
#ifdef HAVE_STDINT_H
# include <stdint.h>
#endif
#ifdef HAVE_UNISTD_H
# include <unistd.h>
#endif"

ac_header_list=
ac_subst_vars='LTLIBOBJS
LIBTOOL
NMEDIT
DSYMUTIL
STRIP
AR
ECHO
PHP_VERSION_ID
PHP_VERSION
PHP_LIBS
PHP_LDFLAGS
PEAR_INSTALLDIR
NATIVE_RPATHS
INSTALL_IT
EXTRA_INCLUDES
INCLUDES
ZEND_EXTRA_LIBS
EXTRA_LIBS
EXTRA_LDFLAGS_PROGRAM
EXTRA_LDFLAGS
EXTENSION_DIR
DEBUG_CFLAGS
program_suffix
program_prefix
php_abs_top_srcdir
php_abs_top_builddir
abs_srcdir
abs_builddir
PHP_INSTALLED_SAPIS
EXPANDED_PHP_CONFIG_FILE_SCAN_DIR
EXPANDED_PHP_CONFIG_FILE_PATH
EXPANDED_LOCALSTATEDIR
EXPANDED_SYSCONFDIR
EXPANDED_DATADIR
EXPANDED_LIBDIR
EXPANDED_MANDIR
EXPANDED_SBINDIR
EXPANDED_BINDIR
EXPANDED_EXTENSION_DIR
EXPANDED_PEAR_INSTALLDIR
INCLUDE_PATH
INLINE_CFLAGS
RANLIB
SNMP_CONFIG
PDO_OCI_VERSION
PDO_OCI_DIR
PDO_OCI_SHARED_LIBADD
PDO_MYSQL_MODULE_TYPE
ODBC_TYPE
ODBC_LFLAGS
ODBC_LIBS
ODBC_INCLUDE
OCI8_ORACLE_VERSION
OCI8_DIR
OCI8_SHARED_LIBADD
MYSQL_INCLUDE
MYSQL_LIBS
MYSQL_MODULE_TYPE
CXXCPP
ac_ct_CXX
CXXFLAGS
CXX
ICU_CONFIG
OPENSSL_INCDIR_OPT
KRB5_CONFIG
LTP_GENHTML
LTP
ALLOCA
LIBOBJS
PROG_SENDMAIL
php_fpm_prefix
php_fpm_localstatedir
php_fpm_sysconfdir
php_fpm_group
php_fpm_user
php_fpm_systemd
PKG_CONFIG
SHLIB_DL_SUFFIX_NAME
SHLIB_SUFFIX_NAME
RE2C
YFLAGS
YACC
AWK
LN_S
CPP
OBJEXT
EXEEXT
ac_ct_CC
CPPFLAGS
LDFLAGS
CFLAGS
CC
target_os
target_vendor
target_cpu
target
host_os
host_vendor
host_cpu
host
build_os
build_vendor
build_cpu
build
CONFIGURE_OPTIONS
CONFIGURE_COMMAND
SED
EGREP
GREP
target_alias
host_alias
build_alias
LIBS
ECHO_T
ECHO_N
ECHO_C
DEFS
mandir
localedir
libdir
psdir
pdfdir
dvidir
htmldir
infodir
docdir
oldincludedir
includedir
localstatedir
sharedstatedir
sysconfdir
datadir
datarootdir
libexecdir
sbindir
bindir
program_transform_name
prefix
exec_prefix
PACKAGE_URL
PACKAGE_BUGREPORT
PACKAGE_STRING
PACKAGE_VERSION
PACKAGE_TARNAME
PACKAGE_NAME
PATH_SEPARATOR
SHELL'
ac_subst_files=''
ac_user_opts='
enable_option_checking
with_libdir
enable_rpath
enable_re2c_cgoto
enable_
with_aolserver
with_apxs
with_apache
enable_mod_charset
with_apxs2filter
with_apxs2
with_apache_hooks
with_apache_hooks_static
with_caudium
enable_cli
with_continuity
enable_embed
enable_fpm
with_fpm_user
with_fpm_group
with_fpm_systemd
with_isapi
with_litespeed
with_milter
with_nsapi
with_phttpd
with_pi3web
with_roxen
enable_roxen_zts
with_thttpd
with_tux
with_webjames
enable_cgi
enable_gcov
enable_debug
with_layout
with_config_file_path
with_config_file_scan_dir
enable_sigchild
enable_libgcc
enable_short_tags
enable_dmalloc
enable_ipv6
enable_dtrace
enable_fd_setsize
enable_all
with_regex
enable_libxml
with_libxml_dir
with_openssl
with_kerberos
with_pcre_regex
with_sqlite3
with_zlib
with_zlib_dir
enable_bcmath
with_bz2
enable_calendar
enable_ctype
with_curl
enable_dba
with_qdbm
with_gdbm
with_ndbm
with_db4
with_db3
with_db2
with_db1
with_dbm
with_tcadb
with_cdb
enable_inifile
enable_flatfile
enable_dom
with_enchant
enable_exif
enable_fileinfo
enable_filter
with_pcre_dir
enable_ftp
with_openssl_dir
with_gd
with_vpx_dir
with_jpeg_dir
with_png_dir
with_xpm_dir
with_freetype_dir
with_t1lib
enable_gd_native_ttf
enable_gd_jis_conv
with_gettext
with_gmp
with_mhash
enable_hash
with_iconv
with_imap
with_imap_ssl
with_interbase
enable_intl
with_icu_dir
enable_json
with_ldap
with_ldap_sasl
enable_mbstring
enable_mbregex
enable_mbregex_backtrack
with_libmbfl
with_onig
with_mcrypt
with_mssql
with_mysql
with_mysql_sock
with_mysqli
enable_embedded_mysqli
with_oci8
with_adabas
with_sapdb
with_solid
with_ibm_db2
with_ODBCRouter
with_empress
with_empress_bcs
with_birdstep
with_custom_odbc
with_iodbc
with_esoob
with_unixODBC
with_dbmaker
enable_opcache
enable_pcntl
enable_pdo
with_pdo_dblib
with_pdo_firebird
with_pdo_mysql
with_pdo_oci
with_pdo_odbc
with_pdo_pgsql
with_pdo_sqlite
with_pgsql
enable_phar
enable_posix
with_pspell
with_libedit
with_readline
with_recode
enable_session
with_mm
enable_shmop
enable_simplexml
with_snmp
enable_soap
enable_sockets
with_sybase_ct
enable_sysvmsg
enable_sysvsem
enable_sysvshm
with_tidy
enable_tokenizer
enable_wddx
with_libexpat_dir
enable_xml
enable_xmlreader
with_xmlrpc
with_iconv_dir
enable_xmlwriter
with_xsl
enable_zip
enable_mysqlnd
enable_mysqlnd_compression_support
with_pear
with_zend_vm
enable_maintainer_zts
enable_inline_optimization
enable_zend_signals
with_tsrm_pth
with_tsrm_st
with_tsrm_pthreads
enable_shared
enable_static
enable_fast_install
with_gnu_ld
enable_libtool_lock
with_pic
with_tags
'
      ac_precious_vars='build_alias
host_alias
target_alias
CC
CFLAGS
LDFLAGS
LIBS
CPPFLAGS
CPP
YACC
YFLAGS
CXX
CXXFLAGS
CCC
CXXCPP'


# Initialize some variables set by options.
ac_init_help=
ac_init_version=false
ac_unrecognized_opts=
ac_unrecognized_sep=
# The variables have the same names as the options, with
# dashes changed to underlines.
cache_file=/dev/null
exec_prefix=NONE
no_create=
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
verbose=
x_includes=NONE
x_libraries=NONE

# Installation directory options.
# These are left unexpanded so users can "make install exec_prefix=/foo"
# and all the variables that are supposed to be based on exec_prefix
# by default will actually change.
# Use braces instead of parens because sh, perl, etc. also accept them.
# (The list follows the same order as the GNU Coding Standards.)
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datarootdir='${prefix}/share'
datadir='${datarootdir}'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
includedir='${prefix}/include'
oldincludedir='/usr/include'
docdir='${datarootdir}/doc/${PACKAGE}'
infodir='${datarootdir}/info'
htmldir='${docdir}'
dvidir='${docdir}'
pdfdir='${docdir}'
psdir='${docdir}'
libdir='${exec_prefix}/lib'
localedir='${datarootdir}/locale'
mandir='${datarootdir}/man'

ac_prev=
ac_dashdash=
for ac_option
do
  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval $ac_prev=\$ac_option
    ac_prev=
    continue
  fi

  case $ac_option in
  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
  *=)   ac_optarg= ;;
  *)    ac_optarg=yes ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case $ac_dashdash$ac_option in
  --)
    ac_dashdash=yes ;;

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir=$ac_optarg ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build_alias ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build_alias=$ac_optarg ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file=$ac_optarg ;;

  --config-cache | -C)
    cache_file=config.cache ;;

  -datadir | --datadir | --datadi | --datad)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=*)
    datadir=$ac_optarg ;;

  -datarootdir | --datarootdir | --datarootdi | --datarootd | --dataroot \
  | --dataroo | --dataro | --datar)
    ac_prev=datarootdir ;;
  -datarootdir=* | --datarootdir=* | --datarootdi=* | --datarootd=* \
  | --dataroot=* | --dataroo=* | --dataro=* | --datar=*)
    datarootdir=$ac_optarg ;;

  -disable-* | --disable-*)
    ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
    # Reject names that are not valid shell variable names.
    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
      as_fn_error $? "invalid feature name: $ac_useropt"
    ac_useropt_orig=$ac_useropt
    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
    case $ac_user_opts in
      *"
"enable_$ac_useropt"
"*) ;;
      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--disable-$ac_useropt_orig"
	 ac_unrecognized_sep=', ';;
    esac
    eval enable_$ac_useropt=no ;;

  -docdir | --docdir | --docdi | --doc | --do)
    ac_prev=docdir ;;
  -docdir=* | --docdir=* | --docdi=* | --doc=* | --do=*)
    docdir=$ac_optarg ;;

  -dvidir | --dvidir | --dvidi | --dvid | --dvi | --dv)
    ac_prev=dvidir ;;
  -dvidir=* | --dvidir=* | --dvidi=* | --dvid=* | --dvi=* | --dv=*)
    dvidir=$ac_optarg ;;

  -enable-* | --enable-*)
    ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
    # Reject names that are not valid shell variable names.
    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
      as_fn_error $? "invalid feature name: $ac_useropt"
    ac_useropt_orig=$ac_useropt
    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
    case $ac_user_opts in
      *"
"enable_$ac_useropt"
"*) ;;
      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--enable-$ac_useropt_orig"
	 ac_unrecognized_sep=', ';;
    esac
    eval enable_$ac_useropt=\$ac_optarg ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix=$ac_optarg ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he | -h)
    ac_init_help=long ;;
  -help=r* | --help=r* | --hel=r* | --he=r* | -hr*)
    ac_init_help=recursive ;;
  -help=s* | --help=s* | --hel=s* | --he=s* | -hs*)
    ac_init_help=short ;;

  -host | --host | --hos | --ho)
    ac_prev=host_alias ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host_alias=$ac_optarg ;;

  -htmldir | --htmldir | --htmldi | --htmld | --html | --htm | --ht)
    ac_prev=htmldir ;;
  -htmldir=* | --htmldir=* | --htmldi=* | --htmld=* | --html=* | --htm=* \
  | --ht=*)
    htmldir=$ac_optarg ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir=$ac_optarg ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir=$ac_optarg ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir=$ac_optarg ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir=$ac_optarg ;;

  -localedir | --localedir | --localedi | --localed | --locale)
    ac_prev=localedir ;;
  -localedir=* | --localedir=* | --localedi=* | --localed=* | --locale=*)
    localedir=$ac_optarg ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst | --locals)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* | --locals=*)
    localstatedir=$ac_optarg ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir=$ac_optarg ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c | -n)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir=$ac_optarg ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix=$ac_optarg ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix=$ac_optarg ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix=$ac_optarg ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name=$ac_optarg ;;

  -pdfdir | --pdfdir | --pdfdi | --pdfd | --pdf | --pd)
    ac_prev=pdfdir ;;
  -pdfdir=* | --pdfdir=* | --pdfdi=* | --pdfd=* | --pdf=* | --pd=*)
    pdfdir=$ac_optarg ;;

  -psdir | --psdir | --psdi | --psd | --ps)
    ac_prev=psdir ;;
  -psdir=* | --psdir=* | --psdi=* | --psd=* | --ps=*)
    psdir=$ac_optarg ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir=$ac_optarg ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir=$ac_optarg ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site=$ac_optarg ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir=$ac_optarg ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir=$ac_optarg ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target_alias ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target_alias=$ac_optarg ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers | -V)
    ac_init_version=: ;;

  -with-* | --with-*)
    ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
    # Reject names that are not valid shell variable names.
    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
      as_fn_error $? "invalid package name: $ac_useropt"
    ac_useropt_orig=$ac_useropt
    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
    case $ac_user_opts in
      *"
"with_$ac_useropt"
"*) ;;
      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--with-$ac_useropt_orig"
	 ac_unrecognized_sep=', ';;
    esac
    eval with_$ac_useropt=\$ac_optarg ;;

  -without-* | --without-*)
    ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
    # Reject names that are not valid shell variable names.
    expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
      as_fn_error $? "invalid package name: $ac_useropt"
    ac_useropt_orig=$ac_useropt
    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
    case $ac_user_opts in
      *"
"with_$ac_useropt"
"*) ;;
      *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--without-$ac_useropt_orig"
	 ac_unrecognized_sep=', ';;
    esac
    eval with_$ac_useropt=no ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes=$ac_optarg ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries=$ac_optarg ;;

  -*) as_fn_error $? "unrecognized option: \`$ac_option'
Try \`$0 --help' for more information"
    ;;

  *=*)
    ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
    # Reject names that are not valid shell variable names.
    case $ac_envvar in #(
      '' | [0-9]* | *[!_$as_cr_alnum]* )
      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
    esac
    eval $ac_envvar=\$ac_optarg
    export $ac_envvar ;;

  *)
    # FIXME: should be removed in autoconf 3.0.
    $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
      $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
    : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
    ;;

  esac
done

if test -n "$ac_prev"; then
  ac_option=--`echo $ac_prev | sed 's/_/-/g'`
  as_fn_error $? "missing argument to $ac_option"
fi

if test -n "$ac_unrecognized_opts"; then
  case $enable_option_checking in
    no) ;;
    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
    *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
  esac
fi

# Check all directory arguments for consistency.
for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
		datadir sysconfdir sharedstatedir localstatedir includedir \
		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
		libdir localedir mandir
do
  eval ac_val=\$$ac_var
  # Remove trailing slashes.
  case $ac_val in
    */ )
      ac_val=`expr "X$ac_val" : 'X\(.*[^/]\)' \| "X$ac_val" : 'X\(.*\)'`
      eval $ac_var=\$ac_val;;
  esac
  # Be sure to have absolute directory names.
  case $ac_val in
    [\\/$]* | ?:[\\/]* )  continue;;
    NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
  esac
  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
done

# There might be people who depend on the old broken behavior: `$host'
# used to hold the argument of --host etc.
# FIXME: To remove some day.
build=$build_alias
host=$host_alias
target=$target_alias

# FIXME: To remove some day.
if test "x$host_alias" != x; then
  if test "x$build_alias" = x; then
    cross_compiling=maybe
  elif test "x$build_alias" != "x$host_alias"; then
    cross_compiling=yes
  fi
fi

ac_tool_prefix=
test -n "$host_alias" && ac_tool_prefix=$host_alias-

test "$silent" = yes && exec 6>/dev/null


ac_pwd=`pwd` && test -n "$ac_pwd" &&
ac_ls_di=`ls -di .` &&
ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
  as_fn_error $? "working directory cannot be determined"
test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
  as_fn_error $? "pwd does not report name of working directory"


# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then the parent directory.
  ac_confdir=`$as_dirname -- "$as_myself" ||
$as_expr X"$as_myself" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
	 X"$as_myself" : 'X\(//\)[^/]' \| \
	 X"$as_myself" : 'X\(//\)$' \| \
	 X"$as_myself" : 'X\(/\)' \| . 2>/dev/null ||
$as_echo X"$as_myself" |
    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)[^/].*/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\).*/{
	    s//\1/
	    q
	  }
	  s/.*/./; q'`
  srcdir=$ac_confdir
  if test ! -r "$srcdir/$ac_unique_file"; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r "$srcdir/$ac_unique_file"; then
  test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
fi
ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
ac_abs_confdir=`(
	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
	pwd)`
# When building in place, set srcdir=.
if test "$ac_abs_confdir" = "$ac_pwd"; then
  srcdir=.
fi
# Remove unnecessary trailing slashes from srcdir.
# Double slashes in file names in object file debugging info
# mess up M-x gdb in Emacs.
case $srcdir in
*/) srcdir=`expr "X$srcdir" : 'X\(.*[^/]\)' \| "X$srcdir" : 'X\(.*\)'`;;
esac
for ac_var in $ac_precious_vars; do
  eval ac_env_${ac_var}_set=\${${ac_var}+set}
  eval ac_env_${ac_var}_value=\$${ac_var}
  eval ac_cv_env_${ac_var}_set=\${${ac_var}+set}
  eval ac_cv_env_${ac_var}_value=\$${ac_var}
done

#
# Report the --help message.
#
if test "$ac_init_help" = "long"; then
  # Omit some internal or obsolete options to make the list less imposing.
  # This message is too long to be a string in the A/UX 3.1 sh.
  cat <<_ACEOF
\`configure' configures this package to adapt to many kinds of systems.

Usage: $0 [OPTION]... [VAR=VALUE]...

To assign environment variables (e.g., CC, CFLAGS...), specify them as
VAR=VALUE.  See below for descriptions of some of the useful variables.

Defaults for the options are specified in brackets.

Configuration:
  -h, --help              display this help and exit
      --help=short        display options specific to this package
      --help=recursive    display the short help of all the included packages
  -V, --version           display version information and exit
  -q, --quiet, --silent   do not print \`checking ...' messages
      --cache-file=FILE   cache test results in FILE [disabled]
  -C, --config-cache      alias for \`--cache-file=config.cache'
  -n, --no-create         do not create output files
      --srcdir=DIR        find the sources in DIR [configure dir or \`..']

Installation directories:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [PREFIX]

By default, \`make install' will install all the files in
\`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
an installation prefix other than \`$ac_default_prefix' using \`--prefix',
for instance \`--prefix=\$HOME'.

For better control, use the options below.

Fine tuning of the installation directories:
  --bindir=DIR            user executables [EPREFIX/bin]
  --sbindir=DIR           system admin executables [EPREFIX/sbin]
  --libexecdir=DIR        program executables [EPREFIX/libexec]
  --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
  --libdir=DIR            object code libraries [EPREFIX/lib]
  --includedir=DIR        C header files [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc [/usr/include]
  --datarootdir=DIR       read-only arch.-independent data root [PREFIX/share]
  --datadir=DIR           read-only architecture-independent data [DATAROOTDIR]
  --infodir=DIR           info documentation [DATAROOTDIR/info]
  --localedir=DIR         locale-dependent data [DATAROOTDIR/locale]
  --mandir=DIR            man documentation [DATAROOTDIR/man]
  --docdir=DIR            documentation root [DATAROOTDIR/doc/PACKAGE]
  --htmldir=DIR           html documentation [DOCDIR]
  --dvidir=DIR            dvi documentation [DOCDIR]
  --pdfdir=DIR            pdf documentation [DOCDIR]
  --psdir=DIR             ps documentation [DOCDIR]
_ACEOF

  cat <<\_ACEOF

System types:
  --build=BUILD     configure for building on BUILD [guessed]
  --host=HOST       cross-compile to build programs to run on HOST [BUILD]
  --target=TARGET   configure for building compilers for TARGET [HOST]
_ACEOF
fi

if test -n "$ac_init_help"; then

  cat <<\_ACEOF

Optional Features and Packages:
  --disable-option-checking  ignore unrecognized --enable/--with options
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --with-libdir=NAME      Look for libraries in .../NAME rather than .../lib
  --disable-rpath         Disable passing additional runtime library
                          search paths
  --enable-re2c-cgoto     Enable -g flag to re2c to use computed goto gcc extension

SAPI modules:

  --with-aolserver=DIR    Specify path to the installed AOLserver
  --with-apxs=FILE        Build shared Apache 1.x module. FILE is the optional
                          pathname to the Apache apxs tool apxs
  --with-apache=DIR       Build Apache 1.x module. DIR is the top-level Apache
                          build directory /usr/local/apache
  --enable-mod-charset    APACHE: Enable transfer tables for mod_charset (Rus Apache)
  --with-apxs2filter=FILE
                          EXPERIMENTAL: Build shared Apache 2.0 Filter module. FILE is the optional
                          pathname to the Apache apxs tool apxs
  --with-apxs2=FILE       Build shared Apache 2.0 Handler module. FILE is the optional
                          pathname to the Apache apxs tool apxs
  --with-apache-hooks=FILE
                          EXPERIMENTAL: Build shared Apache 1.x module. FILE is the optional
                          pathname to the Apache apxs tool apxs
  --with-apache-hooks-static=DIR
                          EXPERIMENTAL: Build Apache 1.x module. DIR is the top-level Apache
                          build directory /usr/local/apache
  --enable-mod-charset    APACHE (hooks): Enable transfer tables for mod_charset (Rus Apache)
  --with-caudium=DIR      Build PHP as a Pike module for use with Caudium.
                          DIR is the Caudium server dir /usr/local/caudium/server
  --disable-cli           Disable building CLI version of PHP
                          (this forces --without-pear)
  --with-continuity=DIR   Build PHP as Continuity Server module.
                          DIR is path to the installed Continuity Server root
  --enable-embed=TYPE     EXPERIMENTAL: Enable building of embedded SAPI library
                          TYPE is either 'shared' or 'static'. TYPE=shared
  --enable-fpm            Enable building of the fpm SAPI executable
  --with-fpm-user=USER    Set the user for php-fpm to run as. (default: nobody)
  --with-fpm-group=GRP    Set the group for php-fpm to run as. For a system user, this
                          should usually be set to match the fpm username (default: nobody)
  --with-fpm-systemd      Activate systemd integration
  --with-isapi=DIR        Build PHP as an ISAPI module for use with Zeus
  --with-litespeed        Build PHP as litespeed module
  --with-milter=DIR       Build PHP as Milter application
  --with-nsapi=DIR        Build PHP as NSAPI module for Netscape/iPlanet/Sun Webserver
  --with-phttpd=DIR       Build PHP as phttpd module
  --with-pi3web=DIR       Build PHP as Pi3Web module
  --with-roxen=DIR        Build PHP as a Pike module. DIR is the base Roxen
                          directory, normally /usr/local/roxen/server
  --enable-roxen-zts      ROXEN: Build the Roxen module using Zend Thread Safety
  --with-thttpd=SRCDIR    Build PHP as thttpd module
  --with-tux=MODULEDIR    Build PHP as a TUX module (Linux only)
  --with-webjames=SRCDIR  Build PHP as a WebJames module (RISC OS only)
  --disable-cgi           Disable building CGI version of PHP

General settings:

  --enable-gcov           Enable GCOV code coverage (requires LTP) - FOR DEVELOPERS ONLY!!
  --enable-debug          Compile with debugging symbols
  --with-layout=TYPE      Set how installed files will be laid out.  Type can
                          be either PHP or GNU [PHP]
  --with-config-file-path=PATH
                          Set the path in which to look for php.ini [PREFIX/lib]
  --with-config-file-scan-dir=PATH
                          Set the path where to scan for configuration files
  --enable-sigchild       Enable PHP's own SIGCHLD handler
  --enable-libgcc         Enable explicitly linking against libgcc
  --disable-short-tags    Disable the short-form <? start tag by default
  --enable-dmalloc        Enable dmalloc
  --disable-ipv6          Disable IPv6 support
  --enable-dtrace         Enable DTrace support
  --enable-fd-setsize     Set size of descriptor sets

Extensions:

  --with-EXTENSION=shared[,PATH]

    NOTE: Not all extensions can be build as 'shared'.

    Example: --with-foobar=shared,/usr/local/foobar/

      o Builds the foobar extension as shared extension.
      o foobar package install prefix is /usr/local/foobar/


  --disable-all           Disable all extensions which are enabled by default

  --with-regex=TYPE       Regex library type: system, php. TYPE=php
                          WARNING: Do NOT use unless you know what you are doing!
  --disable-libxml        Disable LIBXML support
  --with-libxml-dir=DIR   LIBXML: libxml2 install prefix
  --with-openssl=DIR      Include OpenSSL support (requires OpenSSL >= 0.9.6)
  --with-kerberos=DIR     OPENSSL: Include Kerberos support
  --with-pcre-regex=DIR   Include Perl Compatible Regular Expressions support.
                          DIR is the PCRE install prefix BUNDLED
  --without-sqlite3=DIR   Do not include SQLite3 support. DIR is the prefix to
                          SQLite3 installation directory.
  --with-zlib=DIR         Include ZLIB support (requires zlib >= 1.0.9)
  --with-zlib-dir=<DIR>   Define the location of zlib install directory
  --enable-bcmath         Enable bc style precision math functions
  --with-bz2=DIR          Include BZip2 support
  --enable-calendar       Enable support for calendar conversion
  --disable-ctype         Disable ctype functions
  --with-curl=DIR         Include cURL support
  --enable-dba            Build DBA with bundled modules. To build shared DBA
                          extension use --enable-dba=shared
  --with-qdbm=DIR         DBA: QDBM support
  --with-gdbm=DIR         DBA: GDBM support
  --with-ndbm=DIR         DBA: NDBM support
  --with-db4=DIR          DBA: Oracle Berkeley DB 4.x or 5.x support
  --with-db3=DIR          DBA: Oracle Berkeley DB 3.x support
  --with-db2=DIR          DBA: Oracle Berkeley DB 2.x support
  --with-db1=DIR          DBA: Oracle Berkeley DB 1.x support/emulation
  --with-dbm=DIR          DBA: DBM support
  --with-tcadb=DIR        DBA: Tokyo Cabinet abstract DB support
  --without-cdb=DIR       DBA: CDB support (bundled)
  --disable-inifile       DBA: INI support (bundled)
  --disable-flatfile      DBA: FlatFile support (bundled)
  --disable-dom           Disable DOM support
  --with-libxml-dir=DIR   DOM: libxml2 install prefix
  --with-enchant=DIR      Include enchant support.
                          GNU Aspell version 1.1.3 or higher required.
  --enable-exif           Enable EXIF (metadata from images) support
  --disable-fileinfo      Disable fileinfo support
  --disable-filter        Disable input filter support
  --with-pcre-dir         FILTER: pcre install prefix
  --enable-ftp            Enable FTP support
  --with-openssl-dir=DIR  FTP: openssl install prefix
  --with-gd=DIR           Include GD support.  DIR is the GD library base
                          install directory BUNDLED
  --with-vpx-dir=DIR      GD: Set the path to libvpx install prefix
  --with-jpeg-dir=DIR     GD: Set the path to libjpeg install prefix
  --with-png-dir=DIR      GD: Set the path to libpng install prefix
  --with-zlib-dir=DIR     GD: Set the path to libz install prefix
  --with-xpm-dir=DIR      GD: Set the path to libXpm install prefix
  --with-freetype-dir=DIR GD: Set the path to FreeType 2 install prefix
  --with-t1lib=DIR        GD: Include T1lib support. T1lib version >= 5.0.0 required
  --enable-gd-native-ttf  GD: Enable TrueType string function
  --enable-gd-jis-conv    GD: Enable JIS-mapped Japanese font support
  --with-gettext=DIR      Include GNU gettext support
  --with-gmp=DIR          Include GNU MP support
  --with-mhash=DIR        Include mhash support
  --disable-hash          Disable hash support
  --without-iconv=DIR     Exclude iconv support
  --with-imap=DIR         Include IMAP support. DIR is the c-client install prefix
  --with-kerberos=DIR     IMAP: Include Kerberos support. DIR is the Kerberos install prefix
  --with-imap-ssl=DIR     IMAP: Include SSL support. DIR is the OpenSSL install prefix
  --with-interbase=DIR    Include InterBase support.  DIR is the InterBase base
                          install directory /usr/interbase
  --enable-intl           Enable internationalization support
  --with-icu-dir=DIR      Specify where ICU libraries and headers can be found
  --disable-json          Disable JavaScript Object Serialization support
  --with-ldap=DIR         Include LDAP support
  --with-ldap-sasl=DIR    LDAP: Include Cyrus SASL support
  --enable-mbstring       Enable multibyte string support
  --disable-mbregex       MBSTRING: Disable multibyte regex support
  --disable-mbregex-backtrack
                          MBSTRING: Disable multibyte regex backtrack check
  --with-libmbfl=DIR      MBSTRING: Use external libmbfl.  DIR is the libmbfl base
                          install directory BUNDLED
  --with-onig=DIR         MBSTRING: Use external oniguruma. DIR is the oniguruma install prefix.
                          If DIR is not set, the bundled oniguruma will be used
  --with-mcrypt=DIR       Include mcrypt support
  --with-mssql=DIR        Include MSSQL-DB support.  DIR is the FreeTDS home
                          directory /usr/local/freetds
  --with-mysql=DIR        Include MySQL support.  DIR is the MySQL base
                          directory, if no DIR is passed or the value is
                          mysqlnd the MySQL native driver will be used
  --with-mysql-sock=SOCKPATH
                          MySQL/MySQLi/PDO_MYSQL: Location of the MySQL unix socket pointer.
                          If unspecified, the default locations are searched
  --with-zlib-dir=DIR     MySQL: Set the path to libz install prefix
  --with-mysqli=FILE      Include MySQLi support.  FILE is the path
                          to mysql_config.  If no value or mysqlnd is passed
                          as FILE, the MySQL native driver will be used
  --enable-embedded-mysqli
                          MYSQLi: Enable embedded support
                          Note: Does not work with MySQL native driver!
  --with-oci8=DIR         Include Oracle Database OCI8 support. DIR defaults to \$ORACLE_HOME.
                          Use --with-oci8=instantclient,/path/to/instant/client/lib
                          to use an Oracle Instant Client installation
  --with-adabas=DIR       Include Adabas D support /usr/local
  --with-sapdb=DIR        Include SAP DB support /usr/local
  --with-solid=DIR        Include Solid support /usr/local/solid
  --with-ibm-db2=DIR      Include IBM DB2 support /home/db2inst1/sqllib
  --with-ODBCRouter=DIR   Include ODBCRouter.com support /usr
  --with-empress=DIR      Include Empress support \$EMPRESSPATH
                          (Empress Version >= 8.60 required)
  --with-empress-bcs=DIR
                          Include Empress Local Access support \$EMPRESSPATH
                          (Empress Version >= 8.60 required)
  --with-birdstep=DIR     Include Birdstep support /usr/local/birdstep
  --with-custom-odbc=DIR  Include user defined ODBC support. DIR is ODBC install base
                          directory /usr/local. Make sure to define CUSTOM_ODBC_LIBS and
                          have some odbc.h in your include dirs. f.e. you should define
                          following for Sybase SQL Anywhere 5.5.00 on QNX, prior to
                          running this configure script:
                            CPPFLAGS=\"-DODBC_QNX -DSQLANY_BUG\"
                            LDFLAGS=-lunix
                            CUSTOM_ODBC_LIBS=\"-ldblib -lodbc\"
  --with-iodbc=DIR        Include iODBC support /usr/local
  --with-esoob=DIR        Include Easysoft OOB support /usr/local/easysoft/oob/client
  --with-unixODBC=DIR     Include unixODBC support /usr/local
  --with-dbmaker=DIR      Include DBMaker support
  --enable-opcache        Enable Zend OPcache support
  --enable-pcntl          Enable pcntl support (CLI/CGI only)
  --disable-pdo           Disable PHP Data Objects support
  --with-pdo-dblib=DIR    PDO: DBLIB-DB support.  DIR is the FreeTDS home directory
  --with-pdo-firebird=DIR PDO: Firebird support.  DIR is the Firebird base
                          install directory /opt/firebird
  --with-pdo-mysql=DIR    PDO: MySQL support. DIR is the MySQL base directory
                          If no value or mysqlnd is passed as DIR, the
                          MySQL native driver will be used
  --with-zlib-dir=DIR     PDO_MySQL: Set the path to libz install prefix
  --with-pdo-oci=DIR      PDO: Oracle OCI support. DIR defaults to \$ORACLE_HOME.
                          Use --with-pdo-oci=instantclient,prefix,version
                          for an Oracle Instant Client SDK.
                          For example on Linux with 11.2 RPMs use:
                            --with-pdo-oci=instantclient,/usr,11.2
                          With 10.2 RPMs use:
                            --with-pdo-oci=instantclient,/usr,10.2.0.4
  --with-pdo-odbc=flavour,dir
                          PDO: Support for 'flavour' ODBC driver.
			  include and lib dirs are looked for under 'dir'.

			  'flavour' can be one of:  ibm-db2, iODBC, unixODBC, generic
			  If ',dir' part is omitted, default for the flavour
			  you have selected will be used. e.g.:

			    --with-pdo-odbc=unixODBC

			  will check for unixODBC under /usr/local. You may attempt
			  to use an otherwise unsupported driver using the \"generic\"
			  flavour.  The syntax for generic ODBC support is:

			    --with-pdo-odbc=generic,dir,libname,ldflags,cflags

			  When built as 'shared' the extension filename is always pdo_odbc.so
  --with-pdo-pgsql=DIR    PDO: PostgreSQL support.  DIR is the PostgreSQL base
                          install directory or the path to pg_config
  --without-pdo-sqlite=DIR
                          PDO: sqlite 3 support.  DIR is the sqlite base
                          install directory BUNDLED
  --with-pgsql=DIR        Include PostgreSQL support.  DIR is the PostgreSQL
                          base install directory or the path to pg_config
  --disable-phar          Disable phar support
  --disable-posix         Disable POSIX-like functions
  --with-pspell=DIR       Include PSPELL support.
                          GNU Aspell version 0.50.0 or higher required
  --with-libedit=DIR      Include libedit readline replacement (CLI/CGI only)
  --with-readline=DIR     Include readline support (CLI/CGI only)
  --with-recode=DIR       Include recode support
  --disable-session       Disable session support
  --with-mm=DIR           SESSION: Include mm support for session storage
  --enable-shmop          Enable shmop support
  --disable-simplexml     Disable SimpleXML support
  --with-libxml-dir=DIR   SimpleXML: libxml2 install prefix
  --with-snmp=DIR         Include SNMP support
  --with-openssl-dir=DIR  SNMP: openssl install prefix
  --enable-soap           Enable SOAP support
  --with-libxml-dir=DIR   SOAP: libxml2 install prefix
  --enable-sockets        Enable sockets support
  --with-sybase-ct=DIR    Include Sybase-CT support.  DIR is the Sybase home
                          directory /home/sybase
  --enable-sysvmsg        Enable sysvmsg support
  --enable-sysvsem        Enable System V semaphore support
  --enable-sysvshm        Enable the System V shared memory support
  --with-tidy=DIR         Include TIDY support
  --disable-tokenizer     Disable tokenizer support
  --enable-wddx           Enable WDDX support
  --with-libxml-dir=DIR   WDDX: libxml2 install prefix
  --with-libexpat-dir=DIR WDDX: libexpat dir for XMLRPC-EPI (deprecated)
  --disable-xml           Disable XML support
  --with-libxml-dir=DIR   XML: libxml2 install prefix
  --with-libexpat-dir=DIR XML: libexpat install prefix (deprecated)
  --disable-xmlreader     Disable XMLReader support
  --with-libxml-dir=DIR   XMLReader: libxml2 install prefix
  --with-xmlrpc=DIR       Include XMLRPC-EPI support
  --with-libxml-dir=DIR   XMLRPC-EPI: libxml2 install prefix
  --with-libexpat-dir=DIR XMLRPC-EPI: libexpat dir for XMLRPC-EPI (deprecated)
  --with-iconv-dir=DIR    XMLRPC-EPI: iconv dir for XMLRPC-EPI
  --disable-xmlwriter     Disable XMLWriter support
  --with-libxml-dir=DIR   XMLWriter: libxml2 install prefix
  --with-xsl=DIR          Include XSL support.  DIR is the libxslt base
                          install directory (libxslt >= 1.1.0 required)
  --enable-zip            Include Zip read/write support
  --with-zlib-dir=DIR     ZIP: Set the path to libz install prefix
  --with-pcre-dir         ZIP: pcre install prefix
  --enable-mysqlnd        Enable mysqlnd explicitly, will be done implicitly
                          when required by other extensions
  --disable-mysqlnd-compression-support
                          Disable support for the MySQL compressed protocol in mysqlnd
  --with-zlib-dir=DIR     mysqlnd: Set the path to libz install prefix

PEAR:

  --with-pear=DIR         Install PEAR in DIR [PREFIX/lib/php]
  --without-pear          Do not install PEAR

Zend:

  --with-zend-vm=TYPE     Set virtual machine dispatch method. Type is
                          one of "CALL", "SWITCH" or "GOTO" TYPE=CALL
  --enable-maintainer-zts Enable thread safety - for code maintainers only!!
  --disable-inline-optimization
                          If building zend_execute.lo fails, try this switch
  --enable-zend-signals   Use zend signal handling

TSRM:

  --with-tsrm-pth=pth-config
                          Use GNU Pth
  --with-tsrm-st          Use SGI's State Threads
  --with-tsrm-pthreads    Use POSIX threads (default)

Libtool:

  --enable-shared=PKGS    Build shared libraries default=yes
  --enable-static=PKGS    Build static libraries default=yes
  --enable-fast-install=PKGS
                          Optimize for fast installation default=yes
  --with-gnu-ld           Assume the C compiler uses GNU ld default=no
  --disable-libtool-lock  Avoid locking (might break parallel builds)
  --with-pic              Try to use only PIC/non-PIC objects default=use both
  --with-tags=TAGS        Include additional configurations automatic


Some influential environment variables:
  CC          C compiler command
  CFLAGS      C compiler flags
  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
              nonstandard directory <lib dir>
  LIBS        libraries to pass to the linker, e.g. -l<library>
  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
              you have headers in a nonstandard directory <include dir>
  CPP         C preprocessor
  YACC        The `Yet Another Compiler Compiler' implementation to use.
              Defaults to the first program found out of: `bison -y', `byacc',
              `yacc'.
  YFLAGS      The list of arguments that will be passed by default to $YACC.
              This script will default YFLAGS to the empty string to avoid a
              default value of `-d' given by some make applications.
  CXX         C++ compiler command
  CXXFLAGS    C++ compiler flags
  CXXCPP      C++ preprocessor

Use these variables to override the choices made by `configure' or to help
it to find libraries and programs with nonstandard names/locations.

Report bugs to the package provider.
_ACEOF
ac_status=$?
fi

if test "$ac_init_help" = "recursive"; then
  # If there are subdirs, report their specific --help.
  for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
    test -d "$ac_dir" ||
      { cd "$srcdir" && ac_pwd=`pwd` && srcdir=. && test -d "$ac_dir"; } ||
      continue
    ac_builddir=.

case "$ac_dir" in
.) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
*)
  ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
  # A ".." for each directory in $ac_dir_suffix.
  ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
  case $ac_top_builddir_sub in
  "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
  *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
  esac ;;
esac
ac_abs_top_builddir=$ac_pwd
ac_abs_builddir=$ac_pwd$ac_dir_suffix
# for backward compatibility:
ac_top_builddir=$ac_top_build_prefix

case $srcdir in
  .)  # We are building in place.
    ac_srcdir=.
    ac_top_srcdir=$ac_top_builddir_sub
    ac_abs_top_srcdir=$ac_pwd ;;
  [\\/]* | ?:[\\/]* )  # Absolute name.
    ac_srcdir=$srcdir$ac_dir_suffix;
    ac_top_srcdir=$srcdir
    ac_abs_top_srcdir=$srcdir ;;
  *) # Relative name.
    ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix
    ac_top_srcdir=$ac_top_build_prefix$srcdir
    ac_abs_top_srcdir=$ac_pwd/$srcdir ;;
esac
ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix

    cd "$ac_dir" || { ac_status=$?; continue; }
    # Check for guested configure.
    if test -f "$ac_srcdir/configure.gnu"; then
      echo &&
      $SHELL "$ac_srcdir/configure.gnu" --help=recursive
    elif test -f "$ac_srcdir/configure"; then
      echo &&
      $SHELL "$ac_srcdir/configure" --help=recursive
    else
      $as_echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
    fi || ac_status=$?
    cd "$ac_pwd" || { ac_status=$?; break; }
  done
fi

test -n "$ac_init_help" && exit $ac_status
if $ac_init_version; then
  cat <<\_ACEOF
configure
generated by GNU Autoconf 2.69

Copyright (C) 2012 Free Software Foundation, Inc.
This configure script is free software; the Free Software Foundation
gives unlimited permission to copy, distribute and modify it.
_ACEOF
  exit
fi

## ------------------------ ##
## Autoconf initialization. ##
## ------------------------ ##

# ac_fn_c_try_compile LINENO
# --------------------------
# Try to compile conftest.$ac_ext, and return whether this succeeded.
ac_fn_c_try_compile ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  rm -f conftest.$ac_objext
  if { { ac_try="$ac_compile"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_compile") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    grep -v '^ *+' conftest.err >conftest.er1
    cat conftest.er1 >&5
    mv -f conftest.er1 conftest.err
  fi
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && {
	 test -z "$ac_c_werror_flag" ||
	 test ! -s conftest.err
       } && test -s conftest.$ac_objext; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

	ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_c_try_compile

# ac_fn_c_try_cpp LINENO
# ----------------------
# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
ac_fn_c_try_cpp ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  if { { ac_try="$ac_cpp conftest.$ac_ext"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    grep -v '^ *+' conftest.err >conftest.er1
    cat conftest.er1 >&5
    mv -f conftest.er1 conftest.err
  fi
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } > conftest.i && {
	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
	 test ! -s conftest.err
       }; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

    ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_c_try_cpp

# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES
# -------------------------------------------------------
# Tests whether HEADER exists, giving a warning if it cannot be compiled using
# the include files in INCLUDES and setting the cache variable VAR
# accordingly.
ac_fn_c_check_header_mongrel ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  if eval \${$3+:} false; then :
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
$as_echo_n "checking for $2... " >&6; }
if eval \${$3+:} false; then :
  $as_echo_n "(cached) " >&6
fi
eval ac_res=\$$3
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
else
  # Is the header compilable?
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 usability" >&5
$as_echo_n "checking $2 usability... " >&6; }
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
#include <$2>
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_header_compiler=yes
else
  ac_header_compiler=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler" >&5
$as_echo "$ac_header_compiler" >&6; }

# Is the header present?
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 presence" >&5
$as_echo_n "checking $2 presence... " >&6; }
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <$2>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  ac_header_preproc=yes
else
  ac_header_preproc=no
fi
rm -f conftest.err conftest.i conftest.$ac_ext
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
$as_echo "$ac_header_preproc" >&6; }

# So?  What about this header?
case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
  yes:no: )
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&5
$as_echo "$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&2;}
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
    ;;
  no:yes:* )
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled" >&5
$as_echo "$as_me: WARNING: $2: present but cannot be compiled" >&2;}
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?" >&5
$as_echo "$as_me: WARNING: $2:     check for missing prerequisite headers?" >&2;}
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation" >&5
$as_echo "$as_me: WARNING: $2: see the Autoconf documentation" >&2;}
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&5
$as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
    ;;
esac
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
$as_echo_n "checking for $2... " >&6; }
if eval \${$3+:} false; then :
  $as_echo_n "(cached) " >&6
else
  eval "$3=\$ac_header_compiler"
fi
eval ac_res=\$$3
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno

} # ac_fn_c_check_header_mongrel

# ac_fn_c_try_run LINENO
# ----------------------
# Try to link conftest.$ac_ext, and return whether this succeeded. Assumes
# that executables *can* be run.
ac_fn_c_try_run ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  if { { ac_try="$ac_link"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_link") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
  { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; }; then :
  ac_retval=0
else
  $as_echo "$as_me: program exited with status $ac_status" >&5
       $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

       ac_retval=$ac_status
fi
  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_c_try_run

# ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
# -------------------------------------------------------
# Tests whether HEADER exists and can be compiled using the include files in
# INCLUDES, setting the cache variable VAR accordingly.
ac_fn_c_check_header_compile ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
$as_echo_n "checking for $2... " >&6; }
if eval \${$3+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
#include <$2>
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  eval "$3=yes"
else
  eval "$3=no"
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
eval ac_res=\$$3
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno

} # ac_fn_c_check_header_compile

# ac_fn_c_try_link LINENO
# -----------------------
# Try to link conftest.$ac_ext, and return whether this succeeded.
ac_fn_c_try_link ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  rm -f conftest.$ac_objext conftest$ac_exeext
  if { { ac_try="$ac_link"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_link") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    grep -v '^ *+' conftest.err >conftest.er1
    cat conftest.er1 >&5
    mv -f conftest.er1 conftest.err
  fi
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && {
	 test -z "$ac_c_werror_flag" ||
	 test ! -s conftest.err
       } && test -s conftest$ac_exeext && {
	 test "$cross_compiling" = yes ||
	 test -x conftest$ac_exeext
       }; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

	ac_retval=1
fi
  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
  # interfere with the next link command; also delete a directory that is
  # left behind by Apple's compiler.  We do this before executing the actions.
  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_c_try_link

# ac_fn_c_check_func LINENO FUNC VAR
# ----------------------------------
# Tests whether FUNC exists, setting the cache variable VAR accordingly
ac_fn_c_check_func ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
$as_echo_n "checking for $2... " >&6; }
if eval \${$3+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
/* Define $2 to an innocuous variant, in case <limits.h> declares $2.
   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
#define $2 innocuous_$2

/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $2 (); below.
    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
    <limits.h> exists even on freestanding compilers.  */

#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif

#undef $2

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char $2 ();
/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined __stub_$2 || defined __stub___$2
choke me
#endif

int
main ()
{
return $2 ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$3=yes"
else
  eval "$3=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
eval ac_res=\$$3
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno

} # ac_fn_c_check_func

# ac_fn_c_check_member LINENO AGGR MEMBER VAR INCLUDES
# ----------------------------------------------------
# Tries to find if the field MEMBER exists in type AGGR, after including
# INCLUDES, setting cache variable VAR accordingly.
ac_fn_c_check_member ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2.$3" >&5
$as_echo_n "checking for $2.$3... " >&6; }
if eval \${$4+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$5
int
main ()
{
static $2 ac_aggr;
if (ac_aggr.$3)
return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  eval "$4=yes"
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$5
int
main ()
{
static $2 ac_aggr;
if (sizeof ac_aggr.$3)
return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  eval "$4=yes"
else
  eval "$4=no"
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
eval ac_res=\$$4
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno

} # ac_fn_c_check_member

# ac_fn_c_check_decl LINENO SYMBOL VAR INCLUDES
# ---------------------------------------------
# Tests whether SYMBOL is declared in INCLUDES, setting cache variable VAR
# accordingly.
ac_fn_c_check_decl ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  as_decl_name=`echo $2|sed 's/ *(.*//'`
  as_decl_use=`echo $2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $as_decl_name is declared" >&5
$as_echo_n "checking whether $as_decl_name is declared... " >&6; }
if eval \${$3+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
#ifndef $as_decl_name
#ifdef __cplusplus
  (void) $as_decl_use;
#else
  (void) $as_decl_name;
#endif
#endif

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  eval "$3=yes"
else
  eval "$3=no"
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
eval ac_res=\$$3
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno

} # ac_fn_c_check_decl

# ac_fn_c_compute_int LINENO EXPR VAR INCLUDES
# --------------------------------------------
# Tries to find the compile-time value of EXPR in a program that includes
# INCLUDES, setting VAR accordingly. Returns whether the value could be
# computed
ac_fn_c_compute_int ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  if test "$cross_compiling" = yes; then
    # Depending upon the size, compute the lo and hi bounds.
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
static int test_array [1 - 2 * !(($2) >= 0)];
test_array [0] = 0;
return test_array [0];

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_lo=0 ac_mid=0
  while :; do
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
static int test_array [1 - 2 * !(($2) <= $ac_mid)];
test_array [0] = 0;
return test_array [0];

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_hi=$ac_mid; break
else
  as_fn_arith $ac_mid + 1 && ac_lo=$as_val
			if test $ac_lo -le $ac_mid; then
			  ac_lo= ac_hi=
			  break
			fi
			as_fn_arith 2 '*' $ac_mid + 1 && ac_mid=$as_val
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  done
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
static int test_array [1 - 2 * !(($2) < 0)];
test_array [0] = 0;
return test_array [0];

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_hi=-1 ac_mid=-1
  while :; do
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
static int test_array [1 - 2 * !(($2) >= $ac_mid)];
test_array [0] = 0;
return test_array [0];

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_lo=$ac_mid; break
else
  as_fn_arith '(' $ac_mid ')' - 1 && ac_hi=$as_val
			if test $ac_mid -le $ac_hi; then
			  ac_lo= ac_hi=
			  break
			fi
			as_fn_arith 2 '*' $ac_mid && ac_mid=$as_val
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  done
else
  ac_lo= ac_hi=
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
# Binary search between lo and hi bounds.
while test "x$ac_lo" != "x$ac_hi"; do
  as_fn_arith '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo && ac_mid=$as_val
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
static int test_array [1 - 2 * !(($2) <= $ac_mid)];
test_array [0] = 0;
return test_array [0];

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_hi=$ac_mid
else
  as_fn_arith '(' $ac_mid ')' + 1 && ac_lo=$as_val
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
done
case $ac_lo in #((
?*) eval "$3=\$ac_lo"; ac_retval=0 ;;
'') ac_retval=1 ;;
esac
  else
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
static long int longval () { return $2; }
static unsigned long int ulongval () { return $2; }
#include <stdio.h>
#include <stdlib.h>
int
main ()
{

  FILE *f = fopen ("conftest.val", "w");
  if (! f)
    return 1;
  if (($2) < 0)
    {
      long int i = longval ();
      if (i != ($2))
	return 1;
      fprintf (f, "%ld", i);
    }
  else
    {
      unsigned long int i = ulongval ();
      if (i != ($2))
	return 1;
      fprintf (f, "%lu", i);
    }
  /* Do not output a trailing newline, as this causes \r\n confusion
     on some platforms.  */
  return ferror (f) || fclose (f) != 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  echo >>conftest.val; read $3 <conftest.val; ac_retval=0
else
  ac_retval=1
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
rm -f conftest.val

  fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_c_compute_int

# ac_fn_c_check_type LINENO TYPE VAR INCLUDES
# -------------------------------------------
# Tests whether TYPE exists after having included INCLUDES, setting cache
# variable VAR accordingly.
ac_fn_c_check_type ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
$as_echo_n "checking for $2... " >&6; }
if eval \${$3+:} false; then :
  $as_echo_n "(cached) " >&6
else
  eval "$3=no"
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
if (sizeof ($2))
	 return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$4
int
main ()
{
if (sizeof (($2)))
	    return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

else
  eval "$3=yes"
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
eval ac_res=\$$3
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno

} # ac_fn_c_check_type

# ac_fn_cxx_try_compile LINENO
# ----------------------------
# Try to compile conftest.$ac_ext, and return whether this succeeded.
ac_fn_cxx_try_compile ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  rm -f conftest.$ac_objext
  if { { ac_try="$ac_compile"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_compile") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    grep -v '^ *+' conftest.err >conftest.er1
    cat conftest.er1 >&5
    mv -f conftest.er1 conftest.err
  fi
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && {
	 test -z "$ac_cxx_werror_flag" ||
	 test ! -s conftest.err
       } && test -s conftest.$ac_objext; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

	ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_cxx_try_compile

# ac_fn_cxx_try_cpp LINENO
# ------------------------
# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
ac_fn_cxx_try_cpp ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  if { { ac_try="$ac_cpp conftest.$ac_ext"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    grep -v '^ *+' conftest.err >conftest.er1
    cat conftest.er1 >&5
    mv -f conftest.er1 conftest.err
  fi
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } > conftest.i && {
	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
	 test ! -s conftest.err
       }; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

    ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval

} # ac_fn_cxx_try_cpp
cat >config.log <<_ACEOF
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by $as_me, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  $ $0 $@

_ACEOF
exec 5>>config.log
{
cat <<_ASUNAME
## --------- ##
## Platform. ##
## --------- ##

hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
uname -m = `(uname -m) 2>/dev/null || echo unknown`
uname -r = `(uname -r) 2>/dev/null || echo unknown`
uname -s = `(uname -s) 2>/dev/null || echo unknown`
uname -v = `(uname -v) 2>/dev/null || echo unknown`

/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
/bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`

/bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
/usr/bin/hostinfo      = `(/usr/bin/hostinfo) 2>/dev/null      || echo unknown`
/bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
/bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`

_ASUNAME

as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    $as_echo "PATH: $as_dir"
  done
IFS=$as_save_IFS

} >&5

cat >&5 <<_ACEOF


## ----------- ##
## Core tests. ##
## ----------- ##

_ACEOF


# Keep a trace of the command line.
# Strip out --no-create and --no-recursion so they do not pile up.
# Strip out --silent because we don't want to record it for future runs.
# Also quote any args containing shell meta-characters.
# Make two passes to allow for proper duplicate-argument suppression.
ac_configure_args=
ac_configure_args0=
ac_configure_args1=
ac_must_keep_next=false
for ac_pass in 1 2
do
  for ac_arg
  do
    case $ac_arg in
    -no-create | --no-c* | -n | -no-recursion | --no-r*) continue ;;
    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
    | -silent | --silent | --silen | --sile | --sil)
      continue ;;
    *\'*)
      ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
    esac
    case $ac_pass in
    1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
    2)
      as_fn_append ac_configure_args1 " '$ac_arg'"
      if test $ac_must_keep_next = true; then
	ac_must_keep_next=false # Got value, back to normal.
      else
	case $ac_arg in
	  *=* | --config-cache | -C | -disable-* | --disable-* \
	  | -enable-* | --enable-* | -gas | --g* | -nfp | --nf* \
	  | -q | -quiet | --q* | -silent | --sil* | -v | -verb* \
	  | -with-* | --with-* | -without-* | --without-* | --x)
	    case "$ac_configure_args0 " in
	      "$ac_configure_args1"*" '$ac_arg' "* ) continue ;;
	    esac
	    ;;
	  -* ) ac_must_keep_next=true ;;
	esac
      fi
      as_fn_append ac_configure_args " '$ac_arg'"
      ;;
    esac
  done
done
{ ac_configure_args0=; unset ac_configure_args0;}
{ ac_configure_args1=; unset ac_configure_args1;}

# When interrupted or exit'd, cleanup temporary files, and complete
# config.log.  We remove comments because anyway the quotes in there
# would cause problems or look ugly.
# WARNING: Use '\'' to represent an apostrophe within the trap.
# WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
trap 'exit_status=$?
  # Save into config.log some information that might help in debugging.
  {
    echo

    $as_echo "## ---------------- ##
## Cache variables. ##
## ---------------- ##"
    echo
    # The following way of writing the cache mishandles newlines in values,
(
  for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
    eval ac_val=\$$ac_var
    case $ac_val in #(
    *${as_nl}*)
      case $ac_var in #(
      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
$as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
      esac
      case $ac_var in #(
      _ | IFS | as_nl) ;; #(
      BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
      *) { eval $ac_var=; unset $ac_var;} ;;
      esac ;;
    esac
  done
  (set) 2>&1 |
    case $as_nl`(ac_space='\'' '\''; set) 2>&1` in #(
    *${as_nl}ac_space=\ *)
      sed -n \
	"s/'\''/'\''\\\\'\'''\''/g;
	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\''\\2'\''/p"
      ;; #(
    *)
      sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
      ;;
    esac |
    sort
)
    echo

    $as_echo "## ----------------- ##
## Output variables. ##
## ----------------- ##"
    echo
    for ac_var in $ac_subst_vars
    do
      eval ac_val=\$$ac_var
      case $ac_val in
      *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
      esac
      $as_echo "$ac_var='\''$ac_val'\''"
    done | sort
    echo

    if test -n "$ac_subst_files"; then
      $as_echo "## ------------------- ##
## File substitutions. ##
## ------------------- ##"
      echo
      for ac_var in $ac_subst_files
      do
	eval ac_val=\$$ac_var
	case $ac_val in
	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
	esac
	$as_echo "$ac_var='\''$ac_val'\''"
      done | sort
      echo
    fi

    if test -s confdefs.h; then
      $as_echo "## ----------- ##
## confdefs.h. ##
## ----------- ##"
      echo
      cat confdefs.h
      echo
    fi
    test "$ac_signal" != 0 &&
      $as_echo "$as_me: caught signal $ac_signal"
    $as_echo "$as_me: exit $exit_status"
  } >&5
  rm -f core *.core core.conftest.* &&
    rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
    exit $exit_status
' 0
for ac_signal in 1 2 13 15; do
  trap 'ac_signal='$ac_signal'; as_fn_exit 1' $ac_signal
done
ac_signal=0

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -f -r conftest* confdefs.h

$as_echo "/* confdefs.h */" > confdefs.h

# Predefined preprocessor variables.

cat >>confdefs.h <<_ACEOF
#define PACKAGE_NAME "$PACKAGE_NAME"
_ACEOF

cat >>confdefs.h <<_ACEOF
#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
_ACEOF

cat >>confdefs.h <<_ACEOF
#define PACKAGE_VERSION "$PACKAGE_VERSION"
_ACEOF

cat >>confdefs.h <<_ACEOF
#define PACKAGE_STRING "$PACKAGE_STRING"
_ACEOF

cat >>confdefs.h <<_ACEOF
#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
_ACEOF

cat >>confdefs.h <<_ACEOF
#define PACKAGE_URL "$PACKAGE_URL"
_ACEOF


# Let the site file select an alternate cache file if it wants to.
# Prefer an explicitly selected file to automatically selected ones.
ac_site_file1=NONE
ac_site_file2=NONE
if test -n "$CONFIG_SITE"; then
  # We do not want a PATH search for config.site.
  case $CONFIG_SITE in #((
    -*)  ac_site_file1=./$CONFIG_SITE;;
    */*) ac_site_file1=$CONFIG_SITE;;
    *)   ac_site_file1=./$CONFIG_SITE;;
  esac
elif test "x$prefix" != xNONE; then
  ac_site_file1=$prefix/share/config.site
  ac_site_file2=$prefix/etc/config.site
else
  ac_site_file1=$ac_default_prefix/share/config.site
  ac_site_file2=$ac_default_prefix/etc/config.site
fi
for ac_site_file in "$ac_site_file1" "$ac_site_file2"
do
  test "x$ac_site_file" = xNONE && continue
  if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
$as_echo "$as_me: loading site script $ac_site_file" >&6;}
    sed 's/^/| /' "$ac_site_file" >&5
    . "$ac_site_file" \
      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "failed to load site script $ac_site_file
See \`config.log' for more details" "$LINENO" 5; }
  fi
done

if test -r "$cache_file"; then
  # Some versions of bash will fail to source /dev/null (special files
  # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
  if test /dev/null != "$cache_file" && test -f "$cache_file"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
$as_echo "$as_me: loading cache $cache_file" >&6;}
    case $cache_file in
      [\\/]* | ?:[\\/]* ) . "$cache_file";;
      *)                      . "./$cache_file";;
    esac
  fi
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
$as_echo "$as_me: creating cache $cache_file" >&6;}
  >$cache_file
fi

as_fn_append ac_header_list " utime.h"
# Check that the precious variables saved in the cache have kept the same
# value.
ac_cache_corrupted=false
for ac_var in $ac_precious_vars; do
  eval ac_old_set=\$ac_cv_env_${ac_var}_set
  eval ac_new_set=\$ac_env_${ac_var}_set
  eval ac_old_val=\$ac_cv_env_${ac_var}_value
  eval ac_new_val=\$ac_env_${ac_var}_value
  case $ac_old_set,$ac_new_set in
    set,)
      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
$as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
      ac_cache_corrupted=: ;;
    ,set)
      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
$as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
      ac_cache_corrupted=: ;;
    ,);;
    *)
      if test "x$ac_old_val" != "x$ac_new_val"; then
	# differences in whitespace do not lead to failure.
	ac_old_val_w=`echo x $ac_old_val`
	ac_new_val_w=`echo x $ac_new_val`
	if test "$ac_old_val_w" != "$ac_new_val_w"; then
	  { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
$as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
	  ac_cache_corrupted=:
	else
	  { $as_echo "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
$as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
	  eval $ac_var=\$ac_old_val
	fi
	{ $as_echo "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
$as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
	{ $as_echo "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
$as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
      fi;;
  esac
  # Pass precious variables to config.status.
  if test "$ac_new_set" = set; then
    case $ac_new_val in
    *\'*) ac_arg=$ac_var=`$as_echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
    *) ac_arg=$ac_var=$ac_new_val ;;
    esac
    case " $ac_configure_args " in
      *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
      *) as_fn_append ac_configure_args " '$ac_arg'" ;;
    esac
  fi
done
if $ac_cache_corrupted; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
  { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
$as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
fi
## -------------------- ##
## Main body of script. ##
## -------------------- ##

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu






{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
$as_echo_n "checking for grep that handles long lines and -e... " >&6; }
if ${ac_cv_path_GREP+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -z "$GREP"; then
  ac_path_GREP_found=false
  # Loop through the user's path and test for each of PROGNAME-LIST
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_prog in grep ggrep; do
    for ac_exec_ext in '' $ac_executable_extensions; do
      ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
      as_fn_executable_p "$ac_path_GREP" || continue
# Check for GNU ac_path_GREP and select it if it is found.
  # Check for GNU $ac_path_GREP
case `"$ac_path_GREP" --version 2>&1` in
*GNU*)
  ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
*)
  ac_count=0
  $as_echo_n 0123456789 >"conftest.in"
  while :
  do
    cat "conftest.in" "conftest.in" >"conftest.tmp"
    mv "conftest.tmp" "conftest.in"
    cp "conftest.in" "conftest.nl"
    $as_echo 'GREP' >> "conftest.nl"
    "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
    diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
    as_fn_arith $ac_count + 1 && ac_count=$as_val
    if test $ac_count -gt ${ac_path_GREP_max-0}; then
      # Best one so far, save it but keep looking for a better one
      ac_cv_path_GREP="$ac_path_GREP"
      ac_path_GREP_max=$ac_count
    fi
    # 10*(2^10) chars as input seems more than enough
    test $ac_count -gt 10 && break
  done
  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
esac

      $ac_path_GREP_found && break 3
    done
  done
  done
IFS=$as_save_IFS
  if test -z "$ac_cv_path_GREP"; then
    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
  fi
else
  ac_cv_path_GREP=$GREP
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
$as_echo "$ac_cv_path_GREP" >&6; }
 GREP="$ac_cv_path_GREP"


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
$as_echo_n "checking for egrep... " >&6; }
if ${ac_cv_path_EGREP+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
   then ac_cv_path_EGREP="$GREP -E"
   else
     if test -z "$EGREP"; then
  ac_path_EGREP_found=false
  # Loop through the user's path and test for each of PROGNAME-LIST
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_prog in egrep; do
    for ac_exec_ext in '' $ac_executable_extensions; do
      ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
      as_fn_executable_p "$ac_path_EGREP" || continue
# Check for GNU ac_path_EGREP and select it if it is found.
  # Check for GNU $ac_path_EGREP
case `"$ac_path_EGREP" --version 2>&1` in
*GNU*)
  ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
*)
  ac_count=0
  $as_echo_n 0123456789 >"conftest.in"
  while :
  do
    cat "conftest.in" "conftest.in" >"conftest.tmp"
    mv "conftest.tmp" "conftest.in"
    cp "conftest.in" "conftest.nl"
    $as_echo 'EGREP' >> "conftest.nl"
    "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
    diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
    as_fn_arith $ac_count + 1 && ac_count=$as_val
    if test $ac_count -gt ${ac_path_EGREP_max-0}; then
      # Best one so far, save it but keep looking for a better one
      ac_cv_path_EGREP="$ac_path_EGREP"
      ac_path_EGREP_max=$ac_count
    fi
    # 10*(2^10) chars as input seems more than enough
    test $ac_count -gt 10 && break
  done
  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
esac

      $ac_path_EGREP_found && break 3
    done
  done
  done
IFS=$as_save_IFS
  if test -z "$ac_cv_path_EGREP"; then
    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
  fi
else
  ac_cv_path_EGREP=$EGREP
fi

   fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
$as_echo "$ac_cv_path_EGREP" >&6; }
 EGREP="$ac_cv_path_EGREP"


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output" >&5
$as_echo_n "checking for a sed that does not truncate output... " >&6; }
if ${lt_cv_path_SED+:} false; then :
  $as_echo_n "(cached) " >&6
else
  # Loop through the user's path and test for sed and gsed.
# Then use that list of sed's as ones to test for truncation.
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
  for lt_ac_prog in sed gsed; do
    for ac_exec_ext in '' $ac_executable_extensions; do
      if test -f "$as_dir/$lt_ac_prog$ac_exec_ext"; then
        lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
      fi
    done
  done
done
lt_ac_max=0
lt_ac_count=0
# Add /usr/xpg4/bin/sed as it is typically found on Solaris
# along with /bin/sed that truncates output.
for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
  test ! -f $lt_ac_sed && continue
  cat /dev/null > conftest.in
  lt_ac_count=0
  echo $ECHO_N "0123456789$ECHO_C" >conftest.in
  # Check for GNU sed and select it if it is found.
  if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
    lt_cv_path_SED=$lt_ac_sed
    break
  fi
  while true; do
    cat conftest.in conftest.in >conftest.tmp
    mv conftest.tmp conftest.in
    cp conftest.in conftest.nl
    echo >>conftest.nl
    $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
    cmp -s conftest.out conftest.nl || break
    # 10000 chars as input seems more than enough
    test $lt_ac_count -gt 10 && break
    lt_ac_count=`expr $lt_ac_count + 1`
    if test $lt_ac_count -gt $lt_ac_max; then
      lt_ac_max=$lt_ac_count
      lt_cv_path_SED=$lt_ac_sed
    fi
  done
done

fi

SED=$lt_cv_path_SED
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $SED" >&5
$as_echo "$SED" >&6; }






  PHP_VAR_SUBST="$PHP_VAR_SUBST EGREP"





  PHP_VAR_SUBST="$PHP_VAR_SUBST SED"



  test -f config.nice && mv config.nice config.nice.old
  rm -f config.nice.old
  cat >config.nice<<EOF
#! /bin/sh
#
# Created by configure

EOF

  for var in CFLAGS CXXFLAGS CPPFLAGS LDFLAGS EXTRA_LDFLAGS_PROGRAM LIBS CC CXX; do
    eval val=\$$var
    if test -n "$val"; then
      echo "$var='$val' \\" >> config.nice
    fi
  done

  echo "'$0' \\" >> config.nice
  if test `expr -- $0 : "'.*"` = 0; then
    CONFIGURE_COMMAND="$CONFIGURE_COMMAND '$0'"
  else
    CONFIGURE_COMMAND="$CONFIGURE_COMMAND $0"
  fi
  for arg in $ac_configure_args; do
    if test `expr -- $arg : "'.*"` = 0; then
      if test `expr -- $arg : "--.*"` = 0; then
        break;
      fi
      echo "'$arg' \\" >> config.nice
      CONFIGURE_OPTIONS="$CONFIGURE_OPTIONS '$arg'"
    else
      if test `expr -- $arg : "'--.*"` = 0; then
        break;
      fi
      echo "$arg \\" >> config.nice
      CONFIGURE_OPTIONS="$CONFIGURE_OPTIONS $arg"
    fi
  done
  echo '"$@"' >> config.nice
  chmod +x config.nice
  CONFIGURE_COMMAND="$CONFIGURE_COMMAND $CONFIGURE_OPTIONS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CONFIGURE_COMMAND"





  PHP_VAR_SUBST="$PHP_VAR_SUBST CONFIGURE_OPTIONS"





ac_aux_dir=
for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
  if test -f "$ac_dir/install-sh"; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f "$ac_dir/install.sh"; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  elif test -f "$ac_dir/shtool"; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/shtool install -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
fi

# These three variables are undocumented and unsupported,
# and are intended to be withdrawn in a future Autoconf release.
# They can cause serious problems if a builder's source tree is in a directory
# whose full name contains unusual characters.
ac_config_guess="$SHELL $ac_aux_dir/config.guess"  # Please don't use this var.
ac_config_sub="$SHELL $ac_aux_dir/config.sub"  # Please don't use this var.
ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.


# Make sure we can run config.sub.
$SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
$as_echo_n "checking build system type... " >&6; }
if ${ac_cv_build+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_build_alias=$build_alias
test "x$ac_build_alias" = x &&
  ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
test "x$ac_build_alias" = x &&
  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
$as_echo "$ac_cv_build" >&6; }
case $ac_cv_build in
*-*-*) ;;
*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
esac
build=$ac_cv_build
ac_save_IFS=$IFS; IFS='-'
set x $ac_cv_build
shift
build_cpu=$1
build_vendor=$2
shift; shift
# Remember, the first character of IFS is used to create $*,
# except with old shells:
build_os=$*
IFS=$ac_save_IFS
case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
$as_echo_n "checking host system type... " >&6; }
if ${ac_cv_host+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "x$host_alias" = x; then
  ac_cv_host=$ac_cv_build
else
  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
$as_echo "$ac_cv_host" >&6; }
case $ac_cv_host in
*-*-*) ;;
*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
esac
host=$ac_cv_host
ac_save_IFS=$IFS; IFS='-'
set x $ac_cv_host
shift
host_cpu=$1
host_vendor=$2
shift; shift
# Remember, the first character of IFS is used to create $*,
# except with old shells:
host_os=$*
IFS=$ac_save_IFS
case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
$as_echo_n "checking target system type... " >&6; }
if ${ac_cv_target+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "x$target_alias" = x; then
  ac_cv_target=$ac_cv_host
else
  ac_cv_target=`$SHELL "$ac_aux_dir/config.sub" $target_alias` ||
    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_target" >&5
$as_echo "$ac_cv_target" >&6; }
case $ac_cv_target in
*-*-*) ;;
*) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
esac
target=$ac_cv_target
ac_save_IFS=$IFS; IFS='-'
set x $ac_cv_target
shift
target_cpu=$1
target_vendor=$2
shift; shift
# Remember, the first character of IFS is used to create $*,
# except with old shells:
target_os=$*
IFS=$ac_save_IFS
case $target_os in *\ *) target_os=`echo "$target_os" | sed 's/ /-/g'`;; esac


# The aliases save the names the user supplied, while $host etc.
# will get canonicalized.
test -n "$target_alias" &&
  test "$program_prefix$program_suffix$program_transform_name" = \
    NONENONEs,x,x, &&
  program_prefix=${target_alias}-

        if test -z "$host_alias" && test -n "$host"; then
    host_alias=$host
  fi
  if test -z "$host_alias"; then
    as_fn_error $? "host_alias is not set!" "$LINENO" 5
  fi


ac_config_headers="$ac_config_headers main/php_config.h"




PHP_MAJOR_VERSION=5
PHP_MINOR_VERSION=5
PHP_RELEASE_VERSION=17
PHP_EXTRA_VERSION=""
PHP_VERSION="$PHP_MAJOR_VERSION.$PHP_MINOR_VERSION.$PHP_RELEASE_VERSION$PHP_EXTRA_VERSION"
PHP_VERSION_ID=`expr $PHP_MAJOR_VERSION \* 10000 + $PHP_MINOR_VERSION \* 100 + $PHP_RELEASE_VERSION`


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MAJOR_VERSION"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MINOR_VERSION"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_RELEASE_VERSION"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_EXTRA_VERSION"




echo "/* automatically generated by configure */" > php_version.h.new
echo "/* edit configure.in to change version number */" >> php_version.h.new
echo "#define PHP_MAJOR_VERSION $PHP_MAJOR_VERSION" >> php_version.h.new
echo "#define PHP_MINOR_VERSION $PHP_MINOR_VERSION" >> php_version.h.new
echo "#define PHP_RELEASE_VERSION $PHP_RELEASE_VERSION" >> php_version.h.new
echo "#define PHP_EXTRA_VERSION \"$PHP_EXTRA_VERSION\"" >> php_version.h.new
echo "#define PHP_VERSION \"$PHP_VERSION\"" >> php_version.h.new
echo "#define PHP_VERSION_ID $PHP_VERSION_ID" >> php_version.h.new
cmp php_version.h.new $srcdir/main/php_version.h >/dev/null 2>&1
if test $? -ne 0 ; then
  rm -f $srcdir/main/php_version.h && mv php_version.h.new $srcdir/main/php_version.h && \
  echo 'Updated main/php_version.h'
else
  rm -f php_version.h.new
fi



if test "$with_shared_apache" != "no" && test -n "$with_shared_apache" ; then
  as_fn_error $? "--with-shared-apache is not supported. Please refer to the documentation for using APXS" "$LINENO" 5
fi

if test -n "$with_apache" && test -n "$with_apxs"; then
  as_fn_error $? "--with-apache and --with-apxs cannot be used together" "$LINENO" 5
fi

if test -n "$with_apxs2filter" && test -n "$with_apxs2"; then
  as_fn_error $? "--with-apxs2filter and --with-apxs2 cannot be used together" "$LINENO" 5
fi



cwd=`pwd`

php_shtool=$srcdir/build/shtool
T_MD=`$php_shtool echo -n -e %B`
T_ME=`$php_shtool echo -n -e %b`


test -d include || $php_shtool mkdir include
> Makefile.objects
> Makefile.fragments
pattern=define
$EGREP $pattern'.*include/php' $srcdir/configure|$SED 's/.*>//'|xargs touch 2>/dev/null


test -z "$CFLAGS" && auto_cflags=1

abs_srcdir=`(cd $srcdir; pwd)`
abs_builddir=`pwd`

php_abs_top_srcdir=$abs_srcdir
php_abs_top_builddir=$abs_builddir


$php_shtool mkdir -p libs
rm -f libs/*


ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu
if test -n "$ac_tool_prefix"; then
  for ac_prog in cc gcc
  do
    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
set dummy $ac_tool_prefix$ac_prog; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_CC+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
CC=$ac_cv_prog_CC
if test -n "$CC"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
$as_echo "$CC" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


    test -n "$CC" && break
  done
fi
if test -z "$CC"; then
  ac_ct_CC=$CC
  for ac_prog in cc gcc
do
  # Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_CC+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_CC"; then
  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_CC="$ac_prog"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_CC=$ac_cv_prog_ac_ct_CC
if test -n "$ac_ct_CC"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
$as_echo "$ac_ct_CC" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  test -n "$ac_ct_CC" && break
done

  if test "x$ac_ct_CC" = x; then
    CC=""
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    CC=$ac_ct_CC
  fi
fi


test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "no acceptable C compiler found in \$PATH
See \`config.log' for more details" "$LINENO" 5; }

# Provide some information about the compiler.
$as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
set X $ac_compile
ac_compiler=$2
for ac_option in --version -v -V -qversion; do
  { { ac_try="$ac_compiler $ac_option >&5"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    sed '10a\
... rest of stderr output deleted ...
         10q' conftest.err >conftest.er1
    cat conftest.er1 >&5
  fi
  rm -f conftest.er1 conftest.err
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }
done

cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
ac_clean_files_save=$ac_clean_files
ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
# Try to create an executable without -o first, disregard a.out.
# It will help us diagnose broken compilers, and finding out an intuition
# of exeext.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
$as_echo_n "checking whether the C compiler works... " >&6; }
ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`

# The possible output files:
ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"

ac_rmfiles=
for ac_file in $ac_files
do
  case $ac_file in
    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
    * ) ac_rmfiles="$ac_rmfiles $ac_file";;
  esac
done
rm -f $ac_rmfiles

if { { ac_try="$ac_link_default"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_link_default") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then :
  # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
# So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
# in a Makefile.  We should not override ac_cv_exeext if it was cached,
# so that the user can short-circuit this test for compilers unknown to
# Autoconf.
for ac_file in $ac_files ''
do
  test -f "$ac_file" || continue
  case $ac_file in
    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj )
	;;
    [ab].out )
	# We found the default executable, but exeext='' is most
	# certainly right.
	break;;
    *.* )
	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
	then :; else
	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
	fi
	# We set ac_cv_exeext here because the later test for it is not
	# safe: cross compilers may not add the suffix if given an `-o'
	# argument, so we may need to know it at that point already.
	# Even if this section looks crufty: it has the advantage of
	# actually working.
	break;;
    * )
	break;;
  esac
done
test "$ac_cv_exeext" = no && ac_cv_exeext=

else
  ac_file=''
fi
if test -z "$ac_file"; then :
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
$as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "C compiler cannot create executables
See \`config.log' for more details" "$LINENO" 5; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
$as_echo_n "checking for C compiler default output file name... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
$as_echo "$ac_file" >&6; }
ac_exeext=$ac_cv_exeext

rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
ac_clean_files=$ac_clean_files_save
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
$as_echo_n "checking for suffix of executables... " >&6; }
if { { ac_try="$ac_link"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_link") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then :
  # If both `conftest.exe' and `conftest' are `present' (well, observable)
# catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
# work properly (i.e., refer to `conftest.exe'), while it won't with
# `rm'.
for ac_file in conftest.exe conftest conftest.*; do
  test -f "$ac_file" || continue
  case $ac_file in
    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
	  break;;
    * ) break;;
  esac
done
else
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "cannot compute suffix of executables: cannot compile and link
See \`config.log' for more details" "$LINENO" 5; }
fi
rm -f conftest conftest$ac_cv_exeext
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
$as_echo "$ac_cv_exeext" >&6; }

rm -f conftest.$ac_ext
EXEEXT=$ac_cv_exeext
ac_exeext=$EXEEXT
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdio.h>
int
main ()
{
FILE *f = fopen ("conftest.out", "w");
 return ferror (f) || fclose (f) != 0;

  ;
  return 0;
}
_ACEOF
ac_clean_files="$ac_clean_files conftest.out"
# Check that the compiler produces executables we can run.  If not, either
# the compiler is broken, or we cross compile.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
$as_echo_n "checking whether we are cross compiling... " >&6; }
if test "$cross_compiling" != yes; then
  { { ac_try="$ac_link"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_link") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }
  if { ac_try='./conftest$ac_cv_exeext'
  { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; }; then
    cross_compiling=no
  else
    if test "$cross_compiling" = maybe; then
	cross_compiling=yes
    else
	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "cannot run C compiled programs.
If you meant to cross compile, use \`--host'.
See \`config.log' for more details" "$LINENO" 5; }
    fi
  fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
$as_echo "$cross_compiling" >&6; }

rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
ac_clean_files=$ac_clean_files_save
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
$as_echo_n "checking for suffix of object files... " >&6; }
if ${ac_cv_objext+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
rm -f conftest.o conftest.obj
if { { ac_try="$ac_compile"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_compile") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then :
  for ac_file in conftest.o conftest.obj conftest.*; do
  test -f "$ac_file" || continue;
  case $ac_file in
    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM ) ;;
    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
       break;;
  esac
done
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5

{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "cannot compute suffix of object files: cannot compile
See \`config.log' for more details" "$LINENO" 5; }
fi
rm -f conftest.$ac_cv_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
$as_echo "$ac_cv_objext" >&6; }
OBJEXT=$ac_cv_objext
ac_objext=$OBJEXT
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
$as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
if ${ac_cv_c_compiler_gnu+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{
#ifndef __GNUC__
       choke me
#endif

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_compiler_gnu=yes
else
  ac_compiler_gnu=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
ac_cv_c_compiler_gnu=$ac_compiler_gnu

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
$as_echo "$ac_cv_c_compiler_gnu" >&6; }
if test $ac_compiler_gnu = yes; then
  GCC=yes
else
  GCC=
fi
ac_test_CFLAGS=${CFLAGS+set}
ac_save_CFLAGS=$CFLAGS
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
$as_echo_n "checking whether $CC accepts -g... " >&6; }
if ${ac_cv_prog_cc_g+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_save_c_werror_flag=$ac_c_werror_flag
   ac_c_werror_flag=yes
   ac_cv_prog_cc_g=no
   CFLAGS="-g"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_prog_cc_g=yes
else
  CFLAGS=""
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

else
  ac_c_werror_flag=$ac_save_c_werror_flag
	 CFLAGS="-g"
	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_prog_cc_g=yes
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
   ac_c_werror_flag=$ac_save_c_werror_flag
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
$as_echo "$ac_cv_prog_cc_g" >&6; }
if test "$ac_test_CFLAGS" = set; then
  CFLAGS=$ac_save_CFLAGS
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
$as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
if ${ac_cv_prog_cc_c89+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_cv_prog_cc_c89=no
ac_save_CC=$CC
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdarg.h>
#include <stdio.h>
struct stat;
/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
struct buf { int x; };
FILE * (*rcsopen) (struct buf *, struct stat *, int);
static char *e (p, i)
     char **p;
     int i;
{
  return p[i];
}
static char *f (char * (*g) (char **, int), char **p, ...)
{
  char *s;
  va_list v;
  va_start (v,p);
  s = g (p, va_arg (v,int));
  va_end (v);
  return s;
}

/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
   function prototypes and stuff, but not '\xHH' hex character constants.
   These don't provoke an error unfortunately, instead are silently treated
   as 'x'.  The following induces an error, until -std is added to get
   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
   array size at least.  It's necessary to write '\x00'==0 to get something
   that's true only with -std.  */
int osf4_cc_array ['\x00' == 0 ? 1 : -1];

/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
   inside strings and character constants.  */
#define FOO(x) 'x'
int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];

int test (int i, double x);
struct s1 {int (*f) (int a);};
struct s2 {int (*f) (double a);};
int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
int argc;
char **argv;
int
main ()
{
return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
  ;
  return 0;
}
_ACEOF
for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
do
  CC="$ac_save_CC $ac_arg"
  if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_prog_cc_c89=$ac_arg
fi
rm -f core conftest.err conftest.$ac_objext
  test "x$ac_cv_prog_cc_c89" != "xno" && break
done
rm -f conftest.$ac_ext
CC=$ac_save_CC

fi
# AC_CACHE_VAL
case "x$ac_cv_prog_cc_c89" in
  x)
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
$as_echo "none needed" >&6; } ;;
  xno)
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
$as_echo "unsupported" >&6; } ;;
  *)
    CC="$CC $ac_cv_prog_cc_c89"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
$as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
esac
if test "x$ac_cv_prog_cc_c89" != xno; then :

fi

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu


ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
$as_echo_n "checking how to run the C preprocessor... " >&6; }
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
  if ${ac_cv_prog_CPP+:} false; then :
  $as_echo_n "(cached) " >&6
else
      # Double quotes because CPP needs to be expanded
    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
    do
      ac_preproc_ok=false
for ac_c_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :
  break
fi

    done
    ac_cv_prog_CPP=$CPP

fi
  CPP=$ac_cv_prog_CPP
else
  ac_cv_prog_CPP=$CPP
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
$as_echo "$CPP" >&6; }
ac_preproc_ok=false
for ac_c_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :

else
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
See \`config.log' for more details" "$LINENO" 5; }
fi

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu



  ICC="no"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for icc" >&5
$as_echo_n "checking for icc... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
__INTEL_COMPILER
_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "^__INTEL_COMPILER" >/dev/null 2>&1; then :
  ICC="no"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
else
  ICC="yes"
    GCC="no"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

fi
rm -f conftest*



  SUNCC="no"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suncc" >&5
$as_echo_n "checking for suncc... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
__SUNPRO_C
_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "^__SUNPRO_C" >/dev/null 2>&1; then :
  SUNCC="no"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
else
  SUNCC="yes"
    GCC="no"
    test -n "$auto_cflags" && CFLAGS="-O -xs -xstrconst -zlazyload"
    GCC=""
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

fi
rm -f conftest*


if test "x$CC" != xcc; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC and cc understand -c and -o together" >&5
$as_echo_n "checking whether $CC and cc understand -c and -o together... " >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cc understands -c and -o together" >&5
$as_echo_n "checking whether cc understands -c and -o together... " >&6; }
fi
set dummy $CC; ac_cc=`$as_echo "$2" |
		      sed 's/[^a-zA-Z0-9_]/_/g;s/^[0-9]/_/'`
if eval \${ac_cv_prog_cc_${ac_cc}_c_o+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
# Make sure it works both with $CC and with simple cc.
# We do the test twice because some compilers refuse to overwrite an
# existing .o file with -o, though they will create one.
ac_try='$CC -c conftest.$ac_ext -o conftest2.$ac_objext >&5'
rm -f conftest2.*
if { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } &&
   test -f conftest2.$ac_objext && { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; };
then
  eval ac_cv_prog_cc_${ac_cc}_c_o=yes
  if test "x$CC" != xcc; then
    # Test first that cc exists at all.
    if { ac_try='cc -c conftest.$ac_ext >&5'
  { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; }; then
      ac_try='cc -c conftest.$ac_ext -o conftest2.$ac_objext >&5'
      rm -f conftest2.*
      if { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } &&
	 test -f conftest2.$ac_objext && { { case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_try") 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; };
      then
	# cc works too.
	:
      else
	# cc exists but doesn't like -o.
	eval ac_cv_prog_cc_${ac_cc}_c_o=no
      fi
    fi
  fi
else
  eval ac_cv_prog_cc_${ac_cc}_c_o=no
fi
rm -f core conftest*

fi
if eval test \$ac_cv_prog_cc_${ac_cc}_c_o = yes; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

$as_echo "#define NO_MINUS_C_MINUS_O 1" >>confdefs.h

fi

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
$as_echo_n "checking how to run the C preprocessor... " >&6; }
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
  if ${ac_cv_prog_CPP+:} false; then :
  $as_echo_n "(cached) " >&6
else
      # Double quotes because CPP needs to be expanded
    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
    do
      ac_preproc_ok=false
for ac_c_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :
  break
fi

    done
    ac_cv_prog_CPP=$CPP

fi
  CPP=$ac_cv_prog_CPP
else
  ac_cv_prog_CPP=$CPP
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
$as_echo "$CPP" >&6; }
ac_preproc_ok=false
for ac_c_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :

else
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
See \`config.log' for more details" "$LINENO" 5; }
fi

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
$as_echo_n "checking for ANSI C header files... " >&6; }
if ${ac_cv_header_stdc+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_header_stdc=yes
else
  ac_cv_header_stdc=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <string.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "memchr" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "free" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
  if test "$cross_compiling" = yes; then :
  :
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ctype.h>
#include <stdlib.h>
#if ((' ' & 0x0FF) == 0x020)
# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#else
# define ISLOWER(c) \
		   (('a' <= (c) && (c) <= 'i') \
		     || ('j' <= (c) && (c) <= 'r') \
		     || ('s' <= (c) && (c) <= 'z'))
# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
#endif

#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int
main ()
{
  int i;
  for (i = 0; i < 256; i++)
    if (XOR (islower (i), ISLOWER (i))
	|| toupper (i) != TOUPPER (i))
      return 2;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

else
  ac_cv_header_stdc=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
$as_echo "$ac_cv_header_stdc" >&6; }
if test $ac_cv_header_stdc = yes; then

$as_echo "#define STDC_HEADERS 1" >>confdefs.h

fi

# On IRIX 5.3, sys/types and inttypes.h are conflicting.
for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
		  inttypes.h stdint.h unistd.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done



  ac_fn_c_check_header_mongrel "$LINENO" "minix/config.h" "ac_cv_header_minix_config_h" "$ac_includes_default"
if test "x$ac_cv_header_minix_config_h" = xyes; then :
  MINIX=yes
else
  MINIX=
fi


  if test "$MINIX" = yes; then

$as_echo "#define _POSIX_SOURCE 1" >>confdefs.h


$as_echo "#define _POSIX_1_SOURCE 2" >>confdefs.h


$as_echo "#define _MINIX 1" >>confdefs.h

  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether it is safe to define __EXTENSIONS__" >&5
$as_echo_n "checking whether it is safe to define __EXTENSIONS__... " >&6; }
if ${ac_cv_safe_to_define___extensions__+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#         define __EXTENSIONS__ 1
          $ac_includes_default
int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_safe_to_define___extensions__=yes
else
  ac_cv_safe_to_define___extensions__=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_safe_to_define___extensions__" >&5
$as_echo "$ac_cv_safe_to_define___extensions__" >&6; }
  test $ac_cv_safe_to_define___extensions__ = yes &&
    $as_echo "#define __EXTENSIONS__ 1" >>confdefs.h

  $as_echo "#define _ALL_SOURCE 1" >>confdefs.h

  $as_echo "#define _GNU_SOURCE 1" >>confdefs.h

  $as_echo "#define _POSIX_PTHREAD_SEMANTICS 1" >>confdefs.h

  $as_echo "#define _TANDEM_SOURCE 1" >>confdefs.h



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ln -s works" >&5
$as_echo_n "checking whether ln -s works... " >&6; }
LN_S=$as_ln_s
if test "$LN_S" = "ln -s"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no, using $LN_S" >&5
$as_echo "no, using $LN_S" >&6; }
fi



php_with_libdir=lib

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for system library directory" >&5
$as_echo_n "checking for system library directory... " >&6; }

# Check whether --with-libdir was given.
if test "${with_libdir+set}" = set; then :
  withval=$with_libdir; PHP_LIBDIR=$withval
else

  PHP_LIBDIR=lib


fi


ext_output=$PHP_LIBDIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_rpath=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable runpaths" >&5
$as_echo_n "checking whether to enable runpaths... " >&6; }
# Check whether --enable-rpath was given.
if test "${enable_rpath+set}" = set; then :
  enableval=$enable_rpath; PHP_RPATH=$enableval
else

  PHP_RPATH=yes


fi


ext_output=$PHP_RPATH
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if compiler supports -R" >&5
$as_echo_n "checking if compiler supports -R... " >&6; }
if ${php_cv_cc_dashr+:} false; then :
  $as_echo_n "(cached) " >&6
else

  SAVE_LIBS=$LIBS
  LIBS="-R /usr/$PHP_LIBDIR $LIBS"
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  php_cv_cc_dashr=yes
else
  php_cv_cc_dashr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  LIBS=$SAVE_LIBS
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_cc_dashr" >&5
$as_echo "$php_cv_cc_dashr" >&6; }
if test $php_cv_cc_dashr = "yes"; then
  ld_runpath_switch=-R
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if compiler supports -Wl,-rpath," >&5
$as_echo_n "checking if compiler supports -Wl,-rpath,... " >&6; }
  if ${php_cv_cc_rpath+:} false; then :
  $as_echo_n "(cached) " >&6
else

    SAVE_LIBS=$LIBS
    LIBS="-Wl,-rpath,/usr/$PHP_LIBDIR $LIBS"
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  php_cv_cc_rpath=yes
else
  php_cv_cc_rpath=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
    LIBS=$SAVE_LIBS
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_cc_rpath" >&5
$as_echo "$php_cv_cc_rpath" >&6; }
  if test $php_cv_cc_rpath = "yes"; then
    ld_runpath_switch=-Wl,-rpath,
  else
        ld_runpath_switch=-L
  fi
fi
if test "$PHP_RPATH" = "no"; then
  ld_runpath_switch=
fi



  for ac_prog in gawk nawk awk mawk
do
  # Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_AWK+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$AWK"; then
  ac_cv_prog_AWK="$AWK" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_dummy="/usr/xpg4/bin/:$PATH"
for as_dir in $as_dummy
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_AWK="$ac_prog"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
AWK=$ac_cv_prog_AWK
if test -n "$AWK"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
$as_echo "$AWK" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  test -n "$AWK" && break
done
test -n "$AWK" || AWK="bork"

  case "$AWK" in
    *mawk)
      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: mawk is known to have problems on some systems. You should install GNU awk" >&5
$as_echo "$as_me: WARNING: mawk is known to have problems on some systems. You should install GNU awk" >&2;}
      ;;
    *gawk)
      ;;
    bork)
      as_fn_error $? "Could not find awk; Install GNU awk" "$LINENO" 5
      ;;
    *)
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $AWK is broken" >&5
$as_echo_n "checking if $AWK is broken... " >&6; }
      if ! $AWK 'function foo() {}' >/dev/null 2>&1 ; then
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
        as_fn_error $? "You should install GNU awk" "$LINENO" 5
      else
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
      fi
      ;;
  esac

  PHP_VAR_SUBST="$PHP_VAR_SUBST AWK"



  for ac_prog in 'bison -y' byacc
do
  # Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_YACC+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_YACC="$ac_prog"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
YACC=$ac_cv_prog_YACC
if test -n "$YACC"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $YACC" >&5
$as_echo "$YACC" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"


  # we only support certain bison versions
  bison_version_list="2.4 2.4.1 2.4.2 2.4.3 2.5 2.5.1 2.6 2.6.1 2.6.2 2.6.3 2.6.4 2.6.5 2.7"

  # for standalone build of Zend Engine
  test -z "$SED" && SED=sed

  bison_version=none
  if test "$YACC"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bison version" >&5
$as_echo_n "checking for bison version... " >&6; }
if ${php_cv_bison_version+:} false; then :
  $as_echo_n "(cached) " >&6
else

      bison_version_vars=`$YACC --version 2> /dev/null | grep 'GNU Bison' | cut -d ' ' -f 4 | $SED -e 's/\./ /g' | tr -d a-z`
      php_cv_bison_version=invalid
      if test -n "$bison_version_vars"; then
        set $bison_version_vars
        bison_version="${1}.${2}"
        for bison_check_version in $bison_version_list; do
          if test "$bison_version" = "$bison_check_version"; then
            php_cv_bison_version="$bison_check_version (ok)"
            break
          fi
        done
      fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_bison_version" >&5
$as_echo "$php_cv_bison_version" >&6; }
  fi
  case $php_cv_bison_version in
    ""|invalid)
      bison_msg="bison versions supported for regeneration of the Zend/PHP parsers: $bison_version_list (found: $bison_version)."
      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $bison_msg" >&5
$as_echo "$as_me: WARNING: $bison_msg" >&2;}
      YACC="exit 0;"
      ;;
  esac


  PHP_VAR_SUBST="$PHP_VAR_SUBST YACC"



  # Extract the first word of "re2c", so it can be a program name with args.
set dummy re2c; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_RE2C+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$RE2C"; then
  ac_cv_prog_RE2C="$RE2C" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_RE2C="re2c"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
RE2C=$ac_cv_prog_RE2C
if test -n "$RE2C"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RE2C" >&5
$as_echo "$RE2C" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  if test -n "$RE2C"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for re2c version" >&5
$as_echo_n "checking for re2c version... " >&6; }
if ${php_cv_re2c_version+:} false; then :
  $as_echo_n "(cached) " >&6
else

      re2c_vernum=`$RE2C --vernum 2>/dev/null`
      if test -z "$re2c_vernum" || test "$re2c_vernum" -lt "1304"; then
        php_cv_re2c_version=invalid
      else
        php_cv_re2c_version="`$RE2C --version | cut -d ' ' -f 2  2>/dev/null` (ok)"
      fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_re2c_version" >&5
$as_echo "$php_cv_re2c_version" >&6; }
  fi
  case $php_cv_re2c_version in
    ""|invalid)
      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers." >&5
$as_echo "$as_me: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers." >&2;}
      RE2C="exit 0;"
      ;;
  esac

  PHP_VAR_SUBST="$PHP_VAR_SUBST RE2C"



case $php_cv_bison_version in
  ""|invalid)
    if ! test -f "$abs_srcdir/Zend/zend_language_parser.h" || ! test -f "$abs_srcdir/Zend/zend_language_parser.c" ; then
      as_fn_error $? "bison is required to build PHP/Zend when building a GIT checkout!" "$LINENO" 5
    fi
    ;;
esac


php_enable_re2c_cgoto=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable computed goto gcc extension with re2c" >&5
$as_echo_n "checking whether to enable computed goto gcc extension with re2c... " >&6; }
# Check whether --enable-re2c-cgoto was given.
if test "${enable_re2c_cgoto+set}" = set; then :
  enableval=$enable_re2c_cgoto; PHP_RE2C_CGOTO=$enableval
else

  PHP_RE2C_CGOTO=no


fi


ext_output=$PHP_RE2C_CGOTO
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_RE2C_CGOTO" = "no"; then
  RE2C_FLAGS=""
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether re2c -g works" >&5
$as_echo_n "checking whether re2c -g works... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

int main(int argc, const char **argv)
{
  argc = argc;
  argv = argv;
label1:
label2:
  static void *adr[] = { &&label1, &&label2};
  goto *adr[0];
  return 0;
}

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    RE2C_FLAGS=""
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else

    RE2C_FLAGS="-g"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST RE2C_FLAGS"



case $host_cpu in
  alpha*)
    if test "$GCC" = "yes"; then
      CFLAGS="$CFLAGS -mieee"
    else
      CFLAGS="$CFLAGS -ieee"
    fi
    ;;
  sparc*)
    if test "$SUNCC" = "yes"; then
      CFLAGS="$CFLAGS -xmemalign=8s"
    fi
    ;;
esac

if test "$GCC" = "yes"; then
  case $host_alias in
  *darwin*)
    GCC_MAJOR_VERSION=`$CC -dumpversion | /usr/bin/sed -nE '1s/([0-9]+)\.[0-9]+\..*/\1/;1p'`
    ;;
  *)
    GCC_MAJOR_VERSION=`$CC --version | $SED -n '1s/[^0-9]*//;1s/\..*//;1p'`
    ;;
  esac
  if test $GCC_MAJOR_VERSION -ge 4; then
    CFLAGS="$CFLAGS -fvisibility=hidden"
  fi
fi

case $host_alias in
  *solaris*)
    CPPFLAGS="$CPPFLAGS -D_POSIX_PTHREAD_SEMANTICS"
    if test "${enable_libgcc+set}" != "set" && test "$GCC" = "yes"; then
      enable_libgcc=yes
    fi
    ;;
  *dgux*)
    CPPFLAGS="$CPPFLAGS -D_BSD_TIMEOFDAY_FLAVOR"
    ;;
  *darwin*|*rhapsody*)
    if test -n "$GCC"; then

  gcc_arg_name=ac_cv_gcc_arg_no_cpp_precomp
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC supports -no-cpp-precomp" >&5
$as_echo_n "checking whether $CC supports -no-cpp-precomp... " >&6; }
if ${ac_cv_gcc_arg_no_cpp_precomp+:} false; then :
  $as_echo_n "(cached) " >&6
else

  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -no-cpp-precomp -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -no-cpp-precomp >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gcc_arg_no_cpp_precomp" >&5
$as_echo "$ac_cv_gcc_arg_no_cpp_precomp" >&6; }
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_no_cpp_precomp=yes
  else
    :

  fi

      if test "$gcc_no_cpp_precomp" = "yes"; then
        CPPFLAGS="$CPPFLAGS -no-cpp-precomp"
      fi
    fi
    php_multiple_shlib_versions_ok=yes
    ;;
  *beos*)
    beos_threads=1
    LIBS="$LIBS -lbe -lroot"
    ;;
  *mips*)
    CPPFLAGS="$CPPFLAGS -D_XPG_IV"
    ;;
  *hpux*)
    if test "$GCC" = "yes"; then
      CPPFLAGS="$CPPFLAGS -D_XOPEN_SOURCE_EXTENDED"
    fi
    ;;
  *netware*)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo



  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  case win32 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "win32"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/win32/"; ac_bdir="win32/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sendmail.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre -I$CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre -I$CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre -I$CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre -I$CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    PHP5LIB_SHARED_LIBADD=\$\(EXTRA_LIBS\)
    EXTENSION_DIR=sys:/php$PHP_MAJOR_VERSION/ext

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP5LIB_SHARED_LIBADD"


  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o 'netware'/php5lib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(PHP_GLOBAL_OBJS) $(PHP5LIB_SHARED_LIBADD) && mv -f 'netware'/.libs/php5lib.so 'netware'/php5lib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(PHP_GLOBAL_OBJS)  $(PHP5LIB_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(PHP_GLOBAL_OBJS) $(PHP5LIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/php5lib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/php5lib.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_GLOBAL_OBJS"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/php5lib.$suffix: netware/php5lib.$suffix
	\$(LIBTOOL) --mode=install cp netware/php5lib.$suffix \$(phplibdir)

netware/php5lib.$suffix: \$(PHP_GLOBAL_OBJS) \$(PHP5LIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

    ;;
esac

# Disable PIC mode by default where it is known to be safe to do so,
# to avoid the performance hit from the lost register
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to force non-PIC code in shared modules" >&5
$as_echo_n "checking whether to force non-PIC code in shared modules... " >&6; }
case $host_alias in
  i?86-*-linux*|i?86-*-freebsd*)
    if test "${with_pic+set}" != "set" || test "$with_pic" = "no"; then
      with_pic=no
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
    else
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    fi
    ;;
  *)
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    ;;
esac














{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether /dev/urandom exists" >&5
$as_echo_n "checking whether /dev/urandom exists... " >&6; }
if test -r "/dev/urandom" && test -c "/dev/urandom"; then

$as_echo "#define HAVE_DEV_URANDOM 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether /dev/arandom exists" >&5
$as_echo_n "checking whether /dev/arandom exists... " >&6; }
  if test -r "/dev/arandom" && test -c "/dev/arandom"; then

$as_echo "#define HAVE_DEV_ARANDOM 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
fi
























if test "$beos_threads" = "1"; then
  pthreads_working="yes"
  ac_cv_pthreads_cflags=""
else
  save_CFLAGS=$CFLAGS
  save_LIBS=$LIBS

if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi


if test "$cross_compiling" = yes; then :

    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  pthreads_working=yes

else

  pthreads_working=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  LIBS=$save_LIBS
  CFLAGS=$save_CFLAGS

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthreads_cflags" >&5
$as_echo_n "checking for pthreads_cflags... " >&6; }
if ${ac_cv_pthreads_cflags+:} false; then :
  $as_echo_n "(cached) " >&6
else

  ac_cv_pthreads_cflags=
  if test "$pthreads_working" != "yes"; then
    for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do
      ac_save=$CFLAGS
      CFLAGS="$CFLAGS $flag"

if test "$cross_compiling" = yes; then :

    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  pthreads_working=yes

else

  pthreads_working=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

      CFLAGS=$ac_save
      if test "$pthreads_working" = "yes"; then
        ac_cv_pthreads_cflags=$flag
        break
      fi
    done
  fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_pthreads_cflags" >&5
$as_echo "$ac_cv_pthreads_cflags" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthreads_lib" >&5
$as_echo_n "checking for pthreads_lib... " >&6; }
if ${ac_cv_pthreads_lib+:} false; then :
  $as_echo_n "(cached) " >&6
else

ac_cv_pthreads_lib=
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save=$LIBS
    LIBS="$LIBS -l$lib"

if test "$cross_compiling" = yes; then :

    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  pthreads_working=yes

else

  pthreads_working=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_save
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib=$lib
      break
    fi
  done
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_pthreads_lib" >&5
$as_echo "$ac_cv_pthreads_lib" >&6; }

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX-Threads found"
else
  threads_result="POSIX-Threads not found"
fi


# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi





  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_SUFFIX_NAME"





  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_DL_SUFFIX_NAME"



 SHLIB_SUFFIX_NAME=so
 SHLIB_DL_SUFFIX_NAME=$SHLIB_SUFFIX_NAME
 case $host_alias in
 *hpux*)
   SHLIB_SUFFIX_NAME=sl
   SHLIB_DL_SUFFIX_NAME=sl
   ;;
 *darwin*)
   SHLIB_SUFFIX_NAME=dylib
   SHLIB_DL_SUFFIX_NAME=so
   ;;
 esac


  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

PHP_SAPI=none



SAPI_SHARED=libs/libphp$PHP_MAJOR_VERSION.$SHLIB_DL_SUFFIX_NAME
SAPI_STATIC=libs/libphp$PHP_MAJOR_VERSION.a
SAPI_LIBTOOL=libphp$PHP_MAJOR_VERSION.la


  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Configuring SAPI modules${T_ME}" >&5
$as_echo "${T_MD}Configuring SAPI modules${T_ME}" >&6; }





php_with_aolserver=no



# Check whether --with-aolserver was given.
if test "${with_aolserver+set}" = set; then :
  withval=$with_aolserver; PHP_AOLSERVER=$withval
else

  PHP_AOLSERVER=no


fi


ext_output=$PHP_AOLSERVER





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for AOLserver support" >&5
$as_echo_n "checking for AOLserver support... " >&6; }

if test "$PHP_AOLSERVER" != "no"; then
  if test -d "$PHP_AOLSERVER/include"; then
    PHP_AOLSERVER_SRC=$PHP_AOLSERVER
  fi
  if test -z "$PHP_AOLSERVER_SRC" || test ! -d $PHP_AOLSERVER_SRC/include; then
    as_fn_error $? "Please specify the path to the source distribution of AOLserver using --with-aolserver-src=DIR" "$LINENO" 5
  fi
  if test ! -d $PHP_AOLSERVER/bin ; then
    as_fn_error $? "Please specify the path to the root of AOLserver using --with-aolserver=DIR" "$LINENO" 5
  fi

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


  if test "$PHP_AOLSERVER_SRC/include" != "/usr/include"; then

  if test -z "$PHP_AOLSERVER_SRC/include" || echo "$PHP_AOLSERVER_SRC/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_AOLSERVER_SRC/include
  else

    ep_dir=`echo $PHP_AOLSERVER_SRC/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_AOLSERVER_SRC/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


$as_echo "#define HAVE_AOLSERVER 1" >>confdefs.h


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES aolserver"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=aolserver
  fi



    BUILD_DIR="$BUILD_DIR sapi/aolserver"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS aolserver"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/aolserver in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/aolserver"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/aolserver/"; ac_bdir="sapi/aolserver/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in aolserver.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_AOLSERVER/bin/"
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_AOLSERVER" >&5
$as_echo "$PHP_AOLSERVER" >&6; }





php_with_apxs=no



# Check whether --with-apxs was given.
if test "${with_apxs+set}" = set; then :
  withval=$with_apxs; PHP_APXS=$withval
else

  PHP_APXS=no


fi


ext_output=$PHP_APXS





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Apache 1.x module support via DSO through APXS" >&5
$as_echo_n "checking for Apache 1.x module support via DSO through APXS... " >&6; }

if test "$PHP_APXS" != "no"; then
  if test "$PHP_APXS" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then #SUSE 6.x
      APXS=/usr/sbin/apxs
    fi
  else

  if test -z "$PHP_APXS" || echo "$PHP_APXS" | grep '^/' >/dev/null ; then
    APXS=$PHP_APXS
  else

    ep_dir=`echo $PHP_APXS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    APXS="$ep_realdir"/`basename "$PHP_APXS"`
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sorry, I was not able to successfully run APXS.  Possible reasons:" >&5
$as_echo "Sorry, I was not able to successfully run APXS.  Possible reasons:" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 1.  Perl is not installed;" >&5
$as_echo "1.  Perl is not installed;" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.  Apache was not compiled with DSO support (--enable-module=so);" >&5
$as_echo "2.  Apache was not compiled with DSO support (--enable-module=so);" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" >&5
$as_echo "3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: The output of $APXS follows" >&5
$as_echo "The output of $APXS follows" >&6; }
    $APXS -q CFLAGS
    as_fn_error $? "Aborting" "$LINENO" 5
  fi

  APXS_LDFLAGS="@SYBASE_LFLAGS@ @SYBASE_LIBS@ @SYBASE_CT_LFLAGS@ @SYBASE_CT_LIBS@"
  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APACHE_INCLUDE=-I$APXS_INCLUDEDIR

  # Test that we're trying to configure with apache 1.x

  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -ge 2000000; then
    as_fn_error $? "You have enabled Apache 1.3 support while your server is Apache 2.  Please use the appropriate switch --with-apxs2" "$LINENO" 5
  fi

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  case $host_alias in
  *aix*)
    APXS_LIBEXECDIR=`$APXS -q LIBEXECDIR`
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    PHP_AIX_LDFLAGS="-Wl,-brtl"
    build_type=shared
    ;;
  *darwin*)
    MH_BUNDLE_FLAGS="-dynamic -twolevel_namespace -bundle -bundle_loader $APXS_HTTPD"

  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    SAPI_SHARED=libs/libphp5.so
    build_type=bundle
    ;;
  *)
    build_type=shared
    ;;
  esac


  if test "$build_type" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache"


    case "$build_type" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  # Test whether apxs support -S option
  $APXS -q -S CFLAGS="$APXS_CFLAGS" CFLAGS >/dev/null 2>&1

  if test "$?" != "0"; then
    APACHE_INSTALL="$APXS -i -a -n php5 $SAPI_SHARED" # Old apxs does not have -S option
  else
    APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
    if test -z `$APXS -q SYSCONFDIR`; then
      APACHE_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -i -n php5 $SAPI_SHARED"
    else
      APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
      APACHE_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                      \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                             -i -a -n php5 $SAPI_SHARED"
    fi
  fi

  if test -z "`$APXS -q LD_SHLIB`" || test "`$APXS -q LIBEXECDIR`" = "modules"; then
    PHP_APXS_BROKEN=yes
  fi
  STRONGHOLD=

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h


$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h


$as_echo "#define HAVE_APACHE 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


php_with_apache=no



# Check whether --with-apache was given.
if test "${with_apache+set}" = set; then :
  withval=$with_apache; PHP_APACHE=$withval
else

  PHP_APACHE=no


fi


ext_output=$PHP_APACHE





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Apache 1.x module support" >&5
$as_echo_n "checking for Apache 1.x module support... " >&6; }

if test "$PHP_SAPI" != "apache" && test "$PHP_APACHE" != "no"; then

  if test "$PHP_APACHE" = "yes"; then
    # Apache's default directory
    PHP_APACHE=/usr/local/apache
  fi

  APACHE_INSTALL_FILES="\$(srcdir)/sapi/apache/mod_php5.* sapi/apache/libphp5.module"


$as_echo "#define HAVE_APACHE 1" >>confdefs.h

  APACHE_MODULE=yes

  if test -z "$PHP_APACHE" || echo "$PHP_APACHE" | grep '^/' >/dev/null ; then
    PHP_APACHE=$PHP_APACHE
  else

    ep_dir=`echo $PHP_APACHE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    PHP_APACHE="$ep_realdir"/`basename "$PHP_APACHE"`
  fi

  # For Apache 1.2.x
  if test -f $PHP_APACHE/src/httpd.h; then
    APACHE_INCLUDE=-I$PHP_APACHE/src
    APACHE_TARGET=$PHP_APACHE/src

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_INSTALL_FILES $APACHE_TARGET"
    PHP_LIBS="-L. -lphp3"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - Apache 1.2.x" >&5
$as_echo "yes - Apache 1.2.x" >&6; }
    STRONGHOLD=
    if test -f $PHP_APACHE/src/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
  # For Apache 2.0.x
  elif test -f $PHP_APACHE/include/httpd.h && test -f $PHP_APACHE/srclib/apr/include/apr_general.h ; then
    as_fn_error $? "Use --with-apxs2 with Apache 2.x!" "$LINENO" 5
  # For Apache 1.3.x
  elif test -f $PHP_APACHE/src/main/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE/src/main -I$PHP_APACHE/src/os/unix -I$PHP_APACHE/src/ap"
    APACHE_TARGET=$PHP_APACHE/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - Apache 1.3.x" >&5
$as_echo "yes - Apache 1.3.x" >&6; }
    STRONGHOLD=
    if test -f $PHP_APACHE/src/include/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
    if test -f $PHP_APACHE/src/include/ap_compat.h; then

$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h

      if test ! -f $PHP_APACHE/src/include/ap_config_auto.h; then
        as_fn_error $? "Please run Apache\'s configure or src/Configure program once and try again" "$LINENO" 5
      fi
    elif test -f $PHP_APACHE/src/include/compat.h; then

$as_echo "#define HAVE_OLD_COMPAT_H 1" >>confdefs.h

    fi
  # Also for Apache 1.3.x
  elif test -f $PHP_APACHE/src/include/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE/src/include -I$PHP_APACHE/src/os/unix"
    APACHE_TARGET=$PHP_APACHE/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - Apache 1.3.x" >&5
$as_echo "yes - Apache 1.3.x" >&6; }
    STRONGHOLD=
    if test -f $PHP_APACHE/src/include/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
    if test -f $PHP_APACHE/src/include/ap_compat.h; then

$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h

      if test ! -f $PHP_APACHE/src/include/ap_config_auto.h; then
        as_fn_error $? "Please run Apache\'s configure or src/Configure program once and try again" "$LINENO" 5
      fi
    elif test -f $PHP_APACHE/src/include/compat.h; then

$as_echo "#define HAVE_OLD_COMPAT_H 1" >>confdefs.h

    fi
  # For StrongHold 2.2
  elif test -f $PHP_APACHE/apache/httpd.h; then
    APACHE_INCLUDE="-I$PHP_APACHE/apache -I$PHP_APACHE/ssl/include"
    APACHE_TARGET=$PHP_APACHE/apache

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET"
    STRONGHOLD=-DSTRONGHOLD=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - StrongHold" >&5
$as_echo "yes - StrongHold" >&6; }
    if test -f $PHP_APACHE/apache/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
    if test -f $PHP_APACHE/src/ap_compat.h; then

$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h

      if test ! -f $PHP_APACHE/src/include/ap_config_auto.h; then
        as_fn_error $? "Please run Apache\'s configure or src/Configure program once and try again" "$LINENO" 5
      fi
    elif test -f $PHP_APACHE/src/compat.h; then

$as_echo "#define HAVE_OLD_COMPAT_H 1" >>confdefs.h

    fi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    as_fn_error $? "Invalid Apache directory - unable to find httpd.h under $PHP_APACHE" "$LINENO" 5
  fi
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

# compatibility
if test -z "$enable_mod_charset" && test "$with_mod_charset"; then
  enable_mod_charset=$with_mod_charset
fi


php_enable_mod_charset=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable Apache charset compatibility option" >&5
$as_echo_n "checking whether to enable Apache charset compatibility option... " >&6; }
# Check whether --enable-mod-charset was given.
if test "${enable_mod_charset+set}" = set; then :
  enableval=$enable_mod_charset; PHP_MOD_CHARSET=$enableval
else

  PHP_MOD_CHARSET=no


fi


ext_output=$PHP_MOD_CHARSET
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MOD_CHARSET" = "yes"; then

$as_echo "#define USE_TRANSFER_TABLES 1" >>confdefs.h

fi

if test "$APACHE_MODULE" = "yes"; then

  if test -n "$GCC"; then

  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC supports -rdynamic" >&5
$as_echo_n "checking whether $CC supports -rdynamic... " >&6; }
if ${ac_cv_gcc_arg_rdynamic+:} false; then :
  $as_echo_n "(cached) " >&6
else

  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gcc_arg_rdynamic" >&5
$as_echo "$ac_cv_gcc_arg_rdynamic" >&6; }
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :

  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  $php_shtool mkdir -p sapi/apache

  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/apache/libphp5.module"

fi

if test -n "$APACHE_INSTALL"; then
  if test "x$APXS" != "x" -a "`uname -sv`" = "AIX 4" -a "$GCC" != "yes"; then
    APXS_EXP=-bE:sapi/apache/mod_php5.exp
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for member fd in BUFF *" >&5
$as_echo_n "checking for member fd in BUFF *... " >&6; }
if ${ac_cv_php_fd_in_buff+:} false; then :
  $as_echo_n "(cached) " >&6
else

  save=$CPPFLAGS
  if test -n "$APXS_INCLUDEDIR"; then
    CPPFLAGS="$CPPFLAGS -I$APXS_INCLUDEDIR"
  else
    CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
  fi
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <httpd.h>
int
main ()
{
conn_rec *c; int fd = c->client->fd;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    ac_cv_php_fd_in_buff=yes
else
  ac_cv_php_fd_in_buff=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  CPPFLAGS=$save

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_fd_in_buff" >&5
$as_echo "$ac_cv_php_fd_in_buff" >&6; }
if test "$ac_cv_php_fd_in_buff" = "yes"; then

$as_echo "#define PHP_APACHE_HAVE_CLIENT_FD 1" >>confdefs.h

fi

  INSTALL_IT=$APACHE_INSTALL


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_EXP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INCLUDE"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_LDFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INSTALL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST STRONGHOLD"

fi




php_with_apxs2filter=no



# Check whether --with-apxs2filter was given.
if test "${with_apxs2filter+set}" = set; then :
  withval=$with_apxs2filter; PHP_APXS2FILTER=$withval
else

  PHP_APXS2FILTER=no


fi


ext_output=$PHP_APXS2FILTER





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Apache 2.0 filter-module support via DSO through APXS" >&5
$as_echo_n "checking for Apache 2.0 filter-module support via DSO through APXS... " >&6; }

if test "$PHP_APXS2FILTER" != "no"; then
  if test "$PHP_APXS2FILTER" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then
      APXS=/usr/sbin/apxs
    fi
  else

  if test -z "$PHP_APXS2FILTER" || echo "$PHP_APXS2FILTER" | grep '^/' >/dev/null ; then
    APXS=$PHP_APXS2FILTER
  else

    ep_dir=`echo $PHP_APXS2FILTER|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    APXS="$ep_realdir"/`basename "$PHP_APXS2FILTER"`
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sorry, I cannot run apxs.  Possible reasons follow:" >&5
$as_echo "Sorry, I cannot run apxs.  Possible reasons follow:" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 1. Perl is not installed" >&5
$as_echo "1. Perl is not installed" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 2. apxs was not found. Try to pass the path using --with-apxs2filter=/path/to/apxs" >&5
$as_echo "2. apxs was not found. Try to pass the path using --with-apxs2filter=/path/to/apxs" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 3. Apache was not built using --enable-so (the apxs usage page is displayed)" >&5
$as_echo "3. Apache was not built using --enable-so (the apxs usage page is displayed)" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: The output of $APXS follows:" >&5
$as_echo "The output of $APXS follows:" >&6; }
    $APXS -q CFLAGS
    as_fn_error $? "Aborting" "$LINENO" 5
  fi

  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_BINDIR=`$APXS -q BINDIR`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APU_BINDIR=`$APXS -q APU_BINDIR`
  APR_BINDIR=`$APXS -q APR_BINDIR`

  # Pick up ap[ru]-N-config if using httpd >=2.1
  APR_CONFIG=`$APXS -q APR_CONFIG 2>/dev/null ||
    echo $APR_BINDIR/apr-config`
  APU_CONFIG=`$APXS -q APU_CONFIG 2>/dev/null ||
    echo $APU_BINDIR/apu-config`

  APR_CFLAGS="`$APR_CONFIG --cppflags --includes`"
  APU_CFLAGS="`$APU_CONFIG --includes`"

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  APACHE_CFLAGS="$APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $APR_CFLAGS $APU_CFLAGS"

  # Test that we're trying to configure with apache 2.x

  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -le 2000000; then
    as_fn_error $? "You have enabled Apache 2 support while your server is Apache 1.3.  Please use the appropriate switch --with-apxs (without the 2)" "$LINENO" 5
  elif test "$APACHE_VERSION" -lt 2000040; then
    as_fn_error $? "Please note that Apache version >= 2.0.40 is required" "$LINENO" 5
  fi

  APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
  if test -z `$APXS -q SYSCONFDIR`; then
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -i -n php5"
  else
    APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                       -i -a -n php5"
  fi

  case $host_alias in
  *aix*)
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"

  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2filter"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2filter
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2filter"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2filter"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  *darwin*)
                    if test -x "$APR_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APR_CONFIG --ldflags --link-ld --libs`"
    fi
    if test -x "$APU_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APU_CONFIG --ldflags --link-ld --libs` $MH_BUNDLE_FLAGS"
    fi
    MH_BUNDLE_FLAGS="-bundle -bundle_loader $APXS_HTTPD $MH_BUNDLE_FLAGS"

  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"


  if test "bundle" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2filter"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2filter
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2filter"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2filter"


    case "bundle" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    SAPI_SHARED=libs/libphp5.so
    INSTALL_IT="$INSTALL_IT $SAPI_SHARED"
    ;;
  *beos*)
    if test -f _APP_; then `rm _APP_`; fi
    `ln -s $APXS_BINDIR/httpd _APP_`
    EXTRA_LIBS="$EXTRA_LIBS _APP_"

  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2filter"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2filter
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2filter"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2filter"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  *)

  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2filter"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2filter
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2filter"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2filter"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  esac

  if test "$APACHE_VERSION" -lt 2004001; then
    APXS_MPM=`$APXS -q MPM_NAME`
    if test "$APXS_MPM" != "prefork" && test "$APXS_MPM" != "peruser" && test "$APXS_MPM" != "itk"; then

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi

    fi
  else
    APACHE_THREADED_MPM=`$APXS_HTTPD -V | grep 'threaded:.*yes'`
    if test -n "$APACHE_THREADED_MPM"; then

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi

    fi
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi




php_with_apxs2=no



# Check whether --with-apxs2 was given.
if test "${with_apxs2+set}" = set; then :
  withval=$with_apxs2; PHP_APXS2=$withval
else

  PHP_APXS2=no


fi


ext_output=$PHP_APXS2





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Apache 2.0 handler-module support via DSO through APXS" >&5
$as_echo_n "checking for Apache 2.0 handler-module support via DSO through APXS... " >&6; }

if test "$PHP_APXS2" != "no"; then
  if test "$PHP_APXS2" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then
      APXS=/usr/sbin/apxs
    fi
  else

  if test -z "$PHP_APXS2" || echo "$PHP_APXS2" | grep '^/' >/dev/null ; then
    APXS=$PHP_APXS2
  else

    ep_dir=`echo $PHP_APXS2|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    APXS="$ep_realdir"/`basename "$PHP_APXS2"`
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sorry, I cannot run apxs.  Possible reasons follow:" >&5
$as_echo "Sorry, I cannot run apxs.  Possible reasons follow:" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 1. Perl is not installed" >&5
$as_echo "1. Perl is not installed" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 2. apxs was not found. Try to pass the path using --with-apxs2=/path/to/apxs" >&5
$as_echo "2. apxs was not found. Try to pass the path using --with-apxs2=/path/to/apxs" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 3. Apache was not built using --enable-so (the apxs usage page is displayed)" >&5
$as_echo "3. Apache was not built using --enable-so (the apxs usage page is displayed)" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: The output of $APXS follows:" >&5
$as_echo "The output of $APXS follows:" >&6; }
    $APXS -q CFLAGS
    as_fn_error $? "Aborting" "$LINENO" 5
  fi

  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_BINDIR=`$APXS -q BINDIR`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APU_BINDIR=`$APXS -q APU_BINDIR`
  APR_BINDIR=`$APXS -q APR_BINDIR`

  # Pick up ap[ru]-N-config if using httpd >=2.1
  APR_CONFIG=`$APXS -q APR_CONFIG 2>/dev/null ||
    echo $APR_BINDIR/apr-config`
  APU_CONFIG=`$APXS -q APU_CONFIG 2>/dev/null ||
    echo $APU_BINDIR/apu-config`

  APR_CFLAGS="`$APR_CONFIG --cppflags --includes`"
  APU_CFLAGS="`$APU_CONFIG --includes`"

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  APACHE_CFLAGS="$APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $APR_CFLAGS $APU_CFLAGS"

  # Test that we're trying to configure with apache 2.x

  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -le 2000000; then
    as_fn_error $? "You have enabled Apache 2 support while your server is Apache 1.3.  Please use the appropriate switch --with-apxs (without the 2)" "$LINENO" 5
  elif test "$APACHE_VERSION" -lt 2000044; then
    as_fn_error $? "Please note that Apache version >= 2.0.44 is required" "$LINENO" 5
  fi

  APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
  if test -z `$APXS -q SYSCONFDIR`; then
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -i -n php5"
  else
    APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                       -i -a -n php5"
  fi

  case $host_alias in
  *aix*)
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"

  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2handler"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2handler
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2handler"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2handler"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  *darwin*)
                    if test -x "$APR_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APR_CONFIG --ldflags --link-ld --libs`"
    fi
    if test -x "$APU_CONFIG"; then
        MH_BUNDLE_FLAGS="`$APU_CONFIG --ldflags --link-ld --libs` $MH_BUNDLE_FLAGS"
    fi
    MH_BUNDLE_FLAGS="-bundle -bundle_loader $APXS_HTTPD $MH_BUNDLE_FLAGS"

  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"


  if test "bundle" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2handler"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2handler
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2handler"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2handler"


    case "bundle" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    SAPI_SHARED=libs/libphp5.so
    INSTALL_IT="$INSTALL_IT $SAPI_SHARED"
    ;;
  *beos*)
    if test -f _APP_; then `rm _APP_`; fi
    `ln -s $APXS_BINDIR/httpd _APP_`
    EXTRA_LIBS="$EXTRA_LIBS _APP_"

  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2handler"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2handler
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2handler"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2handler"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  *)

  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache2handler"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache2handler
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache2handler"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache2handler"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_php5.c sapi_apache2.c apache_config.c php_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  esac

  if test "$APACHE_VERSION" -lt 2004001; then
    APXS_MPM=`$APXS -q MPM_NAME`
    if test "$APXS_MPM" != "prefork" && test "$APXS_MPM" != "peruser" && test "$APXS_MPM" != "itk"; then

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi

    fi
  else
    APACHE_THREADED_MPM=`$APXS_HTTPD -V | grep 'threaded:.*yes'`
    if test -n "$APACHE_THREADED_MPM"; then

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi

    fi
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi





php_with_apache_hooks=no



# Check whether --with-apache-hooks was given.
if test "${with_apache_hooks+set}" = set; then :
  withval=$with_apache_hooks; PHP_APACHE_HOOKS=$withval
else

  PHP_APACHE_HOOKS=no


fi


ext_output=$PHP_APACHE_HOOKS





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Apache 1.x (hooks) module support via DSO through APXS" >&5
$as_echo_n "checking for Apache 1.x (hooks) module support via DSO through APXS... " >&6; }

if test "$PHP_APACHE_HOOKS" != "no"; then
  if test "$PHP_APACHE_HOOKS" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then #SUSE 6.x
      APXS=/usr/sbin/apxs
    fi
  else

  if test -z "$PHP_APACHE_HOOKS" || echo "$PHP_APACHE_HOOKS" | grep '^/' >/dev/null ; then
    APXS=$PHP_APACHE_HOOKS
  else

    ep_dir=`echo $PHP_APACHE_HOOKS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    APXS="$ep_realdir"/`basename "$PHP_APACHE_HOOKS"`
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sorry, I was not able to successfully run APXS.  Possible reasons:" >&5
$as_echo "Sorry, I was not able to successfully run APXS.  Possible reasons:" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 1.  Perl is not installed;" >&5
$as_echo "1.  Perl is not installed;" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.  Apache was not compiled with DSO support (--enable-module=so);" >&5
$as_echo "2.  Apache was not compiled with DSO support (--enable-module=so);" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" >&5
$as_echo "3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: The output of $APXS follows" >&5
$as_echo "The output of $APXS follows" >&6; }
    $APXS -q CFLAGS
    as_fn_error $? "Aborting" "$LINENO" 5
  fi

  APXS_LDFLAGS="@SYBASE_LFLAGS@ @SYBASE_LIBS@ @SYBASE_CT_LFLAGS@ @SYBASE_CT_LIBS@"
  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APACHE_INCLUDE=-I$APXS_INCLUDEDIR

  # Test that we're trying to configure with apache 1.x

  ac_output=`$APXS_HTTPD -v 2>&1 | grep version | $SED -e 's/Oracle-HTTP-//'`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -ge 2000000; then
    as_fn_error $? "You have enabled Apache 1.3 support while your server is Apache 2.  Please use the appropriate switch --with-apxs2" "$LINENO" 5
  fi

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  case $host_alias in
  *aix*)
    APXS_LIBEXECDIR=`$APXS -q LIBEXECDIR`
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    PHP_AIX_LDFLAGS="-Wl,-brtl"
    build_type=shared
    ;;
  *darwin*)
    MH_BUNDLE_FLAGS="-dynamic -twolevel_namespace -bundle -bundle_loader $APXS_HTTPD"

  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    SAPI_SHARED=libs/libphp5.so
    build_type=bundle
    ;;
  *)
    build_type=shared
    ;;
  esac


  if test "$build_type" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache_hooks"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache_hooks
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache_hooks"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache_hooks"


    case "$build_type" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  # Test whether apxs support -S option
  $APXS -q -S CFLAGS="$APXS_CFLAGS" CFLAGS >/dev/null 2>&1

  if test "$?" != "0"; then
    APACHE_HOOKS_INSTALL="$APXS -i -a -n php5 $SAPI_SHARED" # Old apxs does not have -S option
  else
    APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
    if test -z `$APXS -q SYSCONFDIR`; then
      APACHE_HOOKS_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -i -n php5 $SAPI_SHARED"
    else
      APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
      APACHE_HOOKS_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                      \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                             -i -a -n php5 $SAPI_SHARED"
    fi
  fi

  if test -z "`$APXS -q LD_SHLIB`" || test "`$APXS -q LIBEXECDIR`" = "modules"; then
    PHP_APXS_BROKEN=yes
  fi
  STRONGHOLD=

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h


$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h


$as_echo "#define HAVE_APACHE_HOOKS 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


php_with_apache_hooks_static=no



# Check whether --with-apache-hooks-static was given.
if test "${with_apache_hooks_static+set}" = set; then :
  withval=$with_apache_hooks_static; PHP_APACHE_HOOKS_STATIC=$withval
else

  PHP_APACHE_HOOKS_STATIC=no


fi


ext_output=$PHP_APACHE_HOOKS_STATIC





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Apache 1.x (hooks) module support" >&5
$as_echo_n "checking for Apache 1.x (hooks) module support... " >&6; }

if test "$PHP_SAPI" != "apache" && test "$PHP_SAPI" != "apache_hooks" && test "$PHP_APACHE_HOOKS_STATIC" != "no"; then

  if test "$PHP_APACHE_HOOKS_STATIC" = "yes"; then
    # Apache's default directory
    PHP_APACHE_HOOKS_STATIC=/usr/local/apache
  fi

  APACHE_HOOKS_INSTALL_FILES="\$(srcdir)/sapi/apache_hooks/mod_php5.* sapi/apache_hooks/libphp5.module"


$as_echo "#define HAVE_APACHE 1" >>confdefs.h

  APACHE_HOOKS_MODULE=yes

  if test -z "$PHP_APACHE_HOOKS_STATIC" || echo "$PHP_APACHE_HOOKS_STATIC" | grep '^/' >/dev/null ; then
    PHP_APACHE_HOOKS_STATIC=$PHP_APACHE_HOOKS_STATIC
  else

    ep_dir=`echo $PHP_APACHE_HOOKS_STATIC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    PHP_APACHE_HOOKS_STATIC="$ep_realdir"/`basename "$PHP_APACHE_HOOKS_STATIC"`
  fi

  # For Apache 1.2.x
  if test -f $PHP_APACHE_HOOKS_STATIC/src/httpd.h; then
    APACHE_INCLUDE=-I$PHP_APACHE_HOOKS_STATIC/src
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/src

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache_hooks"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache_hooks
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache_hooks"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache_hooks"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET"
    PHP_LIBS="-L. -lphp3"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - Apache 1.2.x" >&5
$as_echo "yes - Apache 1.2.x" >&6; }
    STRONGHOLD=
    if test -f $PHP_APACHE_HOOKS_STATIC/src/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
  # For Apache 2.0.x
  elif test -f $PHP_APACHE_HOOKS_STATIC/include/httpd.h && test -f $PHP_APACHE_HOOKS_STATIC/srclib/apr/include/apr_general.h ; then
    as_fn_error $? "Use --with-apxs2 with Apache 2.x!" "$LINENO" 5
  # For Apache 1.3.x
  elif test -f $PHP_APACHE_HOOKS_STATIC/src/main/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE_HOOKS_STATIC/src/main -I$PHP_APACHE_HOOKS_STATIC/src/os/unix -I$PHP_APACHE_HOOKS_STATIC/src/ap"
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache_hooks"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache_hooks
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache_hooks"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache_hooks"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache_hooks/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache_hooks/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - Apache 1.3.x" >&5
$as_echo "yes - Apache 1.3.x" >&6; }
    STRONGHOLD=
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_compat.h; then

$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h

      if test ! -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config_auto.h; then
        as_fn_error $? "Please run Apache\'s configure or src/Configure program once and try again" "$LINENO" 5
      fi
    elif test -f $PHP_APACHE_HOOKS_STATIC/src/include/compat.h; then

$as_echo "#define HAVE_OLD_COMPAT_H 1" >>confdefs.h

    fi
  # Also for Apache 1.3.x
  elif test -f $PHP_APACHE_HOOKS_STATIC/src/include/httpd.h; then
    APACHE_HAS_REGEX=1
    APACHE_INCLUDE="-I$PHP_APACHE_HOOKS_STATIC/src/include -I$PHP_APACHE_HOOKS_STATIC/src/os/unix"
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/src/modules/php5
    if test ! -d $APACHE_TARGET; then
      mkdir $APACHE_TARGET
    fi

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache_hooks"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache_hooks
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache_hooks"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache_hooks"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache_hooks/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache_hooks/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - Apache 1.3.x" >&5
$as_echo "yes - Apache 1.3.x" >&6; }
    STRONGHOLD=
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
    if test -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_compat.h; then

$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h

      if test ! -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config_auto.h; then
        as_fn_error $? "Please run Apache\'s configure or src/Configure program once and try again" "$LINENO" 5
      fi
    elif test -f $PHP_APACHE_HOOKS_STATIC/src/include/compat.h; then

$as_echo "#define HAVE_OLD_COMPAT_H 1" >>confdefs.h

    fi
  # For StrongHold 2.2
  elif test -f $PHP_APACHE_HOOKS_STATIC/apache/httpd.h; then
    APACHE_INCLUDE="-I$PHP_APACHE_HOOKS_STATIC/apache -I$PHP_APACHE_HOOKS_STATIC/ssl/include"
    APACHE_TARGET=$PHP_APACHE_HOOKS_STATIC/apache

  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES apache_hooks"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=apache_hooks
  fi



    BUILD_DIR="$BUILD_DIR sapi/apache_hooks"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS apache_hooks"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/apache_hooks in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache_hooks"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache_hooks/"; ac_bdir="sapi/apache_hooks/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php5.c php_apache.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    PHP_LIBS="-Lmodules/php5 -L../modules/php5 -L../../modules/php5 -lmodphp5"
    APACHE_HOOKS_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp5.a; cp $APACHE_HOOKS_INSTALL_FILES $APACHE_TARGET"
    STRONGHOLD=-DSTRONGHOLD=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - StrongHold" >&5
$as_echo "yes - StrongHold" >&6; }
    if test -f $PHP_APACHE_HOOKS_STATIC/apache/ap_config.h; then

$as_echo "#define HAVE_AP_CONFIG_H 1" >>confdefs.h

    fi
    if test -f $PHP_APACHE_HOOKS_STATIC/src/ap_compat.h; then

$as_echo "#define HAVE_AP_COMPAT_H 1" >>confdefs.h

      if test ! -f $PHP_APACHE_HOOKS_STATIC/src/include/ap_config_auto.h; then
        as_fn_error $? "Please run Apache\'s configure or src/Configure program once and try again" "$LINENO" 5
      fi
    elif test -f $PHP_APACHE_HOOKS_STATIC/src/compat.h; then

$as_echo "#define HAVE_OLD_COMPAT_H 1" >>confdefs.h

    fi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    as_fn_error $? "Invalid Apache directory - unable to find httpd.h under $PHP_APACHE_HOOKS_STATIC" "$LINENO" 5
  fi
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

# compatibility
if test -z "$enable_mod_charset" && test "$with_mod_charset"; then
  enable_mod_charset=$with_mod_charset
fi


php_enable_mod_charset=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable Apache charset compatibility option" >&5
$as_echo_n "checking whether to enable Apache charset compatibility option... " >&6; }
# Check whether --enable-mod-charset was given.
if test "${enable_mod_charset+set}" = set; then :
  enableval=$enable_mod_charset; PHP_MOD_CHARSET=$enableval
else

  PHP_MOD_CHARSET=no


fi


ext_output=$PHP_MOD_CHARSET
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MOD_CHARSET" = "yes"; then

$as_echo "#define USE_TRANSFER_TABLES 1" >>confdefs.h

fi

if test "$APACHE_HOOKS_MODULE" = "yes"; then

  if test -n "$GCC"; then

  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC supports -rdynamic" >&5
$as_echo_n "checking whether $CC supports -rdynamic... " >&6; }
if ${ac_cv_gcc_arg_rdynamic+:} false; then :
  $as_echo_n "(cached) " >&6
else

  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gcc_arg_rdynamic" >&5
$as_echo "$ac_cv_gcc_arg_rdynamic" >&6; }
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :

  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  $php_shtool mkdir -p sapi/apache_hooks

  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/apache_hooks/libphp5.module"

fi

if test -n "$APACHE_HOOKS_INSTALL"; then
  if test "x$APXS" != "x" -a "`uname -sv`" = "AIX 4" -a "$GCC" != "yes"; then
    APXS_EXP=-bE:sapi/apache_hooks/mod_php5.exp
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for member fd in BUFF *" >&5
$as_echo_n "checking for member fd in BUFF *... " >&6; }
if ${ac_cv_php_fd_in_buff+:} false; then :
  $as_echo_n "(cached) " >&6
else

  save=$CPPFLAGS
  if test -n "$APXS_INCLUDEDIR"; then
    CPPFLAGS="$CPPFLAGS -I$APXS_INCLUDEDIR"
  else
    CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
  fi
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <httpd.h>
int
main ()
{
conn_rec *c; int fd = c->client->fd;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    ac_cv_php_fd_in_buff=yes
else
  ac_cv_php_fd_in_buff=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  CPPFLAGS=$save

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_fd_in_buff" >&5
$as_echo "$ac_cv_php_fd_in_buff" >&6; }
if test "$ac_cv_php_fd_in_buff" = "yes"; then

$as_echo "#define PHP_APACHE_HAVE_CLIENT_FD 1" >>confdefs.h

fi

  INSTALL_IT=$APACHE_HOOKS_INSTALL


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_EXP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INCLUDE"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_LDFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_HOOKS_INSTALL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST STRONGHOLD"

fi



RESULT=no

php_with_caudium=no



# Check whether --with-caudium was given.
if test "${with_caudium+set}" = set; then :
  withval=$with_caudium; PHP_CAUDIUM=$withval
else

  PHP_CAUDIUM=no


fi


ext_output=$PHP_CAUDIUM





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Caudium support" >&5
$as_echo_n "checking for Caudium support... " >&6; }

if test "$PHP_CAUDIUM" != "no"; then
  if test "$prefix" = "NONE"; then CPREF=/usr/local/; fi
  if test ! -d $PHP_CAUDIUM ; then
    if test "$prefix" = "NONE"; then
      PHP_CAUDIUM=/usr/local/caudium/server/
    else
      PHP_CAUDIUM=$prefix/caudium/server/
    fi
  fi
  if test -f $PHP_CAUDIUM/bin/caudium; then
    PIKE=$PHP_CAUDIUM/bin/caudium
  elif test -f $PHP_CAUDIUM/bin/pike; then
    PIKE=$PHP_CAUDIUM/bin/pike
  else
    as_fn_error $? "Could not find a pike in $PHP_CAUDIUM/bin/" "$LINENO" 5
  fi
  if $PIKE -e 'float v; int rel;sscanf(version(), "Pike v%f release %d", v, rel);v += rel/10000.0; if(v < 7.0268) exit(1); exit(0);'; then
    PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,' `
    if test -z "$PIKE_INCLUDE_DIR" || test -z "$PIKE_MODULE_DIR"; then
      as_fn_error $? "Failed to figure out Pike module and include directories" "$LINENO" 5
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
    PIKE=`echo $PIKE | pike -e 'int tries=100;
       string orig,pike=Stdio.File("stdin")->read()-"\n";
       orig=pike;
       if(search(orig, "/"))
         orig = combine_path(getcwd(), orig);
       while(!catch(pike=readlink(pike)) && tries--)
         ;
       write(combine_path(dirname(orig), pike)); '`

  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then

  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_INCLUDE_DIR
  else

    ep_dir=`echo $PIKE_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PIKE_INCLUDE_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    if test "$prefix" != "NONE"; then
      PIKE_C_INCLUDE=$prefix/include/`basename $PIKE`
    else
      PIKE_C_INCLUDE=/usr/local/include/`basename $PIKE`
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C includes in $PIKE_C_INCLUDE" >&5
$as_echo_n "checking for C includes in $PIKE_C_INCLUDE... " >&6; }
    if test -f $PIKE_C_INCLUDE/version.h; then
      PIKE_TEST_VER=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`
      ###### VERSION MATCH CHECK #######
      PMAJOR="^#define PIKE_MAJOR_VERSION"
      PMINOR="^#define PIKE_MINOR_VERSION"
      PBUILD="^#define PIKE_BUILD_VERSION"

      PIKE_CMAJOR_VERSION=0
      PIKE_CMINOR_VERSION=0
      PIKE_CBUILD_VERSION=0

      PIKE_CMAJOR_VERSION=`grep "$PMAJOR" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
      if test -z "$PIKE_CMAJOR_VERSION"; then
        if test -n "`grep f_version $PIKE_C_INCLUDE/version.h`"; then
          PIKE_CMAJOR_VERSION=6
        fi
      else
        PIKE_CMINOR_VERSION=`grep "$PMINOR" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
        PIKE_CBUILD_VERSION=`grep "$PBUILD" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
      fi

      if test "$PIKE_TEST_VER" = "${PIKE_CMAJOR_VERSION}.${PIKE_CMINOR_VERSION}.${PIKE_CBUILD_VERSION}"; then

  if test "$PIKE_C_INCLUDE" != "/usr/include"; then

  if test -z "$PIKE_C_INCLUDE" || echo "$PIKE_C_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_C_INCLUDE
  else

    ep_dir=`echo $PIKE_C_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PIKE_C_INCLUDE"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

        PIKE_INCLUDE_DIR="$PIKE_INCLUDE_DIR, $PIKE_C_INCLUDE"
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found" >&5
$as_echo "found" >&6; }
      else
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: version mismatch" >&5
$as_echo "version mismatch" >&6; }
      fi
    else
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    fi
  else
    as_fn_error $? "Caudium PHP5 requires Pike 7.0 or newer" "$LINENO" 5
  fi
  PIKE_VERSION=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`

$as_echo "#define HAVE_CAUDIUM 1" >>confdefs.h


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES caudium"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=caudium
  fi



    BUILD_DIR="$BUILD_DIR sapi/caudium"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS caudium"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/caudium in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/caudium"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/caudium/"; ac_bdir="sapi/caudium/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in caudium.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_CAUDIUM/lib/$PIKE_VERSION/PHP5.so"
  RESULT="  *** Pike binary used:         $PIKE
  *** Pike include dir(s) used: $PIKE_INCLUDE_DIR
  *** Pike version:             $PIKE_VERSION"

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $RESULT" >&5
$as_echo "$RESULT" >&6; }




php_enable_cli=yes


# Check whether --enable-cli was given.
if test "${enable_cli+set}" = set; then :
  enableval=$enable_cli; PHP_CLI=$enableval
else

  PHP_CLI=yes


fi


ext_output=$PHP_CLI





for ac_func in setproctitle
do :
  ac_fn_c_check_func "$LINENO" "setproctitle" "ac_cv_func_setproctitle"
if test "x$ac_cv_func_setproctitle" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SETPROCTITLE 1
_ACEOF

fi
done


for ac_header in sys/pstat.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "sys/pstat.h" "ac_cv_header_sys_pstat_h" "$ac_includes_default"
if test "x$ac_cv_header_sys_pstat_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SYS_PSTAT_H 1
_ACEOF

fi

done


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for PS_STRINGS" >&5
$as_echo_n "checking for PS_STRINGS... " >&6; }
if ${cli_cv_var_PS_STRINGS+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <machine/vmparam.h>
#include <sys/exec.h>

int
main ()
{
PS_STRINGS->ps_nargvstr = 1;
PS_STRINGS->ps_argvstr = "foo";
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  cli_cv_var_PS_STRINGS=yes
else
  cli_cv_var_PS_STRINGS=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cli_cv_var_PS_STRINGS" >&5
$as_echo "$cli_cv_var_PS_STRINGS" >&6; }
if test "$cli_cv_var_PS_STRINGS" = yes ; then

$as_echo "#define HAVE_PS_STRINGS /**/" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for CLI build" >&5
$as_echo_n "checking for CLI build... " >&6; }
if test "$PHP_CLI" != "no"; then

  src=$abs_srcdir/sapi/cli/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


    SAPI_CLI_PATH=sapi/cli/php


  if test "program" = "program"; then
    PHP_BINARIES="$PHP_BINARIES cli"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=cli
  fi



    BUILD_DIR="$BUILD_DIR sapi/cli"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS cli"



  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

    install_binaries="install-binaries"
    install_binary_targets="$install_binary_targets install-cli"

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_CLI_OBJS"


  case sapi/cli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/cli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/cli/"; ac_bdir="sapi/cli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_cli.c php_http_parser.c php_cli_server.c ps_title.c php_cli_process_title.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  case $host_alias in
  *aix*)
    if test "$php_sapi_module" = "shared"; then
      BUILD_CLI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_CLI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/.libs\/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    else
      BUILD_CLI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_CLI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    fi
    ;;
  *darwin*)
    BUILD_CLI="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_BINARY_OBJS:.lo=.o) \$(PHP_CLI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  *netware*)
    BUILD_CLI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_BINARY_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -Lnetware -lphp5lib -o \$(SAPI_CLI_PATH)"
    ;;
  *)
    BUILD_CLI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  esac

    PHP_EXECUTABLE="\$(top_builddir)/\$(SAPI_CLI_PATH)"

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_EXECUTABLE"



  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_CLI_PATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_CLI"



  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/cli/php.1"




    for header_file in sapi/cli/cli.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_CLI" >&5
$as_echo "$PHP_CLI" >&6; }



php_with_continuity=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Continuity support" >&5
$as_echo_n "checking for Continuity support... " >&6; }

# Check whether --with-continuity was given.
if test "${with_continuity+set}" = set; then :
  withval=$with_continuity; PHP_CONTINUITY=$withval
else

  PHP_CONTINUITY=no


fi


ext_output=$PHP_CONTINUITY
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_CONTINUITY" != "no"; then
  if test ! -d $PHP_CONTINUITY; then
    as_fn_error $? "Please specify the path to the root of your Continuity server using --with-continuity=DIR" "$LINENO" 5
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Continuity include files" >&5
$as_echo_n "checking for Continuity include files... " >&6; }
  if test -d $PHP_CONTINUITY/include ; then
    CAPI_INCLUDE=$PHP_CONTINUITY/include
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Continuity Binary Distribution" >&5
$as_echo "Continuity Binary Distribution" >&6; }
  else
    as_fn_error $? "Cannot find your CAPI include files in either DIR/src or DIR/include" "$LINENO" 5
  fi


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES continuity"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=continuity
  fi



    BUILD_DIR="$BUILD_DIR sapi/continuity"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS continuity"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/continuity in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/continuity"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/continuity/"; ac_bdir="sapi/continuity/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in capi.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  if test "$CAPI_INCLUDE" != "/usr/include"; then

  if test -z "$CAPI_INCLUDE" || echo "$CAPI_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$CAPI_INCLUDE
  else

    ep_dir=`echo $CAPI_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$CAPI_INCLUDE"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


$as_echo "#define HAVE_CONTINUITY 1" >>confdefs.h

  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_CONTINUITY/lib/"
fi




php_enable_embed=no


# Check whether --enable-embed was given.
if test "${enable_embed+set}" = set; then :
  enableval=$enable_embed; PHP_EMBED=$enableval
else

  PHP_EMBED=no


fi


ext_output=$PHP_EMBED





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for embedded SAPI library support" >&5
$as_echo_n "checking for embedded SAPI library support... " >&6; }

if test "$PHP_EMBED" != "no"; then
  case "$PHP_EMBED" in
    yes|shared)
      PHP_EMBED_TYPE=shared
      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)\$(prefix)/lib"
      ;;
    static)
      PHP_EMBED_TYPE=static
      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0644 $SAPI_STATIC \$(INSTALL_ROOT)\$(prefix)/lib"
      ;;
    *)
      PHP_EMBED_TYPE=no
      ;;
  esac
  if test "$PHP_EMBED_TYPE" != "no"; then

  if test "$PHP_EMBED_TYPE" = "program"; then
    PHP_BINARIES="$PHP_BINARIES embed"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=embed
  fi



    BUILD_DIR="$BUILD_DIR sapi/embed"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS embed"


    case "$PHP_EMBED_TYPE" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/embed in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/embed"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/embed/"; ac_bdir="sapi/embed/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_embed.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done






    for header_file in sapi/embed/php_embed.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_EMBED_TYPE" >&5
$as_echo "$PHP_EMBED_TYPE" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi




php_enable_fpm=no


# Check whether --enable-fpm was given.
if test "${enable_fpm+set}" = set; then :
  enableval=$enable_fpm; PHP_FPM=$enableval
else

  PHP_FPM=no


fi


ext_output=$PHP_FPM


































{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for FPM build" >&5
$as_echo_n "checking for FPM build... " >&6; }
if test "$PHP_FPM" != "no"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_FPM" >&5
$as_echo "$PHP_FPM" >&6; }


  for ac_func in setenv clearenv setproctitle
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing socket" >&5
$as_echo_n "checking for library containing socket... " >&6; }
if ${ac_cv_search_socket+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_func_search_save_LIBS=$LIBS
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char socket ();
int
main ()
{
return socket ();
  ;
  return 0;
}
_ACEOF
for ac_lib in '' socket; do
  if test -z "$ac_lib"; then
    ac_res="none required"
  else
    ac_res=-l$ac_lib
    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
  fi
  if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_search_socket=$ac_res
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext
  if ${ac_cv_search_socket+:} false; then :
  break
fi
done
if ${ac_cv_search_socket+:} false; then :

else
  ac_cv_search_socket=no
fi
rm conftest.$ac_ext
LIBS=$ac_func_search_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_socket" >&5
$as_echo "$ac_cv_search_socket" >&6; }
ac_res=$ac_cv_search_socket
if test "$ac_res" != no; then :
  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing inet_addr" >&5
$as_echo_n "checking for library containing inet_addr... " >&6; }
if ${ac_cv_search_inet_addr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_func_search_save_LIBS=$LIBS
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char inet_addr ();
int
main ()
{
return inet_addr ();
  ;
  return 0;
}
_ACEOF
for ac_lib in '' nsl; do
  if test -z "$ac_lib"; then
    ac_res="none required"
  else
    ac_res=-l$ac_lib
    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
  fi
  if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_search_inet_addr=$ac_res
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext
  if ${ac_cv_search_inet_addr+:} false; then :
  break
fi
done
if ${ac_cv_search_inet_addr+:} false; then :

else
  ac_cv_search_inet_addr=no
fi
rm conftest.$ac_ext
LIBS=$ac_func_search_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_inet_addr" >&5
$as_echo "$ac_cv_search_inet_addr" >&6; }
ac_res=$ac_cv_search_inet_addr
if test "$ac_res" != no; then :
  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"

fi


  for ac_header in errno.h fcntl.h stdio.h stdlib.h unistd.h sys/uio.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

  for ac_header in sys/select.h sys/socket.h sys/time.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

  for ac_header in arpa/inet.h netinet/in.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

  for ac_header in sysexits.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "sysexits.h" "ac_cv_header_sysexits_h" "$ac_includes_default"
if test "x$ac_cv_header_sysexits_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SYSEXITS_H 1
_ACEOF

fi

done



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prctl" >&5
$as_echo_n "checking for prctl... " >&6; }

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <sys/prctl.h>
int
main ()
{
prctl(0, 0, 0, 0, 0);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_PRCTL 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


  have_clock_gettime=no

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for clock_gettime" >&5
$as_echo_n "checking for clock_gettime... " >&6; }

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <time.h>
int
main ()
{
struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

    have_clock_gettime=yes
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext

  if test "$have_clock_gettime" = "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for clock_gettime in -lrt" >&5
$as_echo_n "checking for clock_gettime in -lrt... " >&6; }

    SAVED_LIBS="$LIBS"
    LIBS="$LIBS -lrt"

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <time.h>
int
main ()
{
struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

      have_clock_gettime=yes
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      LIBS="$SAVED_LIBS"
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  fi

  if test "$have_clock_gettime" = "yes"; then

$as_echo "#define HAVE_CLOCK_GETTIME 1" >>confdefs.h

  fi

  have_clock_get_time=no

  if test "$have_clock_gettime" = "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for clock_get_time" >&5
$as_echo_n "checking for clock_get_time... " >&6; }

    if test "$cross_compiling" = yes; then :
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "cannot run test program while cross compiling
See \`config.log' for more details" "$LINENO" 5; }
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <mach/mach.h>
      #include <mach/clock.h>
      #include <mach/mach_error.h>

      int main()
      {
        kern_return_t ret; clock_serv_t aClock; mach_timespec_t aTime;
        ret = host_get_clock_service(mach_host_self(), REALTIME_CLOCK, &aClock);

        if (ret != KERN_SUCCESS) {
          return 1;
        }

        ret = clock_get_time(aClock, &aTime);
        if (ret != KERN_SUCCESS) {
          return 2;
        }

        return 0;
      }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      have_clock_get_time=yes
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  fi

  if test "$have_clock_get_time" = "yes"; then

$as_echo "#define HAVE_CLOCK_GET_TIME 1" >>confdefs.h

  fi


  have_ptrace=no
  have_broken_ptrace=no

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ptrace" >&5
$as_echo_n "checking for ptrace... " >&6; }

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

    #include <sys/types.h>
    #include <sys/ptrace.h>
int
main ()
{
ptrace(0, 0, (void *) 0, 0);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    have_ptrace=yes
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

  if test "$have_ptrace" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ptrace works" >&5
$as_echo_n "checking whether ptrace works... " >&6; }

    if test "$cross_compiling" = yes; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: skipped (cross compiling)" >&5
$as_echo "skipped (cross compiling)" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

      #include <unistd.h>
      #include <signal.h>
      #include <sys/wait.h>
      #include <sys/types.h>
      #include <sys/ptrace.h>
      #include <errno.h>

      #if !defined(PTRACE_ATTACH) && defined(PT_ATTACH)
      #define PTRACE_ATTACH PT_ATTACH
      #endif

      #if !defined(PTRACE_DETACH) && defined(PT_DETACH)
      #define PTRACE_DETACH PT_DETACH
      #endif

      #if !defined(PTRACE_PEEKDATA) && defined(PT_READ_D)
      #define PTRACE_PEEKDATA PT_READ_D
      #endif

      int main()
      {
        long v1 = (unsigned int) -1; /* copy will fail if sizeof(long) == 8 and we've got "int ptrace()" */
        long v2;
        pid_t child;
        int status;

        if ( (child = fork()) ) { /* parent */
          int ret = 0;

          if (0 > ptrace(PTRACE_ATTACH, child, 0, 0)) {
            return 2;
          }

          waitpid(child, &status, 0);

      #ifdef PT_IO
          struct ptrace_io_desc ptio = {
            .piod_op = PIOD_READ_D,
            .piod_offs = &v1,
            .piod_addr = &v2,
            .piod_len = sizeof(v1)
          };

          if (0 > ptrace(PT_IO, child, (void *) &ptio, 0)) {
            ret = 3;
          }
      #else
          errno = 0;

          v2 = ptrace(PTRACE_PEEKDATA, child, (void *) &v1, 0);

          if (errno) {
            ret = 4;
          }
      #endif
          ptrace(PTRACE_DETACH, child, (void *) 1, 0);

          kill(child, SIGKILL);

          return ret ? ret : (v1 != v2);
        }
        else { /* child */
          sleep(10);
          return 0;
        }
      }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      have_ptrace=no
      have_broken_ptrace=yes
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  fi

  if test "$have_ptrace" = "yes"; then

$as_echo "#define HAVE_PTRACE 1" >>confdefs.h

  fi

  have_mach_vm_read=no

  if test "$have_broken_ptrace" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mach_vm_read" >&5
$as_echo_n "checking for mach_vm_read... " >&6; }

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <mach/mach.h>
      #include <mach/mach_vm.h>

int
main ()
{

      mach_vm_read((vm_map_t)0, (mach_vm_address_t)0, (mach_vm_size_t)0, (vm_offset_t *)0, (mach_msg_type_number_t*)0);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

      have_mach_vm_read=yes
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi

  if test "$have_mach_vm_read" = "yes"; then

$as_echo "#define HAVE_MACH_VM_READ 1" >>confdefs.h

  fi

  proc_mem_file=""

  if test -r /proc/$$/mem ; then
    proc_mem_file="mem"
  else
    if test -r /proc/$$/as ; then
      proc_mem_file="as"
    fi
  fi

  if test -n "$proc_mem_file" ; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for proc mem file" >&5
$as_echo_n "checking for proc mem file... " >&6; }

    if test "$cross_compiling" = yes; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: skipped (cross compiling)" >&5
$as_echo "skipped (cross compiling)" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

      #define _GNU_SOURCE
      #define _FILE_OFFSET_BITS 64
      #include <stdint.h>
      #include <unistd.h>
      #include <sys/types.h>
      #include <sys/stat.h>
      #include <fcntl.h>
      #include <stdio.h>
      int main()
      {
        long v1 = (unsigned int) -1, v2 = 0;
        char buf[128];
        int fd;
        sprintf(buf, "/proc/%d/$proc_mem_file", getpid());
        fd = open(buf, O_RDONLY);
        if (0 > fd) {
          return 1;
        }
        if (sizeof(long) != pread(fd, &v2, sizeof(long), (uintptr_t) &v1)) {
          close(fd);
          return 1;
        }
        close(fd);
        return v1 != v2;
      }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $proc_mem_file" >&5
$as_echo "$proc_mem_file" >&6; }

else

      proc_mem_file=""
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  fi

  if test -n "$proc_mem_file"; then

cat >>confdefs.h <<_ACEOF
#define PROC_MEM_FILE "$proc_mem_file"
_ACEOF

  fi

  fpm_trace_type=""

  if test "$have_ptrace" = "yes"; then
    fpm_trace_type=ptrace

  elif test -n "$proc_mem_file"; then
    fpm_trace_type=pread

  elif test "$have_mach_vm_read" = "yes" ; then
    fpm_trace_type=mach

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: FPM Trace - ptrace, pread, or mach: could not be found" >&5
$as_echo "$as_me: WARNING: FPM Trace - ptrace, pread, or mach: could not be found" >&2;}
  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if gcc supports __sync_bool_compare_and_swap" >&5
$as_echo_n "checking if gcc supports __sync_bool_compare_and_swap... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

    int variable = 1;
    return (__sync_bool_compare_and_swap(&variable, 1, 2)
           && __sync_add_and_fetch(&variable, 1)) ? 1 : 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_BUILTIN_ATOMIC 1" >>confdefs.h


else

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext


  have_lq=no

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for TCP_INFO" >&5
$as_echo_n "checking for TCP_INFO... " >&6; }

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <netinet/tcp.h>
int
main ()
{
struct tcp_info ti; int x = TCP_INFO;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    have_lq=tcp_info
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

  if test "$have_lq" = "tcp_info"; then

$as_echo "#define HAVE_LQ_TCP_INFO 1" >>confdefs.h

  fi

  if test "$have_lq" = "no" ; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SO_LISTENQLEN" >&5
$as_echo_n "checking for SO_LISTENQLEN... " >&6; }

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <sys/socket.h>
int
main ()
{
int x = SO_LISTENQLIMIT; int y = SO_LISTENQLEN;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

      have_lq=so_listenq
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

    if test "$have_lq" = "tcp_info"; then

$as_echo "#define HAVE_LQ_SO_LISTENQ 1" >>confdefs.h

    fi
  fi


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysconf" >&5
$as_echo_n "checking for sysconf... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <unistd.h>
int
main ()
{
sysconf(_SC_CLK_TCK);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_SYSCONF 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for times" >&5
$as_echo_n "checking for times... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <sys/times.h>
int
main ()
{
struct tms t; times(&t);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_TIMES 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for kqueue" >&5
$as_echo_n "checking for kqueue... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

		#include <sys/types.h>
		#include <sys/event.h>
		#include <sys/time.h>

int
main ()
{

		int kfd;
		struct kevent k;
		kfd = kqueue();
		/* 0 -> STDIN_FILENO */
		EV_SET(&k, 0, EVFILT_READ , EV_ADD | EV_CLEAR, 0, 0, NULL);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_KQUEUE 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for port framework" >&5
$as_echo_n "checking for port framework... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

		#include <port.h>

int
main ()
{

		int port;

		port = port_create();
		if (port < 0) {
			return 1;
		}

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_PORT 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for /dev/poll" >&5
$as_echo_n "checking for /dev/poll... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

		#include <stdio.h>
		#include <sys/devpoll.h>

int
main ()
{

		int n, dp;
		struct dvpoll dvp;
		dp = 0;
		dvp.dp_fds = NULL;
		dvp.dp_nfds = 0;
		dvp.dp_timeout = 0;
		n = ioctl(dp, DP_POLL, &dvp)

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_DEVPOLL 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for epoll" >&5
$as_echo_n "checking for epoll... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

		#include <sys/epoll.h>

int
main ()
{

		int epollfd;
		struct epoll_event e;

		epollfd = epoll_create(1);
		if (epollfd < 0) {
			return 1;
		}

		e.events = EPOLLIN | EPOLLET;
		e.data.fd = 0;

		if (epoll_ctl(epollfd, EPOLL_CTL_ADD, 0, &e) == -1) {
			return 1;
		}

		e.events = 0;
		if (epoll_wait(epollfd, &e, 1, 1) < 0) {
			return 1;
		}

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_EPOLL 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for poll" >&5
$as_echo_n "checking for poll... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

		#include <poll.h>

int
main ()
{

		struct pollfd fds[2];

		fds[0].fd = 0;
		fds[0].events = POLLIN;

		fds[1].fd = 0;
		fds[1].events = POLLIN;

		 poll(fds, 2, 1);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_POLL 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for select" >&5
$as_echo_n "checking for select... " >&6; }

	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

		/* According to POSIX.1-2001 */
		#include <sys/select.h>

		/* According to earlier standards */
		#include <sys/time.h>
		#include <sys/types.h>
		#include <unistd.h>

int
main ()
{

		fd_set fds;
		struct timeval t;
		t.tv_sec = 0;
		t.tv_usec = 42;
		FD_ZERO(&fds);
		/* 0 -> STDIN_FILENO */
		FD_SET(0, &fds);
		select(FD_SETSIZE, &fds, NULL, NULL, &t);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define HAVE_SELECT 1" >>confdefs.h

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext



php_with_fpm_user=nobody



# Check whether --with-fpm-user was given.
if test "${with_fpm_user+set}" = set; then :
  withval=$with_fpm_user; PHP_FPM_USER=$withval
else

  PHP_FPM_USER=nobody


fi


ext_output=$PHP_FPM_USER






php_with_fpm_group=nobody



# Check whether --with-fpm-group was given.
if test "${with_fpm_group+set}" = set; then :
  withval=$with_fpm_group; PHP_FPM_GROUP=$withval
else

  PHP_FPM_GROUP=nobody


fi


ext_output=$PHP_FPM_GROUP






php_with_fpm_systemd=no



# Check whether --with-fpm-systemd was given.
if test "${with_fpm_systemd+set}" = set; then :
  withval=$with_fpm_systemd; PHP_FPM_SYSTEMD=$withval
else

  PHP_FPM_SYSTEMD=no


fi


ext_output=$PHP_FPM_SYSTEMD





  if test "$PHP_FPM_SYSTEMD" != "no" ; then
    if test -z "$PKG_CONFIG"; then
      # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


    fi
    unset SYSTEMD_LIBS
    unset SYSTEMD_INCS

    if test -x "$PKG_CONFIG" && $PKG_CONFIG --exists libsystemd; then
            { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libsystemd" >&5
$as_echo_n "checking for libsystemd... " >&6; }
      SYSTEMD_LIBS=`$PKG_CONFIG --libs libsystemd`
      SYSTEMD_INCS=`$PKG_CONFIG --cflags-only-I libsystemd`
      SYSTEMD_VERS=`$PKG_CONFIG --modversion libsystemd`
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: version $SYSTEMD_VERS" >&5
$as_echo "version $SYSTEMD_VERS" >&6; }

    elif test -x "$PKG_CONFIG" && $PKG_CONFIG --exists libsystemd-daemon; then
            { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libsystemd-daemon" >&5
$as_echo_n "checking for libsystemd-daemon... " >&6; }
      SYSTEMD_LIBS=`$PKG_CONFIG --libs libsystemd-daemon`
      SYSTEMD_INCS=`$PKG_CONFIG --cflags-only-I libsystemd-daemon`
      SYSTEMD_VERS=`$PKG_CONFIG --modversion libsystemd-daemon`
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: version $SYSTEMD_VERS" >&5
$as_echo "version $SYSTEMD_VERS" >&6; }

    else
            { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sd_notify in -lsystemd-daemon" >&5
$as_echo_n "checking for sd_notify in -lsystemd-daemon... " >&6; }
if ${ac_cv_lib_systemd_daemon_sd_notify+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsystemd-daemon  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sd_notify ();
int
main ()
{
return sd_notify ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_systemd_daemon_sd_notify=yes
else
  ac_cv_lib_systemd_daemon_sd_notify=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_systemd_daemon_sd_notify" >&5
$as_echo "$ac_cv_lib_systemd_daemon_sd_notify" >&6; }
if test "x$ac_cv_lib_systemd_daemon_sd_notify" = xyes; then :
  SYSTEMD_LIBS="-lsystemd-daemon"
fi

    fi

    for ac_header in systemd/sd-daemon.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "systemd/sd-daemon.h" "ac_cv_header_systemd_sd_daemon_h" "$ac_includes_default"
if test "x$ac_cv_header_systemd_sd_daemon_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SYSTEMD_SD_DAEMON_H 1
_ACEOF
 HAVE_SD_DAEMON_H="yes"
else
  HAVE_SD_DAEMON_H="no"
fi

done

    if test $HAVE_SD_DAEMON_H = "no" || test -z "${SYSTEMD_LIBS}"; then
      as_fn_error $? "Your system does not support systemd." "$LINENO" 5
    else

$as_echo "#define HAVE_SYSTEMD 1" >>confdefs.h

      PHP_FPM_SD_FILES="fpm/fpm_systemd.c"

  for ac_i in $SYSTEMD_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        ="$ -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

    ;;
    esac
  done


  for ac_i in $SYSTEMD_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

      php_fpm_systemd=notify
    fi
  else
    php_fpm_systemd=simple
  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_systemd"




cat >>confdefs.h <<_ACEOF
#define PHP_FPM_SYSTEMD "$php_fpm_systemd"
_ACEOF


  if test -z "$PHP_FPM_USER" -o "$PHP_FPM_USER" = "yes" -o "$PHP_FPM_USER" = "no"; then
    php_fpm_user="nobody"
  else
    php_fpm_user="$PHP_FPM_USER"
  fi

  if test -z "$PHP_FPM_GROUP" -o "$PHP_FPM_GROUP" = "yes" -o "$PHP_FPM_GROUP" = "no"; then
    php_fpm_group="nobody"
  else
    php_fpm_group="$PHP_FPM_GROUP"
  fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_user"





  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_group"



  php_fpm_sysconfdir=`eval echo $sysconfdir`


  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_sysconfdir"



  php_fpm_localstatedir=`eval echo $localstatedir`


  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_localstatedir"



  php_fpm_prefix=`eval echo $prefix`


  PHP_VAR_SUBST="$PHP_VAR_SUBST php_fpm_prefix"





cat >>confdefs.h <<_ACEOF
#define PHP_FPM_USER "$php_fpm_user"
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_FPM_GROUP "$php_fpm_group"
_ACEOF




    BUILD_DIR="$BUILD_DIR sapi/fpm/fpm"




    BUILD_DIR="$BUILD_DIR sapi/fpm/fpm/events"



  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/fpm/php-fpm.conf sapi/fpm/init.d.php-fpm sapi/fpm/php-fpm.service sapi/fpm/php-fpm.8 sapi/fpm/status.html"


  src=$abs_srcdir/sapi/fpm/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  SAPI_FPM_PATH=sapi/fpm/php-fpm

  if test "$fpm_trace_type" && test -f "$abs_srcdir/sapi/fpm/fpm/fpm_trace_$fpm_trace_type.c"; then
    PHP_FPM_TRACE_FILES="fpm/fpm_trace.c fpm/fpm_trace_$fpm_trace_type.c"
  fi

  PHP_FPM_CFLAGS="-I$abs_srcdir/sapi/fpm"

  PHP_FPM_FILES="fpm/fastcgi.c \
    fpm/fpm.c \
    fpm/fpm_children.c \
    fpm/fpm_cleanup.c \
    fpm/fpm_clock.c \
    fpm/fpm_conf.c \
    fpm/fpm_env.c \
    fpm/fpm_events.c \
		fpm/fpm_log.c \
    fpm/fpm_main.c \
    fpm/fpm_php.c \
    fpm/fpm_php_trace.c \
    fpm/fpm_process_ctl.c \
    fpm/fpm_request.c \
    fpm/fpm_shm.c \
    fpm/fpm_scoreboard.c \
    fpm/fpm_signals.c \
    fpm/fpm_sockets.c \
    fpm/fpm_status.c \
    fpm/fpm_stdio.c \
    fpm/fpm_unix.c \
    fpm/fpm_worker_pool.c \
    fpm/zlog.c \
		fpm/events/select.c \
		fpm/events/poll.c \
		fpm/events/epoll.c \
		fpm/events/kqueue.c \
		fpm/events/devpoll.c \
		fpm/events/port.c \
  "


  if test "program" = "program"; then
    PHP_BINARIES="$PHP_BINARIES fpm"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=fpm
  fi



    BUILD_DIR="$BUILD_DIR sapi/fpm"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS fpm"



  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

    install_binaries="install-binaries"
    install_binary_targets="$install_binary_targets install-fpm"

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FPM_OBJS"


  case sapi/fpm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/fpm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/fpm/"; ac_bdir="sapi/fpm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_FPM_FILES $PHP_FPM_TRACE_FILES $PHP_FPM_SD_FILES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_FPM_OBJS="$PHP_FPM_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $PHP_FPM_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $PHP_FPM_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $PHP_FPM_CFLAGS $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $PHP_FPM_CFLAGS $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  case $host_alias in
      *aix*)
        BUILD_FPM="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_FPM_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_FPM_OBJS) \$(EXTRA_LIBS) \$(FPM_EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_FPM_PATH)"
        ;;
      *darwin*)
        BUILD_FPM="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_BINARY_OBJS:.lo=.o) \$(PHP_FPM_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(FPM_EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_FPM_PATH)"
      ;;
      *)
        BUILD_FPM="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_FPM_OBJS) \$(EXTRA_LIBS) \$(FPM_EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_FPM_PATH)"
      ;;
  esac


  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_FPM_PATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_FPM"


else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi



php_with_isapi=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Zeus ISAPI support" >&5
$as_echo_n "checking for Zeus ISAPI support... " >&6; }

# Check whether --with-isapi was given.
if test "${with_isapi+set}" = set; then :
  withval=$with_isapi; PHP_ISAPI=$withval
else

  PHP_ISAPI=no


fi


ext_output=$PHP_ISAPI
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_ISAPI" != "no"; then
  if test "$PHP_ISAPI" = "yes"; then
    ZEUSPATH=/usr/local/zeus # the default
  else
    ZEUSPATH=$PHP_ISAPI
  fi
  test -f "$ZEUSPATH/web/include/httpext.h" || as_fn_error $? "Unable to find httpext.h in $ZEUSPATH/web/include" "$LINENO" 5

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


$as_echo "#define WITH_ZEUS 1" >>confdefs.h


  if test "$ZEUSPATH/web/include" != "/usr/include"; then

  if test -z "$ZEUSPATH/web/include" || echo "$ZEUSPATH/web/include" | grep '^/' >/dev/null ; then
    ai_p=$ZEUSPATH/web/include
  else

    ep_dir=`echo $ZEUSPATH/web/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ZEUSPATH/web/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES isapi"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=isapi
  fi



    BUILD_DIR="$BUILD_DIR sapi/isapi"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS isapi"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/isapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/isapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/isapi/"; ac_bdir="sapi/isapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php5isapi.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$ZEUSPATH/web/bin/"
fi



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for LiteSpeed support" >&5
$as_echo_n "checking for LiteSpeed support... " >&6; }


php_with_litespeed=no



# Check whether --with-litespeed was given.
if test "${with_litespeed+set}" = set; then :
  withval=$with_litespeed; PHP_LITESPEED=$withval
else

  PHP_LITESPEED=no
  test "$PHP_ENABLE_ALL" && PHP_LITESPEED=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LITESPEED in
shared,*)
  PHP_LITESPEED=`echo "$PHP_LITESPEED"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LITESPEED=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








if test "$PHP_LITESPEED" != "no"; then

  src=$abs_srcdir/sapi/litespeed/Makefile.frag
  ac_srcdir=$abs_srcdir/sapi/litespeed
  ac_builddir=sapi/litespeed
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

  SAPI_LITESPEED_PATH=sapi/litespeed/php

  if test "program" = "program"; then
    PHP_BINARIES="$PHP_BINARIES litespeed"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=litespeed
  fi



    BUILD_DIR="$BUILD_DIR sapi/litespeed"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS litespeed"



  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

    install_binaries="install-binaries"
    install_binary_targets="$install_binary_targets install-litespeed"

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LITESPEED_OBJS"


  case sapi/litespeed in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/litespeed"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/litespeed/"; ac_bdir="sapi/litespeed/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in lsapi_main.c lsapilib.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_LITESPEED_OBJS="$PHP_LITESPEED_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre "" $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre "" $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre "" $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre "" $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  case $host_alias in
  *darwin*)
    BUILD_LITESPEED="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_BINARY_OBJS:.lo=.o) \$(PHP_LITESPEED_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_LITESPEED_PATH)"
    ;;
  *cygwin*)
    SAPI_LITESPEED_PATH=sapi/litespeed/php.exe
    BUILD_LITESPEED="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_LITESPEED_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_LITESPEED_PATH)"
    ;;
  *)
    BUILD_LITESPEED="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_LITESPEED_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_LITESPEED_PATH)"
    ;;
  esac


  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_LITESPEED_PATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_LITESPEED"

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_LITESPEED" >&5
$as_echo "$PHP_LITESPEED" >&6; }



php_with_milter=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Milter support" >&5
$as_echo_n "checking for Milter support... " >&6; }

# Check whether --with-milter was given.
if test "${with_milter+set}" = set; then :
  withval=$with_milter; PHP_MILTER=$withval
else

  PHP_MILTER=no


fi


ext_output=$PHP_MILTER
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MILTER" != "no"; then
  if test "$PHP_MILTER" = "yes"; then
    if test -f /usr/lib/libmilter.a ; then
      MILTERPATH=/usr/lib
    else
      if test -f /usr/lib/libmilter/libmilter.a ; then
        MILTERPATH=/usr/lib/libmilter
      else
        as_fn_error $? "Unable to find libmilter.a" "$LINENO" 5
      fi
    fi
  else
    MILTERPATH=$PHP_MILTER
  fi

  SAPI_MILTER_PATH=sapi/milter/php-milter

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


  src=$abs_srcdir/sapi/milter/Makefile.frag
  ac_srcdir=$abs_srcdir/sapi/milter
  ac_builddir=sapi/milter
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  if test "program" = "program"; then
    PHP_BINARIES="$PHP_BINARIES milter"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=milter
  fi



    BUILD_DIR="$BUILD_DIR sapi/milter"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS milter"



  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

    install_binaries="install-binaries"
    install_binary_targets="$install_binary_targets install-milter"

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MILTER_OBJS"


  case sapi/milter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/milter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/milter/"; ac_bdir="sapi/milter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_milter.c getopt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_MILTER_OBJS="$PHP_MILTER_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  if test -n "$MILTERPATH"; then

  if test "$MILTERPATH" != "/usr/$PHP_LIBDIR" && test "$MILTERPATH" != "/usr/lib"; then

  if test -z "$MILTERPATH" || echo "$MILTERPATH" | grep '^/' >/dev/null ; then
    ai_p=$MILTERPATH
  else

    ep_dir=`echo $MILTERPATH|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MILTERPATH"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case milter in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lmilter $LIBS"
   ;;
  esac




  BUILD_MILTER="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_MILTER_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_MILTER_PATH)"

  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_MILTER_PATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_MILTER"

fi



php_with_nsapi=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for NSAPI support" >&5
$as_echo_n "checking for NSAPI support... " >&6; }

# Check whether --with-nsapi was given.
if test "${with_nsapi+set}" = set; then :
  withval=$with_nsapi; PHP_NSAPI=$withval
else

  PHP_NSAPI=no


fi


ext_output=$PHP_NSAPI
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_NSAPI" != "no"; then
  if test ! -d $PHP_NSAPI/bin ; then
    as_fn_error $? "Please specify the path to the root of your Netscape/iPlanet/Sun Webserver using --with-nsapi=DIR" "$LINENO" 5
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for NSAPI include files" >&5
$as_echo_n "checking for NSAPI include files... " >&6; }
  if test -d $PHP_NSAPI/include ; then
    NSAPI_INC_DIR="$PHP_NSAPI/include"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Netscape 3.x / Sun 7.x style" >&5
$as_echo "Netscape 3.x / Sun 7.x style" >&6; }
    for ac_header in $NSAPI_INC_DIR/nsapi.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

    NSAPI_INCLUDE="-I$NSAPI_INC_DIR"
  fi
  if test -d $PHP_NSAPI/plugins/include ; then
    NSAPI_INC_DIR="$PHP_NSAPI/plugins/include"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: iPlanet 4.x / Sun 6.x style" >&5
$as_echo "iPlanet 4.x / Sun 6.x style" >&6; }
    for ac_header in $NSAPI_INC_DIR/nsapi.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

    NSAPI_INCLUDE="$NSAPI_INCLUDE -I$NSAPI_INC_DIR"
  fi
  if test -z "$NSAPI_INCLUDE"; then
    as_fn_error $? "Please check you have nsapi.h in either $PHP_NSAPI/include or $PHP_NSAPI/plugins/include" "$LINENO" 5
  fi


  for ac_i in $NSAPI_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


$as_echo "#define HAVE_NSAPI 1" >>confdefs.h


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES nsapi"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=nsapi
  fi



    BUILD_DIR="$BUILD_DIR sapi/nsapi"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS nsapi"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/nsapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/nsapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/nsapi/"; ac_bdir="sapi/nsapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in nsapi.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_NSAPI/bin/"
fi





php_with_phttpd=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for PHTTPD support" >&5
$as_echo_n "checking for PHTTPD support... " >&6; }

# Check whether --with-phttpd was given.
if test "${with_phttpd+set}" = set; then :
  withval=$with_phttpd; PHP_PHTTPD=$withval
else

  PHP_PHTTPD=no


fi


ext_output=$PHP_PHTTPD
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PHTTPD" != "no"; then
  if test ! -d $PHP_PHTTPD ; then
    as_fn_error $? "You did not specify a directory" "$LINENO" 5
  fi

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


  if test "$PHP_PHTTPD/include" != "/usr/include"; then

  if test -z "$PHP_PHTTPD/include" || echo "$PHP_PHTTPD/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PHTTPD/include
  else

    ep_dir=`echo $PHP_PHTTPD/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_PHTTPD/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


$as_echo "#define HAVE_PHTTPD 1" >>confdefs.h


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES phttpd"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=phttpd
  fi



    BUILD_DIR="$BUILD_DIR sapi/phttpd"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS phttpd"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/phttpd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/phttpd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/phttpd/"; ac_bdir="sapi/phttpd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in phttpd.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_PHTTPD/modules/"
fi




php_with_pi3web=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Pi3Web support" >&5
$as_echo_n "checking for Pi3Web support... " >&6; }

# Check whether --with-pi3web was given.
if test "${with_pi3web+set}" = set; then :
  withval=$with_pi3web; PHP_PI3WEB=$withval
else

  PHP_PI3WEB=no


fi


ext_output=$PHP_PI3WEB
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PI3WEB" != "no"; then
  if test "$PHP_PI3WEB" = "yes"; then
    PI3PATH=../.. # the default
  else
    PI3PATH=$PHP_PI3WEB
  fi
  test -f "$PI3PATH/PiAPI/PiAPI.h" || as_fn_error $? "Unable to find PiAPI.h in $PI3PATH/PiAPI" "$LINENO" 5

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


$as_echo "#define WITH_PI3WEB 1" >>confdefs.h


  if test "$PI3PATH/PiAPI" != "/usr/include"; then

  if test -z "$PI3PATH/PiAPI" || echo "$PI3PATH/PiAPI" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/PiAPI
  else

    ep_dir=`echo $PI3PATH/PiAPI|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PI3PATH/PiAPI"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$PI3PATH/Pi2API" != "/usr/include"; then

  if test -z "$PI3PATH/Pi2API" || echo "$PI3PATH/Pi2API" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/Pi2API
  else

    ep_dir=`echo $PI3PATH/Pi2API|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PI3PATH/Pi2API"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$PI3PATH/Pi3API" != "/usr/include"; then

  if test -z "$PI3PATH/Pi3API" || echo "$PI3PATH/Pi3API" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/Pi3API
  else

    ep_dir=`echo $PI3PATH/Pi3API|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PI3PATH/Pi3API"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$PI3PATH/PHP5" != "/usr/include"; then

  if test -z "$PI3PATH/PHP5" || echo "$PI3PATH/PHP5" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/PHP5
  else

    ep_dir=`echo $PI3PATH/PHP5|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PI3PATH/PHP5"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES pi3web"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=pi3web
  fi



    BUILD_DIR="$BUILD_DIR sapi/pi3web"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS pi3web"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/pi3web in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/pi3web"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/pi3web/"; ac_bdir="sapi/pi3web/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pi3web_sapi.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PI3PATH/bin/"
fi




php_with_roxen=no



# Check whether --with-roxen was given.
if test "${with_roxen+set}" = set; then :
  withval=$with_roxen; PHP_ROXEN=$withval
else

  PHP_ROXEN=no


fi


ext_output=$PHP_ROXEN






php_enable_roxen_zts=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether Roxen module is build using ZTS" >&5
$as_echo_n "checking whether Roxen module is build using ZTS... " >&6; }
# Check whether --enable-roxen-zts was given.
if test "${enable_roxen_zts+set}" = set; then :
  enableval=$enable_roxen_zts; PHP_ROXEN_ZTS=$enableval
else

  PHP_ROXEN_ZTS=no


fi


ext_output=$PHP_ROXEN_ZTS
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




RESULT=
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Roxen/Pike support" >&5
$as_echo_n "checking for Roxen/Pike support... " >&6; }
if test "$PHP_ROXEN" != "no"; then
  if test ! -d $PHP_ROXEN ; then
    as_fn_error $? "You did not specify a directory" "$LINENO" 5
  fi
  if test -f $PHP_ROXEN/bin/roxen; then
    PIKE=$PHP_ROXEN/bin/roxen
  elif test -f $PHP_ROXEN/bin/pike; then
    PIKE=$PHP_ROXEN/bin/pike
  else
    as_fn_error $? "Could not find a pike in $PHP_ROXEN/bin/" "$LINENO" 5
  fi

  if $PIKE -e 'float v; catch(v = __VERSION__ + (__BUILD__/10000.0)); if(v < 0.7079) exit(1); exit(0);'; then
    PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,'`
    if test -z "$PIKE_INCLUDE_DIR" || test -z "$PIKE_MODULE_DIR"; then
      as_fn_error $? "Failed to figure out Pike module and include directories" "$LINENO" 5
    fi
  else
    as_fn_error $? "Roxen/PHP requires Pike 0.7.79 or newer" "$LINENO" 5
  fi


  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then

  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_INCLUDE_DIR
  else

    ep_dir=`echo $PIKE_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PIKE_INCLUDE_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


$as_echo "#define HAVE_ROXEN 1" >>confdefs.h


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES roxen"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=roxen
  fi



    BUILD_DIR="$BUILD_DIR sapi/roxen"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS roxen"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/roxen in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/roxen"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/roxen/"; ac_bdir="sapi/roxen/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in roxen.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PIKE_MODULE_DIR/PHP5.so"
  RESULT="yes
  Pike binary used:      $PIKE
  Pike include dir:      $PIKE_INCLUDE_DIR
  Pike module directory: $PIKE_MODULE_DIR"
  PIKE_INCLUDE_DIR=" -I$PIKE_INCLUDE_DIR "

  if test "$PHP_ROXEN_ZTS" != "no"; then

  enable_maintainer_zts=yes
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." "$LINENO" 5
  fi


$as_echo "#define ROXEN_USE_ZTS 1" >>confdefs.h

  fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $RESULT" >&5
$as_echo "$RESULT" >&6; }




php_with_thttpd=no



# Check whether --with-thttpd was given.
if test "${with_thttpd+set}" = set; then :
  withval=$with_thttpd; PHP_THTTPD=$withval
else

  PHP_THTTPD=no


fi


ext_output=$PHP_THTTPD





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for thttpd" >&5
$as_echo_n "checking for thttpd... " >&6; }

if test "$PHP_THTTPD" != "no"; then
  if test ! -d $PHP_THTTPD; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: thttpd directory does not exist ($PHP_THTTPD)" >&5
$as_echo "thttpd directory does not exist ($PHP_THTTPD)" >&6; }
  fi


  if test -z "$PHP_THTTPD" || echo "$PHP_THTTPD" | grep '^/' >/dev/null ; then
    THTTPD=$PHP_THTTPD
  else

    ep_dir=`echo $PHP_THTTPD|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    THTTPD="$ep_realdir"/`basename "$PHP_THTTPD"`
  fi


  if grep thttpd.2.21b $PHP_THTTPD/version.h >/dev/null; then
    patch="test -f $THTTPD/php_patched || \
    (cd $THTTPD && patch -p1 < $abs_srcdir/sapi/thttpd/thttpd_patch && touch php_patched)"

  elif grep Premium $PHP_THTTPD/version.h >/dev/null; then
    patch=
  else
    as_fn_error $? "This version only supports thttpd-2.21b and Premium thttpd" "$LINENO" 5
  fi

  if test -n "$GCC"; then

  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC supports -rdynamic" >&5
$as_echo_n "checking whether $CC supports -rdynamic... " >&6; }
if ${ac_cv_gcc_arg_rdynamic+:} false; then :
  $as_echo_n "(cached) " >&6
else

  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | $EGREP -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gcc_arg_rdynamic" >&5
$as_echo "$ac_cv_gcc_arg_rdynamic" >&6; }
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :

  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -L. -lphp5 \$(PHP_LIBS) \$(EXTRA_LIBS)' > $THTTPD/php_makefile; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $THTTPD/php_makefile; \
    echo 'PHP_CFLAGS = \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(CPPFLAGS) \$(EXTRA_CFLAGS)' >> $THTTPD/php_makefile; \
    rm -f $THTTPD/php_thttpd.c $THTTPD/php_thttpd.h $THTTPD/libphp5.a; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/thttpd.c $THTTPD/php_thttpd.c; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/php_thttpd.h $abs_builddir/$SAPI_STATIC $THTTPD/;\
    $patch"
  PHP_THTTPD="yes, using $THTTPD"

  if test "$THTTPD" != "/usr/include"; then

  if test -z "$THTTPD" || echo "$THTTPD" | grep '^/' >/dev/null ; then
    ai_p=$THTTPD
  else

    ep_dir=`echo $THTTPD|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THTTPD"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES thttpd"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=thttpd
  fi



    BUILD_DIR="$BUILD_DIR sapi/thttpd"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS thttpd"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_THTTPD" >&5
$as_echo "$PHP_THTTPD" >&6; }



php_with_tux=no



# Check whether --with-tux was given.
if test "${with_tux+set}" = set; then :
  withval=$with_tux; PHP_TUX=$withval
else

  PHP_TUX=no


fi


ext_output=$PHP_TUX





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for TUX" >&5
$as_echo_n "checking for TUX... " >&6; }
if test "$PHP_TUX" != "no"; then
  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_TUX/php5.tux.so"
  for ac_header in tuxmodule.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "tuxmodule.h" "ac_cv_header_tuxmodule_h" "$ac_includes_default"
if test "x$ac_cv_header_tuxmodule_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_TUXMODULE_H 1
_ACEOF
 :
else
  as_fn_error $? "Cannot find tuxmodule.h" "$LINENO" 5
fi

done


  if test "shared" = "program"; then
    PHP_BINARIES="$PHP_BINARIES tux"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=tux
  fi



    BUILD_DIR="$BUILD_DIR sapi/tux"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS tux"


    case "shared" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/tux in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/tux"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/tux/"; ac_bdir="sapi/tux/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_tux.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_TUX" >&5
$as_echo "$PHP_TUX" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi



php_with_webjames=no



# Check whether --with-webjames was given.
if test "${with_webjames+set}" = set; then :
  withval=$with_webjames; PHP_WEBJAMES=$withval
else

  PHP_WEBJAMES=no


fi


ext_output=$PHP_WEBJAMES





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for webjames" >&5
$as_echo_n "checking for webjames... " >&6; }

if test "$PHP_WEBJAMES" != "no"; then

  if test -z "$PHP_WEBJAMES" || echo "$PHP_WEBJAMES" | grep '^/' >/dev/null ; then
    PHP_WEBJAMES=$PHP_WEBJAMES
  else

    ep_dir=`echo $PHP_WEBJAMES|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    PHP_WEBJAMES="$ep_realdir"/`basename "$PHP_WEBJAMES"`
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -l$abs_srcdir/$SAPI_STATIC \$(PHP_LIBS) \$(EXTRA_LIBS)' > $PHP_WEBJAMES/build/php; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $PHP_WEBJAMES/build/php; \
    echo 'PHP_CFLAGS = -DPHP \$(COMMON_FLAGS) \$(EXTRA_CFLAGS) -I$abs_srcdir/sapi/webjames' >> $PHP_WEBJAMES/build/php;"

  if test "$PHP_WEBJAMES" != "/usr/include"; then

  if test -z "$PHP_WEBJAMES" || echo "$PHP_WEBJAMES" | grep '^/' >/dev/null ; then
    ai_p=$PHP_WEBJAMES
  else

    ep_dir=`echo $PHP_WEBJAMES|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_WEBJAMES"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "static" = "program"; then
    PHP_BINARIES="$PHP_BINARIES webjames"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=webjames
  fi



    BUILD_DIR="$BUILD_DIR sapi/webjames"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS webjames"


    case "static" in
    static)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=static
;;
    shared)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libphp$PHP_MAJOR_VERSION.la
  php_sapi_module=shared

  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
    bundle)

  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

  OVERALL_TARGET=libs/libphp$PHP_MAJOR_VERSION.bundle
  php_sapi_module=static
;;
    esac
    install_sapi="install-sapi"


  case sapi/webjames in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/webjames"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/webjames/"; ac_bdir="sapi/webjames/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in webjames.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes, using $PHP_WEBJAMES" >&5
$as_echo "yes, using $PHP_WEBJAMES" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi



php_enable_cgi=yes


# Check whether --enable-cgi was given.
if test "${enable_cgi+set}" = set; then :
  enableval=$enable_cgi; PHP_CGI=$enableval
else

  PHP_CGI=yes


fi


ext_output=$PHP_CGI





{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for CGI build" >&5
$as_echo_n "checking for CGI build... " >&6; }
if test "$PHP_CGI" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for socklen_t in sys/socket.h" >&5
$as_echo_n "checking for socklen_t in sys/socket.h... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/socket.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "socklen_t" >/dev/null 2>&1; then :
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_SOCKLEN_T 1" >>confdefs.h

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi
rm -f conftest*


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sun_len in sys/un.h" >&5
$as_echo_n "checking for sun_len in sys/un.h... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/un.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "sun_len" >/dev/null 2>&1; then :
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_SOCKADDR_UN_SUN_LEN 1" >>confdefs.h

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi
rm -f conftest*


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cross-process locking is required by accept()" >&5
$as_echo_n "checking whether cross-process locking is required by accept()... " >&6; }
    case "`uname -sr`" in
      IRIX\ 5.* | SunOS\ 5.* | UNIX_System_V\ 4.0)
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define USE_LOCKING 1" >>confdefs.h

      ;;
      *)
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
      ;;
    esac


  src=$abs_srcdir/sapi/cgi/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


        case $host_alias in
      *cygwin* )
        SAPI_CGI_PATH=sapi/cgi/php-cgi.exe
        ;;
      * )
        SAPI_CGI_PATH=sapi/cgi/php-cgi
        ;;
    esac


  if test "program" = "program"; then
    PHP_BINARIES="$PHP_BINARIES cgi"
  elif test "$PHP_SAPI" != "none"; then
    as_fn_error $? "
+--------------------------------------------------------------------+
|                        *** ATTENTION ***                           |
|                                                                    |
| You've configured multiple SAPIs to be build. You can build only   |
| one SAPI module plus CGI, CLI and FPM binaries at the same time.   |
+--------------------------------------------------------------------+
" "$LINENO" 5
  else
    PHP_SAPI=cgi
  fi



    BUILD_DIR="$BUILD_DIR sapi/cgi"



  PHP_INSTALLED_SAPIS="$PHP_INSTALLED_SAPIS cgi"



  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=
  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=
  php_lo=lo

  case $with_pic in
    yes) pic_setting='-prefer-pic';;
    no)  pic_setting='-prefer-non-pic';;
  esac

  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) '$pic_setting
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) '$pic_setting
  shared_cxx_post=
  shared_lo=lo

    install_binaries="install-binaries"
    install_binary_targets="$install_binary_targets install-cgi"

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_CGI_OBJS"


  case sapi/cgi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/cgi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/cgi/"; ac_bdir="sapi/cgi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cgi_main.c fastcgi.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_CGI_OBJS="$PHP_CGI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    case $host_alias in
      *aix*)
        if test "$php_sapi_module" = "shared"; then
          BUILD_CGI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_CGI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/.libs\/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CGI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
        else
          BUILD_CGI="echo '\#! .' > php.sym && echo >>php.sym && nm -BCpg \`echo \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_CGI_OBJS) | sed 's/\([A-Za-z0-9_]*\)\.lo/\1.o/g'\` | \$(AWK) '{ if (((\$\$2 == \"T\") || (\$\$2 == \"D\") || (\$\$2 == \"B\")) && (substr(\$\$3,1,1) != \".\")) { print \$\$3 } }' | sort -u >> php.sym && \$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) -Wl,-brtl -Wl,-bE:php.sym \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CGI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
        fi
        ;;
      *darwin*)
        BUILD_CGI="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_BINARY_OBJS:.lo=.o) \$(PHP_CGI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
      ;;
      *)
        BUILD_CGI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS_PROGRAM) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_BINARY_OBJS) \$(PHP_CGI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
      ;;
    esac


  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_CGI_PATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_CGI"



  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/cgi/php-cgi.1"

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
fi



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for chosen SAPI module" >&5
$as_echo_n "checking for chosen SAPI module... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_SAPI" >&5
$as_echo "$PHP_SAPI" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for executable SAPI binaries" >&5
$as_echo_n "checking for executable SAPI binaries... " >&6; }
if test "$PHP_BINARIES"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_BINARIES" >&5
$as_echo "$PHP_BINARIES" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: none" >&5
$as_echo "none" >&6; }
fi

if test -z "$PHP_INSTALLED_SAPIS"; then
  as_fn_error $? "Nothing to build." "$LINENO" 5
fi

if test "$enable_maintainer_zts" = "yes"; then

if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi


  if test -z "$host_alias" && test -n "$host"; then
    host_alias=$host
  fi
  if test -z "$host_alias"; then
    as_fn_error $? "host_alias is not set. Make sure to run config.guess" "$LINENO" 5
  fi
  case $host_alias in
  *solaris*)
    PTHREAD_FLAGS="-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT";;
  *freebsd*)
    PTHREAD_FLAGS="-D_REENTRANT -D_THREAD_SAFE";;
  *linux*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  *aix*)
    PTHREAD_FLAGS=-D_THREAD_SAFE;;
  *irix*)
    PTHREAD_FLAGS=-D_POSIX_THREAD_SAFE_FUNCTIONS;;
  *hpux*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  *sco*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  esac

  if test -n "$PTHREAD_FLAGS"; then
    CPPFLAGS="$CPPFLAGS $PTHREAD_FLAGS"
  fi

fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Running system checks${T_ME}" >&5
$as_echo "${T_MD}Running system checks${T_ME}" >&6; }



  PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/lib
  # Extract the first word of "sendmail", so it can be a program name with args.
set dummy sendmail; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PROG_SENDMAIL+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PROG_SENDMAIL in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_dummy="$PATH:$PHP_ALT_PATH"
for as_dir in $as_dummy
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PROG_SENDMAIL="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  ;;
esac
fi
PROG_SENDMAIL=$ac_cv_path_PROG_SENDMAIL
if test -n "$PROG_SENDMAIL"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PROG_SENDMAIL" >&5
$as_echo "$PROG_SENDMAIL" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST PROG_SENDMAIL"




  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether system uses EBCDIC" >&5
$as_echo_n "checking whether system uses EBCDIC... " >&6; }
if ${ac_cv_ebcdic+:} false; then :
  $as_echo_n "(cached) " >&6
else

  if test "$cross_compiling" = yes; then :

  ac_cv_ebcdic=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int main(void) {
  return (unsigned char)'A' != (unsigned char)0xC1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_ebcdic=yes

else

  ac_cv_ebcdic=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_ebcdic" >&5
$as_echo "$ac_cv_ebcdic" >&6; }
  if test "$ac_cv_ebcdic" = "yes"; then

$as_echo "#define CHARSET_EBCDIC 1" >>confdefs.h

  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
$as_echo_n "checking whether byte ordering is bigendian... " >&6; }
if ${ac_cv_c_bigendian_php+:} false; then :
  $as_echo_n "(cached) " >&6
else

  ac_cv_c_bigendian_php=unknown
  if test "$cross_compiling" = yes; then :
  ac_cv_c_bigendian_php=unknown
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int main(void)
{
  short one = 1;
  char *cp = (char *)&one;

  if (*cp == 0) {
    return(0);
  } else {
    return(1);
  }
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_c_bigendian_php=yes
else
  ac_cv_c_bigendian_php=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_bigendian_php" >&5
$as_echo "$ac_cv_c_bigendian_php" >&6; }
 if test $ac_cv_c_bigendian_php = yes; then

$as_echo "#define WORDS_BIGENDIAN /**/" >>confdefs.h

 fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether writing to stdout works" >&5
$as_echo_n "checking whether writing to stdout works... " >&6; }
if ${ac_cv_write_stdout+:} false; then :
  $as_echo_n "(cached) " >&6
else

    if test "$cross_compiling" = yes; then :

      ac_cv_write_stdout=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif

#define TEXT "This is the test message -- "

main()
{
  int n;

  n = write(1, TEXT, sizeof(TEXT)-1);
  return (!(n == sizeof(TEXT)-1));
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      ac_cv_write_stdout=yes

else

      ac_cv_write_stdout=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_write_stdout" >&5
$as_echo "$ac_cv_write_stdout" >&6; }
  if test "$ac_cv_write_stdout" = "yes"; then

$as_echo "#define PHP_WRITE_STDOUT 1" >>confdefs.h

  fi


if test -d /usr/pkg/include -a -d /usr/pkg/lib ; then
   CPPFLAGS="$CPPFLAGS -I/usr/pkg/include"
   LDFLAGS="$LDFLAGS -L/usr/pkg/lib"
fi
test -d /usr/ucblib &&
  if test "/usr/ucblib" != "/usr/$PHP_LIBDIR" && test "/usr/ucblib" != "/usr/lib"; then

  if test -z "/usr/ucblib" || echo "/usr/ucblib" | grep '^/' >/dev/null ; then
    ai_p=/usr/ucblib
  else

    ep_dir=`echo /usr/ucblib|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "/usr/ucblib"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi






  unset ac_cv_func_socket
  unset ac_cv_func___socket
  unset found

  ac_fn_c_check_func "$LINENO" "socket" "ac_cv_func_socket"
if test "x$ac_cv_func_socket" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__socket" "ac_cv_func___socket"
if test "x$ac_cv_func___socket" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_SOCKET 1" >>confdefs.h

    ac_cv_func_socket=yes
  ;;

    *)

  unset ac_cv_lib_socket_socket
  unset ac_cv_lib_socket___socket
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for socket in -lsocket" >&5
$as_echo_n "checking for socket in -lsocket... " >&6; }
if ${ac_cv_lib_socket_socket+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char socket ();
int
main ()
{
return socket ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_socket=yes
else
  ac_cv_lib_socket_socket=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_socket" >&5
$as_echo "$ac_cv_lib_socket_socket" >&6; }
if test "x$ac_cv_lib_socket_socket" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __socket in -lsocket" >&5
$as_echo_n "checking for __socket in -lsocket... " >&6; }
if ${ac_cv_lib_socket___socket+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __socket ();
int
main ()
{
return __socket ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___socket=yes
else
  ac_cv_lib_socket___socket=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___socket" >&5
$as_echo "$ac_cv_lib_socket___socket" >&6; }
if test "x$ac_cv_lib_socket___socket" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_SOCKET 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_socket=yes
  else

  :

  fi

 ;;

  esac


  unset ac_cv_func_socketpair
  unset ac_cv_func___socketpair
  unset found

  ac_fn_c_check_func "$LINENO" "socketpair" "ac_cv_func_socketpair"
if test "x$ac_cv_func_socketpair" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__socketpair" "ac_cv_func___socketpair"
if test "x$ac_cv_func___socketpair" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_SOCKETPAIR 1" >>confdefs.h

    ac_cv_func_socketpair=yes
  ;;

    *)

  unset ac_cv_lib_socket_socketpair
  unset ac_cv_lib_socket___socketpair
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for socketpair in -lsocket" >&5
$as_echo_n "checking for socketpair in -lsocket... " >&6; }
if ${ac_cv_lib_socket_socketpair+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char socketpair ();
int
main ()
{
return socketpair ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_socketpair=yes
else
  ac_cv_lib_socket_socketpair=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_socketpair" >&5
$as_echo "$ac_cv_lib_socket_socketpair" >&6; }
if test "x$ac_cv_lib_socket_socketpair" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __socketpair in -lsocket" >&5
$as_echo_n "checking for __socketpair in -lsocket... " >&6; }
if ${ac_cv_lib_socket___socketpair+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __socketpair ();
int
main ()
{
return __socketpair ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___socketpair=yes
else
  ac_cv_lib_socket___socketpair=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___socketpair" >&5
$as_echo "$ac_cv_lib_socket___socketpair" >&6; }
if test "x$ac_cv_lib_socket___socketpair" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_SOCKETPAIR 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_socketpair=yes
  else

  :

  fi

 ;;

  esac


  unset ac_cv_func_htonl
  unset ac_cv_func___htonl
  unset found

  ac_fn_c_check_func "$LINENO" "htonl" "ac_cv_func_htonl"
if test "x$ac_cv_func_htonl" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__htonl" "ac_cv_func___htonl"
if test "x$ac_cv_func___htonl" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_HTONL 1" >>confdefs.h

    ac_cv_func_htonl=yes
  ;;

    *)

  unset ac_cv_lib_socket_htonl
  unset ac_cv_lib_socket___htonl
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for htonl in -lsocket" >&5
$as_echo_n "checking for htonl in -lsocket... " >&6; }
if ${ac_cv_lib_socket_htonl+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char htonl ();
int
main ()
{
return htonl ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_htonl=yes
else
  ac_cv_lib_socket_htonl=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_htonl" >&5
$as_echo "$ac_cv_lib_socket_htonl" >&6; }
if test "x$ac_cv_lib_socket_htonl" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __htonl in -lsocket" >&5
$as_echo_n "checking for __htonl in -lsocket... " >&6; }
if ${ac_cv_lib_socket___htonl+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __htonl ();
int
main ()
{
return __htonl ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___htonl=yes
else
  ac_cv_lib_socket___htonl=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___htonl" >&5
$as_echo "$ac_cv_lib_socket___htonl" >&6; }
if test "x$ac_cv_lib_socket___htonl" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_HTONL 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_htonl=yes
  else

  :

  fi

 ;;

  esac


  unset ac_cv_func_gethostname
  unset ac_cv_func___gethostname
  unset found

  ac_fn_c_check_func "$LINENO" "gethostname" "ac_cv_func_gethostname"
if test "x$ac_cv_func_gethostname" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__gethostname" "ac_cv_func___gethostname"
if test "x$ac_cv_func___gethostname" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_GETHOSTNAME 1" >>confdefs.h

    ac_cv_func_gethostname=yes
  ;;

    *)

  unset ac_cv_lib_nsl_gethostname
  unset ac_cv_lib_nsl___gethostname
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostname in -lnsl" >&5
$as_echo_n "checking for gethostname in -lnsl... " >&6; }
if ${ac_cv_lib_nsl_gethostname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lnsl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gethostname ();
int
main ()
{
return gethostname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_nsl_gethostname=yes
else
  ac_cv_lib_nsl_gethostname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostname" >&5
$as_echo "$ac_cv_lib_nsl_gethostname" >&6; }
if test "x$ac_cv_lib_nsl_gethostname" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __gethostname in -lnsl" >&5
$as_echo_n "checking for __gethostname in -lnsl... " >&6; }
if ${ac_cv_lib_nsl___gethostname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lnsl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __gethostname ();
int
main ()
{
return __gethostname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_nsl___gethostname=yes
else
  ac_cv_lib_nsl___gethostname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl___gethostname" >&5
$as_echo "$ac_cv_lib_nsl___gethostname" >&6; }
if test "x$ac_cv_lib_nsl___gethostname" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case nsl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lnsl $LIBS"
   ;;
  esac



$as_echo "#define HAVE_GETHOSTNAME 1" >>confdefs.h


$as_echo "#define HAVE_LIBNSL 1" >>confdefs.h

    ac_cv_func_gethostname=yes
  else

  :

  fi

 ;;

  esac


  unset ac_cv_func_gethostbyaddr
  unset ac_cv_func___gethostbyaddr
  unset found

  ac_fn_c_check_func "$LINENO" "gethostbyaddr" "ac_cv_func_gethostbyaddr"
if test "x$ac_cv_func_gethostbyaddr" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__gethostbyaddr" "ac_cv_func___gethostbyaddr"
if test "x$ac_cv_func___gethostbyaddr" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_GETHOSTBYADDR 1" >>confdefs.h

    ac_cv_func_gethostbyaddr=yes
  ;;

    *)

  unset ac_cv_lib_nsl_gethostbyaddr
  unset ac_cv_lib_nsl___gethostbyaddr
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyaddr in -lnsl" >&5
$as_echo_n "checking for gethostbyaddr in -lnsl... " >&6; }
if ${ac_cv_lib_nsl_gethostbyaddr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lnsl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gethostbyaddr ();
int
main ()
{
return gethostbyaddr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_nsl_gethostbyaddr=yes
else
  ac_cv_lib_nsl_gethostbyaddr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostbyaddr" >&5
$as_echo "$ac_cv_lib_nsl_gethostbyaddr" >&6; }
if test "x$ac_cv_lib_nsl_gethostbyaddr" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __gethostbyaddr in -lnsl" >&5
$as_echo_n "checking for __gethostbyaddr in -lnsl... " >&6; }
if ${ac_cv_lib_nsl___gethostbyaddr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lnsl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __gethostbyaddr ();
int
main ()
{
return __gethostbyaddr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_nsl___gethostbyaddr=yes
else
  ac_cv_lib_nsl___gethostbyaddr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl___gethostbyaddr" >&5
$as_echo "$ac_cv_lib_nsl___gethostbyaddr" >&6; }
if test "x$ac_cv_lib_nsl___gethostbyaddr" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case nsl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lnsl $LIBS"
   ;;
  esac



$as_echo "#define HAVE_GETHOSTBYADDR 1" >>confdefs.h


$as_echo "#define HAVE_LIBNSL 1" >>confdefs.h

    ac_cv_func_gethostbyaddr=yes
  else

  :

  fi

 ;;

  esac


  unset ac_cv_func_yp_get_default_domain
  unset ac_cv_func___yp_get_default_domain
  unset found

  ac_fn_c_check_func "$LINENO" "yp_get_default_domain" "ac_cv_func_yp_get_default_domain"
if test "x$ac_cv_func_yp_get_default_domain" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__yp_get_default_domain" "ac_cv_func___yp_get_default_domain"
if test "x$ac_cv_func___yp_get_default_domain" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_YP_GET_DEFAULT_DOMAIN 1" >>confdefs.h

    ac_cv_func_yp_get_default_domain=yes
  ;;

    *)

  unset ac_cv_lib_nsl_yp_get_default_domain
  unset ac_cv_lib_nsl___yp_get_default_domain
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for yp_get_default_domain in -lnsl" >&5
$as_echo_n "checking for yp_get_default_domain in -lnsl... " >&6; }
if ${ac_cv_lib_nsl_yp_get_default_domain+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lnsl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char yp_get_default_domain ();
int
main ()
{
return yp_get_default_domain ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_nsl_yp_get_default_domain=yes
else
  ac_cv_lib_nsl_yp_get_default_domain=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_yp_get_default_domain" >&5
$as_echo "$ac_cv_lib_nsl_yp_get_default_domain" >&6; }
if test "x$ac_cv_lib_nsl_yp_get_default_domain" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __yp_get_default_domain in -lnsl" >&5
$as_echo_n "checking for __yp_get_default_domain in -lnsl... " >&6; }
if ${ac_cv_lib_nsl___yp_get_default_domain+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lnsl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __yp_get_default_domain ();
int
main ()
{
return __yp_get_default_domain ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_nsl___yp_get_default_domain=yes
else
  ac_cv_lib_nsl___yp_get_default_domain=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl___yp_get_default_domain" >&5
$as_echo "$ac_cv_lib_nsl___yp_get_default_domain" >&6; }
if test "x$ac_cv_lib_nsl___yp_get_default_domain" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case nsl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lnsl $LIBS"
   ;;
  esac



$as_echo "#define HAVE_YP_GET_DEFAULT_DOMAIN 1" >>confdefs.h


$as_echo "#define HAVE_LIBNSL 1" >>confdefs.h

    ac_cv_func_yp_get_default_domain=yes
  else

  :

  fi

 ;;

  esac



  unset ac_cv_func_dlopen
  unset ac_cv_func___dlopen
  unset found

  ac_fn_c_check_func "$LINENO" "dlopen" "ac_cv_func_dlopen"
if test "x$ac_cv_func_dlopen" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__dlopen" "ac_cv_func___dlopen"
if test "x$ac_cv_func___dlopen" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_DLOPEN 1" >>confdefs.h

    ac_cv_func_dlopen=yes
  ;;

    *)

  unset ac_cv_lib_dl_dlopen
  unset ac_cv_lib_dl___dlopen
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
$as_echo_n "checking for dlopen in -ldl... " >&6; }
if ${ac_cv_lib_dl_dlopen+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dlopen ();
int
main ()
{
return dlopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dl_dlopen=yes
else
  ac_cv_lib_dl_dlopen=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
$as_echo "$ac_cv_lib_dl_dlopen" >&6; }
if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dlopen in -ldl" >&5
$as_echo_n "checking for __dlopen in -ldl... " >&6; }
if ${ac_cv_lib_dl___dlopen+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dlopen ();
int
main ()
{
return __dlopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dl___dlopen=yes
else
  ac_cv_lib_dl___dlopen=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl___dlopen" >&5
$as_echo "$ac_cv_lib_dl___dlopen" >&6; }
if test "x$ac_cv_lib_dl___dlopen" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -ldl"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case dl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ldl $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DLOPEN 1" >>confdefs.h


$as_echo "#define HAVE_LIBDL 1" >>confdefs.h

    ac_cv_func_dlopen=yes
  else

  :

  fi

 ;;

  esac

if test "$ac_cv_func_dlopen" = "yes"; then

$as_echo "#define HAVE_LIBDL 1" >>confdefs.h

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sin in -lm" >&5
$as_echo_n "checking for sin in -lm... " >&6; }
if ${ac_cv_lib_m_sin+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lm  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sin ();
int
main ()
{
return sin ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_m_sin=yes
else
  ac_cv_lib_m_sin=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_m_sin" >&5
$as_echo "$ac_cv_lib_m_sin" >&6; }
if test "x$ac_cv_lib_m_sin" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_LIBM 1
_ACEOF

  LIBS="-lm $LIBS"

fi



  unset ac_cv_func_inet_aton
  unset ac_cv_func___inet_aton
  unset found

  ac_fn_c_check_func "$LINENO" "inet_aton" "ac_cv_func_inet_aton"
if test "x$ac_cv_func_inet_aton" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__inet_aton" "ac_cv_func___inet_aton"
if test "x$ac_cv_func___inet_aton" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_INET_ATON 1" >>confdefs.h

    ac_cv_func_inet_aton=yes
  ;;

    *)

  unset ac_cv_lib_resolv_inet_aton
  unset ac_cv_lib_resolv___inet_aton
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inet_aton in -lresolv" >&5
$as_echo_n "checking for inet_aton in -lresolv... " >&6; }
if ${ac_cv_lib_resolv_inet_aton+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char inet_aton ();
int
main ()
{
return inet_aton ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv_inet_aton=yes
else
  ac_cv_lib_resolv_inet_aton=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_inet_aton" >&5
$as_echo "$ac_cv_lib_resolv_inet_aton" >&6; }
if test "x$ac_cv_lib_resolv_inet_aton" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __inet_aton in -lresolv" >&5
$as_echo_n "checking for __inet_aton in -lresolv... " >&6; }
if ${ac_cv_lib_resolv___inet_aton+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __inet_aton ();
int
main ()
{
return __inet_aton ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv___inet_aton=yes
else
  ac_cv_lib_resolv___inet_aton=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___inet_aton" >&5
$as_echo "$ac_cv_lib_resolv___inet_aton" >&6; }
if test "x$ac_cv_lib_resolv___inet_aton" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case resolv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lresolv $LIBS"
   ;;
  esac



$as_echo "#define HAVE_INET_ATON 1" >>confdefs.h


$as_echo "#define HAVE_LIBRESOLV 1" >>confdefs.h

    ac_cv_func_inet_aton=yes
  else


  unset ac_cv_lib_bind_inet_aton
  unset ac_cv_lib_bind___inet_aton
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inet_aton in -lbind" >&5
$as_echo_n "checking for inet_aton in -lbind... " >&6; }
if ${ac_cv_lib_bind_inet_aton+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char inet_aton ();
int
main ()
{
return inet_aton ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind_inet_aton=yes
else
  ac_cv_lib_bind_inet_aton=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind_inet_aton" >&5
$as_echo "$ac_cv_lib_bind_inet_aton" >&6; }
if test "x$ac_cv_lib_bind_inet_aton" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __inet_aton in -lbind" >&5
$as_echo_n "checking for __inet_aton in -lbind... " >&6; }
if ${ac_cv_lib_bind___inet_aton+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __inet_aton ();
int
main ()
{
return __inet_aton ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind___inet_aton=yes
else
  ac_cv_lib_bind___inet_aton=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind___inet_aton" >&5
$as_echo "$ac_cv_lib_bind___inet_aton" >&6; }
if test "x$ac_cv_lib_bind___inet_aton" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case bind in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbind $LIBS"
   ;;
  esac



$as_echo "#define HAVE_INET_ATON 1" >>confdefs.h


$as_echo "#define HAVE_LIBBIND 1" >>confdefs.h

    ac_cv_func_inet_aton=yes
  else

  :

  fi


  fi

 ;;

  esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
$as_echo_n "checking for ANSI C header files... " >&6; }
if ${ac_cv_header_stdc+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_header_stdc=yes
else
  ac_cv_header_stdc=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <string.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "memchr" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "free" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
  if test "$cross_compiling" = yes; then :
  :
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ctype.h>
#include <stdlib.h>
#if ((' ' & 0x0FF) == 0x020)
# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#else
# define ISLOWER(c) \
		   (('a' <= (c) && (c) <= 'i') \
		     || ('j' <= (c) && (c) <= 'r') \
		     || ('s' <= (c) && (c) <= 'z'))
# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
#endif

#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int
main ()
{
  int i;
  for (i = 0; i < 256; i++)
    if (XOR (islower (i), ISLOWER (i))
	|| toupper (i) != TOUPPER (i))
      return 2;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

else
  ac_cv_header_stdc=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
$as_echo "$ac_cv_header_stdc" >&6; }
if test $ac_cv_header_stdc = yes; then

$as_echo "#define STDC_HEADERS 1" >>confdefs.h

fi

ac_header_dirent=no
for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
  as_ac_Header=`$as_echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_hdr that defines DIR" >&5
$as_echo_n "checking for $ac_hdr that defines DIR... " >&6; }
if eval \${$as_ac_Header+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <$ac_hdr>

int
main ()
{
if ((DIR *) 0)
return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  eval "$as_ac_Header=yes"
else
  eval "$as_ac_Header=no"
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
eval ac_res=\$$as_ac_Header
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
_ACEOF

ac_header_dirent=$ac_hdr; break
fi

done
# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
if test $ac_header_dirent = dirent.h; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing opendir" >&5
$as_echo_n "checking for library containing opendir... " >&6; }
if ${ac_cv_search_opendir+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_func_search_save_LIBS=$LIBS
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char opendir ();
int
main ()
{
return opendir ();
  ;
  return 0;
}
_ACEOF
for ac_lib in '' dir; do
  if test -z "$ac_lib"; then
    ac_res="none required"
  else
    ac_res=-l$ac_lib
    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
  fi
  if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_search_opendir=$ac_res
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext
  if ${ac_cv_search_opendir+:} false; then :
  break
fi
done
if ${ac_cv_search_opendir+:} false; then :

else
  ac_cv_search_opendir=no
fi
rm conftest.$ac_ext
LIBS=$ac_func_search_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_opendir" >&5
$as_echo "$ac_cv_search_opendir" >&6; }
ac_res=$ac_cv_search_opendir
if test "$ac_res" != no; then :
  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"

fi

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing opendir" >&5
$as_echo_n "checking for library containing opendir... " >&6; }
if ${ac_cv_search_opendir+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_func_search_save_LIBS=$LIBS
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char opendir ();
int
main ()
{
return opendir ();
  ;
  return 0;
}
_ACEOF
for ac_lib in '' x; do
  if test -z "$ac_lib"; then
    ac_res="none required"
  else
    ac_res=-l$ac_lib
    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
  fi
  if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_search_opendir=$ac_res
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext
  if ${ac_cv_search_opendir+:} false; then :
  break
fi
done
if ${ac_cv_search_opendir+:} false; then :

else
  ac_cv_search_opendir=no
fi
rm conftest.$ac_ext
LIBS=$ac_func_search_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_opendir" >&5
$as_echo "$ac_cv_search_opendir" >&6; }
ac_res=$ac_cv_search_opendir
if test "$ac_res" != no; then :
  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"

fi

fi


for ac_header in  \
inttypes.h \
stdint.h \
dirent.h \
ApplicationServices/ApplicationServices.h \
sys/param.h \
sys/types.h \
sys/time.h \
netinet/in.h \
alloca.h \
arpa/inet.h \
arpa/nameser.h \
assert.h \
crypt.h \
dns.h \
fcntl.h \
grp.h \
ieeefp.h \
langinfo.h \
limits.h \
locale.h \
monetary.h \
netdb.h \
pwd.h \
resolv.h \
signal.h \
stdarg.h \
stdlib.h \
string.h \
syslog.h \
sysexits.h \
sys/ioctl.h \
sys/file.h \
sys/mman.h \
sys/mount.h \
sys/poll.h \
sys/resource.h \
sys/select.h \
sys/socket.h \
sys/stat.h \
sys/statfs.h \
sys/statvfs.h \
sys/vfs.h \
sys/sysexits.h \
sys/varargs.h \
sys/wait.h \
sys/loadavg.h \
termios.h \
unistd.h \
unix.h \
utime.h \
sys/utsname.h \
sys/ipc.h \
dlfcn.h \
assert.h

do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "
#ifdef HAVE_SYS_PARAM_H
#include <sys/param.h>
#endif
#ifdef HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif
#ifdef HAVE_NETINET_IN_H
#include <netinet/in.h>
#endif
#ifdef HAVE_ARPA_NAMESER_H
#include <arpa/nameser.h>
#endif

"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done



  ac_fn_c_check_func "$LINENO" "fopencookie" "ac_cv_func_fopencookie"
if test "x$ac_cv_func_fopencookie" = xyes; then :
  have_glibc_fopencookie=yes
fi


  if test "$have_glibc_fopencookie" = "yes"; then
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _GNU_SOURCE
#include <stdio.h>

int
main ()
{
cookie_io_functions_t cookie;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  have_cookie_io_functions_t=yes
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

    if test "$have_cookie_io_functions_t" = "yes"; then
      cookie_io_functions_t=cookie_io_functions_t
      have_fopen_cookie=yes

if test "$cross_compiling" = yes; then :

  cookie_io_functions_use_off64_t=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _GNU_SOURCE
#include <stdio.h>

struct cookiedata {
  __off64_t pos;
};

__ssize_t reader(void *cookie, char *buffer, size_t size)
{ return size; }
__ssize_t writer(void *cookie, const char *buffer, size_t size)
{ return size; }
int closer(void *cookie)
{ return 0; }
int seeker(void *cookie, __off64_t *position, int whence)
{ ((struct cookiedata*)cookie)->pos = *position; return 0; }

cookie_io_functions_t funcs = {reader, writer, seeker, closer};

main() {
  struct cookiedata g = { 0 };
  FILE *fp = fopencookie(&g, "r", funcs);

  if (fp && fseek(fp, 8192, SEEK_SET) == 0 && g.pos == 8192)
    exit(0);
  exit(1);
}


_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  cookie_io_functions_use_off64_t=yes

else

  cookie_io_functions_use_off64_t=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


    else

cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _GNU_SOURCE
#include <stdio.h>

int
main ()
{
 _IO_cookie_io_functions_t cookie;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  have_IO_cookie_io_functions_t=yes
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
      if test "$have_cookie_io_functions_t" = "yes" ; then
        cookie_io_functions_t=_IO_cookie_io_functions_t
        have_fopen_cookie=yes
      fi
    fi

    if test "$have_fopen_cookie" = "yes" ; then

$as_echo "#define HAVE_FOPENCOOKIE 1" >>confdefs.h


cat >>confdefs.h <<_ACEOF
#define COOKIE_IO_FUNCTIONS_T $cookie_io_functions_t
_ACEOF

      if test "$cookie_io_functions_use_off64_t" = "yes" ; then

$as_echo "#define COOKIE_SEEKER_USES_OFF64_T 1" >>confdefs.h

      fi
    fi
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken getcwd" >&5
$as_echo_n "checking for broken getcwd... " >&6; }
  os=`uname -sr 2>/dev/null`
  case $os in
    SunOS*)

$as_echo "#define HAVE_BROKEN_GETCWD 1" >>confdefs.h

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; };;
    *)
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; };;
  esac


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken libc stdio" >&5
$as_echo_n "checking for broken libc stdio... " >&6; }
  if ${_cv_have_broken_glibc_fopen_append+:} false; then :
  $as_echo_n "(cached) " >&6
else

  if test "$cross_compiling" = yes; then :
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <features.h>

int
main ()
{

#if !__GLIBC_PREREQ(2,2)
choke me
#endif

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  _cv_have_broken_glibc_fopen_append=yes
else
  _cv_have_broken_glibc_fopen_append=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <stdio.h>
int main(int argc, char *argv[])
{
  FILE *fp;
  long position;
  char *filename = tmpnam(NULL);

  fp = fopen(filename, "w");
  if (fp == NULL) {
    perror("fopen");
    exit(2);
  }
  fputs("foobar", fp);
  fclose(fp);

  fp = fopen(filename, "a+");
  position = ftell(fp);
  fclose(fp);
  unlink(filename);
  if (position == 0)
  return 1;
  return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  _cv_have_broken_glibc_fopen_append=no
else
  _cv_have_broken_glibc_fopen_append=yes
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi


  if test "$_cv_have_broken_glibc_fopen_append" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_BROKEN_GLIBC_FOPEN_APPEND 1" >>confdefs.h

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether struct tm is in sys/time.h or time.h" >&5
$as_echo_n "checking whether struct tm is in sys/time.h or time.h... " >&6; }
if ${ac_cv_struct_tm+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <time.h>

int
main ()
{
struct tm tm;
				     int *p = &tm.tm_sec;
				     return !p;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_struct_tm=time.h
else
  ac_cv_struct_tm=sys/time.h
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_struct_tm" >&5
$as_echo "$ac_cv_struct_tm" >&6; }
if test $ac_cv_struct_tm = sys/time.h; then

$as_echo "#define TM_IN_SYS_TIME 1" >>confdefs.h

fi

ac_fn_c_check_member "$LINENO" "struct tm" "tm_zone" "ac_cv_member_struct_tm_tm_zone" "#include <sys/types.h>
#include <$ac_cv_struct_tm>

"
if test "x$ac_cv_member_struct_tm_tm_zone" = xyes; then :

cat >>confdefs.h <<_ACEOF
#define HAVE_STRUCT_TM_TM_ZONE 1
_ACEOF


fi

if test "$ac_cv_member_struct_tm_tm_zone" = yes; then

$as_echo "#define HAVE_TM_ZONE 1" >>confdefs.h

else
  ac_fn_c_check_decl "$LINENO" "tzname" "ac_cv_have_decl_tzname" "#include <time.h>
"
if test "x$ac_cv_have_decl_tzname" = xyes; then :
  ac_have_decl=1
else
  ac_have_decl=0
fi

cat >>confdefs.h <<_ACEOF
#define HAVE_DECL_TZNAME $ac_have_decl
_ACEOF

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tzname" >&5
$as_echo_n "checking for tzname... " >&6; }
if ${ac_cv_var_tzname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <time.h>
#if !HAVE_DECL_TZNAME
extern char *tzname[];
#endif

int
main ()
{
return tzname[0][0];
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_var_tzname=yes
else
  ac_cv_var_tzname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_var_tzname" >&5
$as_echo "$ac_cv_var_tzname" >&6; }
  if test $ac_cv_var_tzname = yes; then

$as_echo "#define HAVE_TZNAME 1" >>confdefs.h

  fi
fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for missing declarations of reentrant functions" >&5
$as_echo_n "checking for missing declarations of reentrant functions... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <time.h>
int
main ()
{
struct tm *(*func)() = localtime_r
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    :

else


$as_echo "#define MISSING_LOCALTIME_R_DECL 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <time.h>
int
main ()
{
struct tm *(*func)() = gmtime_r
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    :

else


$as_echo "#define MISSING_GMTIME_R_DECL 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <time.h>
int
main ()
{
char *(*func)() = asctime_r
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    :

else


$as_echo "#define MISSING_ASCTIME_R_DECL 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <time.h>
int
main ()
{
char *(*func)() = ctime_r
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    :

else


$as_echo "#define MISSING_CTIME_R_DECL 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <string.h>
int
main ()
{
char *(*func)() = strtok_r
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    :

else


$as_echo "#define MISSING_STRTOK_R_DECL 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: done" >&5
$as_echo "done" >&6; }


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fclose declaration" >&5
$as_echo_n "checking for fclose declaration... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdio.h>
int
main ()
{
int (*func)() = fclose
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


$as_echo "#define MISSING_FCLOSE_DECL 0" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
$as_echo "ok" >&6; }

else


$as_echo "#define MISSING_FCLOSE_DECL 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: missing" >&5
$as_echo "missing" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for tm_gmtoff in struct tm" >&5
$as_echo_n "checking for tm_gmtoff in struct tm... " >&6; }
if ${ac_cv_struct_tm_gmtoff+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int
main ()
{
struct tm tm; tm.tm_gmtoff;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_struct_tm_gmtoff=yes
else
  ac_cv_struct_tm_gmtoff=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_struct_tm_gmtoff" >&5
$as_echo "$ac_cv_struct_tm_gmtoff" >&6; }

if test "$ac_cv_struct_tm_gmtoff" = yes; then

$as_echo "#define HAVE_TM_GMTOFF 1" >>confdefs.h

fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct flock" >&5
$as_echo_n "checking for struct flock... " >&6; }
if ${ac_cv_struct_flock+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <unistd.h>
#include <fcntl.h>

int
main ()
{
struct flock x;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

          ac_cv_struct_flock=yes

else

          ac_cv_struct_flock=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_struct_flock" >&5
$as_echo "$ac_cv_struct_flock" >&6; }
if test "$ac_cv_struct_flock" = "yes" ; then

$as_echo "#define HAVE_STRUCT_FLOCK 1" >>confdefs.h

fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for socklen_t" >&5
$as_echo_n "checking for socklen_t... " >&6; }
if ${ac_cv_socklen_t+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/socket.h>

int
main ()
{

socklen_t x;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

  ac_cv_socklen_t=yes

else

  ac_cv_socklen_t=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_socklen_t" >&5
$as_echo "$ac_cv_socklen_t" >&6; }
if test "$ac_cv_socklen_t" = "yes"; then

$as_echo "#define HAVE_SOCKLEN_T 1" >>confdefs.h

fi


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of size_t" >&5
$as_echo_n "checking size of size_t... " >&6; }
if ${ac_cv_sizeof_size_t+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (size_t))" "ac_cv_sizeof_size_t"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_size_t" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (size_t)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_size_t=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_size_t" >&5
$as_echo "$ac_cv_sizeof_size_t" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_SIZE_T $ac_cv_sizeof_size_t
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long" >&5
$as_echo_n "checking size of long long... " >&6; }
if ${ac_cv_sizeof_long_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long))" "ac_cv_sizeof_long_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_long" >&5
$as_echo "$ac_cv_sizeof_long_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long int" >&5
$as_echo_n "checking size of long long int... " >&6; }
if ${ac_cv_sizeof_long_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long int))" "ac_cv_sizeof_long_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_long_int" >&5
$as_echo "$ac_cv_sizeof_long_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_LONG_INT $ac_cv_sizeof_long_long_int
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
$as_echo_n "checking size of long... " >&6; }
if ${ac_cv_sizeof_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long" >&5
$as_echo "$ac_cv_sizeof_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG $ac_cv_sizeof_long
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
$as_echo_n "checking size of int... " >&6; }
if ${ac_cv_sizeof_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_int" >&5
$as_echo "$ac_cv_sizeof_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_INT $ac_cv_sizeof_int
_ACEOF




  { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of intmax_t" >&5
$as_echo_n "checking size of intmax_t... " >&6; }

  php_cache_value=php_cv_sizeof_intmax_t
  if ${php_cv_sizeof_intmax_t+:} false; then :
  $as_echo_n "(cached) " >&6
else

    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then :

    eval $php_cache_value=0

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof(intmax_t));
	return(0);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    eval $php_cache_value=`cat conftestval`

else

    eval $php_cache_value=0

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then


cat >>confdefs.h <<_ACEOF
#define SIZEOF_INTMAX_T $php_cv_sizeof_intmax_t
_ACEOF


cat >>confdefs.h <<_ACEOF
#define HAVE_INTMAX_T 1
_ACEOF



  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_sizeof_intmax_t" >&5
$as_echo "$php_cv_sizeof_intmax_t" >&6; }


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of ssize_t" >&5
$as_echo_n "checking size of ssize_t... " >&6; }

  php_cache_value=php_cv_sizeof_ssize_t
  if ${php_cv_sizeof_ssize_t+:} false; then :
  $as_echo_n "(cached) " >&6
else

    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then :

    eval $php_cache_value=8

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof(ssize_t));
	return(0);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    eval $php_cache_value=`cat conftestval`

else

    eval $php_cache_value=0

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then


cat >>confdefs.h <<_ACEOF
#define SIZEOF_SSIZE_T $php_cv_sizeof_ssize_t
_ACEOF


cat >>confdefs.h <<_ACEOF
#define HAVE_SSIZE_T 1
_ACEOF



  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_sizeof_ssize_t" >&5
$as_echo "$php_cv_sizeof_ssize_t" >&6; }


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of ptrdiff_t" >&5
$as_echo_n "checking size of ptrdiff_t... " >&6; }

  php_cache_value=php_cv_sizeof_ptrdiff_t
  if ${php_cv_sizeof_ptrdiff_t+:} false; then :
  $as_echo_n "(cached) " >&6
else

    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then :

    eval $php_cache_value=8

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof(ptrdiff_t));
	return(0);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    eval $php_cache_value=`cat conftestval`

else

    eval $php_cache_value=0

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then


cat >>confdefs.h <<_ACEOF
#define SIZEOF_PTRDIFF_T $php_cv_sizeof_ptrdiff_t
_ACEOF


cat >>confdefs.h <<_ACEOF
#define HAVE_PTRDIFF_T 1
_ACEOF



  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_sizeof_ptrdiff_t" >&5
$as_echo "$php_cv_sizeof_ptrdiff_t" >&6; }


ac_fn_c_check_member "$LINENO" "struct stat" "st_blksize" "ac_cv_member_struct_stat_st_blksize" "$ac_includes_default"
if test "x$ac_cv_member_struct_stat_st_blksize" = xyes; then :

cat >>confdefs.h <<_ACEOF
#define HAVE_STRUCT_STAT_ST_BLKSIZE 1
_ACEOF


$as_echo "#define HAVE_ST_BLKSIZE 1" >>confdefs.h

fi


if test "`uname -s 2>/dev/null`" != "QNX"; then
  ac_fn_c_check_member "$LINENO" "struct stat" "st_blocks" "ac_cv_member_struct_stat_st_blocks" "$ac_includes_default"
if test "x$ac_cv_member_struct_stat_st_blocks" = xyes; then :

cat >>confdefs.h <<_ACEOF
#define HAVE_STRUCT_STAT_ST_BLOCKS 1
_ACEOF


$as_echo "#define HAVE_ST_BLOCKS 1" >>confdefs.h

else
  case " $LIBOBJS " in
  *" fileblocks.$ac_objext "* ) ;;
  *) LIBOBJS="$LIBOBJS fileblocks.$ac_objext"
 ;;
esac

fi


else
  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: warnings level for cc set to 0" >&5
$as_echo "$as_me: WARNING: warnings level for cc set to 0" >&2;}
  WARNING_LEVEL=0
fi
ac_fn_c_check_member "$LINENO" "struct stat" "st_rdev" "ac_cv_member_struct_stat_st_rdev" "$ac_includes_default"
if test "x$ac_cv_member_struct_stat_st_rdev" = xyes; then :

cat >>confdefs.h <<_ACEOF
#define HAVE_STRUCT_STAT_ST_RDEV 1
_ACEOF


$as_echo "#define HAVE_ST_RDEV 1" >>confdefs.h

fi



ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
if test "x$ac_cv_type_size_t" = xyes; then :

else

cat >>confdefs.h <<_ACEOF
#define size_t unsigned int
_ACEOF

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for uid_t in sys/types.h" >&5
$as_echo_n "checking for uid_t in sys/types.h... " >&6; }
if ${ac_cv_type_uid_t+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "uid_t" >/dev/null 2>&1; then :
  ac_cv_type_uid_t=yes
else
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_uid_t" >&5
$as_echo "$ac_cv_type_uid_t" >&6; }
if test $ac_cv_type_uid_t = no; then

$as_echo "#define uid_t int" >>confdefs.h


$as_echo "#define gid_t int" >>confdefs.h

fi



    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct sockaddr_storage" >&5
$as_echo_n "checking for struct sockaddr_storage... " >&6; }
if ${ac_cv_sockaddr_storage+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <sys/socket.h>
int
main ()
{
struct sockaddr_storage s; s
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_sockaddr_storage=yes
else
  ac_cv_sockaddr_storage=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sockaddr_storage" >&5
$as_echo "$ac_cv_sockaddr_storage" >&6; }
  if test "$ac_cv_sockaddr_storage" = "yes"; then

$as_echo "#define HAVE_SOCKADDR_STORAGE 1" >>confdefs.h

  fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for field sa_len in struct sockaddr" >&5
$as_echo_n "checking for field sa_len in struct sockaddr... " >&6; }
if ${ac_cv_sockaddr_sa_len+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <sys/socket.h>
int
main ()
{
static struct sockaddr sa; int n = (int) sa.sa_len; return n;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_sockaddr_sa_len=yes
else
  ac_cv_sockaddr_sa_len=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sockaddr_sa_len" >&5
$as_echo "$ac_cv_sockaddr_sa_len" >&6; }
  if test "$ac_cv_sockaddr_sa_len" = "yes"; then

$as_echo "#define HAVE_SOCKADDR_SA_LEN 1" >>confdefs.h

  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for IPv6 support" >&5
$as_echo_n "checking for IPv6 support... " >&6; }
if ${ac_cv_ipv6_support+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
 #include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
int
main ()
{
struct sockaddr_in6 s; struct in6_addr t=in6addr_any; int i=AF_INET6; s; t.s6_addr[0] = 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_ipv6_support=yes
else
  ac_cv_ipv6_support=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_ipv6_support" >&5
$as_echo "$ac_cv_ipv6_support" >&6; }


for ac_func in vprintf
do :
  ac_fn_c_check_func "$LINENO" "vprintf" "ac_cv_func_vprintf"
if test "x$ac_cv_func_vprintf" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_VPRINTF 1
_ACEOF

ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
if test "x$ac_cv_func__doprnt" = xyes; then :

$as_echo "#define HAVE_DOPRNT 1" >>confdefs.h

fi

fi
done


for ac_func in alphasort \
asctime_r \
chroot \
ctime_r \
cuserid \
crypt \
flock \
ftok \
funopen \
gai_strerror \
gcvt \
getloadavg \
getlogin \
getprotobyname \
getprotobynumber \
getservbyname \
getservbyport \
gethostname \
getrusage \
gettimeofday \
gmtime_r \
getpwnam_r \
getgrnam_r \
getpwuid_r \
grantpt \
inet_ntoa \
inet_ntop \
inet_pton \
isascii \
link \
localtime_r \
lockf \
lchown \
lrand48 \
memcpy \
memmove \
mkstemp \
mmap \
nl_langinfo \
perror \
poll \
ptsname \
putenv \
realpath \
random \
rand_r \
scandir \
setitimer \
setlocale \
localeconv \
setenv \
setpgid \
setsockopt \
setvbuf \
shutdown \
sin \
snprintf \
srand48 \
srandom \
statfs \
statvfs \
std_syslog \
strcasecmp \
strcoll \
strdup \
strerror \
strftime \
strnlen \
strptime \
strstr \
strtok_r \
symlink \
tempnam \
tzset \
unlockpt \
unsetenv \
usleep \
utime \
vsnprintf \
vasprintf \
asprintf \
nanosleep \

do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done




  unset ac_cv_lib_rt_nanosleep
  unset ac_cv_lib_rt___nanosleep
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nanosleep in -lrt" >&5
$as_echo_n "checking for nanosleep in -lrt... " >&6; }
if ${ac_cv_lib_rt_nanosleep+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lrt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char nanosleep ();
int
main ()
{
return nanosleep ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_rt_nanosleep=yes
else
  ac_cv_lib_rt_nanosleep=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rt_nanosleep" >&5
$as_echo "$ac_cv_lib_rt_nanosleep" >&6; }
if test "x$ac_cv_lib_rt_nanosleep" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __nanosleep in -lrt" >&5
$as_echo_n "checking for __nanosleep in -lrt... " >&6; }
if ${ac_cv_lib_rt___nanosleep+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lrt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __nanosleep ();
int
main ()
{
return __nanosleep ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_rt___nanosleep=yes
else
  ac_cv_lib_rt___nanosleep=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rt___nanosleep" >&5
$as_echo "$ac_cv_lib_rt___nanosleep" >&6; }
if test "x$ac_cv_lib_rt___nanosleep" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lrt"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case rt in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lrt $LIBS"
   ;;
  esac



$as_echo "#define HAVE_NANOSLEEP 1" >>confdefs.h


$as_echo "#define HAVE_LIBRT 1" >>confdefs.h

    ac_cv_func_nanosleep=yes
  else

  :

  fi



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for getaddrinfo" >&5
$as_echo_n "checking for getaddrinfo... " >&6; }
if ${ac_cv_func_getaddrinfo+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <netdb.h>
int
main ()
{
struct addrinfo *g,h;g=&h;getaddrinfo("","",g,&g);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  if test "$cross_compiling" = yes; then :
  ac_cv_func_getaddrinfo=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <netdb.h>
#include <sys/types.h>
#ifndef AF_INET
# include <sys/socket.h>
#endif
int main(void) {
  struct addrinfo *ai, *pai, hints;

  memset(&hints, 0, sizeof(hints));
  hints.ai_flags = AI_NUMERICHOST;

  if (getaddrinfo("127.0.0.1", 0, &hints, &ai) < 0) {
    exit(1);
  }

  if (ai == 0) {
    exit(1);
  }

  pai = ai;

  while (pai) {
    if (pai->ai_family != AF_INET) {
      /* 127.0.0.1/NUMERICHOST should only resolve ONE way */
      exit(1);
    }
    if (pai->ai_addr->sa_family != AF_INET) {
      /* 127.0.0.1/NUMERICHOST should only resolve ONE way */
      exit(1);
    }
    pai = pai->ai_next;
  }
  freeaddrinfo(ai);
  exit(0);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_func_getaddrinfo=yes
else
  ac_cv_func_getaddrinfo=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

else
  ac_cv_func_getaddrinfo=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_getaddrinfo" >&5
$as_echo "$ac_cv_func_getaddrinfo" >&6; }
if test "$ac_cv_func_getaddrinfo" = yes; then

$as_echo "#define HAVE_GETADDRINFO 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for __sync_fetch_and_add" >&5
$as_echo_n "checking for __sync_fetch_and_add... " >&6; }
if ${ac_cv_func_sync_fetch_and_add+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{
int x;__sync_fetch_and_add(&x,1);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_func_sync_fetch_and_add=yes
else
  ac_cv_func_sync_fetch_and_add=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_sync_fetch_and_add" >&5
$as_echo "$ac_cv_func_sync_fetch_and_add" >&6; }
if test "$ac_cv_func_sync_fetch_and_add" = yes; then

$as_echo "#define HAVE_SYNC_FETCH_AND_ADD 1" >>confdefs.h

fi

ac_fn_c_check_func "$LINENO" "strlcat" "ac_cv_func_strlcat"
if test "x$ac_cv_func_strlcat" = xyes; then :
  $as_echo "#define HAVE_STRLCAT 1" >>confdefs.h

else
  case " $LIBOBJS " in
  *" strlcat.$ac_objext "* ) ;;
  *) LIBOBJS="$LIBOBJS strlcat.$ac_objext"
 ;;
esac

fi

ac_fn_c_check_func "$LINENO" "strlcpy" "ac_cv_func_strlcpy"
if test "x$ac_cv_func_strlcpy" = xyes; then :
  $as_echo "#define HAVE_STRLCPY 1" >>confdefs.h

else
  case " $LIBOBJS " in
  *" strlcpy.$ac_objext "* ) ;;
  *) LIBOBJS="$LIBOBJS strlcpy.$ac_objext"
 ;;
esac

fi

ac_fn_c_check_func "$LINENO" "getopt" "ac_cv_func_getopt"
if test "x$ac_cv_func_getopt" = xyes; then :
  $as_echo "#define HAVE_GETOPT 1" >>confdefs.h

else
  case " $LIBOBJS " in
  *" getopt.$ac_objext "* ) ;;
  *) LIBOBJS="$LIBOBJS getopt.$ac_objext"
 ;;
esac

fi





  for ac_header in $ac_header_list
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done




{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether utime accepts a null argument" >&5
$as_echo_n "checking whether utime accepts a null argument... " >&6; }
if ${ac_cv_func_utime_null+:} false; then :
  $as_echo_n "(cached) " >&6
else
  rm -f conftest.data; >conftest.data
# Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
if test "$cross_compiling" = yes; then :
  ac_cv_func_utime_null='guessing yes'
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$ac_includes_default
	       #ifdef HAVE_UTIME_H
	       # include <utime.h>
	       #endif
int
main ()
{
struct stat s, t;
  return ! (stat ("conftest.data", &s) == 0
	    && utime ("conftest.data", 0) == 0
	    && stat ("conftest.data", &t) == 0
	    && t.st_mtime >= s.st_mtime
	    && t.st_mtime - s.st_mtime < 120);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_func_utime_null=yes
else
  ac_cv_func_utime_null=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_utime_null" >&5
$as_echo "$ac_cv_func_utime_null" >&6; }
if test "x$ac_cv_func_utime_null" != xno; then
  ac_cv_func_utime_null=yes

$as_echo "#define HAVE_UTIME_NULL 1" >>confdefs.h

fi
rm -f conftest.data

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
$as_echo_n "checking for working alloca.h... " >&6; }
if ${ac_cv_working_alloca_h+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <alloca.h>
int
main ()
{
char *p = (char *) alloca (2 * sizeof (int));
			  if (p) return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_working_alloca_h=yes
else
  ac_cv_working_alloca_h=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
$as_echo "$ac_cv_working_alloca_h" >&6; }
if test $ac_cv_working_alloca_h = yes; then

$as_echo "#define HAVE_ALLOCA_H 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
$as_echo_n "checking for alloca... " >&6; }
if ${ac_cv_func_alloca_works+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  ifdef HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
void *alloca (size_t);
#    endif
#   endif
#  endif
# endif
#endif

int
main ()
{
char *p = (char *) alloca (1);
				    if (p) return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_func_alloca_works=yes
else
  ac_cv_func_alloca_works=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
$as_echo "$ac_cv_func_alloca_works" >&6; }

if test $ac_cv_func_alloca_works = yes; then

$as_echo "#define HAVE_ALLOCA 1" >>confdefs.h

else
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
# that cause trouble.  Some versions do not even contain alloca or
# contain a buggy version.  If you still want to use their alloca,
# use ar to extract alloca.o from them instead of compiling alloca.c.

ALLOCA=\${LIBOBJDIR}alloca.$ac_objext

$as_echo "#define C_ALLOCA 1" >>confdefs.h


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
$as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
if ${ac_cv_os_cray+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#if defined CRAY && ! defined CRAY2
webecray
#else
wenotbecray
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "webecray" >/dev/null 2>&1; then :
  ac_cv_os_cray=yes
else
  ac_cv_os_cray=no
fi
rm -f conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_os_cray" >&5
$as_echo "$ac_cv_os_cray" >&6; }
if test $ac_cv_os_cray = yes; then
  for ac_func in _getb67 GETB67 getb67; do
    as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :

cat >>confdefs.h <<_ACEOF
#define CRAY_STACKSEG_END $ac_func
_ACEOF

    break
fi

  done
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
$as_echo_n "checking stack direction for C alloca... " >&6; }
if ${ac_cv_c_stack_direction+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "$cross_compiling" = yes; then :
  ac_cv_c_stack_direction=0
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$ac_includes_default
int
find_stack_direction (int *addr, int depth)
{
  int dir, dummy = 0;
  if (! addr)
    addr = &dummy;
  *addr = addr < &dummy ? 1 : addr == &dummy ? 0 : -1;
  dir = depth ? find_stack_direction (addr, depth - 1) : 0;
  return dir + dummy;
}

int
main (int argc, char **argv)
{
  return find_stack_direction (0, argc + !argv + 20) < 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_c_stack_direction=1
else
  ac_cv_c_stack_direction=-1
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
$as_echo "$ac_cv_c_stack_direction" >&6; }
cat >>confdefs.h <<_ACEOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
_ACEOF


fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for declared timezone" >&5
$as_echo_n "checking for declared timezone... " >&6; }
if ${ac_cv_declared_timezone+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <time.h>
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif

int
main ()
{

    time_t foo = (time_t) timezone;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

  ac_cv_declared_timezone=yes

else

  ac_cv_declared_timezone=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_declared_timezone" >&5
$as_echo "$ac_cv_declared_timezone" >&6; }
  if test "$ac_cv_declared_timezone" = "yes"; then

$as_echo "#define HAVE_DECLARED_TIMEZONE 1" >>confdefs.h

  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for type of reentrant time-related functions" >&5
$as_echo_n "checking for type of reentrant time-related functions... " >&6; }
if ${ac_cv_time_r_type+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_time_r_type=POSIX

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <time.h>

main() {
char buf[27];
struct tm t;
time_t old = 0;
int r, s;

s = gmtime_r(&old, &t);
r = (int) asctime_r(&t, buf, 26);
if (r == s && s == 0) return (0);
return (1);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_time_r_type=hpux

else

  if test "$cross_compiling" = yes; then :

    ac_cv_time_r_type=POSIX

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <time.h>
main() {
  struct tm t, *s;
  time_t old = 0;
  char buf[27], *p;

  s = gmtime_r(&old, &t);
  p = asctime_r(&t, buf, 26);
  if (p == buf && s == &t) return (0);
  return (1);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    ac_cv_time_r_type=irix

else

    ac_cv_time_r_type=POSIX

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_time_r_type" >&5
$as_echo "$ac_cv_time_r_type" >&6; }
  case $ac_cv_time_r_type in
  hpux)
$as_echo "#define PHP_HPUX_TIME_R 1" >>confdefs.h
 ;;
  irix)
$as_echo "#define PHP_IRIX_TIME_R 1" >>confdefs.h
 ;;
  esac


    ac_fn_c_check_func "$LINENO" "readdir_r" "ac_cv_func_readdir_r"
if test "x$ac_cv_func_readdir_r" = xyes; then :
  ac_cv_func_readdir_r=yes
else
  ac_cv_func_readdir=no
fi

  if test "$ac_cv_func_readdir_r" = "yes"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for type of readdir_r" >&5
$as_echo_n "checking for type of readdir_r... " >&6; }
if ${ac_cv_what_readdir_r+:} false; then :
  $as_echo_n "(cached) " >&6
else

    if test "$cross_compiling" = yes; then :

      ac_cv_what_readdir_r=none

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>

#ifndef PATH_MAX
#define PATH_MAX 1024
#endif

main() {
  DIR *dir;
  char entry[sizeof(struct dirent)+PATH_MAX];
  struct dirent *pentry = (struct dirent *) &entry;

  dir = opendir("/");
  if (!dir)
    exit(1);
  if (readdir_r(dir, (struct dirent *) entry, &pentry) == 0)
    exit(0);
  exit(1);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      ac_cv_what_readdir_r=POSIX

else

      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>
int readdir_r(DIR *, struct dirent *);

_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

          ac_cv_what_readdir_r=old-style

else

          ac_cv_what_readdir_r=none

fi
rm -f conftest.err conftest.i conftest.$ac_ext

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_what_readdir_r" >&5
$as_echo "$ac_cv_what_readdir_r" >&6; }
    case $ac_cv_what_readdir_r in
    POSIX)

$as_echo "#define HAVE_POSIX_READDIR_R 1" >>confdefs.h
;;
    old-style)

$as_echo "#define HAVE_OLD_READDIR_R 1" >>confdefs.h
;;
    esac
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for in_addr_t" >&5
$as_echo_n "checking for in_addr_t... " >&6; }
if ${ac_cv_type_in_addr_t+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_NETINET_IN_H
#include <netinet/in.h>
#endif
_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "in_addr_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then :
  ac_cv_type_in_addr_t=yes
else
  ac_cv_type_in_addr_t=no
fi
rm -f conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_in_addr_t" >&5
$as_echo "$ac_cv_type_in_addr_t" >&6; }
if test $ac_cv_type_in_addr_t = no; then

$as_echo "#define in_addr_t u_int" >>confdefs.h

fi


for ac_func in crypt_r
do :
  ac_fn_c_check_func "$LINENO" "crypt_r" "ac_cv_func_crypt_r"
if test "x$ac_cv_func_crypt_r" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_CRYPT_R 1
_ACEOF
  php_crypt_r="1"
else
   php_crypt_r="0"
fi
done

if test "x$php_crypt_r" = "x1"; then

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking which data struct is used by crypt_r" >&5
$as_echo_n "checking which data struct is used by crypt_r... " >&6; }
if ${php_cv_crypt_r_style+:} false; then :
  $as_echo_n "(cached) " >&6
else

    php_cv_crypt_r_style=none
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _REENTRANT 1
#include <crypt.h>

int
main ()
{

CRYPTD buffer;
crypt_r("passwd", "hash", &buffer);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  php_cv_crypt_r_style=cryptd
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

    if test "$php_cv_crypt_r_style" = "none"; then
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _REENTRANT 1
#include <crypt.h>

int
main ()
{

struct crypt_data buffer;
crypt_r("passwd", "hash", &buffer);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  php_cv_crypt_r_style=struct_crypt_data
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    fi

    if test "$php_cv_crypt_r_style" = "none"; then
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define _REENTRANT 1
#define _GNU_SOURCE
#include <crypt.h>

int
main ()
{

struct crypt_data buffer;
crypt_r("passwd", "hash", &buffer);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  php_cv_crypt_r_style=struct_crypt_data_gnu_source
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_crypt_r_style" >&5
$as_echo "$php_cv_crypt_r_style" >&6; }

  if test "$php_cv_crypt_r_style" = "cryptd"; then

$as_echo "#define CRYPT_R_CRYPTD 1" >>confdefs.h

  fi
  if test "$php_cv_crypt_r_style" = "struct_crypt_data" -o "$php_cv_crypt_r_style" = "struct_crypt_data_gnu_source"; then

$as_echo "#define CRYPT_R_STRUCT_CRYPT_DATA 1" >>confdefs.h

  fi
  if test "$php_cv_crypt_r_style" = "struct_crypt_data_gnu_source"; then

$as_echo "#define CRYPT_R_GNU_SOURCE 1" >>confdefs.h

  fi
  if test "$php_cv_crypt_r_style" = "none"; then
    as_fn_error $? "Unable to detect data struct used by crypt_r" "$LINENO" 5
  fi

fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}General settings${T_ME}" >&5
$as_echo "${T_MD}General settings${T_ME}" >&6; }



# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi




php_enable_gcov=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to include gcov symbols" >&5
$as_echo_n "checking whether to include gcov symbols... " >&6; }
# Check whether --enable-gcov was given.
if test "${enable_gcov+set}" = set; then :
  enableval=$enable_gcov; PHP_GCOV=$enableval
else

  PHP_GCOV=no


fi


ext_output=$PHP_GCOV
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_GCOV" = "yes"; then

  if test "$GCC" != "yes"; then
    as_fn_error $? "GCC is required for --enable-gcov" "$LINENO" 5
  fi

    case `$php_shtool path $CC` in
    *ccache*) gcc_ccache=yes;;
    *) gcc_ccache=no;;
  esac

  if test "$gcc_ccache" = "yes" && (test -z "$CCACHE_DISABLE" || test "$CCACHE_DISABLE" != "1"); then
    as_fn_error $? "ccache must be disabled when --enable-gcov option is used. You can disable ccache by setting environment variable CCACHE_DISABLE=1." "$LINENO" 5
  fi

  ltp_version_list="1.5 1.6 1.7 1.9 1.10"

  # Extract the first word of "lcov", so it can be a program name with args.
set dummy lcov; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_LTP+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$LTP"; then
  ac_cv_prog_LTP="$LTP" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_LTP="lcov"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
LTP=$ac_cv_prog_LTP
if test -n "$LTP"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LTP" >&5
$as_echo "$LTP" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  # Extract the first word of "genhtml", so it can be a program name with args.
set dummy genhtml; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_LTP_GENHTML+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$LTP_GENHTML"; then
  ac_cv_prog_LTP_GENHTML="$LTP_GENHTML" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_LTP_GENHTML="genhtml"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
LTP_GENHTML=$ac_cv_prog_LTP_GENHTML
if test -n "$LTP_GENHTML"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LTP_GENHTML" >&5
$as_echo "$LTP_GENHTML" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST LTP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LTP_GENHTML"


  if test "$LTP"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ltp version" >&5
$as_echo_n "checking for ltp version... " >&6; }
if ${php_cv_ltp_version+:} false; then :
  $as_echo_n "(cached) " >&6
else

      php_cv_ltp_version=invalid
      ltp_version=`$LTP -v 2>/dev/null | $SED -e 's/^.* //'`
      for ltp_check_version in $ltp_version_list; do
        if test "$ltp_version" = "$ltp_check_version"; then
          php_cv_ltp_version="$ltp_check_version (ok)"
        fi
      done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_ltp_version" >&5
$as_echo "$php_cv_ltp_version" >&6; }
  else
    ltp_msg="To enable code coverage reporting you must have one of the following LTP versions installed: $ltp_version_list"
    as_fn_error $? "$ltp_msg" "$LINENO" 5
  fi

  case $php_cv_ltp_version in
    ""|invalid)
      ltp_msg="You must have one of the following versions of LTP: $ltp_version_list (found: $ltp_version)."
      as_fn_error $? "$ltp_msg" "$LINENO" 5
      LTP="exit 0;"
      ;;
  esac

  if test -z "$LTP_GENHTML"; then
    as_fn_error $? "Could not find genhtml from the LTP package" "$LINENO" 5
  fi


$as_echo "#define HAVE_GCOV 1" >>confdefs.h


  src=$abs_srcdir/Makefile.gcov
  ac_srcdir=$abs_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments



  CFLAGS=`echo "$CFLAGS" | $SED -e 's/-O[0-9s]*//g'`
  CXXFLAGS=`echo "$CXXFLAGS" | $SED -e 's/-O[0-9s]*//g'`


    CFLAGS="$CFLAGS -O0 -fprofile-arcs -ftest-coverage"
  CXXFLAGS="$CXXFLAGS -O0 -fprofile-arcs -ftest-coverage"
fi


php_enable_debug=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to include debugging symbols" >&5
$as_echo_n "checking whether to include debugging symbols... " >&6; }
# Check whether --enable-debug was given.
if test "${enable_debug+set}" = set; then :
  enableval=$enable_debug; PHP_DEBUG=$enableval
else

  PHP_DEBUG=no


fi


ext_output=$PHP_DEBUG
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_DEBUG" = "yes"; then
  PHP_DEBUG=1
  ZEND_DEBUG=yes

  CFLAGS=`echo "$CFLAGS" | $SED -e 's/-O[0-9s]*//g'`
  CXXFLAGS=`echo "$CXXFLAGS" | $SED -e 's/-O[0-9s]*//g'`

    if test "$GCC" = "yes" || test "$ICC" = "yes"; then
    CFLAGS="$CFLAGS -O0"
    CXXFLAGS="$CXXFLAGS -g -O0"
  fi
  if test "$SUNCC" = "yes"; then
    if test -n "$auto_cflags"; then
      CFLAGS="-g"
      CXXFLAGS="-g"
    else
      CFLAGS="$CFLAGS -g"
      CXXFLAGS="$CFLAGS -g"
    fi
  fi
else
  PHP_DEBUG=0
  ZEND_DEBUG=no
fi


php_with_layout=PHP

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking layout of installed files" >&5
$as_echo_n "checking layout of installed files... " >&6; }

# Check whether --with-layout was given.
if test "${with_layout+set}" = set; then :
  withval=$with_layout; PHP_LAYOUT=$withval
else

  PHP_LAYOUT=PHP


fi


ext_output=$PHP_LAYOUT
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




case $PHP_LAYOUT in
  GNU)
    oldstyleextdir=no
    ;;
  *)
    oldstyleextdir=yes
    ;;
esac


php_with_config_file_path=DEFAULT

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking path to configuration file" >&5
$as_echo_n "checking path to configuration file... " >&6; }

# Check whether --with-config-file-path was given.
if test "${with_config_file_path+set}" = set; then :
  withval=$with_config_file_path; PHP_CONFIG_FILE_PATH=$withval
else

  PHP_CONFIG_FILE_PATH=DEFAULT


fi


ext_output=$PHP_CONFIG_FILE_PATH
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_CONFIG_FILE_PATH" = "DEFAULT"; then
  case $PHP_LAYOUT in
    GNU)
      PHP_CONFIG_FILE_PATH=$sysconfdir
      ;;
    *)
      PHP_CONFIG_FILE_PATH=$libdir
      ;;
  esac
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking where to scan for configuration files" >&5
$as_echo_n "checking where to scan for configuration files... " >&6; }

php_with_config_file_scan_dir=DEFAULT



# Check whether --with-config-file-scan-dir was given.
if test "${with_config_file_scan_dir+set}" = set; then :
  withval=$with_config_file_scan_dir; PHP_CONFIG_FILE_SCAN_DIR=$withval
else

  PHP_CONFIG_FILE_SCAN_DIR=DEFAULT


fi


ext_output=$PHP_CONFIG_FILE_SCAN_DIR




if test "$PHP_CONFIG_FILE_SCAN_DIR" = "DEFAULT"; then
  PHP_CONFIG_FILE_SCAN_DIR=
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_CONFIG_FILE_SCAN_DIR" >&5
$as_echo "$PHP_CONFIG_FILE_SCAN_DIR" >&6; }

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"


php_enable_sigchild=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable PHP's own SIGCHLD handler" >&5
$as_echo_n "checking whether to enable PHP's own SIGCHLD handler... " >&6; }
# Check whether --enable-sigchild was given.
if test "${enable_sigchild+set}" = set; then :
  enableval=$enable_sigchild; PHP_SIGCHILD=$enableval
else

  PHP_SIGCHILD=no


fi


ext_output=$PHP_SIGCHILD
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SIGCHILD" = "yes"; then

$as_echo "#define PHP_SIGCHILD 1" >>confdefs.h

else

$as_echo "#define PHP_SIGCHILD 0" >>confdefs.h

fi


php_enable_libgcc=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to explicitly link against libgcc" >&5
$as_echo_n "checking whether to explicitly link against libgcc... " >&6; }
# Check whether --enable-libgcc was given.
if test "${enable_libgcc+set}" = set; then :
  enableval=$enable_libgcc; PHP_LIBGCC=$enableval
else

  PHP_LIBGCC=no


fi


ext_output=$PHP_LIBGCC
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_LIBGCC" = "yes"; then


  libgcc_libpath=`gcc --print-libgcc-file-name|$SED 's%/*[^/][^/]*$%%'`


  if test -z "$libgcc_libpath"; then
    as_fn_error $? "Cannot locate libgcc. Make sure that gcc is in your path" "$LINENO" 5
  fi

  if test "$libgcc_libpath" != "/usr/$PHP_LIBDIR" && test "$libgcc_libpath" != "/usr/lib"; then

  if test -z "$libgcc_libpath" || echo "$libgcc_libpath" | grep '^/' >/dev/null ; then
    ai_p=$libgcc_libpath
  else

    ep_dir=`echo $libgcc_libpath|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$libgcc_libpath"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi



  case gcc in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lgcc"
   ;;
  esac


fi


php_enable_short_tags=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable short tags by default" >&5
$as_echo_n "checking whether to enable short tags by default... " >&6; }
# Check whether --enable-short-tags was given.
if test "${enable_short_tags+set}" = set; then :
  enableval=$enable_short_tags; PHP_SHORT_TAGS=$enableval
else

  PHP_SHORT_TAGS=yes


fi


ext_output=$PHP_SHORT_TAGS
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SHORT_TAGS" = "yes"; then

$as_echo "#define DEFAULT_SHORT_OPEN_TAG \"1\"" >>confdefs.h

else

$as_echo "#define DEFAULT_SHORT_OPEN_TAG \"0\"" >>confdefs.h

fi


php_enable_dmalloc=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable dmalloc" >&5
$as_echo_n "checking whether to enable dmalloc... " >&6; }
# Check whether --enable-dmalloc was given.
if test "${enable_dmalloc+set}" = set; then :
  enableval=$enable_dmalloc; PHP_DMALLOC=$enableval
else

  PHP_DMALLOC=no


fi


ext_output=$PHP_DMALLOC
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_DMALLOC" = "yes"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dmalloc_error in -ldmalloc" >&5
$as_echo_n "checking for dmalloc_error in -ldmalloc... " >&6; }
if ${ac_cv_lib_dmalloc_dmalloc_error+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldmalloc  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dmalloc_error ();
int
main ()
{
return dmalloc_error ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dmalloc_dmalloc_error=yes
else
  ac_cv_lib_dmalloc_dmalloc_error=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dmalloc_dmalloc_error" >&5
$as_echo "$ac_cv_lib_dmalloc_dmalloc_error" >&6; }
if test "x$ac_cv_lib_dmalloc_dmalloc_error" = xyes; then :



  case dmalloc in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ldmalloc $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DMALLOC 1" >>confdefs.h

    CPPFLAGS="$CPPFLAGS -DDMALLOC_FUNC_CHECK"

else

    as_fn_error $? "Problem with enabling dmalloc. Please check config.log for details." "$LINENO" 5

fi

fi


php_enable_ipv6=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable IPv6 support" >&5
$as_echo_n "checking whether to enable IPv6 support... " >&6; }
# Check whether --enable-ipv6 was given.
if test "${enable_ipv6+set}" = set; then :
  enableval=$enable_ipv6; PHP_IPV6=$enableval
else

  PHP_IPV6=yes


fi


ext_output=$PHP_IPV6
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_IPV6" != "no" && test "$ac_cv_ipv6_support" = yes; then

$as_echo "#define HAVE_IPV6 1" >>confdefs.h

fi


php_enable_dtrace=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable DTrace support" >&5
$as_echo_n "checking whether to enable DTrace support... " >&6; }
# Check whether --enable-dtrace was given.
if test "${enable_dtrace+set}" = set; then :
  enableval=$enable_dtrace; PHP_DTRACE=$enableval
else

  PHP_DTRACE=no


fi


ext_output=$PHP_DTRACE
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_DTRACE" = "yes"; then
  for ac_header in sys/sdt.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "sys/sdt.h" "ac_cv_header_sys_sdt_h" "$ac_includes_default"
if test "x$ac_cv_header_sys_sdt_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SYS_SDT_H 1
_ACEOF


  case "" in
    "") ac_srcdir="$abs_srcdir/"; unset ac_bdir;;
    /*) ac_srcdir=`echo ""|cut -c 2-`"/"; ac_bdir=$ac_srcdir;;
    *) ac_srcdir="$abs_srcdir/Zend/zend_dtrace.d/"; ac_bdir="/";;
  esac

  ac_provsrc=Zend/zend_dtrace.d
  old_IFS=$IFS
  IFS=.
  set $ac_provsrc
  ac_provobj=$1
  IFS=$old_IFS

  ac_hdrobj=Zend/zend_dtrace_gen.h

  case $host_alias in
  *freebsd*)
    PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_provsrc.o"
    PHP_LDFLAGS="$PHP_LDFLAGS -lelf"
    ;;
  *solaris*)
    PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_provsrc.lo"
    ;;
  *linux*)
    PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_provsrc.lo"
    ;;
  esac

  old_IFS=$IFS
  for ac_src in main/main.c Zend/zend_API.c \
      Zend/zend_execute.c Zend/zend_exceptions.c \
      Zend/zend_dtrace.c Zend/zend.c; do
    IFS=.
    set $ac_src
    ac_obj=$1
    IFS=$old_IFS

    PHP_DTRACE_OBJS="$PHP_DTRACE_OBJS $ac_bdir$ac_obj.lo"
  done;

  case $php_sapi_module in
  shared)
    for ac_lo in $PHP_DTRACE_OBJS; do
      dtrace_objs="$dtrace_objs `echo $ac_lo | $SED -e 's,\.lo$,.o,' -e 's#\(.*\)\/#\1\/.libs\/#'`"
    done;
    ;;
  *)
    dtrace_objs='$(PHP_DTRACE_OBJS:.lo=.o)'
    ;;
  esac

  cat>>Makefile.objects<<EOF

$abs_srcdir/$ac_provsrc:;

$ac_bdir$ac_hdrobj: $abs_srcdir/$ac_provsrc
	CFLAGS="\$(CFLAGS_CLEAN)" dtrace -h -C -s $ac_srcdir$ac_provsrc -o \$@.bak && \$(SED) -e 's,PHP_,DTRACE_,g' \$@.bak > \$@

\$(PHP_DTRACE_OBJS): $ac_bdir$ac_hdrobj

EOF

  case $host_alias in
  *solaris*|*linux*)
    dtrace_prov_name="`echo $ac_provsrc | $SED -e 's#\(.*\)\/##'`.o"
    dtrace_lib_dir="`echo $ac_bdir$ac_provsrc | $SED -e 's#\(.*\)/[^/]*#\1#'`/.libs"
    dtrace_d_obj="`echo $ac_bdir$ac_provsrc | $SED -e 's#\(.*\)/\([^/]*\)#\1/.libs/\2#'`.o"
    dtrace_nolib_objs='$(PHP_DTRACE_OBJS:.lo=.o)'
    for ac_lo in $PHP_DTRACE_OBJS; do
      dtrace_lib_objs="$dtrace_lib_objs `echo $ac_lo | $SED -e 's,\.lo$,.o,' -e 's#\(.*\)\/#\1\/.libs\/#'`"
    done;
    cat>>Makefile.objects<<EOF
$ac_bdir$ac_provsrc.lo: \$(PHP_DTRACE_OBJS)
	echo "# Generated by Makefile for libtool" > \$@
	@test -d "$dtrace_lib_dir" || mkdir $dtrace_lib_dir
	if CFLAGS="\$(CFLAGS_CLEAN)" dtrace -G -o $dtrace_d_obj -s $abs_srcdir/$ac_provsrc $dtrace_lib_objs 2> /dev/null && test -f "$dtrace_d_obj"; then \\
	  echo "pic_object='.libs/$dtrace_prov_name'" >> \$@ ;\\
	else \\
	  echo "pic_object='none'" >> \$@ ;\\
	fi
	if CFLAGS="\$(CFLAGS_CLEAN)" dtrace -G -o $ac_bdir$ac_provsrc.o -s $abs_srcdir/$ac_provsrc $dtrace_nolib_objs 2> /dev/null && test -f "$ac_bdir$ac_provsrc.o"; then \\
	  echo "non_pic_object='$dtrace_prov_name'" >> \$@ ;\\
	else \\
	  echo "non_pic_object='none'" >> \$@ ;\\
	fi

EOF

    ;;
  *)
cat>>Makefile.objects<<EOF
$ac_bdir$ac_provsrc.o: \$(PHP_DTRACE_OBJS)
	CFLAGS="\$(CFLAGS_CLEAN)" dtrace -G -o \$@ -s $abs_srcdir/$ac_provsrc $dtrace_objs

EOF
    ;;
  esac


$as_echo "#define HAVE_DTRACE 1" >>confdefs.h


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_DTRACE_OBJS"


else

    as_fn_error $? "Cannot find sys/sdt.h which is required for DTrace support" "$LINENO" 5

fi

done

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how big to make fd sets" >&5
$as_echo_n "checking how big to make fd sets... " >&6; }

php_enable_fd_setsize=no


# Check whether --enable-fd-setsize was given.
if test "${enable_fd_setsize+set}" = set; then :
  enableval=$enable_fd_setsize; PHP_FD_SETSIZE=$enableval
else

  PHP_FD_SETSIZE=no


fi


ext_output=$PHP_FD_SETSIZE





if test "$PHP_FD_SETSIZE" != "no"; then
  if test "0$PHP_FD_SETSIZE" -gt 0 2>/dev/null; then
    CPPFLAGS="$CPPFLAGS -DFD_SETSIZE=$PHP_FD_SETSIZE"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: using $PHP_FD_SETSIZE" >&5
$as_echo "using $PHP_FD_SETSIZE" >&6; }
  else
    as_fn_error $? "Invalid value passed to --enable-fd-setsize!" "$LINENO" 5
  fi
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: using system default" >&5
$as_echo "using system default" >&6; }
fi



# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi




  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Configuring extensions${T_ME}" >&5
$as_echo "${T_MD}Configuring extensions${T_ME}" >&6; }



# Check whether --enable-all was given.
if test "${enable_all+set}" = set; then :
  enableval=$enable_all;
  PHP_ENABLE_ALL=$enableval

fi


# reading config stubs




# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
$as_echo_n "checking size of long... " >&6; }
if ${ac_cv_sizeof_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long" >&5
$as_echo "$ac_cv_sizeof_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG $ac_cv_sizeof_long
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
$as_echo_n "checking size of int... " >&6; }
if ${ac_cv_sizeof_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_int" >&5
$as_echo "$ac_cv_sizeof_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_INT $ac_cv_sizeof_int
_ACEOF



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for int32_t" >&5
$as_echo_n "checking for int32_t... " >&6; }
if ${ac_cv_int_type_int32_t+:} false; then :
  $as_echo_n "(cached) " >&6
else

cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_SYS_TYPES_H
# include <sys/types.h>
#endif
#if HAVE_INTTYPES_H
# include <inttypes.h>
#elif HAVE_STDINT_H
# include <stdint.h>
#endif
int
main ()
{
if ((int32_t *) 0)
  return 0;
if (sizeof (int32_t))
  return 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_int_type_int32_t=yes
else
  ac_cv_int_type_int32_t=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_int_type_int32_t" >&5
$as_echo "$ac_cv_int_type_int32_t" >&6; }
if test "$ac_cv_int_type_int32_t" = "yes"; then

$as_echo "#define HAVE_INT32_T 1" >>confdefs.h

fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for uint32_t" >&5
$as_echo_n "checking for uint32_t... " >&6; }
if ${ac_cv_int_type_uint32_t+:} false; then :
  $as_echo_n "(cached) " >&6
else

cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_SYS_TYPES_H
# include <sys/types.h>
#endif
#if HAVE_INTTYPES_H
# include <inttypes.h>
#elif HAVE_STDINT_H
# include <stdint.h>
#endif
int
main ()
{
if ((uint32_t *) 0)
  return 0;
if (sizeof (uint32_t))
  return 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_int_type_uint32_t=yes
else
  ac_cv_int_type_uint32_t=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_int_type_uint32_t" >&5
$as_echo "$ac_cv_int_type_uint32_t" >&6; }
if test "$ac_cv_int_type_uint32_t" = "yes"; then

$as_echo "#define HAVE_UINT32_T 1" >>confdefs.h

fi


for ac_header in  \
sys/types.h \
inttypes.h \
stdint.h \
string.h \
stdlib.h

do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done


for ac_func in strtoll atoll strftime
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done




PHP_DATE_CFLAGS="-I@ext_builddir@/lib"
timelib_sources="lib/astro.c lib/dow.c lib/parse_date.c lib/parse_tz.c
                 lib/timelib.c lib/tm2unixtime.c lib/unixtime2tm.c lib/parse_iso_intervals.c lib/interval.c"


  ext_builddir=ext/date
  ext_srcdir=$abs_srcdir/ext/date

  ac_extra=`echo "$PHP_DATE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_DATE_SHARED=no


  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC date"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC date"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_DATE_SHARED=yes

  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_date="$shared_objects_date $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdate.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(PHPDATE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdate.so '$ext_builddir'/phpdate.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) -L$(top_builddir)/netware -lphp5lib $(DATE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(PHPDATE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdate.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdate.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_date"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpdate.$suffix: $ext_builddir/phpdate.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdate.$suffix \$(phplibdir)

$ext_builddir/phpdate.$suffix: \$(shared_objects_date) \$(PHPDATE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/date.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(DATE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/date.so '$ext_builddir'/date.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) -L$(top_builddir)/netware -lphp5lib $(E_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_date) $(DATE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/date.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/date.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_date"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/date.$suffix: $ext_builddir/date.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/date.$suffix \$(phplibdir)

$ext_builddir/date.$suffix: \$(shared_objects_date) \$(DATE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_DATE 1
_ACEOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_DATE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC date"
        ;;
      *)


  case ext/date in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/date"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/date/"; ac_bdir="ext/date/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_date.c $timelib_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC date"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=date

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi




    $php_shtool mkdir -p $ext_builddir/lib



  if test "$ext_builddir/lib" != "/usr/include"; then

  if test -z "$ext_builddir/lib" || echo "$ext_builddir/lib" | grep '^/' >/dev/null ; then
    ai_p=$ext_builddir/lib
  else

    ep_dir=`echo $ext_builddir/lib|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ext_builddir/lib"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$ext_srcdir/lib" != "/usr/include"; then

  if test -z "$ext_srcdir/lib" || echo "$ext_srcdir/lib" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/lib
  else

    ep_dir=`echo $ext_srcdir/lib|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ext_srcdir/lib"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi




    header_path=ext/date
    for header_file in php_date.h lib/timelib.h lib/timelib_structs.h lib/timelib_config.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



cat > $ext_builddir/lib/timelib_config.h <<EOF
#ifdef PHP_WIN32
# include "config.w32.h"
#else
# include <php_config.h>
#endif
EOF



php_with_regex=php



# Check whether --with-regex was given.
if test "${with_regex+set}" = set; then :
  withval=$with_regex; PHP_REGEX=$withval
else

  PHP_REGEX=php


fi


ext_output=$PHP_REGEX





case $PHP_REGEX in
  system)
    if test "$PHP_SAPI" = "apache" || test "$PHP_SAPI" = "apache2filter" || test "$PHP_SAPI" = "apache2handler"; then
      REGEX_TYPE=php
    else
      REGEX_TYPE=system
    fi
    ;;
  yes | php)
    REGEX_TYPE=php
    ;;
  *)
    REGEX_TYPE=php
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Invalid regex library type selected. Using default value: php" >&5
$as_echo "$as_me: WARNING: Invalid regex library type selected. Using default value: php" >&2;}
    ;;
esac

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking which regex library to use" >&5
$as_echo_n "checking which regex library to use... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $REGEX_TYPE" >&5
$as_echo "$REGEX_TYPE" >&6; }

if test "$REGEX_TYPE" = "php"; then
  ereg_regex_sources="regex/regcomp.c regex/regexec.c regex/regerror.c regex/regfree.c"
  ereg_regex_headers="regex/"
  PHP_EREG_CFLAGS="-Dregexec=php_regexec -Dregerror=php_regerror -Dregfree=php_regfree -Dregcomp=php_regcomp"
fi


  ext_builddir=ext/ereg
  ext_srcdir=$abs_srcdir/ext/ereg

  ac_extra=`echo "$PHP_EREG_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_EREG_SHARED=no


  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ereg"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ereg"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_EREG_SHARED=yes

  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_ereg="$shared_objects_ereg $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpereg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(PHPEREG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpereg.so '$ext_builddir'/phpereg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) -L$(top_builddir)/netware -lphp5lib $(EREG_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(PHPEREG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpereg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpereg.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ereg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpereg.$suffix: $ext_builddir/phpereg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpereg.$suffix \$(phplibdir)

$ext_builddir/phpereg.$suffix: \$(shared_objects_ereg) \$(PHPEREG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ereg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(EREG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ereg.so '$ext_builddir'/ereg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) -L$(top_builddir)/netware -lphp5lib $(G_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ereg) $(EREG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ereg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ereg.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ereg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ereg.$suffix: $ext_builddir/ereg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ereg.$suffix \$(phplibdir)

$ext_builddir/ereg.$suffix: \$(shared_objects_ereg) \$(EREG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_EREG 1
_ACEOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_EREG_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ereg"
        ;;
      *)


  case ext/ereg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ereg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ereg/"; ac_bdir="ext/ereg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ereg.c $ereg_regex_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ereg"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ereg

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    header_path=ext/ereg
    for header_file in php_ereg.h php_regex.h $ereg_regex_headers; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



if test "$REGEX_TYPE" = "php"; then

$as_echo "#define HAVE_REGEX_T_RE_MAGIC 1" >>confdefs.h


$as_echo "#define HSREGEX 1" >>confdefs.h


$as_echo "#define REGEX 1" >>confdefs.h



    $php_shtool mkdir -p $ext_builddir/regex



  if test "$ext_srcdir/regex" != "/usr/include"; then

  if test -z "$ext_srcdir/regex" || echo "$ext_srcdir/regex" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/regex
  else

    ep_dir=`echo $ext_srcdir/regex|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ext_srcdir/regex"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

elif test "$REGEX_TYPE" = "system"; then

$as_echo "#define REGEX 0" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether field re_magic exists in struct regex_t" >&5
$as_echo_n "checking whether field re_magic exists in struct regex_t... " >&6; }
if ${ac_cv_regex_t_re_magic+:} false; then :
  $as_echo_n "(cached) " >&6
else

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <regex.h>
int
main ()
{
regex_t rt; rt.re_magic;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_regex_t_re_magic=yes
else
  ac_cv_regex_t_re_magic=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_regex_t_re_magic" >&5
$as_echo "$ac_cv_regex_t_re_magic" >&6; }
  if test "$ac_cv_regex_t_re_magic" = "yes"; then

$as_echo "#define HAVE_REGEX_T_RE_MAGIC  " >>confdefs.h

  fi
fi



php_enable_libxml=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable LIBXML support" >&5
$as_echo_n "checking whether to enable LIBXML support... " >&6; }
# Check whether --enable-libxml was given.
if test "${enable_libxml+set}" = set; then :
  enableval=$enable_libxml; PHP_LIBXML=$enableval
else

  PHP_LIBXML=yes
  test "$PHP_ENABLE_ALL" && PHP_LIBXML=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LIBXML in
shared,*)
  PHP_LIBXML=`echo "$PHP_LIBXML"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LIBXML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_LIBXML" != "no"; then

    ext_shared=no


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LIBXML_SHARED_LIBADD="$LIBXML_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LIBXML_SHARED_LIBADD="$LIBXML_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LIBXML_SHARED_LIBADD="-L$ai_p $LIBXML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LIBXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $LIBXML_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $LIBXML_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi


$as_echo "#define HAVE_LIBXML 1" >>confdefs.h


  ext_builddir=ext/libxml
  ext_srcdir=$abs_srcdir/ext/libxml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_LIBXML_SHARED=no


  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC libxml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC libxml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_LIBXML_SHARED=yes

  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_libxml="$shared_objects_libxml $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phplibxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(PHPLIBXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phplibxml.so '$ext_builddir'/phplibxml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) -L$(top_builddir)/netware -lphp5lib $(LIBXML_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(PHPLIBXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phplibxml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phplibxml.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libxml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phplibxml.$suffix: $ext_builddir/phplibxml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phplibxml.$suffix \$(phplibdir)

$ext_builddir/phplibxml.$suffix: \$(shared_objects_libxml) \$(PHPLIBXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/libxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(LIBXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/libxml.so '$ext_builddir'/libxml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) -L$(top_builddir)/netware -lphp5lib $(XML_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libxml) $(LIBXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/libxml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/libxml.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libxml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/libxml.$suffix: $ext_builddir/libxml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/libxml.$suffix \$(phplibdir)

$ext_builddir/libxml.$suffix: \$(shared_objects_libxml) \$(LIBXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_LIBXML 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_LIBXML_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC libxml"
        ;;
      *)


  case ext/libxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/libxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/libxml/"; ac_bdir="ext/libxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libxml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC libxml"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=libxml

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    for header_file in ext/libxml/php_libxml.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
    as_fn_error $? "xml2-config not found. Please check your libxml2 installation." "$LINENO" 5

  fi

fi



php_with_openssl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL support" >&5
$as_echo_n "checking for OpenSSL support... " >&6; }

# Check whether --with-openssl was given.
if test "${with_openssl+set}" = set; then :
  withval=$with_openssl; PHP_OPENSSL=$withval
else

  PHP_OPENSSL=no
  test "$PHP_ENABLE_ALL" && PHP_OPENSSL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OPENSSL in
shared,*)
  PHP_OPENSSL=`echo "$PHP_OPENSSL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_OPENSSL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_kerberos=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Kerberos support" >&5
$as_echo_n "checking for Kerberos support... " >&6; }

# Check whether --with-kerberos was given.
if test "${with_kerberos+set}" = set; then :
  withval=$with_kerberos; PHP_KERBEROS=$withval
else

  PHP_KERBEROS=no


fi


ext_output=$PHP_KERBEROS
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_OPENSSL" != "no"; then

  ext_builddir=ext/openssl
  ext_srcdir=$abs_srcdir/ext/openssl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_OPENSSL_SHARED=no


  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC openssl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC openssl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_OPENSSL_SHARED=yes

  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_openssl="$shared_objects_openssl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpopenssl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(PHPOPENSSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpopenssl.so '$ext_builddir'/phpopenssl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) -L$(top_builddir)/netware -lphp5lib $(OPENSSL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(PHPOPENSSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpopenssl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpopenssl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_openssl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpopenssl.$suffix: $ext_builddir/phpopenssl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpopenssl.$suffix \$(phplibdir)

$ext_builddir/phpopenssl.$suffix: \$(shared_objects_openssl) \$(PHPOPENSSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/openssl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(OPENSSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/openssl.so '$ext_builddir'/openssl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) -L$(top_builddir)/netware -lphp5lib $(NSSL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_openssl) $(OPENSSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/openssl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/openssl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_openssl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/openssl.$suffix: $ext_builddir/openssl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/openssl.$suffix \$(phplibdir)

$ext_builddir/openssl.$suffix: \$(shared_objects_openssl) \$(OPENSSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_OPENSSL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_OPENSSL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC openssl"
        ;;
      *)


  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c xp_ssl.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC openssl"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=openssl

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST OPENSSL_SHARED_LIBADD"


  if test "$PHP_KERBEROS" != "no"; then

  found_kerberos=no
  unset KERBEROS_CFLAGS
  unset KERBEROS_LIBS

    if test -z "$KRB5_CONFIG"; then
    # Extract the first word of "krb5-config", so it can be a program name with args.
set dummy krb5-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_KRB5_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $KRB5_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_KRB5_CONFIG="$KRB5_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_dummy="$PATH:/usr/kerberos/bin:/usr/local/bin"
for as_dir in $as_dummy
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_KRB5_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_KRB5_CONFIG" && ac_cv_path_KRB5_CONFIG="no"
  ;;
esac
fi
KRB5_CONFIG=$ac_cv_path_KRB5_CONFIG
if test -n "$KRB5_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $KRB5_CONFIG" >&5
$as_echo "$KRB5_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  fi

    if test "$PHP_KERBEROS" = "yes" && test -x "$KRB5_CONFIG"; then
    KERBEROS_LIBS=`$KRB5_CONFIG --libs gssapi`
    KERBEROS_CFLAGS=`$KRB5_CONFIG --cflags gssapi`

    if test -n "$KERBEROS_LIBS"; then
      found_kerberos=yes

  for ac_i in $KERBEROS_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $KERBEROS_CFLAGS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_kerberos" = "no"; then

    if test "$PHP_KERBEROS" = "yes"; then
      PHP_KERBEROS="/usr/kerberos /usr/local /usr"
    fi

    for i in $PHP_KERBEROS; do
      if test -f $i/$PHP_LIBDIR/libkrb5.a || test -f $i/$PHP_LIBDIR/libkrb5.$SHLIB_SUFFIX_NAME; then
        PHP_KERBEROS_DIR=$i
        break
      fi
    done

    if test "$PHP_KERBEROS_DIR"; then
      found_kerberos=yes

  if test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_KERBEROS_DIR/$PHP_LIBDIR" || echo "$PHP_KERBEROS_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_KERBEROS_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_KERBEROS_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi



  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lgssapi_krb5"
    else


  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lgssapi_krb5"
   ;;
  esac


    fi
   ;;
  esac




  case krb5 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lkrb5"
    else


  case krb5 in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lkrb5"
   ;;
  esac


    fi
   ;;
  esac




  case k5crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lk5crypto"
    else


  case k5crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lk5crypto"
   ;;
  esac


    fi
   ;;
  esac




  case com_err in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -lcom_err"
    else


  case com_err in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lcom_err"
   ;;
  esac


    fi
   ;;
  esac



  if test "$PHP_KERBEROS_DIR/include" != "/usr/include"; then

  if test -z "$PHP_KERBEROS_DIR/include" || echo "$PHP_KERBEROS_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/include
  else

    ep_dir=`echo $PHP_KERBEROS_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_KERBEROS_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    fi
  fi

  if test "$found_kerberos" = "yes"; then
:

  fi

  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DSA_get_default_method in -lssl" >&5
$as_echo_n "checking for DSA_get_default_method in -lssl... " >&6; }
if ${ac_cv_lib_ssl_DSA_get_default_method+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lssl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char DSA_get_default_method ();
int
main ()
{
return DSA_get_default_method ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ssl_DSA_get_default_method=yes
else
  ac_cv_lib_ssl_DSA_get_default_method=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_DSA_get_default_method" >&5
$as_echo "$ac_cv_lib_ssl_DSA_get_default_method" >&6; }
if test "x$ac_cv_lib_ssl_DSA_get_default_method" = xyes; then :

$as_echo "#define HAVE_DSA_DEFAULT_METHOD 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for X509_free in -lcrypto" >&5
$as_echo_n "checking for X509_free in -lcrypto... " >&6; }
if ${ac_cv_lib_crypto_X509_free+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypto  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char X509_free ();
int
main ()
{
return X509_free ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypto_X509_free=yes
else
  ac_cv_lib_crypto_X509_free=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_X509_free" >&5
$as_echo "$ac_cv_lib_crypto_X509_free" >&6; }
if test "x$ac_cv_lib_crypto_X509_free" = xyes; then :

$as_echo "#define HAVE_DSA_DEFAULT_METHOD 1" >>confdefs.h

fi



  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5
    fi

    if test -n "$OPENSSL_LIBS"; then

  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="$OPENSSL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi
    if test -n "$OPENSSL_INCS"; then

  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then

    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      as_fn_error $? "Cannot find OpenSSL's <evp.h>" "$LINENO" 5
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      as_fn_error $? "Cannot find OpenSSL's libraries" "$LINENO" 5
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version" >&5
$as_echo_n "checking for OpenSSL version... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: >= 0.9.6" >&5
$as_echo ">= 0.9.6" >&6; }

else

      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5

fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS


  if test "$OPENSSL_INCDIR" != "/usr/include"; then

  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else

    ep_dir=`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRYPTO_free in -lcrypto" >&5
$as_echo_n "checking for CRYPTO_free in -lcrypto... " >&6; }
if ${ac_cv_lib_crypto_CRYPTO_free+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypto  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char CRYPTO_free ();
int
main ()
{
return CRYPTO_free ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypto_CRYPTO_free=yes
else
  ac_cv_lib_crypto_CRYPTO_free=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_CRYPTO_free" >&5
$as_echo "$ac_cv_lib_crypto_CRYPTO_free" >&6; }
if test "x$ac_cv_lib_crypto_CRYPTO_free" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-lcrypto $OPENSSL_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free

      as_fn_error $? "libcrypto not found!" "$LINENO" 5


fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL_CTX_set_ssl_version in -lssl" >&5
$as_echo_n "checking for SSL_CTX_set_ssl_version in -lssl... " >&6; }
if ${ac_cv_lib_ssl_SSL_CTX_set_ssl_version+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lssl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char SSL_CTX_set_ssl_version ();
int
main ()
{
return SSL_CTX_set_ssl_version ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=yes
else
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&5
$as_echo "$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&6; }
if test "x$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      found_openssl=yes


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version

      as_fn_error $? "libssl not found!" "$LINENO" 5


fi

    LIBS=$old_LIBS


  case ssl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-lssl $OPENSSL_SHARED_LIBADD"
    else


  case ssl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lssl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-lcrypto $OPENSSL_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then

  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else

    ep_dir=`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        OPENSSL_SHARED_LIBADD="-L$ai_p $OPENSSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OPENSSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $OPENSSL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR




$as_echo "#define HAVE_OPENSSL_EXT 1" >>confdefs.h


else
    as_fn_error $? "OpenSSL check failed. Please check config.log for more information." "$LINENO" 5

  fi

fi




php_with_pcre_regex=yes



# Check whether --with-pcre-regex was given.
if test "${with_pcre_regex+set}" = set; then :
  withval=$with_pcre_regex; PHP_PCRE_REGEX=$withval
else

  PHP_PCRE_REGEX=yes


fi


ext_output=$PHP_PCRE_REGEX





  if test "$PHP_PCRE_REGEX" != "yes" && test "$PHP_PCRE_REGEX" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PCRE headers location" >&5
$as_echo_n "checking for PCRE headers location... " >&6; }
    for i in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/include $PHP_PCRE_REGEX/include/pcre $PHP_PCRE_REGEX/local/include; do
      test -f $i/pcre.h && PCRE_INCDIR=$i
    done

    if test -z "$PCRE_INCDIR"; then
      as_fn_error $? "Could not find pcre.h in $PHP_PCRE_REGEX" "$LINENO" 5
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PCRE_INCDIR" >&5
$as_echo "$PCRE_INCDIR" >&6; }

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PCRE library location" >&5
$as_echo_n "checking for PCRE library location... " >&6; }
    for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/$PHP_LIBDIR; do
      test -f $j/libpcre.a || test -f $j/libpcre.$SHLIB_SUFFIX_NAME && PCRE_LIBDIR=$j
    done

    if test -z "$PCRE_LIBDIR" ; then
      as_fn_error $? "Could not find libpcre.(a|$SHLIB_SUFFIX_NAME) in $PHP_PCRE_REGEX" "$LINENO" 5
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PCRE_LIBDIR" >&5
$as_echo "$PCRE_LIBDIR" >&6; }


    pcre_major=`grep PCRE_MAJOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    pcre_minor=`grep PCRE_MINOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`

    pcre_minor_length=`echo "$pcre_minor" | wc -c | sed -e 's/^0-9//g'`
    if test "$pcre_minor_length" -eq 2 ; then
      pcre_minor="$pcre_minor"0
    fi
    pcre_version=$pcre_major$pcre_minor
    if test "$pcre_version" -lt 660; then
      as_fn_error $? "The PCRE extension requires PCRE library version >= 6.6" "$LINENO" 5
    fi



  if test -n "$PCRE_LIBDIR"; then

  if test "$PCRE_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PCRE_LIBDIR" != "/usr/lib"; then

  if test -z "$PCRE_LIBDIR" || echo "$PCRE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_LIBDIR
  else

    ep_dir=`echo $PCRE_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PCRE_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case pcre in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpcre $LIBS"
   ;;
  esac






$as_echo "#define HAVE_PCRE 1" >>confdefs.h


  if test "$PCRE_INCDIR" != "/usr/include"; then

  if test -z "$PCRE_INCDIR" || echo "$PCRE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_INCDIR
  else

    ep_dir=`echo $PCRE_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PCRE_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  ext_builddir=ext/pcre
  ext_srcdir=$abs_srcdir/ext/pcre

  ac_extra=

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_PCRE_SHARED=no


  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcre"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_PCRE_SHARED=yes

  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pcre="$shared_objects_pcre $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcre.so '$ext_builddir'/phppcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(PCRE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcre.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppcre.$suffix: $ext_builddir/phppcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcre.$suffix \$(phplibdir)

$ext_builddir/phppcre.$suffix: \$(shared_objects_pcre) \$(PHPPCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcre.so '$ext_builddir'/pcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(E_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcre.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcre.$suffix: $ext_builddir/pcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcre.$suffix \$(phplibdir)

$ext_builddir/pcre.$suffix: \$(shared_objects_pcre) \$(PCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PCRE 1
_ACEOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_PCRE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pcre"
        ;;
      *)


  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pcre

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    header_path=ext/pcre
    for header_file in php_pcre.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done


  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PCRE library to use" >&5
$as_echo_n "checking for PCRE library to use... " >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: bundled" >&5
$as_echo "bundled" >&6; }
    pcrelib_sources="pcrelib/pcre_chartables.c pcrelib/pcre_ucd.c \
    				 pcrelib/pcre_compile.c pcrelib/pcre_config.c pcrelib/pcre_exec.c \
    				 pcrelib/pcre_fullinfo.c pcrelib/pcre_get.c pcrelib/pcre_globals.c \
    				 pcrelib/pcre_maketables.c pcrelib/pcre_newline.c \
    				 pcrelib/pcre_ord2utf8.c pcrelib/pcre_refcount.c pcrelib/pcre_study.c \
    				 pcrelib/pcre_tables.c pcrelib/pcre_valid_utf8.c \
    				 pcrelib/pcre_version.c pcrelib/pcre_xclass.c"
    PHP_PCRE_CFLAGS="-DHAVE_CONFIG_H -I@ext_srcdir@/pcrelib"

  ext_builddir=ext/pcre
  ext_srcdir=$abs_srcdir/ext/pcre

  ac_extra=`echo "$PHP_PCRE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_PCRE_SHARED=no


  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcre"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_PCRE_SHARED=yes

  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pcre="$shared_objects_pcre $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcre.so '$ext_builddir'/phppcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(PCRE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PHPPCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcre.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppcre.$suffix: $ext_builddir/phppcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcre.$suffix \$(phplibdir)

$ext_builddir/phppcre.$suffix: \$(shared_objects_pcre) \$(PHPPCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcre.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcre.so '$ext_builddir'/pcre.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) -L$(top_builddir)/netware -lphp5lib $(E_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcre) $(PCRE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcre.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcre.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcre.$suffix: $ext_builddir/pcre.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcre.$suffix \$(phplibdir)

$ext_builddir/pcre.$suffix: \$(shared_objects_pcre) \$(PCRE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PCRE 1
_ACEOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_PCRE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pcre"
        ;;
      *)


  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $pcrelib_sources php_pcre.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pcre

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/pcrelib"




    header_path=ext/pcre
    for header_file in php_pcre.h pcrelib/; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



$as_echo "#define HAVE_BUNDLED_PCRE 1" >>confdefs.h

  fi



php_with_sqlite3=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable the SQLite3 extension" >&5
$as_echo_n "checking whether to enable the SQLite3 extension... " >&6; }

# Check whether --with-sqlite3 was given.
if test "${with_sqlite3+set}" = set; then :
  withval=$with_sqlite3; PHP_SQLITE3=$withval
else

  PHP_SQLITE3=yes
  test "$PHP_ENABLE_ALL" && PHP_SQLITE3=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SQLITE3 in
shared,*)
  PHP_SQLITE3=`echo "$PHP_SQLITE3"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SQLITE3=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test $PHP_SQLITE3 != "no"; then
  sqlite3_extra_sources=""
  PHP_SQLITE3_CFLAGS=""

    if test -z "$enable_maintainer_zts"; then
    if test -f "$phpincludedir/main/php_config.h"; then
      ZTS=`grep '#define ZTS' $phpincludedir/main/php_config.h|$SED 's/#define ZTS//'`
      if test "$ZTS" -eq "1"; then
        enable_maintainer_zts="yes"
      fi
    fi
  fi

  if test $PHP_SQLITE3 != "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3 files in default path" >&5
$as_echo_n "checking for sqlite3 files in default path... " >&6; }
    for i in $PHP_SQLITE3 /usr/local /usr; do
      if test -r $i/include/sqlite3.h; then
        SQLITE3_DIR=$i
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $i" >&5
$as_echo "found in $i" >&6; }
        break
      fi
    done

    if test -z "$SQLITE3_DIR"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
      as_fn_error $? "Please reinstall the sqlite distribution from http://www.sqlite.org" "$LINENO" 5
    fi

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SQLite 3.3.9+" >&5
$as_echo_n "checking for SQLite 3.3.9+... " >&6; }

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$SQLITE3_DIR/$PHP_LIBDIR -lm
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3_prepare_v2 in -lsqlite3" >&5
$as_echo_n "checking for sqlite3_prepare_v2 in -lsqlite3... " >&6; }
if ${ac_cv_lib_sqlite3_sqlite3_prepare_v2+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsqlite3  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sqlite3_prepare_v2 ();
int
main ()
{
return sqlite3_prepare_v2 ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sqlite3_sqlite3_prepare_v2=yes
else
  ac_cv_lib_sqlite3_sqlite3_prepare_v2=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sqlite3_sqlite3_prepare_v2" >&5
$as_echo "$ac_cv_lib_sqlite3_sqlite3_prepare_v2" >&6; }
if test "x$ac_cv_lib_sqlite3_sqlite3_prepare_v2" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: found" >&5
$as_echo "found" >&6; }


  if test "$ext_shared" = "yes"; then
    SQLITE3_SHARED_LIBADD="-lsqlite3 $SQLITE3_SHARED_LIBADD"
    if test -n "$SQLITE3_DIR/$PHP_LIBDIR"; then

  if test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$SQLITE3_DIR/$PHP_LIBDIR" || echo "$SQLITE3_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE3_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $SQLITE3_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$SQLITE3_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        SQLITE3_SHARED_LIBADD="-L$ai_p $SQLITE3_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SQLITE3_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE3_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$SQLITE3_DIR/$PHP_LIBDIR"; then

  if test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE3_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$SQLITE3_DIR/$PHP_LIBDIR" || echo "$SQLITE3_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE3_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $SQLITE3_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$SQLITE3_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case sqlite3 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsqlite3 $LIBS"
   ;;
  esac




  fi



  if test "$SQLITE3_DIR/include" != "/usr/include"; then

  if test -z "$SQLITE3_DIR/include" || echo "$SQLITE3_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$SQLITE3_DIR/include
  else

    ep_dir=`echo $SQLITE3_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$SQLITE3_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_prepare_v2

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
      as_fn_error $? "Please install SQLite 3.3.9 first or check libsqlite3 is present" "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3_key in -lsqlite3" >&5
$as_echo_n "checking for sqlite3_key in -lsqlite3... " >&6; }
if ${ac_cv_lib_sqlite3_sqlite3_key+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsqlite3  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sqlite3_key ();
int
main ()
{
return sqlite3_key ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sqlite3_sqlite3_key=yes
else
  ac_cv_lib_sqlite3_sqlite3_key=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sqlite3_sqlite3_key" >&5
$as_echo "$ac_cv_lib_sqlite3_sqlite3_key" >&6; }
if test "x$ac_cv_lib_sqlite3_sqlite3_key" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_SQLITE3_KEY 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_key


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3_column_table_name in -lsqlite3" >&5
$as_echo_n "checking for sqlite3_column_table_name in -lsqlite3... " >&6; }
if ${ac_cv_lib_sqlite3_sqlite3_column_table_name+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsqlite3  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sqlite3_column_table_name ();
int
main ()
{
return sqlite3_column_table_name ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sqlite3_sqlite3_column_table_name=yes
else
  ac_cv_lib_sqlite3_sqlite3_column_table_name=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sqlite3_sqlite3_column_table_name" >&5
$as_echo "$ac_cv_lib_sqlite3_sqlite3_column_table_name" >&6; }
if test "x$ac_cv_lib_sqlite3_sqlite3_column_table_name" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define SQLITE_ENABLE_COLUMN_METADATA 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_column_table_name


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3_load_extension in -lsqlite3" >&5
$as_echo_n "checking for sqlite3_load_extension in -lsqlite3... " >&6; }
if ${ac_cv_lib_sqlite3_sqlite3_load_extension+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsqlite3  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sqlite3_load_extension ();
int
main ()
{
return sqlite3_load_extension ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sqlite3_sqlite3_load_extension=yes
else
  ac_cv_lib_sqlite3_sqlite3_load_extension=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sqlite3_sqlite3_load_extension" >&5
$as_echo "$ac_cv_lib_sqlite3_sqlite3_load_extension" >&6; }
if test "x$ac_cv_lib_sqlite3_sqlite3_load_extension" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_load_extension

$as_echo "#define SQLITE_OMIT_LOAD_EXTENSION 1" >>confdefs.h



fi


  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking bundled sqlite3 library" >&5
$as_echo_n "checking bundled sqlite3 library... " >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

    sqlite3_extra_sources="libsqlite/sqlite3.c"

    if test "$enable_maintainer_zts" = "yes"; then
      threadsafe_flags="-DSQLITE_THREADSAFE=1"
    else
      threadsafe_flags="-DSQLITE_THREADSAFE=0"
    fi

    if test "$ZEND_DEBUG" = "yes"; then
      debug_flags="-DSQLITE_DEBUG=1"
    fi

    other_flags="-DSQLITE_ENABLE_FTS3=1 -DSQLITE_CORE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1"

	    if test "$PHP_INTL" = "yes" && test "$PHP_INTL_SHARED" != "yes"; then
      other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
    fi

    PHP_SQLITE3_CFLAGS="-I@ext_srcdir@/libsqlite $other_flags $threadsafe_flags $debug_flags"


    for header_file in ext/sqlite3/libsqlite/sqlite3.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


  fi


$as_echo "#define HAVE_SQLITE3 1" >>confdefs.h


  sqlite3_sources="sqlite3.c $sqlite3_extra_sources"


  ext_builddir=ext/sqlite3
  ext_srcdir=$abs_srcdir/ext/sqlite3

  ac_extra=`echo "$PHP_SQLITE3_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SQLITE3_SHARED=no


  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sqlite3"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite3"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SQLITE3_SHARED=yes

  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_sqlite3="$shared_objects_sqlite3 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite3.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(PHPSQLITE3_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite3.so '$ext_builddir'/phpsqlite3.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) -L$(top_builddir)/netware -lphp5lib $(SQLITE3_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(PHPSQLITE3_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite3.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite3.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite3"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsqlite3.$suffix: $ext_builddir/phpsqlite3.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite3.$suffix \$(phplibdir)

$ext_builddir/phpsqlite3.$suffix: \$(shared_objects_sqlite3) \$(PHPSQLITE3_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite3.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(SQLITE3_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite3.so '$ext_builddir'/sqlite3.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) -L$(top_builddir)/netware -lphp5lib $(ITE3_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite3) $(SQLITE3_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite3.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite3.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite3"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sqlite3.$suffix: $ext_builddir/sqlite3.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite3.$suffix \$(phplibdir)

$ext_builddir/sqlite3.$suffix: \$(shared_objects_sqlite3) \$(SQLITE3_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SQLITE3 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SQLITE3_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sqlite3"
        ;;
      *)


  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $sqlite3_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite3"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sqlite3

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/libsqlite"



  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE3_SHARED_LIBADD"

fi



php_with_zlib=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ZLIB support" >&5
$as_echo_n "checking for ZLIB support... " >&6; }

# Check whether --with-zlib was given.
if test "${with_zlib+set}" = set; then :
  withval=$with_zlib; PHP_ZLIB=$withval
else

  PHP_ZLIB=no
  test "$PHP_ENABLE_ALL" && PHP_ZLIB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ZLIB in
shared,*)
  PHP_ZLIB=`echo "$PHP_ZLIB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ZLIB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_zlib_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if the location of ZLIB install directory is defined" >&5
$as_echo_n "checking if the location of ZLIB install directory is defined... " >&6; }

# Check whether --with-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then :
  withval=$with_zlib_dir; PHP_ZLIB_DIR=$withval
else

  PHP_ZLIB_DIR=no


fi


ext_output=$PHP_ZLIB_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_ZLIB" != "no" || test "$PHP_ZLIB_DIR" != "no"; then

  ext_builddir=ext/zlib
  ext_srcdir=$abs_srcdir/ext/zlib

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ZLIB_SHARED=no


  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC zlib"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC zlib"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ZLIB_SHARED=yes

  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_zlib="$shared_objects_zlib $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzlib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(PHPZLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzlib.so '$ext_builddir'/phpzlib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) -L$(top_builddir)/netware -lphp5lib $(ZLIB_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(PHPZLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzlib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzlib.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zlib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpzlib.$suffix: $ext_builddir/phpzlib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzlib.$suffix \$(phplibdir)

$ext_builddir/phpzlib.$suffix: \$(shared_objects_zlib) \$(PHPZLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zlib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(ZLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zlib.so '$ext_builddir'/zlib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) -L$(top_builddir)/netware -lphp5lib $(B_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zlib) $(ZLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zlib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zlib.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zlib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/zlib.$suffix: $ext_builddir/zlib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/zlib.$suffix \$(phplibdir)

$ext_builddir/zlib.$suffix: \$(shared_objects_zlib) \$(ZLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_ZLIB 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ZLIB_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC zlib"
        ;;
      *)


  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c zlib_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC zlib"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=zlib

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST ZLIB_SHARED_LIBADD"


  if test "$PHP_ZLIB" != "yes" -a "$PHP_ZLIB" != "no"; then
    if test -f $PHP_ZLIB/include/zlib/zlib.h; then
      ZLIB_DIR=$PHP_ZLIB
      ZLIB_INCDIR=$ZLIB_DIR/include/zlib
    elif test -f $PHP_ZLIB/include/zlib.h; then
      ZLIB_DIR=$PHP_ZLIB
      ZLIB_INCDIR=$ZLIB_DIR/include
    fi
  else
    for i in /usr/local /usr $PHP_ZLIB_DIR; do
      if test -f $i/include/zlib/zlib.h; then
        ZLIB_DIR=$i
        ZLIB_INCDIR=$i/include/zlib
      elif test -f $i/include/zlib.h; then
        ZLIB_DIR=$i
        ZLIB_INCDIR=$i/include
      fi
    done
  fi

  if test -z "$ZLIB_DIR"; then
    as_fn_error $? "Cannot find libz" "$LINENO" 5
  fi

  case $ZLIB_DIR in
  /usr) ac_extra= ;;
  *) ac_extra=-L$ZLIB_DIR/$PHP_LIBDIR ;;
  esac

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for zlib version >= 1.2.0.4" >&5
$as_echo_n "checking for zlib version >= 1.2.0.4... " >&6; }
  ZLIB_VERSION=`$EGREP "define ZLIB_VERSION" $ZLIB_DIR/include/zlib.h | $SED -e 's/[^0-9\.]//g'`
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ZLIB_VERSION" >&5
$as_echo "$ZLIB_VERSION" >&6; }
  if test `echo $ZLIB_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*1000000 + $2*10000 + $3*100 + $4}'` -lt 1020004; then
    as_fn_error $? "libz version greater or equal to 1.2.0.4 required" "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $ac_extra
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gzgets in -lz" >&5
$as_echo_n "checking for gzgets in -lz... " >&6; }
if ${ac_cv_lib_z_gzgets+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lz  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gzgets ();
int
main ()
{
return gzgets ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_z_gzgets=yes
else
  ac_cv_lib_z_gzgets=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_z_gzgets" >&5
$as_echo "$ac_cv_lib_z_gzgets" >&6; }
if test "x$ac_cv_lib_z_gzgets" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_ZLIB 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_z_gzgets

    as_fn_error $? "ZLIB extension requires gzgets in zlib" "$LINENO" 5


fi



  if test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$ZLIB_DIR/$PHP_LIBDIR" || echo "$ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ZLIB_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        ZLIB_SHARED_LIBADD="-L$ai_p $ZLIB_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ZLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZLIB_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi


  PHP_ZLIB_DIR=$ZLIB_DIR


  case z in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        ZLIB_SHARED_LIBADD="-lz $ZLIB_SHARED_LIBADD"
    else


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac


    fi
   ;;
  esac



  if test "$ZLIB_INCDIR" != "/usr/include"; then

  if test -z "$ZLIB_INCDIR" || echo "$ZLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZLIB_INCDIR
  else

    ep_dir=`echo $ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ZLIB_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


fi



php_enable_bcmath=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable bc style precision math functions" >&5
$as_echo_n "checking whether to enable bc style precision math functions... " >&6; }
# Check whether --enable-bcmath was given.
if test "${enable_bcmath+set}" = set; then :
  enableval=$enable_bcmath; PHP_BCMATH=$enableval
else

  PHP_BCMATH=no
  test "$PHP_ENABLE_ALL" && PHP_BCMATH=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BCMATH in
shared,*)
  PHP_BCMATH=`echo "$PHP_BCMATH"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_BCMATH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_BCMATH" != "no"; then

  ext_builddir=ext/bcmath
  ext_srcdir=$abs_srcdir/ext/bcmath

  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_BCMATH_SHARED=no


  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC bcmath"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_BCMATH_SHARED=yes

  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbcmath.so '$ext_builddir'/phpbcmath.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(BCMATH_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbcmath.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbcmath.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpbcmath.$suffix: $ext_builddir/phpbcmath.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbcmath.$suffix \$(phplibdir)

$ext_builddir/phpbcmath.$suffix: \$(shared_objects_bcmath) \$(PHPBCMATH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bcmath.so '$ext_builddir'/bcmath.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(ATH_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bcmath.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/bcmath.$suffix: $ext_builddir/bcmath.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.$suffix \$(phplibdir)

$ext_builddir/bcmath.$suffix: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_BCMATH 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_BCMATH_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC bcmath"
        ;;
      *)


  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=bcmath

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"



$as_echo "#define HAVE_BCMATH 1" >>confdefs.h

fi



php_with_bz2=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for BZip2 support" >&5
$as_echo_n "checking for BZip2 support... " >&6; }

# Check whether --with-bz2 was given.
if test "${with_bz2+set}" = set; then :
  withval=$with_bz2; PHP_BZ2=$withval
else

  PHP_BZ2=no
  test "$PHP_ENABLE_ALL" && PHP_BZ2=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BZ2 in
shared,*)
  PHP_BZ2=`echo "$PHP_BZ2"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_BZ2=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_BZ2" != "no"; then
  if test -r $PHP_BZ2/include/bzlib.h; then
    BZIP_DIR=$PHP_BZ2
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for BZip2 in default path" >&5
$as_echo_n "checking for BZip2 in default path... " >&6; }
    for i in /usr/local /usr; do
      if test -r $i/include/bzlib.h; then
        BZIP_DIR=$i
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $i" >&5
$as_echo "found in $i" >&6; }
        break
      fi
    done
  fi

  if test -z "$BZIP_DIR"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    as_fn_error $? "Please reinstall the BZip2 distribution" "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$BZIP_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for BZ2_bzerror in -lbz2" >&5
$as_echo_n "checking for BZ2_bzerror in -lbz2... " >&6; }
if ${ac_cv_lib_bz2_BZ2_bzerror+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbz2  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char BZ2_bzerror ();
int
main ()
{
return BZ2_bzerror ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bz2_BZ2_bzerror=yes
else
  ac_cv_lib_bz2_BZ2_bzerror=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bz2_BZ2_bzerror" >&5
$as_echo "$ac_cv_lib_bz2_BZ2_bzerror" >&6; }
if test "x$ac_cv_lib_bz2_BZ2_bzerror" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$BZIP_DIR/include" != "/usr/include"; then

  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/include
  else

    ep_dir=`echo $BZIP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$BZIP_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
    if test -n "$BZIP_DIR/$PHP_LIBDIR"; then

  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$BZIP_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        BZ2_SHARED_LIBADD="-L$ai_p $BZ2_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p $BZ2_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$BZIP_DIR/$PHP_LIBDIR"; then

  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$BZIP_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case bz2 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbz2 $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_BZ2 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_bz2_BZ2_bzerror

    as_fn_error $? "bz2 module requires libbz2 >= 1.0.0" "$LINENO" 5


fi



  ext_builddir=ext/bz2
  ext_srcdir=$abs_srcdir/ext/bz2

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_BZ2_SHARED=no


  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC bz2"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_BZ2_SHARED=yes

  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbz2.so '$ext_builddir'/phpbz2.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(BZ2_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbz2.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbz2.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpbz2.$suffix: $ext_builddir/phpbz2.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbz2.$suffix \$(phplibdir)

$ext_builddir/phpbz2.$suffix: \$(shared_objects_bz2) \$(PHPBZ2_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bz2.so '$ext_builddir'/bz2.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bz2.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/bz2.$suffix: $ext_builddir/bz2.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.$suffix \$(phplibdir)

$ext_builddir/bz2.$suffix: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_BZ2 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_BZ2_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC bz2"
        ;;
      *)


  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c bz2_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=bz2

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"

fi



php_enable_calendar=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable calendar conversion support" >&5
$as_echo_n "checking whether to enable calendar conversion support... " >&6; }
# Check whether --enable-calendar was given.
if test "${enable_calendar+set}" = set; then :
  enableval=$enable_calendar; PHP_CALENDAR=$enableval
else

  PHP_CALENDAR=no
  test "$PHP_ENABLE_ALL" && PHP_CALENDAR=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CALENDAR in
shared,*)
  PHP_CALENDAR=`echo "$PHP_CALENDAR"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CALENDAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_CALENDAR" = "yes"; then

$as_echo "#define HAVE_CALENDAR 1" >>confdefs.h


  ext_builddir=ext/calendar
  ext_srcdir=$abs_srcdir/ext/calendar

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_CALENDAR_SHARED=no


  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC calendar"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_CALENDAR_SHARED=yes

  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcalendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcalendar.so '$ext_builddir'/phpcalendar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(CALENDAR_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcalendar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcalendar.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpcalendar.$suffix: $ext_builddir/phpcalendar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcalendar.$suffix \$(phplibdir)

$ext_builddir/phpcalendar.$suffix: \$(shared_objects_calendar) \$(PHPCALENDAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/calendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/calendar.so '$ext_builddir'/calendar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(ENDAR_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/calendar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/calendar.$suffix: $ext_builddir/calendar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.$suffix \$(phplibdir)

$ext_builddir/calendar.$suffix: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_CALENDAR 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_CALENDAR_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC calendar"
        ;;
      *)


  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=calendar

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_ctype=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable ctype functions" >&5
$as_echo_n "checking whether to enable ctype functions... " >&6; }
# Check whether --enable-ctype was given.
if test "${enable_ctype+set}" = set; then :
  enableval=$enable_ctype; PHP_CTYPE=$enableval
else

  PHP_CTYPE=yes
  test "$PHP_ENABLE_ALL" && PHP_CTYPE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CTYPE in
shared,*)
  PHP_CTYPE=`echo "$PHP_CTYPE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CTYPE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_CTYPE" != "no"; then

$as_echo "#define HAVE_CTYPE 1" >>confdefs.h


  ext_builddir=ext/ctype
  ext_srcdir=$abs_srcdir/ext/ctype

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_CTYPE_SHARED=no


  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ctype"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_CTYPE_SHARED=yes

  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpctype.so '$ext_builddir'/phpctype.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(CTYPE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpctype.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpctype.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpctype.$suffix: $ext_builddir/phpctype.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpctype.$suffix \$(phplibdir)

$ext_builddir/phpctype.$suffix: \$(shared_objects_ctype) \$(PHPCTYPE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ctype.so '$ext_builddir'/ctype.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(PE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ctype.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ctype.$suffix: $ext_builddir/ctype.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.$suffix \$(phplibdir)

$ext_builddir/ctype.$suffix: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_CTYPE 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_CTYPE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ctype"
        ;;
      *)


  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ctype

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_with_curl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for cURL support" >&5
$as_echo_n "checking for cURL support... " >&6; }

# Check whether --with-curl was given.
if test "${with_curl+set}" = set; then :
  withval=$with_curl; PHP_CURL=$withval
else

  PHP_CURL=no
  test "$PHP_ENABLE_ALL" && PHP_CURL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CURL in
shared,*)
  PHP_CURL=`echo "$PHP_CURL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CURL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_CURL" != "no"; then
  if test -r $PHP_CURL/include/curl/easy.h; then
    CURL_DIR=$PHP_CURL
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cURL in default path" >&5
$as_echo_n "checking for cURL in default path... " >&6; }
    for i in /usr/local /usr; do
      if test -r $i/include/curl/easy.h; then
        CURL_DIR=$i
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $i" >&5
$as_echo "found in $i" >&6; }
        break
      fi
    done
  fi

  if test -z "$CURL_DIR"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    as_fn_error $? "Please reinstall the libcurl distribution -
    easy.h should be in <curl-dir>/include/curl/" "$LINENO" 5
  fi

  CURL_CONFIG="curl-config"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cURL 7.10.5 or greater" >&5
$as_echo_n "checking for cURL 7.10.5 or greater... " >&6; }

  if ${CURL_DIR}/bin/curl-config --libs > /dev/null 2>&1; then
    CURL_CONFIG=${CURL_DIR}/bin/curl-config
  else
    if ${CURL_DIR}/curl-config --libs > /dev/null 2>&1; then
      CURL_CONFIG=${CURL_DIR}/curl-config
    fi
  fi

  curl_version_full=`$CURL_CONFIG --version`
  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | $AWK 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
  if test "$curl_version" -ge 7010005; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $curl_version_full" >&5
$as_echo "$curl_version_full" >&6; }
    CURL_LIBS=`$CURL_CONFIG --libs`
  else
    as_fn_error $? "cURL version 7.10.5 or later is required to compile php with cURL support" "$LINENO" 5
  fi


  if test "$CURL_DIR/include" != "/usr/include"; then

  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/include
  else

    ep_dir=`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$CURL_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  for ac_i in $CURL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done



  if test "$ext_shared" = "yes"; then
    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
    if test -n "$CURL_DIR/$PHP_LIBDIR"; then

  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$CURL_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$CURL_DIR/$PHP_LIBDIR"; then

  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$CURL_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case curl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcurl $LIBS"
   ;;
  esac




  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL support in libcurl" >&5
$as_echo_n "checking for SSL support in libcurl... " >&6; }
  CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
  if test "$CURL_SSL" = "SSL"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_CURL_SSL 1" >>confdefs.h


    save_CFLAGS="$CFLAGS"
    CFLAGS="`$CURL_CONFIG --cflags`"

    ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
$as_echo_n "checking how to run the C preprocessor... " >&6; }
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
  if ${ac_cv_prog_CPP+:} false; then :
  $as_echo_n "(cached) " >&6
else
      # Double quotes because CPP needs to be expanded
    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
    do
      ac_preproc_ok=false
for ac_c_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :
  break
fi

    done
    ac_cv_prog_CPP=$CPP

fi
  CPP=$ac_cv_prog_CPP
else
  ac_cv_prog_CPP=$CPP
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
$as_echo "$CPP" >&6; }
ac_preproc_ok=false
for ac_c_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_c_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :

else
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
See \`config.log' for more details" "$LINENO" 5; }
fi

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for openssl support in libcurl" >&5
$as_echo_n "checking for openssl support in libcurl... " >&6; }
    if test "$cross_compiling" = yes; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <curl/curl.h>

int main(int argc, char *argv[])
{
  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);

  if (data && data->ssl_version && *data->ssl_version) {
    const char *ptr = data->ssl_version;

    while(*ptr == ' ') ++ptr;
    return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
  }
  return 1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
      for ac_header in openssl/crypto.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "openssl/crypto.h" "ac_cv_header_openssl_crypto_h" "$ac_includes_default"
if test "x$ac_cv_header_openssl_crypto_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_OPENSSL_CRYPTO_H 1
_ACEOF


$as_echo "#define HAVE_CURL_OPENSSL 1" >>confdefs.h


fi

done


else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gnutls support in libcurl" >&5
$as_echo_n "checking for gnutls support in libcurl... " >&6; }
    if test "$cross_compiling" = yes; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <curl/curl.h>

int main(int argc, char *argv[])
{
  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);

  if (data && data->ssl_version && *data->ssl_version) {
    const char *ptr = data->ssl_version;

    while(*ptr == ' ') ++ptr;
    return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
  }
  return 1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
      ac_fn_c_check_header_mongrel "$LINENO" "gcrypt.h" "ac_cv_header_gcrypt_h" "$ac_includes_default"
if test "x$ac_cv_header_gcrypt_h" = xyes; then :


$as_echo "#define HAVE_CURL_GNUTLS 1" >>confdefs.h


fi



else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


    CFLAGS="$save_CFLAGS"
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for curl_easy_perform in -lcurl" >&5
$as_echo_n "checking for curl_easy_perform in -lcurl... " >&6; }
if ${ac_cv_lib_curl_curl_easy_perform+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcurl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char curl_easy_perform ();
int
main ()
{
return curl_easy_perform ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_curl_curl_easy_perform=yes
else
  ac_cv_lib_curl_curl_easy_perform=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_curl_curl_easy_perform" >&5
$as_echo "$ac_cv_lib_curl_curl_easy_perform" >&6; }
if test "x$ac_cv_lib_curl_curl_easy_perform" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_CURL 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_easy_perform

    as_fn_error $? "There is something wrong. Please check config.log for more information." "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for curl_easy_strerror in -lcurl" >&5
$as_echo_n "checking for curl_easy_strerror in -lcurl... " >&6; }
if ${ac_cv_lib_curl_curl_easy_strerror+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcurl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char curl_easy_strerror ();
int
main ()
{
return curl_easy_strerror ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_curl_curl_easy_strerror=yes
else
  ac_cv_lib_curl_curl_easy_strerror=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_curl_curl_easy_strerror" >&5
$as_echo "$ac_cv_lib_curl_curl_easy_strerror" >&6; }
if test "x$ac_cv_lib_curl_curl_easy_strerror" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_CURL_EASY_STRERROR 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_easy_strerror


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for curl_multi_strerror in -lcurl" >&5
$as_echo_n "checking for curl_multi_strerror in -lcurl... " >&6; }
if ${ac_cv_lib_curl_curl_multi_strerror+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcurl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char curl_multi_strerror ();
int
main ()
{
return curl_multi_strerror ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_curl_curl_multi_strerror=yes
else
  ac_cv_lib_curl_curl_multi_strerror=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_curl_curl_multi_strerror" >&5
$as_echo "$ac_cv_lib_curl_curl_multi_strerror" >&6; }
if test "x$ac_cv_lib_curl_curl_multi_strerror" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_CURL_MULTI_STRERROR 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_curl_curl_multi_strerror


fi



  ext_builddir=ext/curl
  ext_srcdir=$abs_srcdir/ext/curl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_CURL_SHARED=no


  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c share.c curl_file.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC curl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC curl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_CURL_SHARED=yes

  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c share.c curl_file.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_curl="$shared_objects_curl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcurl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(PHPCURL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcurl.so '$ext_builddir'/phpcurl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) -L$(top_builddir)/netware -lphp5lib $(CURL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(PHPCURL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcurl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcurl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_curl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpcurl.$suffix: $ext_builddir/phpcurl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcurl.$suffix \$(phplibdir)

$ext_builddir/phpcurl.$suffix: \$(shared_objects_curl) \$(PHPCURL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/curl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(CURL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/curl.so '$ext_builddir'/curl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) -L$(top_builddir)/netware -lphp5lib $(L_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_curl) $(CURL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/curl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/curl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_curl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/curl.$suffix: $ext_builddir/curl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/curl.$suffix \$(phplibdir)

$ext_builddir/curl.$suffix: \$(shared_objects_curl) \$(CURL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_CURL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_CURL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c share.c curl_file.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC curl"
        ;;
      *)


  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interface.c multi.c share.c curl_file.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC curl"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=curl

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST CURL_SHARED_LIBADD"

fi

















php_enable_dba=no


# Check whether --enable-dba was given.
if test "${enable_dba+set}" = set; then :
  enableval=$enable_dba; PHP_DBA=$enableval
else

  PHP_DBA=no
  test "$PHP_ENABLE_ALL" && PHP_DBA=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBA in
shared,*)
  PHP_DBA=`echo "$PHP_DBA"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_DBA=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac









php_with_qdbm=no



# Check whether --with-qdbm was given.
if test "${with_qdbm+set}" = set; then :
  withval=$with_qdbm; PHP_QDBM=$withval
else

  PHP_QDBM=no


fi


ext_output=$PHP_QDBM






php_with_gdbm=no



# Check whether --with-gdbm was given.
if test "${with_gdbm+set}" = set; then :
  withval=$with_gdbm; PHP_GDBM=$withval
else

  PHP_GDBM=no


fi


ext_output=$PHP_GDBM






php_with_ndbm=no



# Check whether --with-ndbm was given.
if test "${with_ndbm+set}" = set; then :
  withval=$with_ndbm; PHP_NDBM=$withval
else

  PHP_NDBM=no


fi


ext_output=$PHP_NDBM






php_with_db4=no



# Check whether --with-db4 was given.
if test "${with_db4+set}" = set; then :
  withval=$with_db4; PHP_DB4=$withval
else

  PHP_DB4=no


fi


ext_output=$PHP_DB4






php_with_db3=no



# Check whether --with-db3 was given.
if test "${with_db3+set}" = set; then :
  withval=$with_db3; PHP_DB3=$withval
else

  PHP_DB3=no


fi


ext_output=$PHP_DB3






php_with_db2=no



# Check whether --with-db2 was given.
if test "${with_db2+set}" = set; then :
  withval=$with_db2; PHP_DB2=$withval
else

  PHP_DB2=no


fi


ext_output=$PHP_DB2






php_with_db1=no



# Check whether --with-db1 was given.
if test "${with_db1+set}" = set; then :
  withval=$with_db1; PHP_DB1=$withval
else

  PHP_DB1=no


fi


ext_output=$PHP_DB1






php_with_dbm=no



# Check whether --with-dbm was given.
if test "${with_dbm+set}" = set; then :
  withval=$with_dbm; PHP_DBM=$withval
else

  PHP_DBM=no


fi


ext_output=$PHP_DBM






php_with_tcadb=no



# Check whether --with-tcadb was given.
if test "${with_tcadb+set}" = set; then :
  withval=$with_tcadb; PHP_TCADB=$withval
else

  PHP_TCADB=no


fi


ext_output=$PHP_TCADB







# QDBM
if test "$PHP_QDBM" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_QDBM /usr/local /usr; do
    if test -f "$i/include/depot.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/depot.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in qdbm; do

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$LIB''_dpopen" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dpopen in -l$LIB" >&5
$as_echo_n "checking for dpopen in -l$LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dpopen ();
int
main ()
{
return dpopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


cat >>confdefs.h <<_ACEOF
#define QDBM_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF


$as_echo "#define DBA_QDBM 1" >>confdefs.h

        THIS_LIBS=$LIB


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_dpopen


fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi


  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=QDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# GDBM
if test "$PHP_GDBM" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_QDBM" = "1"; then

  THIS_NAME=GDBM
  if test -n "gdbm"; then
    THIS_FULL_NAME="gdbm"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n "You cannot combine --with-gdbm with --with-qdbm"; then
    as_fn_error $? "You cannot combine --with-gdbm with --with-qdbm" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_GDBM /usr/local /usr; do
    if test -f "$i/include/gdbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/gdbm.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdbm_open in -lgdbm" >&5
$as_echo_n "checking for gdbm_open in -lgdbm... " >&6; }
if ${ac_cv_lib_gdbm_gdbm_open+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgdbm  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdbm_open ();
int
main ()
{
return gdbm_open ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gdbm_gdbm_open=yes
else
  ac_cv_lib_gdbm_gdbm_open=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gdbm_gdbm_open" >&5
$as_echo "$ac_cv_lib_gdbm_gdbm_open" >&6; }
if test "x$ac_cv_lib_gdbm_gdbm_open" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


cat >>confdefs.h <<_ACEOF
#define GDBM_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF


$as_echo "#define DBA_GDBM 1" >>confdefs.h

      THIS_LIBS=gdbm


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gdbm_gdbm_open


fi

  fi


  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=GDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# NDBM
if test "$PHP_NDBM" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_NDBM /usr/local /usr; do
    if test -f "$i/include/ndbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/ndbm.h
      break
    elif test -f "$i/include/db1/ndbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db1/ndbm.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in ndbm db1 c; do

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$LIB''_dbm_open" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dbm_open in -l$LIB" >&5
$as_echo_n "checking for dbm_open in -l$LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dbm_open ();
int
main ()
{
return dbm_open ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


cat >>confdefs.h <<_ACEOF
#define NDBM_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF


$as_echo "#define DBA_NDBM 1" >>confdefs.h

        THIS_LIBS=$LIB


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_dbm_open


fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi


  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=NDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


if test "$PHP_TCADB" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_TCADB /usr/local /usr; do
	if test -f "$i/include/tcadb.h"; then
	  THIS_PREFIX=$i

  if test "$THIS_PREFIX/include" != "/usr/include"; then

  if test -z "$THIS_PREFIX/include" || echo "$THIS_PREFIX/include" | grep '^/' >/dev/null ; then
    ai_p=$THIS_PREFIX/include
  else

    ep_dir=`echo $THIS_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_PREFIX/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

	  THIS_INCLUDE=$i/include/tcadb.h
	  break
	fi
  done

  if test -n "$THIS_INCLUDE"; then
	for LIB in tokyocabinet; do

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$LIB''_tcadbopen" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for tcadbopen in -l$LIB" >&5
$as_echo_n "checking for tcadbopen in -l$LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char tcadbopen ();
int
main ()
{
return tcadbopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


cat >>confdefs.h <<_ACEOF
#define TCADB_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF


$as_echo "#define DBA_TCADB 1" >>confdefs.h

		THIS_LIBS=$LIB


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_tcadbopen


fi

	  if test -n "$THIS_LIBS"; then
		break
	  fi
	done
  fi


  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=TCADB
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME




# DB4
if test "$PHP_DB4" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  dbdp4="/usr/local/BerkeleyDB.4."
  dbdp5="/usr/local/BerkeleyDB.5."
  for i in $PHP_DB4 ${dbdp5}1 ${dbdp5}0 ${dbdp4}8 ${dbdp4}7 ${dbdp4}6 ${dbdp4}5 ${dbdp4}4 ${dbdp4}3 ${dbdp4}2 ${dbdp4}1 ${dbdp}0 /usr/local /usr; do
    if test -f "$i/db5/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/db5/db.h
      break
    elif test -f "$i/db4/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/db4/db.h
      break
    elif test -f "$i/include/db5.1/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db5.1/db.h
      break
    elif test -f "$i/include/db5.0/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db5.0/db.h
      break
    elif test -f "$i/include/db4.8/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.8/db.h
      break
    elif test -f "$i/include/db4.7/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.7/db.h
      break
    elif test -f "$i/include/db4.6/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.6/db.h
      break
    elif test -f "$i/include/db4.5/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.5/db.h
      break
    elif test -f "$i/include/db4/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4/db.h
      break
    elif test -f "$i/include/db/db4.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db/db4.h
      break
    elif test -f "$i/include/db4.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db4.h
      break
    elif test -f "$i/include/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db.h
      break
    fi
  done

  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  for LIB in db-5.1 db-5.0 db-4.8 db-4.7 db-4.6 db-4.5 db-4.4 db-4.3 db-4.2 db-4.1 db-4.0 db-4 db4 db; do
    if test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.a || test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.$SHLIB_SUFFIX_NAME; then
      lib_found="";

  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$LIB $LIBS"

        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"

int
main ()
{

          (void)db_create((DB**)0, (DB_ENV*)0, 0);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

          cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 4 || (4 == 4 && DB_VERSION_MAJOR == 5)
            yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

            THIS_LIBS=$LIB
            lib_found=1

fi
rm -f conftest*


fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

      if test -n "$lib_found"; then
        lib_found="";
        break;
      fi
    fi
  done
  if test -z "$THIS_LIBS"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB4 major version" >&5
$as_echo_n "checking for DB4 major version... " >&6; }
    as_fn_error $? "Header contains different version" "$LINENO" 5
  fi
  if test "4" = "4"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB4 minor version and patch level" >&5
$as_echo_n "checking for DB4 minor version and patch level... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 4 || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR != 1) || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 1 && DB_VERSION_PATCH >= 25)
      yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
$as_echo "ok" >&6; }

else

      as_fn_error $? "Version 4.1 requires patch level 25" "$LINENO" 5

fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if dba can be used as shared extension" >&5
$as_echo_n "checking if dba can be used as shared extension... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      as_fn_error $? "At least version 3.3 is required" "$LINENO" 5

fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then

$as_echo "#define DBA_DB4 1" >>confdefs.h

    if test -n "$THIS_INCLUDE"; then

cat >>confdefs.h <<_ACEOF
#define DB4_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF

    fi
  else
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi
  THIS_RESULT=yes
  DB4_LIBS=$THIS_LIBS
  DB4_PREFIX=$THIS_PREFIX
  DB4_INCLUDE=$THIS_INCLUDE

  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


fi

  THIS_NAME=DB4
  if test -n "Berkeley DB4"; then
    THIS_FULL_NAME="Berkeley DB4"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DB3
if test "$PHP_DB3" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_DB4" = "1"; then

  THIS_NAME=DB3
  if test -n "Berkeley DB3"; then
    THIS_FULL_NAME="Berkeley DB3"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n "You cannot combine --with-db3 with --with-db4"; then
    as_fn_error $? "You cannot combine --with-db3 with --with-db4" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_DB3 /usr/local/BerkeleyDB.3.3 /usr/local/BerkeleyDB.3.2 /usr/local/BerkeleyDB.3.1 /usr/local/BerkeleyDB.3.0 /usr/local /usr; do
    if test -f "$i/db3/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db3/db.h
      break
    elif test -f "$i/include/db3/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db3/db.h
      break
    elif test -f "$i/include/db/db3.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db/db3.h
      break
    elif test -f "$i/include/db3.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db3.h
      break
    elif test -f "$i/include/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db.h
      break
    fi
  done

  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  for LIB in db-3.3 db-3.2 db-3.1 db-3.0 db-3 db3 db; do
    if test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.a || test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.$SHLIB_SUFFIX_NAME; then
      lib_found="";

  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$LIB $LIBS"

        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"

int
main ()
{

          (void)db_create((DB**)0, (DB_ENV*)0, 0);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

          cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 3 || (3 == 4 && DB_VERSION_MAJOR == 5)
            yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

            THIS_LIBS=$LIB
            lib_found=1

fi
rm -f conftest*


fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

      if test -n "$lib_found"; then
        lib_found="";
        break;
      fi
    fi
  done
  if test -z "$THIS_LIBS"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB3 major version" >&5
$as_echo_n "checking for DB3 major version... " >&6; }
    as_fn_error $? "Header contains different version" "$LINENO" 5
  fi
  if test "3" = "4"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB4 minor version and patch level" >&5
$as_echo_n "checking for DB4 minor version and patch level... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 4 || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR != 1) || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 1 && DB_VERSION_PATCH >= 25)
      yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
$as_echo "ok" >&6; }

else

      as_fn_error $? "Version 4.1 requires patch level 25" "$LINENO" 5

fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if dba can be used as shared extension" >&5
$as_echo_n "checking if dba can be used as shared extension... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      as_fn_error $? "At least version 3.3 is required" "$LINENO" 5

fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then

$as_echo "#define DBA_DB3 1" >>confdefs.h

    if test -n "$THIS_INCLUDE"; then

cat >>confdefs.h <<_ACEOF
#define DB3_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF

    fi
  else
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi
  THIS_RESULT=yes
  DB3_LIBS=$THIS_LIBS
  DB3_PREFIX=$THIS_PREFIX
  DB3_INCLUDE=$THIS_INCLUDE

  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


fi

  THIS_NAME=DB3
  if test -n "Berkeley DB3"; then
    THIS_FULL_NAME="Berkeley DB3"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DB2
if test "$PHP_DB2" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_DB3" = "1" || test "$HAVE_DB4" = "1"; then

  THIS_NAME=DB2
  if test -n "Berkeley DB2"; then
    THIS_FULL_NAME="Berkeley DB2"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n "You cannot combine --with-db2 with --with-db3 or --with-db4"; then
    as_fn_error $? "You cannot combine --with-db2 with --with-db3 or --with-db4" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_DB2 $PHP_DB2/BerkeleyDB /usr/BerkeleyDB /usr/local /usr; do
    if test -f "$i/db2/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/db2/db.h
      break
    elif test -f "$i/include/db2/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db2/db.h
      break
    elif test -f "$i/include/db/db2.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db/db2.h
      break
    elif test -f "$i/include/db2.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db2.h
      break
    elif test -f "$i/include/db.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/db.h
      break
    fi
  done

  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  for LIB in db-2 db2 db; do
    if test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.a || test -f $THIS_PREFIX/$PHP_LIBDIR/lib$LIB.$SHLIB_SUFFIX_NAME; then
      lib_found="";

  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$LIB $LIBS"

        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"

int
main ()
{

          (void)db_appinit("", NULL, (DB_ENV*)0, 0);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

          cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 2 || (2 == 4 && DB_VERSION_MAJOR == 5)
            yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

            THIS_LIBS=$LIB
            lib_found=1

fi
rm -f conftest*


fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

      if test -n "$lib_found"; then
        lib_found="";
        break;
      fi
    fi
  done
  if test -z "$THIS_LIBS"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB2 major version" >&5
$as_echo_n "checking for DB2 major version... " >&6; }
    as_fn_error $? "Header contains different version" "$LINENO" 5
  fi
  if test "2" = "4"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB4 minor version and patch level" >&5
$as_echo_n "checking for DB4 minor version and patch level... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 4 || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR != 1) || (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 1 && DB_VERSION_PATCH >= 25)
      yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
$as_echo "ok" >&6; }

else

      as_fn_error $? "Version 4.1 requires patch level 25" "$LINENO" 5

fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if dba can be used as shared extension" >&5
$as_echo_n "checking if dba can be used as shared extension... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

      as_fn_error $? "At least version 3.3 is required" "$LINENO" 5

fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then

$as_echo "#define DBA_DB2 1" >>confdefs.h

    if test -n "$THIS_INCLUDE"; then

cat >>confdefs.h <<_ACEOF
#define DB2_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF

    fi
  else
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi
  THIS_RESULT=yes
  DB2_LIBS=$THIS_LIBS
  DB2_PREFIX=$THIS_PREFIX
  DB2_INCLUDE=$THIS_INCLUDE

  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


fi

  THIS_NAME=DB2
  if test -n "Berkeley DB2"; then
    THIS_FULL_NAME="Berkeley DB2"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DB1
if test "$PHP_DB1" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB1 in library" >&5
$as_echo_n "checking for DB1 in library... " >&6; }
  if test "$HAVE_DB4" = "1"; then
    THIS_VERSION=4
    THIS_LIBS=$DB4_LIBS
    THIS_PREFIX=$DB4_PREFIX
  elif test "$HAVE_DB3" = "1"; then
    THIS_LIBS=$DB3_LIBS
    THIS_PREFIX=$DB3_PREFIX
  elif test "$HAVE_DB2" = "1"; then
    THIS_VERSION=2
    THIS_LIBS=$DB2_LIBS
    THIS_PREFIX=$DB2_PREFIX
  fi
  if test "$HAVE_DB4" = "1" || test "$HAVE_DB3" = "1" || test "$HAVE_DB2" = "1"; then

cat >>confdefs.h <<_ACEOF
#define DB1_VERSION "Berkeley DB 1.85 emulation in DB$THIS_VERSION"
_ACEOF

    for i in db$THIS_VERSION/db_185.h include/db$THIS_VERSION/db_185.h include/db/db_185.h; do
      if test -f "$THIS_PREFIX/$i"; then
        THIS_INCLUDE=$THIS_PREFIX/$i
        break
      fi
    done
  else

cat >>confdefs.h <<_ACEOF
#define DB1_VERSION "Unknown DB1"
_ACEOF

    for i in $PHP_DB1 /usr/local /usr; do
      if test -f "$i/db1/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/db1/db.h
        break
      elif test -f "$i/include/db1/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db1/db.h
        break
      elif test -f "$i/include/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db.h
        break
      fi
    done
    THIS_LIBS=db
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_LIBS" >&5
$as_echo "$THIS_LIBS" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DB1 in header" >&5
$as_echo_n "checking for DB1 in header... " >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_INCLUDE" >&5
$as_echo "$THIS_INCLUDE" >&6; }
  if test -n "$THIS_INCLUDE"; then

  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/$PHP_LIBDIR $LDFLAGS"
  old_LIBS=$LIBS
  LIBS="-l$THIS_LIBS $LIBS"

      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "$THIS_INCLUDE"

int
main ()
{

        DB * dbp = dbopen("", 0, 0, DB_HASH, 0);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :


cat >>confdefs.h <<_ACEOF
#define DB1_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF


$as_echo "#define DBA_DB1 1" >>confdefs.h

        THIS_RESULT=yes

else

        THIS_RESULT=no

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

  fi

  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=DB1
  if test -n "DB1"; then
    THIS_FULL_NAME="DB1"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# DBM
if test "$PHP_DBM" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  if test "$HAVE_QDBM" = "1"; then

  THIS_NAME=DBM
  if test -n "dbm"; then
    THIS_FULL_NAME="dbm"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n "You cannot combine --with-dbm with --with-qdbm"; then
    as_fn_error $? "You cannot combine --with-dbm with --with-qdbm" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

  fi
  for i in $PHP_DBM /usr/local /usr; do
    if test -f "$i/include/dbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/dbm.h
      break
    elif test -f "$i/include/gdbm/dbm.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/gdbm/dbm.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in dbm c gdbm; do

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$LIB''_dbminit" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dbminit in -l$LIB" >&5
$as_echo_n "checking for dbminit in -l$LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dbminit ();
int
main ()
{
return dbminit ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DBM using GDBM" >&5
$as_echo_n "checking for DBM using GDBM... " >&6; }

cat >>confdefs.h <<_ACEOF
#define DBM_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF

        if test "$LIB" = "gdbm"; then

cat >>confdefs.h <<_ACEOF
#define DBM_VERSION "GDBM"
_ACEOF

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
        else

cat >>confdefs.h <<_ACEOF
#define DBM_VERSION "DBM"
_ACEOF

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
        fi

$as_echo "#define DBA_DBM 1" >>confdefs.h

        THIS_LIBS=$LIB


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_dbminit


fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi


  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=DBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


if test "$PHP_DBA" != "no" || test "$HAVE_DBA" = "1" || test "$with_cdb" = "yes" || test "$enable_inifile" = "yes" || test "$enable_flatfile" = "yes"; then
  php_dba_enable=yes
else
  php_dba_enable=no
fi


php_with_cdb=$php_dba_enable



# Check whether --with-cdb was given.
if test "${with_cdb+set}" = set; then :
  withval=$with_cdb; PHP_CDB=$withval
else

  PHP_CDB=$php_dba_enable


fi


ext_output=$PHP_CDB






php_enable_inifile=$php_dba_enable


# Check whether --enable-inifile was given.
if test "${enable_inifile+set}" = set; then :
  enableval=$enable_inifile; PHP_INIFILE=$enableval
else

  PHP_INIFILE=$php_dba_enable


fi


ext_output=$PHP_INIFILE






php_enable_flatfile=$php_dba_enable


# Check whether --enable-flatfile was given.
if test "${enable_flatfile+set}" = set; then :
  enableval=$enable_flatfile; PHP_FLATFILE=$enableval
else

  PHP_FLATFILE=$php_dba_enable


fi


ext_output=$PHP_FLATFILE





# CDB
if test "$PHP_CDB" = "yes"; then

$as_echo "#define DBA_CDB_BUILTIN 1" >>confdefs.h


$as_echo "#define DBA_CDB_MAKE 1" >>confdefs.h


$as_echo "#define DBA_CDB 1" >>confdefs.h

  cdb_sources="libcdb/cdb.c libcdb/cdb_make.c libcdb/uint32.c"
  THIS_RESULT="builtin"
elif test "$PHP_CDB" != "no"; then

  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

  for i in $PHP_CDB /usr/local /usr; do
    if test -f "$i/include/cdb.h"; then
      THIS_PREFIX=$i
      THIS_INCLUDE=$i/include/cdb.h
      break
    fi
  done

  if test -n "$THIS_INCLUDE"; then
    for LIB in cdb c; do

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$THIS_PREFIX/$PHP_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$LIB''_cdb_read" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for cdb_read in -l$LIB" >&5
$as_echo_n "checking for cdb_read in -l$LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char cdb_read ();
int
main ()
{
return cdb_read ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


cat >>confdefs.h <<_ACEOF
#define CDB_INCLUDE_FILE "$THIS_INCLUDE"
_ACEOF


$as_echo "#define DBA_CDB 1" >>confdefs.h

        THIS_LIBS=$LIB


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIB_cdb_read


fi

      if test -n "$THIS_LIBS"; then
        break
      fi
    done
  fi


  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/$PHP_LIBDIR
  fi


  THIS_RESULT=yes
  if test -z "$THIS_INCLUDE"; then
    as_fn_error $? "DBA: Could not find necessary header file(s)." "$LINENO" 5
  fi
  if test -z "$THIS_LIBS"; then
    as_fn_error $? "DBA: Could not find necessary library." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi


      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="-L$ai_p $DBA_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p $DBA_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$THIS_LFLAGS"; then

  if test "$THIS_LFLAGS" != "/usr/$PHP_LIBDIR" && test "$THIS_LFLAGS" != "/usr/lib"; then

  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else

    ep_dir=`echo $THIS_LFLAGS|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$THIS_LFLAGS"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$THIS_LIBS $LIBS"
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

fi

  THIS_NAME=CDB
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# INIFILE
if test "$PHP_INIFILE" != "no"; then

$as_echo "#define DBA_INIFILE 1" >>confdefs.h

  ini_sources="libinifile/inifile.c"
  THIS_RESULT="builtin"
fi

  THIS_NAME=INIFILE
  if test -n "INI File"; then
    THIS_FULL_NAME="INI File"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# FLATFILE
if test "$PHP_FLATFILE" != "no"; then

$as_echo "#define DBA_FLATFILE 1" >>confdefs.h

  flat_sources="libflatfile/flatfile.c"
  THIS_RESULT="builtin"
fi

  THIS_NAME=FLATFILE
  if test -n "FlatFile"; then
    THIS_FULL_NAME="FlatFile"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $THIS_FULL_NAME support" >&5
$as_echo_n "checking for $THIS_FULL_NAME support... " >&6; }
  if test -n ""; then
    as_fn_error $? "" "$LINENO" 5
  fi
  if test "$THIS_RESULT" = "yes" || test "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $THIS_RESULT" >&5
$as_echo "$THIS_RESULT" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable DBA interface" >&5
$as_echo_n "checking whether to enable DBA interface... " >&6; }
if test "$HAVE_DBA" = "1"; then
  if test "$ext_shared" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes, shared" >&5
$as_echo "yes, shared" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  fi

$as_echo "#define HAVE_DBA 1" >>confdefs.h


  ext_builddir=ext/dba
  ext_srcdir=$abs_srcdir/ext/dba

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_DBA_SHARED=no


  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c dba_tcadb.c $cdb_sources $flat_sources $ini_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dba"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dba"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_DBA_SHARED=yes

  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c dba_tcadb.c $cdb_sources $flat_sources $ini_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_dba="$shared_objects_dba $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdba.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(PHPDBA_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdba.so '$ext_builddir'/phpdba.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) -L$(top_builddir)/netware -lphp5lib $(DBA_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(PHPDBA_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdba.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdba.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dba"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpdba.$suffix: $ext_builddir/phpdba.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdba.$suffix \$(phplibdir)

$ext_builddir/phpdba.$suffix: \$(shared_objects_dba) \$(PHPDBA_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/dba.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(DBA_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/dba.so '$ext_builddir'/dba.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dba) $(DBA_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/dba.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/dba.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dba"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dba.$suffix: $ext_builddir/dba.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/dba.$suffix \$(phplibdir)

$ext_builddir/dba.$suffix: \$(shared_objects_dba) \$(DBA_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_DBA 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_DBA_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c dba_tcadb.c $cdb_sources $flat_sources $ini_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC dba"
        ;;
      *)


  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db1.c dba_db2.c dba_db3.c dba_db4.c dba_flatfile.c dba_inifile.c dba_qdbm.c dba_tcadb.c $cdb_sources $flat_sources $ini_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC dba"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=dba

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/libinifile"




    BUILD_DIR="$BUILD_DIR $ext_builddir/libcdb"




    BUILD_DIR="$BUILD_DIR $ext_builddir/libflatfile"



  PHP_VAR_SUBST="$PHP_VAR_SUBST DBA_SHARED_LIBADD"

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi



php_enable_dom=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable DOM support" >&5
$as_echo_n "checking whether to enable DOM support... " >&6; }
# Check whether --enable-dom was given.
if test "${enable_dom+set}" = set; then :
  enableval=$enable_dom; PHP_DOM=$enableval
else

  PHP_DOM=yes
  test "$PHP_ENABLE_ALL" && PHP_DOM=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DOM in
shared,*)
  PHP_DOM=`echo "$PHP_DOM"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_DOM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_DOM" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    as_fn_error $? "DOM extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        DOM_SHARED_LIBADD="$DOM_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        DOM_SHARED_LIBADD="$DOM_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        DOM_SHARED_LIBADD="-L$ai_p $DOM_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && DOM_SHARED_LIBADD="$ld_runpath_switch$ai_p $DOM_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $DOM_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi


$as_echo "#define HAVE_DOM 1" >>confdefs.h


  ext_builddir=ext/dom
  ext_srcdir=$abs_srcdir/ext/dom

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_DOM_SHARED=no


  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dom"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dom"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_DOM_SHARED=yes

  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_dom="$shared_objects_dom $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdom.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(PHPDOM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdom.so '$ext_builddir'/phpdom.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) -L$(top_builddir)/netware -lphp5lib $(DOM_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(PHPDOM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdom.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdom.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dom"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpdom.$suffix: $ext_builddir/phpdom.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdom.$suffix \$(phplibdir)

$ext_builddir/phpdom.$suffix: \$(shared_objects_dom) \$(PHPDOM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/dom.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(DOM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/dom.so '$ext_builddir'/dom.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dom) $(DOM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/dom.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/dom.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dom"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dom.$suffix: $ext_builddir/dom.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/dom.$suffix \$(phplibdir)

$ext_builddir/dom.$suffix: \$(shared_objects_dom) \$(DOM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_DOM 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_DOM_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC dom"
        ;;
      *)


  case ext/dom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dom/"; ac_bdir="ext/dom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_dom.c attr.c document.c domerrorhandler.c \
                            domstringlist.c domexception.c namelist.c \
                            processinginstruction.c cdatasection.c \
                            documentfragment.c domimplementation.c \
                            element.c node.c string_extend.c characterdata.c \
                            documenttype.c domimplementationlist.c entity.c \
                            nodelist.c text.c comment.c domconfiguration.c \
                            domimplementationsource.c entityreference.c \
                            notation.c xpath.c dom_iterators.c \
                            typeinfo.c domerror.c domlocator.c namednodemap.c userdatahandler.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC dom"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=dom

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST DOM_SHARED_LIBADD"



    for header_file in ext/dom/xml_common.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



  am_i_shared=$PHP_DOM_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension dom to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build dom shared or build libxml statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension dom, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" "$LINENO" 5
  fi


    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
    as_fn_error $? "xml2-config not found. Please check your libxml2 installation." "$LINENO" 5

  fi

fi



php_with_enchant=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ENCHANT support" >&5
$as_echo_n "checking for ENCHANT support... " >&6; }

# Check whether --with-enchant was given.
if test "${with_enchant+set}" = set; then :
  withval=$with_enchant; PHP_ENCHANT=$withval
else

  PHP_ENCHANT=no
  test "$PHP_ENABLE_ALL" && PHP_ENCHANT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ENCHANT in
shared,*)
  PHP_ENCHANT=`echo "$PHP_ENCHANT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ENCHANT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_ENCHANT" != "no"; then

  ext_builddir=ext/enchant
  ext_srcdir=$abs_srcdir/ext/enchant

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ENCHANT_SHARED=no


  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC enchant"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC enchant"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ENCHANT_SHARED=yes

  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_enchant="$shared_objects_enchant $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpenchant.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(PHPENCHANT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpenchant.so '$ext_builddir'/phpenchant.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) -L$(top_builddir)/netware -lphp5lib $(ENCHANT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(PHPENCHANT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpenchant.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpenchant.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_enchant"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpenchant.$suffix: $ext_builddir/phpenchant.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpenchant.$suffix \$(phplibdir)

$ext_builddir/phpenchant.$suffix: \$(shared_objects_enchant) \$(PHPENCHANT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/enchant.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(ENCHANT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/enchant.so '$ext_builddir'/enchant.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) -L$(top_builddir)/netware -lphp5lib $(HANT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_enchant) $(ENCHANT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/enchant.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/enchant.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_enchant"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/enchant.$suffix: $ext_builddir/enchant.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/enchant.$suffix \$(phplibdir)

$ext_builddir/enchant.$suffix: \$(shared_objects_enchant) \$(ENCHANT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_ENCHANT 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ENCHANT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC enchant"
        ;;
      *)


  case ext/enchant in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/enchant"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/enchant/"; ac_bdir="ext/enchant/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in enchant.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC enchant"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=enchant

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

	if test "$PHP_ENCHANT" != "yes"; then
	    ENCHANT_SEARCH_DIRS=$PHP_ENCHANT
	else
	    ENCHANT_SEARCH_DIRS="/usr/local /usr"
	fi
	for i in $ENCHANT_SEARCH_DIRS; do
		if test -f $i/include/enchant/enchant.h; then
			ENCHANT_DIR=$i
			ENCHANT_INCDIR=$i/include/enchant
		elif test -f $i/include/enchant.h; then
			ENCHANT_DIR=$i
			ENCHANT_INCDIR=$i/include
		fi
	done

	if test -z "$ENCHANT_DIR"; then
		as_fn_error $? "Cannot find enchant" "$LINENO" 5
	fi

	ENCHANT_LIBDIR=$ENCHANT_DIR/lib


$as_echo "#define HAVE_ENCHANT 1" >>confdefs.h


  PHP_VAR_SUBST="$PHP_VAR_SUBST ENCHANT_SHARED_LIBADD"



  if test "$ext_shared" = "yes"; then
    ENCHANT_SHARED_LIBADD="-lenchant $ENCHANT_SHARED_LIBADD"
    if test -n "$ENCHANT_LIBDIR"; then

  if test "$ENCHANT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ENCHANT_LIBDIR" != "/usr/lib"; then

  if test -z "$ENCHANT_LIBDIR" || echo "$ENCHANT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ENCHANT_LIBDIR
  else

    ep_dir=`echo $ENCHANT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ENCHANT_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        ENCHANT_SHARED_LIBADD="-L$ai_p $ENCHANT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ENCHANT_SHARED_LIBADD="$ld_runpath_switch$ai_p $ENCHANT_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$ENCHANT_LIBDIR"; then

  if test "$ENCHANT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ENCHANT_LIBDIR" != "/usr/lib"; then

  if test -z "$ENCHANT_LIBDIR" || echo "$ENCHANT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ENCHANT_LIBDIR
  else

    ep_dir=`echo $ENCHANT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ENCHANT_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case enchant in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lenchant $LIBS"
   ;;
  esac




  fi



  if test "$ENCHANT_INCDIR" != "/usr/include"; then

  if test -z "$ENCHANT_INCDIR" || echo "$ENCHANT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ENCHANT_INCDIR
  else

    ep_dir=`echo $ENCHANT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ENCHANT_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" -L$ENCHANT_LIB $ENCHANT_SHARED_LIBADD"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for enchant_broker_set_param in -lenchant" >&5
$as_echo_n "checking for enchant_broker_set_param in -lenchant... " >&6; }
if ${ac_cv_lib_enchant_enchant_broker_set_param+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lenchant  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char enchant_broker_set_param ();
int
main ()
{
return enchant_broker_set_param ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_enchant_enchant_broker_set_param=yes
else
  ac_cv_lib_enchant_enchant_broker_set_param=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_enchant_enchant_broker_set_param" >&5
$as_echo "$ac_cv_lib_enchant_enchant_broker_set_param" >&6; }
if test "x$ac_cv_lib_enchant_enchant_broker_set_param" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_ENCHANT_BROKER_SET_PARAM 1" >>confdefs.h


$as_echo "#define ENCHANT_VERSION_STRING \"1.5.x\"" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_enchant_enchant_broker_set_param


fi


fi



php_enable_exif=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable EXIF (metadata from images) support" >&5
$as_echo_n "checking whether to enable EXIF (metadata from images) support... " >&6; }
# Check whether --enable-exif was given.
if test "${enable_exif+set}" = set; then :
  enableval=$enable_exif; PHP_EXIF=$enableval
else

  PHP_EXIF=no
  test "$PHP_ENABLE_ALL" && PHP_EXIF=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EXIF in
shared,*)
  PHP_EXIF=`echo "$PHP_EXIF"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_EXIF=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_EXIF" != "no"; then

$as_echo "#define HAVE_EXIF 1" >>confdefs.h


  ext_builddir=ext/exif
  ext_srcdir=$abs_srcdir/ext/exif

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_EXIF_SHARED=no


  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC exif"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC exif"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_EXIF_SHARED=yes

  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in exif.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_exif="$shared_objects_exif $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpexif.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(PHPEXIF_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpexif.so '$ext_builddir'/phpexif.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) -L$(top_builddir)/netware -lphp5lib $(EXIF_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(PHPEXIF_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpexif.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpexif.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_exif"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpexif.$suffix: $ext_builddir/phpexif.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpexif.$suffix \$(phplibdir)

$ext_builddir/phpexif.$suffix: \$(shared_objects_exif) \$(PHPEXIF_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/exif.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(EXIF_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/exif.so '$ext_builddir'/exif.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) -L$(top_builddir)/netware -lphp5lib $(F_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_exif) $(EXIF_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/exif.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/exif.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_exif"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/exif.$suffix: $ext_builddir/exif.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/exif.$suffix \$(phplibdir)

$ext_builddir/exif.$suffix: \$(shared_objects_exif) \$(EXIF_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_EXIF 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_EXIF_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC exif"
        ;;
      *)


  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC exif"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=exif

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_fileinfo=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for fileinfo support" >&5
$as_echo_n "checking for fileinfo support... " >&6; }
# Check whether --enable-fileinfo was given.
if test "${enable_fileinfo+set}" = set; then :
  enableval=$enable_fileinfo; PHP_FILEINFO=$enableval
else

  PHP_FILEINFO=yes
  test "$PHP_ENABLE_ALL" && PHP_FILEINFO=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FILEINFO in
shared,*)
  PHP_FILEINFO=`echo "$PHP_FILEINFO"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_FILEINFO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_FILEINFO" != "no"; then

  libmagic_sources=" \
    libmagic/apprentice.c libmagic/apptype.c libmagic/ascmagic.c \
    libmagic/cdf.c libmagic/cdf_time.c libmagic/compress.c \
    libmagic/encoding.c libmagic/fsmagic.c libmagic/funcs.c \
    libmagic/is_tar.c libmagic/magic.c libmagic/print.c \
    libmagic/readcdf.c libmagic/readelf.c libmagic/softmagic.c"


  ext_builddir=ext/fileinfo
  ext_srcdir=$abs_srcdir/ext/fileinfo

  ac_extra=`echo "-I@ext_srcdir@/libmagic"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_FILEINFO_SHARED=no


  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC fileinfo"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC fileinfo"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_FILEINFO_SHARED=yes

  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_fileinfo="$shared_objects_fileinfo $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpfileinfo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(PHPFILEINFO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpfileinfo.so '$ext_builddir'/phpfileinfo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) -L$(top_builddir)/netware -lphp5lib $(FILEINFO_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(PHPFILEINFO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpfileinfo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpfileinfo.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fileinfo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpfileinfo.$suffix: $ext_builddir/phpfileinfo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpfileinfo.$suffix \$(phplibdir)

$ext_builddir/phpfileinfo.$suffix: \$(shared_objects_fileinfo) \$(PHPFILEINFO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/fileinfo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(FILEINFO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/fileinfo.so '$ext_builddir'/fileinfo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) -L$(top_builddir)/netware -lphp5lib $(EINFO_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_fileinfo) $(FILEINFO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/fileinfo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/fileinfo.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fileinfo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/fileinfo.$suffix: $ext_builddir/fileinfo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/fileinfo.$suffix \$(phplibdir)

$ext_builddir/fileinfo.$suffix: \$(shared_objects_fileinfo) \$(FILEINFO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_FILEINFO 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_FILEINFO_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC fileinfo"
        ;;
      *)


  case ext/fileinfo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fileinfo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fileinfo/"; ac_bdir="ext/fileinfo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fileinfo.c $libmagic_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC fileinfo"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=fileinfo

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/libmagic"



  for ac_func in utimes strndup
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done



  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_filter=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable input filter support" >&5
$as_echo_n "checking whether to enable input filter support... " >&6; }
# Check whether --enable-filter was given.
if test "${enable_filter+set}" = set; then :
  enableval=$enable_filter; PHP_FILTER=$enableval
else

  PHP_FILTER=yes
  test "$PHP_ENABLE_ALL" && PHP_FILTER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FILTER in
shared,*)
  PHP_FILTER=`echo "$PHP_FILTER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_FILTER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_pcre_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking pcre install prefix" >&5
$as_echo_n "checking pcre install prefix... " >&6; }

# Check whether --with-pcre-dir was given.
if test "${with_pcre_dir+set}" = set; then :
  withval=$with_pcre_dir; PHP_PCRE_DIR=$withval
else

  PHP_PCRE_DIR=no


fi


ext_output=$PHP_PCRE_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_FILTER" != "no"; then

    if test -n "$PHP_VERSION"; then
        ext_shared=no
  else
        old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=$INCLUDES
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <main/php_config.h>
#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      PHP_PCRE_REGEX=yes

else

      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <main/php_config.h>
#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

        PHP_PCRE_REGEX=pecl

else

        PHP_PCRE_REGEX=no

fi
rm -f conftest*


fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS
  fi


  ext_builddir=ext/filter
  ext_srcdir=$abs_srcdir/ext/filter

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_FILTER_SHARED=no


  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC filter"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC filter"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_FILTER_SHARED=yes

  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_filter="$shared_objects_filter $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpfilter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(PHPFILTER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpfilter.so '$ext_builddir'/phpfilter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) -L$(top_builddir)/netware -lphp5lib $(FILTER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(PHPFILTER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpfilter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpfilter.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_filter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpfilter.$suffix: $ext_builddir/phpfilter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpfilter.$suffix \$(phplibdir)

$ext_builddir/phpfilter.$suffix: \$(shared_objects_filter) \$(PHPFILTER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/filter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(FILTER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/filter.so '$ext_builddir'/filter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) -L$(top_builddir)/netware -lphp5lib $(TER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_filter) $(FILTER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/filter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/filter.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_filter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/filter.$suffix: $ext_builddir/filter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/filter.$suffix \$(phplibdir)

$ext_builddir/filter.$suffix: \$(shared_objects_filter) \$(FILTER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_FILTER 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_FILTER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC filter"
        ;;
      *)


  case ext/filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filter/"; ac_bdir="ext/filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filter.c sanitizing_filters.c logical_filters.c callback_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC filter"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=filter

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST FILTER_SHARED_LIBADD"




    for header_file in ext/filter/php_filter.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



  am_i_shared=$PHP_FILTER_SHARED
  is_it_shared=$PHP_PCRE_SHARED
  is_it_enabled=$PHP_PCRE
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension filter to build statically, but it
depends on extension pcre, which you've configured to build shared.
You either need to build filter shared or build pcre statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension filter, which depends on extension pcre,
but you've either not enabled pcre, or have disabled it.
" "$LINENO" 5
  fi

fi



php_enable_ftp=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable FTP support" >&5
$as_echo_n "checking whether to enable FTP support... " >&6; }
# Check whether --enable-ftp was given.
if test "${enable_ftp+set}" = set; then :
  enableval=$enable_ftp; PHP_FTP=$enableval
else

  PHP_FTP=no
  test "$PHP_ENABLE_ALL" && PHP_FTP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FTP in
shared,*)
  PHP_FTP=`echo "$PHP_FTP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_FTP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_openssl_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking OpenSSL dir for FTP" >&5
$as_echo_n "checking OpenSSL dir for FTP... " >&6; }

# Check whether --with-openssl-dir was given.
if test "${with_openssl_dir+set}" = set; then :
  withval=$with_openssl_dir; PHP_OPENSSL_DIR=$withval
else

  PHP_OPENSSL_DIR=no


fi


ext_output=$PHP_OPENSSL_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_FTP" = "yes"; then

$as_echo "#define HAVE_FTP 1" >>confdefs.h


  ext_builddir=ext/ftp
  ext_srcdir=$abs_srcdir/ext/ftp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_FTP_SHARED=no


  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ftp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ftp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_FTP_SHARED=yes

  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_ftp="$shared_objects_ftp $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpftp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(PHPFTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpftp.so '$ext_builddir'/phpftp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) -L$(top_builddir)/netware -lphp5lib $(FTP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(PHPFTP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpftp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpftp.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ftp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpftp.$suffix: $ext_builddir/phpftp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpftp.$suffix \$(phplibdir)

$ext_builddir/phpftp.$suffix: \$(shared_objects_ftp) \$(PHPFTP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ftp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(FTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ftp.so '$ext_builddir'/ftp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ftp) $(FTP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ftp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ftp.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ftp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ftp.$suffix: $ext_builddir/ftp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ftp.$suffix \$(phplibdir)

$ext_builddir/ftp.$suffix: \$(shared_objects_ftp) \$(FTP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_FTP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_FTP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ftp"
        ;;
      *)


  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ftp"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ftp

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no

  if test "$PHP_OPENSSL" != "no" || test "$PHP_OPENSSL_DIR" != "no"; then

  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5
    fi

    if test -n "$OPENSSL_LIBS"; then

  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="$FTP_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="$FTP_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-L$ai_p $FTP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && FTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $FTP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi
    if test -n "$OPENSSL_INCS"; then

  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then

    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      as_fn_error $? "Cannot find OpenSSL's <evp.h>" "$LINENO" 5
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      as_fn_error $? "Cannot find OpenSSL's libraries" "$LINENO" 5
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version" >&5
$as_echo_n "checking for OpenSSL version... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: >= 0.9.6" >&5
$as_echo ">= 0.9.6" >&6; }

else

      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5

fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS


  if test "$OPENSSL_INCDIR" != "/usr/include"; then

  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else

    ep_dir=`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRYPTO_free in -lcrypto" >&5
$as_echo_n "checking for CRYPTO_free in -lcrypto... " >&6; }
if ${ac_cv_lib_crypto_CRYPTO_free+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypto  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char CRYPTO_free ();
int
main ()
{
return CRYPTO_free ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypto_CRYPTO_free=yes
else
  ac_cv_lib_crypto_CRYPTO_free=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_CRYPTO_free" >&5
$as_echo "$ac_cv_lib_crypto_CRYPTO_free" >&6; }
if test "x$ac_cv_lib_crypto_CRYPTO_free" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-lcrypto $FTP_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free

      as_fn_error $? "libcrypto not found!" "$LINENO" 5


fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL_CTX_set_ssl_version in -lssl" >&5
$as_echo_n "checking for SSL_CTX_set_ssl_version in -lssl... " >&6; }
if ${ac_cv_lib_ssl_SSL_CTX_set_ssl_version+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lssl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char SSL_CTX_set_ssl_version ();
int
main ()
{
return SSL_CTX_set_ssl_version ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=yes
else
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&5
$as_echo "$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&6; }
if test "x$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      found_openssl=yes


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version

      as_fn_error $? "libssl not found!" "$LINENO" 5


fi

    LIBS=$old_LIBS


  case ssl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-lssl $FTP_SHARED_LIBADD"
    else


  case ssl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lssl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-lcrypto $FTP_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then

  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else

    ep_dir=`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        FTP_SHARED_LIBADD="-L$ai_p $FTP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && FTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $FTP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR


:

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST FTP_SHARED_LIBADD"

  fi
fi




php_with_gd=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for GD support" >&5
$as_echo_n "checking for GD support... " >&6; }

# Check whether --with-gd was given.
if test "${with_gd+set}" = set; then :
  withval=$with_gd; PHP_GD=$withval
else

  PHP_GD=no
  test "$PHP_ENABLE_ALL" && PHP_GD=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GD in
shared,*)
  PHP_GD=`echo "$PHP_GD"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_GD=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



if test -z "$PHP_VPX_DIR"; then

php_with_vpx_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libvpx" >&5
$as_echo_n "checking for the location of libvpx... " >&6; }

# Check whether --with-vpx-dir was given.
if test "${with_vpx_dir+set}" = set; then :
  withval=$with_vpx_dir; PHP_VPX_DIR=$withval
else

  PHP_VPX_DIR=no


fi


ext_output=$PHP_VPX_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test -z "$PHP_JPEG_DIR"; then

php_with_jpeg_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libjpeg" >&5
$as_echo_n "checking for the location of libjpeg... " >&6; }

# Check whether --with-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then :
  withval=$with_jpeg_dir; PHP_JPEG_DIR=$withval
else

  PHP_JPEG_DIR=no


fi


ext_output=$PHP_JPEG_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test -z "$PHP_PNG_DIR"; then

php_with_png_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libpng" >&5
$as_echo_n "checking for the location of libpng... " >&6; }

# Check whether --with-png-dir was given.
if test "${with_png_dir+set}" = set; then :
  withval=$with_png_dir; PHP_PNG_DIR=$withval
else

  PHP_PNG_DIR=no


fi


ext_output=$PHP_PNG_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test -z "$PHP_ZLIB_DIR"; then

php_with_zlib_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libz" >&5
$as_echo_n "checking for the location of libz... " >&6; }

# Check whether --with-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then :
  withval=$with_zlib_dir; PHP_ZLIB_DIR=$withval
else

  PHP_ZLIB_DIR=no


fi


ext_output=$PHP_ZLIB_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi


php_with_xpm_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libXpm" >&5
$as_echo_n "checking for the location of libXpm... " >&6; }

# Check whether --with-xpm-dir was given.
if test "${with_xpm_dir+set}" = set; then :
  withval=$with_xpm_dir; PHP_XPM_DIR=$withval
else

  PHP_XPM_DIR=no


fi


ext_output=$PHP_XPM_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_freetype_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for FreeType 2" >&5
$as_echo_n "checking for FreeType 2... " >&6; }

# Check whether --with-freetype-dir was given.
if test "${with_freetype_dir+set}" = set; then :
  withval=$with_freetype_dir; PHP_FREETYPE_DIR=$withval
else

  PHP_FREETYPE_DIR=no


fi


ext_output=$PHP_FREETYPE_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_t1lib=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for T1lib support" >&5
$as_echo_n "checking for T1lib support... " >&6; }

# Check whether --with-t1lib was given.
if test "${with_t1lib+set}" = set; then :
  withval=$with_t1lib; PHP_T1LIB=$withval
else

  PHP_T1LIB=no


fi


ext_output=$PHP_T1LIB
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_gd_native_ttf=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable truetype string function in GD" >&5
$as_echo_n "checking whether to enable truetype string function in GD... " >&6; }
# Check whether --enable-gd-native-ttf was given.
if test "${enable_gd_native_ttf+set}" = set; then :
  enableval=$enable_gd_native_ttf; PHP_GD_NATIVE_TTF=$enableval
else

  PHP_GD_NATIVE_TTF=no


fi


ext_output=$PHP_GD_NATIVE_TTF
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_gd_jis_conv=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable JIS-mapped Japanese font support in GD" >&5
$as_echo_n "checking whether to enable JIS-mapped Japanese font support in GD... " >&6; }
# Check whether --enable-gd-jis-conv was given.
if test "${enable_gd_jis_conv+set}" = set; then :
  enableval=$enable_gd_jis_conv; PHP_GD_JIS_CONV=$enableval
else

  PHP_GD_JIS_CONV=no


fi


ext_output=$PHP_GD_JIS_CONV
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }


























if test "$PHP_GD" != "no"; then

  test "$PHP_PNG_DIR" = "no" && PHP_PNG_DIR=yes


	if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
		if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
		elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
		else
			as_fn_error $? "Can't find zlib headers under \"$PHP_ZLIB_DIR\"" "$LINENO" 5
		fi
	else
		for i in /usr/local /usr; do
			if test -f "$i/include/zlib/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include/zlib"
			elif test -f "$i/include/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include"
			fi
		done
	fi


  if test "$PHP_GD_NATIVE_TTF" = "yes"; then

$as_echo "#define USE_GD_IMGSTRTTF 1" >>confdefs.h

  fi


  if test "$PHP_VPX_DIR" != "no"; then

    for i in $PHP_VPX_DIR /usr/local /usr; do
      test -f $i/include/vpx_codec.h || test -f $i/include/vpx/vpx_codec.h && GD_VPX_DIR=$i && break
    done

    if test -z "$GD_VPX_DIR"; then
      as_fn_error $? "vpx_codec.h not found." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_VPX_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for vpx_codec_destroy in -lvpx" >&5
$as_echo_n "checking for vpx_codec_destroy in -lvpx... " >&6; }
if ${ac_cv_lib_vpx_vpx_codec_destroy+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lvpx  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char vpx_codec_destroy ();
int
main ()
{
return vpx_codec_destroy ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_vpx_vpx_codec_destroy=yes
else
  ac_cv_lib_vpx_vpx_codec_destroy=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_vpx_vpx_codec_destroy" >&5
$as_echo "$ac_cv_lib_vpx_vpx_codec_destroy" >&6; }
if test "x$ac_cv_lib_vpx_vpx_codec_destroy" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_VPX_DIR/include" != "/usr/include"; then

  if test -z "$GD_VPX_DIR/include" || echo "$GD_VPX_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_VPX_DIR/include
  else

    ep_dir=`echo $GD_VPX_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_VPX_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  case pthread in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpthread $LIBS"
   ;;
  esac




  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lvpx $GD_SHARED_LIBADD"
    if test -n "$GD_VPX_DIR/$PHP_LIBDIR"; then

  if test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_VPX_DIR/$PHP_LIBDIR" || echo "$GD_VPX_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_VPX_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_VPX_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_VPX_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_VPX_DIR/$PHP_LIBDIR"; then

  if test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_VPX_DIR/$PHP_LIBDIR" || echo "$GD_VPX_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_VPX_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_VPX_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_VPX_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case vpx in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lvpx $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_vpx_vpx_codec_destroy

      as_fn_error $? "Problem with libvpx.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-vpx-dir=<DIR>" >&5
$as_echo "If configure fails try --with-vpx-dir=<DIR>" >&6; }
  fi


  if test "$PHP_JPEG_DIR" != "no"; then

    for i in $PHP_JPEG_DIR /usr/local /usr; do
      test -f $i/include/jpeglib.h && GD_JPEG_DIR=$i && break
    done

    if test -z "$GD_JPEG_DIR"; then
      as_fn_error $? "jpeglib.h not found." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_JPEG_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for jpeg_read_header in -ljpeg" >&5
$as_echo_n "checking for jpeg_read_header in -ljpeg... " >&6; }
if ${ac_cv_lib_jpeg_jpeg_read_header+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ljpeg  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char jpeg_read_header ();
int
main ()
{
return jpeg_read_header ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_jpeg_jpeg_read_header=yes
else
  ac_cv_lib_jpeg_jpeg_read_header=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_jpeg_jpeg_read_header" >&5
$as_echo "$ac_cv_lib_jpeg_jpeg_read_header" >&6; }
if test "x$ac_cv_lib_jpeg_jpeg_read_header" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_JPEG_DIR/include" != "/usr/include"; then

  if test -z "$GD_JPEG_DIR/include" || echo "$GD_JPEG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/include
  else

    ep_dir=`echo $GD_JPEG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_JPEG_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-ljpeg $GD_SHARED_LIBADD"
    if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then

  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_JPEG_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then

  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_JPEG_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case jpeg in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ljpeg $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_jpeg_jpeg_read_header

      as_fn_error $? "Problem with libjpeg.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-jpeg-dir=<DIR>" >&5
$as_echo "If configure fails try --with-jpeg-dir=<DIR>" >&6; }
  fi


  if test "$PHP_PNG_DIR" != "no"; then

    for i in $PHP_PNG_DIR /usr/local /usr; do
      test -f $i/include/png.h && GD_PNG_DIR=$i && break
    done

    if test -z "$GD_PNG_DIR"; then
      as_fn_error $? "png.h not found." "$LINENO" 5
    fi

    if test "$PHP_ZLIB_DIR" = "no"; then
      as_fn_error $? "PNG support requires ZLIB. Use --with-zlib-dir=<DIR>" "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz -L$GD_PNG_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for png_write_image in -lpng" >&5
$as_echo_n "checking for png_write_image in -lpng... " >&6; }
if ${ac_cv_lib_png_png_write_image+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpng  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char png_write_image ();
int
main ()
{
return png_write_image ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_png_png_write_image=yes
else
  ac_cv_lib_png_png_write_image=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_png_png_write_image" >&5
$as_echo "$ac_cv_lib_png_png_write_image" >&6; }
if test "x$ac_cv_lib_png_png_write_image" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_PNG_DIR/include" != "/usr/include"; then

  if test -z "$GD_PNG_DIR/include" || echo "$GD_PNG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/include
  else

    ep_dir=`echo $GD_PNG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_PNG_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lz $GD_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then

  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then

  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lpng $GD_SHARED_LIBADD"
    if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then

  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_PNG_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then

  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_PNG_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case png in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpng $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_png_png_write_image

      as_fn_error $? "Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information." "$LINENO" 5


fi


  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" >&5
$as_echo "If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" >&6; }
  fi


  if test "$PHP_XPM_DIR" != "no"; then

    for i in $PHP_XPM_DIR /usr/local /usr/X11R6 /usr; do
      test -f $i/include/xpm.h && GD_XPM_DIR=$i && GD_XPM_INC=$i && break
      test -f $i/include/X11/xpm.h && GD_XPM_DIR=$i && GD_XPM_INC=$i/X11 && break
    done

    if test -z "$GD_XPM_DIR"; then
      as_fn_error $? "xpm.h not found." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_XPM_DIR/$PHP_LIBDIR -lX11
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for XpmFreeXpmImage in -lXpm" >&5
$as_echo_n "checking for XpmFreeXpmImage in -lXpm... " >&6; }
if ${ac_cv_lib_Xpm_XpmFreeXpmImage+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lXpm  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char XpmFreeXpmImage ();
int
main ()
{
return XpmFreeXpmImage ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_Xpm_XpmFreeXpmImage=yes
else
  ac_cv_lib_Xpm_XpmFreeXpmImage=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_Xpm_XpmFreeXpmImage" >&5
$as_echo "$ac_cv_lib_Xpm_XpmFreeXpmImage" >&6; }
if test "x$ac_cv_lib_Xpm_XpmFreeXpmImage" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_XPM_INC" != "/usr/include"; then

  if test -z "$GD_XPM_INC" || echo "$GD_XPM_INC" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_INC
  else

    ep_dir=`echo $GD_XPM_INC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_INC"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lXpm $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case Xpm in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lXpm $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lX11 $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case X11 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lX11 $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_Xpm_XpmFreeXpmImage

      as_fn_error $? "Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-xpm-dir=<DIR>" >&5
$as_echo "If configure fails try --with-xpm-dir=<DIR>" >&6; }
  fi


  if test "$PHP_FREETYPE_DIR" != "no"; then

    for i in $PHP_FREETYPE_DIR /usr/local /usr; do
      if test -f "$i/bin/freetype-config"; then
        FREETYPE2_DIR=$i
        FREETYPE2_CONFIG="$i/bin/freetype-config"
        break
      fi
    done

    if test -z "$FREETYPE2_DIR"; then
      as_fn_error $? "freetype-config not found." "$LINENO" 5
    fi

    FREETYPE2_CFLAGS=`$FREETYPE2_CONFIG --cflags`
    FREETYPE2_LIBS=`$FREETYPE2_CONFIG --libs`


  for ac_i in $FREETYPE2_CFLAGS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  for ac_i in $FREETYPE2_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$GD_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$GD_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


$as_echo "#define USE_GD_IMGSTRTTF 1" >>confdefs.h


$as_echo "#define HAVE_LIBFREETYPE 1" >>confdefs.h


$as_echo "#define ENABLE_GD_TTF 1" >>confdefs.h

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-freetype-dir=<DIR>" >&5
$as_echo "If configure fails try --with-freetype-dir=<DIR>" >&6; }
  fi


  if test "$PHP_T1LIB" != "no"; then

    for i in $PHP_T1LIB /usr/local /usr; do
      test -f "$i/include/t1lib.h" && GD_T1_DIR=$i && break
    done

    if test -z "$GD_T1_DIR"; then
      as_fn_error $? "Your t1lib distribution is not installed correctly. Please reinstall it." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_T1_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for T1_StrError in -lt1" >&5
$as_echo_n "checking for T1_StrError in -lt1... " >&6; }
if ${ac_cv_lib_t1_T1_StrError+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lt1  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char T1_StrError ();
int
main ()
{
return T1_StrError ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_t1_T1_StrError=yes
else
  ac_cv_lib_t1_T1_StrError=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_t1_T1_StrError" >&5
$as_echo "$ac_cv_lib_t1_T1_StrError" >&6; }
if test "x$ac_cv_lib_t1_T1_StrError" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_LIBT1 1" >>confdefs.h


  if test "$GD_T1_DIR/include" != "/usr/include"; then

  if test -z "$GD_T1_DIR/include" || echo "$GD_T1_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/include
  else

    ep_dir=`echo $GD_T1_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_T1_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lt1 $GD_SHARED_LIBADD"
    if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then

  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_T1_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then

  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_T1_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case t1 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lt1 $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_t1_T1_StrError

      as_fn_error $? "Problem with libt1.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  fi


  if test "$PHP_GD_JIS_CONV" = "yes"; then
    USE_GD_JIS_CONV=1
  fi

fi

if test "$PHP_GD" = "yes"; then
  GD_MODULE_TYPE=builtin
  extra_sources="libgd/gd.c libgd/gd_gd.c libgd/gd_gd2.c libgd/gd_io.c libgd/gd_io_dp.c \
                 libgd/gd_io_file.c libgd/gd_ss.c libgd/gd_io_ss.c libgd/webpimg.c libgd/gd_webp.c \
                 libgd/gd_png.c libgd/gd_jpeg.c libgd/gdxpm.c libgd/gdfontt.c libgd/gdfonts.c \
                 libgd/gdfontmb.c libgd/gdfontl.c libgd/gdfontg.c libgd/gdtables.c libgd/gdft.c \
                 libgd/gdcache.c libgd/gdkanji.c libgd/wbmp.c libgd/gd_wbmp.c libgd/gdhelpers.c \
                 libgd/gd_topal.c libgd/gd_gif_in.c libgd/xbm.c libgd/gd_gif_out.c libgd/gd_security.c \
                 libgd/gd_filter.c libgd/gd_pixelate.c libgd/gd_arc.c libgd/gd_rotate.c libgd/gd_color.c \
                 libgd/gd_transform.c libgd/gd_crop.c libgd/gd_interpolation.c libgd/gd_matrix.c"

  for ac_func in fabsf floorf
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done



$as_echo "#define HAVE_GD_BUNDLED 1" >>confdefs.h


$as_echo "#define HAVE_GD_PNG 1" >>confdefs.h


$as_echo "#define HAVE_GD_CACHE_CREATE 1" >>confdefs.h


  GDLIB_CFLAGS="-DHAVE_LIBPNG"


  if test -n "$GD_VPX_DIR"; then

$as_echo "#define HAVE_GD_WEBP 1" >>confdefs.h

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBVPX"
  fi

  if test -n "$GD_JPEG_DIR"; then

$as_echo "#define HAVE_GD_JPG 1" >>confdefs.h

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBJPEG"
  fi

  if test -n "$GD_XPM_DIR"; then

$as_echo "#define HAVE_GD_XPM 1" >>confdefs.h

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_XPM"
  fi

  if test -n "$FREETYPE2_DIR"; then

$as_echo "#define HAVE_GD_FREETYPE 1" >>confdefs.h


$as_echo "#define ENABLE_GD_TTF 1" >>confdefs.h

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBFREETYPE -DENABLE_GD_TTF"
  fi

  if test -n "$USE_GD_JIS_CONV"; then

$as_echo "#define USE_GD_JISX0208 1" >>confdefs.h

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DJISX0208"
  fi

else

 if test "$PHP_GD" != "no"; then
  GD_MODULE_TYPE=external
  extra_sources="gd_compat.c"


	if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
		if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
		elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
			PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
			PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
		else
			as_fn_error $? "Can't find zlib headers under \"$PHP_ZLIB_DIR\"" "$LINENO" 5
		fi
	else
		for i in /usr/local /usr; do
			if test -f "$i/include/zlib/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include/zlib"
			elif test -f "$i/include/zlib.h"; then
				PHP_ZLIB_DIR="$i"
				PHP_ZLIB_INCDIR="$i/include"
			fi
		done
	fi


  if test "$PHP_GD_NATIVE_TTF" = "yes"; then

$as_echo "#define USE_GD_IMGSTRTTF 1" >>confdefs.h

  fi


  if test "$PHP_VPX_DIR" != "no"; then

    for i in $PHP_VPX_DIR /usr/local /usr; do
      test -f $i/include/vpx_codec.h || test -f $i/include/vpx/vpx_codec.h && GD_VPX_DIR=$i && break
    done

    if test -z "$GD_VPX_DIR"; then
      as_fn_error $? "vpx_codec.h not found." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_VPX_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for vpx_codec_destroy in -lvpx" >&5
$as_echo_n "checking for vpx_codec_destroy in -lvpx... " >&6; }
if ${ac_cv_lib_vpx_vpx_codec_destroy+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lvpx  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char vpx_codec_destroy ();
int
main ()
{
return vpx_codec_destroy ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_vpx_vpx_codec_destroy=yes
else
  ac_cv_lib_vpx_vpx_codec_destroy=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_vpx_vpx_codec_destroy" >&5
$as_echo "$ac_cv_lib_vpx_vpx_codec_destroy" >&6; }
if test "x$ac_cv_lib_vpx_vpx_codec_destroy" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_VPX_DIR/include" != "/usr/include"; then

  if test -z "$GD_VPX_DIR/include" || echo "$GD_VPX_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_VPX_DIR/include
  else

    ep_dir=`echo $GD_VPX_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_VPX_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  case pthread in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpthread $LIBS"
   ;;
  esac




  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lvpx $GD_SHARED_LIBADD"
    if test -n "$GD_VPX_DIR/$PHP_LIBDIR"; then

  if test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_VPX_DIR/$PHP_LIBDIR" || echo "$GD_VPX_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_VPX_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_VPX_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_VPX_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_VPX_DIR/$PHP_LIBDIR"; then

  if test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_VPX_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_VPX_DIR/$PHP_LIBDIR" || echo "$GD_VPX_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_VPX_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_VPX_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_VPX_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case vpx in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lvpx $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_vpx_vpx_codec_destroy

      as_fn_error $? "Problem with libvpx.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-vpx-dir=<DIR>" >&5
$as_echo "If configure fails try --with-vpx-dir=<DIR>" >&6; }
  fi


  if test "$PHP_JPEG_DIR" != "no"; then

    for i in $PHP_JPEG_DIR /usr/local /usr; do
      test -f $i/include/jpeglib.h && GD_JPEG_DIR=$i && break
    done

    if test -z "$GD_JPEG_DIR"; then
      as_fn_error $? "jpeglib.h not found." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_JPEG_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for jpeg_read_header in -ljpeg" >&5
$as_echo_n "checking for jpeg_read_header in -ljpeg... " >&6; }
if ${ac_cv_lib_jpeg_jpeg_read_header+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ljpeg  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char jpeg_read_header ();
int
main ()
{
return jpeg_read_header ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_jpeg_jpeg_read_header=yes
else
  ac_cv_lib_jpeg_jpeg_read_header=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_jpeg_jpeg_read_header" >&5
$as_echo "$ac_cv_lib_jpeg_jpeg_read_header" >&6; }
if test "x$ac_cv_lib_jpeg_jpeg_read_header" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_JPEG_DIR/include" != "/usr/include"; then

  if test -z "$GD_JPEG_DIR/include" || echo "$GD_JPEG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/include
  else

    ep_dir=`echo $GD_JPEG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_JPEG_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-ljpeg $GD_SHARED_LIBADD"
    if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then

  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_JPEG_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_JPEG_DIR/$PHP_LIBDIR"; then

  if test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_JPEG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_JPEG_DIR/$PHP_LIBDIR" || echo "$GD_JPEG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_JPEG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_JPEG_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case jpeg in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ljpeg $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_jpeg_jpeg_read_header

      as_fn_error $? "Problem with libjpeg.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-jpeg-dir=<DIR>" >&5
$as_echo "If configure fails try --with-jpeg-dir=<DIR>" >&6; }
  fi


  if test "$PHP_PNG_DIR" != "no"; then

    for i in $PHP_PNG_DIR /usr/local /usr; do
      test -f $i/include/png.h && GD_PNG_DIR=$i && break
    done

    if test -z "$GD_PNG_DIR"; then
      as_fn_error $? "png.h not found." "$LINENO" 5
    fi

    if test "$PHP_ZLIB_DIR" = "no"; then
      as_fn_error $? "PNG support requires ZLIB. Use --with-zlib-dir=<DIR>" "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz -L$GD_PNG_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for png_write_image in -lpng" >&5
$as_echo_n "checking for png_write_image in -lpng... " >&6; }
if ${ac_cv_lib_png_png_write_image+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpng  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char png_write_image ();
int
main ()
{
return png_write_image ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_png_png_write_image=yes
else
  ac_cv_lib_png_png_write_image=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_png_png_write_image" >&5
$as_echo "$ac_cv_lib_png_png_write_image" >&6; }
if test "x$ac_cv_lib_png_png_write_image" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_PNG_DIR/include" != "/usr/include"; then

  if test -z "$GD_PNG_DIR/include" || echo "$GD_PNG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/include
  else

    ep_dir=`echo $GD_PNG_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_PNG_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lz $GD_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then

  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then

  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lpng $GD_SHARED_LIBADD"
    if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then

  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_PNG_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_PNG_DIR/$PHP_LIBDIR"; then

  if test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_PNG_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_PNG_DIR/$PHP_LIBDIR" || echo "$GD_PNG_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_PNG_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_PNG_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case png in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpng $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_png_png_write_image

      as_fn_error $? "Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information." "$LINENO" 5


fi


  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" >&5
$as_echo "If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" >&6; }
  fi


  if test "$PHP_XPM_DIR" != "no"; then

    for i in $PHP_XPM_DIR /usr/local /usr/X11R6 /usr; do
      test -f $i/include/xpm.h && GD_XPM_DIR=$i && GD_XPM_INC=$i && break
      test -f $i/include/X11/xpm.h && GD_XPM_DIR=$i && GD_XPM_INC=$i/X11 && break
    done

    if test -z "$GD_XPM_DIR"; then
      as_fn_error $? "xpm.h not found." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_XPM_DIR/$PHP_LIBDIR -lX11
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for XpmFreeXpmImage in -lXpm" >&5
$as_echo_n "checking for XpmFreeXpmImage in -lXpm... " >&6; }
if ${ac_cv_lib_Xpm_XpmFreeXpmImage+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lXpm  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char XpmFreeXpmImage ();
int
main ()
{
return XpmFreeXpmImage ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_Xpm_XpmFreeXpmImage=yes
else
  ac_cv_lib_Xpm_XpmFreeXpmImage=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_Xpm_XpmFreeXpmImage" >&5
$as_echo "$ac_cv_lib_Xpm_XpmFreeXpmImage" >&6; }
if test "x$ac_cv_lib_Xpm_XpmFreeXpmImage" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$GD_XPM_INC" != "/usr/include"; then

  if test -z "$GD_XPM_INC" || echo "$GD_XPM_INC" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_INC
  else

    ep_dir=`echo $GD_XPM_INC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_INC"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lXpm $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case Xpm in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lXpm $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lX11 $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_XPM_DIR/$PHP_LIBDIR"; then

  if test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_XPM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_XPM_DIR/$PHP_LIBDIR" || echo "$GD_XPM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_XPM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_XPM_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case X11 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lX11 $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_Xpm_XpmFreeXpmImage

      as_fn_error $? "Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-xpm-dir=<DIR>" >&5
$as_echo "If configure fails try --with-xpm-dir=<DIR>" >&6; }
  fi


  if test "$PHP_FREETYPE_DIR" != "no"; then

    for i in $PHP_FREETYPE_DIR /usr/local /usr; do
      if test -f "$i/bin/freetype-config"; then
        FREETYPE2_DIR=$i
        FREETYPE2_CONFIG="$i/bin/freetype-config"
        break
      fi
    done

    if test -z "$FREETYPE2_DIR"; then
      as_fn_error $? "freetype-config not found." "$LINENO" 5
    fi

    FREETYPE2_CFLAGS=`$FREETYPE2_CONFIG --cflags`
    FREETYPE2_LIBS=`$FREETYPE2_CONFIG --libs`


  for ac_i in $FREETYPE2_CFLAGS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  for ac_i in $FREETYPE2_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$GD_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$GD_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


$as_echo "#define USE_GD_IMGSTRTTF 1" >>confdefs.h


$as_echo "#define HAVE_LIBFREETYPE 1" >>confdefs.h


$as_echo "#define ENABLE_GD_TTF 1" >>confdefs.h

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: If configure fails try --with-freetype-dir=<DIR>" >&5
$as_echo "If configure fails try --with-freetype-dir=<DIR>" >&6; }
  fi


  if test "$PHP_T1LIB" != "no"; then

    for i in $PHP_T1LIB /usr/local /usr; do
      test -f "$i/include/t1lib.h" && GD_T1_DIR=$i && break
    done

    if test -z "$GD_T1_DIR"; then
      as_fn_error $? "Your t1lib distribution is not installed correctly. Please reinstall it." "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GD_T1_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for T1_StrError in -lt1" >&5
$as_echo_n "checking for T1_StrError in -lt1... " >&6; }
if ${ac_cv_lib_t1_T1_StrError+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lt1  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char T1_StrError ();
int
main ()
{
return T1_StrError ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_t1_T1_StrError=yes
else
  ac_cv_lib_t1_T1_StrError=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_t1_T1_StrError" >&5
$as_echo "$ac_cv_lib_t1_T1_StrError" >&6; }
if test "x$ac_cv_lib_t1_T1_StrError" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_LIBT1 1" >>confdefs.h


  if test "$GD_T1_DIR/include" != "/usr/include"; then

  if test -z "$GD_T1_DIR/include" || echo "$GD_T1_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/include
  else

    ep_dir=`echo $GD_T1_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_T1_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lt1 $GD_SHARED_LIBADD"
    if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then

  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_T1_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GD_T1_DIR/$PHP_LIBDIR"; then

  if test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GD_T1_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GD_T1_DIR/$PHP_LIBDIR" || echo "$GD_T1_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GD_T1_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_T1_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case t1 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lt1 $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_t1_T1_StrError

      as_fn_error $? "Problem with libt1.(a|so). Please check config.log for more information." "$LINENO" 5


fi

  fi


  for i in include/gd include gd ""; do
    test -f "$PHP_GD/$i/gd.h" && GD_INCLUDE="$PHP_GD/$i"
  done

  if test -z "$GD_INCLUDE"; then
    as_fn_error $? "Unable to find gd.h anywhere under $PHP_GD" "$LINENO" 5
  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PHP_GD/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdSetErrorMethod in -lgd" >&5
$as_echo_n "checking for gdSetErrorMethod in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdSetErrorMethod+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdSetErrorMethod ();
int
main ()
{
return gdSetErrorMethod ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdSetErrorMethod=yes
else
  ac_cv_lib_gd_gdSetErrorMethod=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdSetErrorMethod" >&5
$as_echo "$ac_cv_lib_gd_gdSetErrorMethod" >&6; }
if test "x$ac_cv_lib_gd_gdSetErrorMethod" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lgd $GD_SHARED_LIBADD"
    if test -n "$PHP_GD/$PHP_LIBDIR"; then

  if test "$PHP_GD/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_GD/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_GD/$PHP_LIBDIR" || echo "$PHP_GD/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_GD/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_GD/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_GD/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="-L$ai_p $GD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GD_SHARED_LIBADD="$ld_runpath_switch$ai_p $GD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_GD/$PHP_LIBDIR"; then

  if test "$PHP_GD/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_GD/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_GD/$PHP_LIBDIR" || echo "$PHP_GD/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_GD/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_GD/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_GD/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case gd in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lgd $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_LIBGD 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdSetErrorMethod

    as_fn_error $? "Unable to find libgd.(a|so) >= 2.1.0 anywhere under $PHP_GD" "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" $GD_SHARED_LIBADD "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdImageCreateFromPng in -lgd" >&5
$as_echo_n "checking for gdImageCreateFromPng in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdImageCreateFromPng+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdImageCreateFromPng ();
int
main ()
{
return gdImageCreateFromPng ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdImageCreateFromPng=yes
else
  ac_cv_lib_gd_gdImageCreateFromPng=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdImageCreateFromPng" >&5
$as_echo "$ac_cv_lib_gd_gdImageCreateFromPng" >&6; }
if test "x$ac_cv_lib_gd_gdImageCreateFromPng" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

$as_echo "#define HAVE_GD_PNG 1" >>confdefs.h


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromPng


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" $GD_SHARED_LIBADD "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdImageCreateFromWebp in -lgd" >&5
$as_echo_n "checking for gdImageCreateFromWebp in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdImageCreateFromWebp+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdImageCreateFromWebp ();
int
main ()
{
return gdImageCreateFromWebp ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdImageCreateFromWebp=yes
else
  ac_cv_lib_gd_gdImageCreateFromWebp=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdImageCreateFromWebp" >&5
$as_echo "$ac_cv_lib_gd_gdImageCreateFromWebp" >&6; }
if test "x$ac_cv_lib_gd_gdImageCreateFromWebp" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

$as_echo "#define HAVE_GD_WEBP 1" >>confdefs.h


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromWebp


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" $GD_SHARED_LIBADD "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdImageCreateFromJpeg in -lgd" >&5
$as_echo_n "checking for gdImageCreateFromJpeg in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdImageCreateFromJpeg+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdImageCreateFromJpeg ();
int
main ()
{
return gdImageCreateFromJpeg ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdImageCreateFromJpeg=yes
else
  ac_cv_lib_gd_gdImageCreateFromJpeg=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdImageCreateFromJpeg" >&5
$as_echo "$ac_cv_lib_gd_gdImageCreateFromJpeg" >&6; }
if test "x$ac_cv_lib_gd_gdImageCreateFromJpeg" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

$as_echo "#define HAVE_GD_JPG 1" >>confdefs.h


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromJpeg


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" $GD_SHARED_LIBADD "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdImageCreateFromXpm in -lgd" >&5
$as_echo_n "checking for gdImageCreateFromXpm in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdImageCreateFromXpm+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdImageCreateFromXpm ();
int
main ()
{
return gdImageCreateFromXpm ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdImageCreateFromXpm=yes
else
  ac_cv_lib_gd_gdImageCreateFromXpm=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdImageCreateFromXpm" >&5
$as_echo "$ac_cv_lib_gd_gdImageCreateFromXpm" >&6; }
if test "x$ac_cv_lib_gd_gdImageCreateFromXpm" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

$as_echo "#define HAVE_GD_XPM 1" >>confdefs.h


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreateFromXpm


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" $GD_SHARED_LIBADD "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdImageStringFT in -lgd" >&5
$as_echo_n "checking for gdImageStringFT in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdImageStringFT+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdImageStringFT ();
int
main ()
{
return gdImageStringFT ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdImageStringFT=yes
else
  ac_cv_lib_gd_gdImageStringFT=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdImageStringFT" >&5
$as_echo "$ac_cv_lib_gd_gdImageStringFT" >&6; }
if test "x$ac_cv_lib_gd_gdImageStringFT" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

$as_echo "#define HAVE_GD_FREETYPE 1" >>confdefs.h


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageStringFT


fi




  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    GD_INCLUDE=$GD_INCLUDE
  else

    ep_dir=`echo $GD_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    GD_INCLUDE="$ep_realdir"/`basename "$GD_INCLUDE"`
  fi

 fi
fi

if test "$PHP_GD" != "no"; then

  ext_builddir=ext/gd
  ext_srcdir=$abs_srcdir/ext/gd

  ac_extra=`echo "\\$(GDLIB_CFLAGS)"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_GD_SHARED=no


  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gd"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gd"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_GD_SHARED=yes

  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_gd="$shared_objects_gd $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpgd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(PHPGD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpgd.so '$ext_builddir'/phpgd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) -L$(top_builddir)/netware -lphp5lib $(GD_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(PHPGD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpgd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpgd.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpgd.$suffix: $ext_builddir/phpgd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpgd.$suffix \$(phplibdir)

$ext_builddir/phpgd.$suffix: \$(shared_objects_gd) \$(PHPGD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/gd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(GD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/gd.so '$ext_builddir'/gd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gd) $(GD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/gd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/gd.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gd.$suffix: $ext_builddir/gd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/gd.$suffix \$(phplibdir)

$ext_builddir/gd.$suffix: \$(shared_objects_gd) \$(GD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_GD 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_GD_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC gd"
        ;;
      *)


  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c $extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC gd"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=gd

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  if test "$GD_MODULE_TYPE" = "builtin"; then


    BUILD_DIR="$BUILD_DIR $ext_builddir/libgd"


    GDLIB_CFLAGS="-I$ext_srcdir/libgd $GDLIB_CFLAGS"
    GD_HEADER_DIRS="ext/gd/ ext/gd/libgd/"


  old_LIBS=$LIBS
  LIBS=" $GD_SHARED_LIBADD  $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

    char foobar () {}
    char foobar();
    int main() {
      foobar();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS


else

    LIBS=$old_LIBS

      as_fn_error $? "GD build test failed. Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


  else
    GD_HEADER_DIRS="ext/gd/"
    GDLIB_CFLAGS="-I$GD_INCLUDE $GDLIB_CFLAGS"

  if test "$GD_INCLUDE" != "/usr/include"; then

  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$GD_INCLUDE
  else

    ep_dir=`echo $GD_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GD_INCLUDE"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=" $GD_SHARED_LIBADD "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gdImageCreate in -lgd" >&5
$as_echo_n "checking for gdImageCreate in -lgd... " >&6; }
if ${ac_cv_lib_gd_gdImageCreate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgd  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gdImageCreate ();
int
main ()
{
return gdImageCreate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gd_gdImageCreate=yes
else
  ac_cv_lib_gd_gdImageCreate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gd_gdImageCreate" >&5
$as_echo "$ac_cv_lib_gd_gdImageCreate" >&6; }
if test "x$ac_cv_lib_gd_gdImageCreate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gd_gdImageCreate

      as_fn_error $? "GD build test failed. Please check the config.log for details." "$LINENO" 5


fi

  fi



    for header_file in $GD_HEADER_DIRS; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



  PHP_VAR_SUBST="$PHP_VAR_SUBST GDLIB_CFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST GD_SHARED_LIBADD"

fi



php_with_gettext=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU gettext support" >&5
$as_echo_n "checking for GNU gettext support... " >&6; }

# Check whether --with-gettext was given.
if test "${with_gettext+set}" = set; then :
  withval=$with_gettext; PHP_GETTEXT=$withval
else

  PHP_GETTEXT=no
  test "$PHP_ENABLE_ALL" && PHP_GETTEXT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GETTEXT in
shared,*)
  PHP_GETTEXT=`echo "$PHP_GETTEXT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_GETTEXT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_GETTEXT" != "no"; then
  for i in $PHP_GETTEXT /usr/local /usr; do
    test -r $i/include/libintl.h && GETTEXT_DIR=$i && break
  done

  if test -z "$GETTEXT_DIR"; then
    as_fn_error $? "Cannot locate header file libintl.h" "$LINENO" 5
  fi

  GETTEXT_LIBDIR=$GETTEXT_DIR/$PHP_LIBDIR
  GETTEXT_INCDIR=$GETTEXT_DIR/include

  O_LDFLAGS=$LDFLAGS
  LDFLAGS="$LDFLAGS -L$GETTEXT_LIBDIR"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bindtextdomain in -lintl" >&5
$as_echo_n "checking for bindtextdomain in -lintl... " >&6; }
if ${ac_cv_lib_intl_bindtextdomain+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lintl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char bindtextdomain ();
int
main ()
{
return bindtextdomain ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_intl_bindtextdomain=yes
else
  ac_cv_lib_intl_bindtextdomain=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_bindtextdomain" >&5
$as_echo "$ac_cv_lib_intl_bindtextdomain" >&6; }
if test "x$ac_cv_lib_intl_bindtextdomain" = xyes; then :

	GETTEXT_LIBS=intl
	GETTEXT_CHECK_IN_LIB=intl

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bindtextdomain in -lc" >&5
$as_echo_n "checking for bindtextdomain in -lc... " >&6; }
if ${ac_cv_lib_c_bindtextdomain+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lc  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char bindtextdomain ();
int
main ()
{
return bindtextdomain ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_c_bindtextdomain=yes
else
  ac_cv_lib_c_bindtextdomain=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_c_bindtextdomain" >&5
$as_echo "$ac_cv_lib_c_bindtextdomain" >&6; }
if test "x$ac_cv_lib_c_bindtextdomain" = xyes; then :

		GETTEXT_LIBS=
		GETTEXT_CHECK_IN_LIB=c

else

		as_fn_error $? "Unable to find required gettext library" "$LINENO" 5

fi


fi

  LDFLAGS=$O_LDFLAGS


$as_echo "#define HAVE_LIBINTL 1" >>confdefs.h


  ext_builddir=ext/gettext
  ext_srcdir=$abs_srcdir/ext/gettext

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_GETTEXT_SHARED=no


  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gettext"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gettext"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_GETTEXT_SHARED=yes

  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_gettext="$shared_objects_gettext $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpgettext.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(PHPGETTEXT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpgettext.so '$ext_builddir'/phpgettext.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) -L$(top_builddir)/netware -lphp5lib $(GETTEXT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(PHPGETTEXT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpgettext.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpgettext.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gettext"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpgettext.$suffix: $ext_builddir/phpgettext.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpgettext.$suffix \$(phplibdir)

$ext_builddir/phpgettext.$suffix: \$(shared_objects_gettext) \$(PHPGETTEXT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/gettext.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(GETTEXT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/gettext.so '$ext_builddir'/gettext.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) -L$(top_builddir)/netware -lphp5lib $(TEXT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gettext) $(GETTEXT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/gettext.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/gettext.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gettext"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gettext.$suffix: $ext_builddir/gettext.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/gettext.$suffix \$(phplibdir)

$ext_builddir/gettext.$suffix: \$(shared_objects_gettext) \$(GETTEXT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_GETTEXT 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_GETTEXT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC gettext"
        ;;
      *)


  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC gettext"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=gettext

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST GETTEXT_SHARED_LIBADD"


  if test -n "$GETTEXT_LIBS"; then


  if test "$ext_shared" = "yes"; then
    GETTEXT_SHARED_LIBADD="-l$GETTEXT_LIBS $GETTEXT_SHARED_LIBADD"
    if test -n "$GETTEXT_LIBDIR"; then

  if test "$GETTEXT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GETTEXT_LIBDIR" != "/usr/lib"; then

  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_LIBDIR
  else

    ep_dir=`echo $GETTEXT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GETTEXT_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GETTEXT_SHARED_LIBADD="-L$ai_p $GETTEXT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GETTEXT_SHARED_LIBADD="$ld_runpath_switch$ai_p $GETTEXT_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GETTEXT_LIBDIR"; then

  if test "$GETTEXT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GETTEXT_LIBDIR" != "/usr/lib"; then

  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_LIBDIR
  else

    ep_dir=`echo $GETTEXT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GETTEXT_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $GETTEXT_LIBS in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$GETTEXT_LIBS $LIBS"
   ;;
  esac




  fi


  fi


  if test "$GETTEXT_INCDIR" != "/usr/include"; then

  if test -z "$GETTEXT_INCDIR" || echo "$GETTEXT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_INCDIR
  else

    ep_dir=`echo $GETTEXT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GETTEXT_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  as_ac_Lib=`$as_echo "ac_cv_lib_$GETTEXT_CHECK_IN_LIB''_ngettext" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
$as_echo_n "checking for ngettext in -l$GETTEXT_CHECK_IN_LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char ngettext ();
int
main ()
{
return ngettext ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

$as_echo "#define HAVE_NGETTEXT 1" >>confdefs.h

fi

  as_ac_Lib=`$as_echo "ac_cv_lib_$GETTEXT_CHECK_IN_LIB''_dngettext" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
$as_echo_n "checking for dngettext in -l$GETTEXT_CHECK_IN_LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dngettext ();
int
main ()
{
return dngettext ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

$as_echo "#define HAVE_DNGETTEXT 1" >>confdefs.h

fi

  as_ac_Lib=`$as_echo "ac_cv_lib_$GETTEXT_CHECK_IN_LIB''_dcngettext" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
$as_echo_n "checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dcngettext ();
int
main ()
{
return dcngettext ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

$as_echo "#define HAVE_DCNGETTEXT 1" >>confdefs.h

fi

  as_ac_Lib=`$as_echo "ac_cv_lib_$GETTEXT_CHECK_IN_LIB''_bind_textdomain_codeset" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
$as_echo_n "checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char bind_textdomain_codeset ();
int
main ()
{
return bind_textdomain_codeset ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

$as_echo "#define HAVE_BIND_TEXTDOMAIN_CODESET 1" >>confdefs.h

fi


fi



php_with_gmp=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU MP support" >&5
$as_echo_n "checking for GNU MP support... " >&6; }

# Check whether --with-gmp was given.
if test "${with_gmp+set}" = set; then :
  withval=$with_gmp; PHP_GMP=$withval
else

  PHP_GMP=no
  test "$PHP_ENABLE_ALL" && PHP_GMP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GMP in
shared,*)
  PHP_GMP=`echo "$PHP_GMP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_GMP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_GMP" != "no"; then

  for i in $PHP_GMP /usr/local /usr; do
    test -f $i/include/gmp.h && GMP_DIR=$i && break
  done

  if test -z "$GMP_DIR"; then
    as_fn_error $? "Unable to locate gmp.h" "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$GMP_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __gmp_randinit_lc_2exp_size in -lgmp" >&5
$as_echo_n "checking for __gmp_randinit_lc_2exp_size in -lgmp... " >&6; }
if ${ac_cv_lib_gmp___gmp_randinit_lc_2exp_size+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgmp  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __gmp_randinit_lc_2exp_size ();
int
main ()
{
return __gmp_randinit_lc_2exp_size ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gmp___gmp_randinit_lc_2exp_size=yes
else
  ac_cv_lib_gmp___gmp_randinit_lc_2exp_size=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gmp___gmp_randinit_lc_2exp_size" >&5
$as_echo "$ac_cv_lib_gmp___gmp_randinit_lc_2exp_size" >&6; }
if test "x$ac_cv_lib_gmp___gmp_randinit_lc_2exp_size" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gmp___gmp_randinit_lc_2exp_size


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$GMP_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gmp_randinit_lc_2exp_size in -lgmp" >&5
$as_echo_n "checking for gmp_randinit_lc_2exp_size in -lgmp... " >&6; }
if ${ac_cv_lib_gmp_gmp_randinit_lc_2exp_size+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgmp  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char gmp_randinit_lc_2exp_size ();
int
main ()
{
return gmp_randinit_lc_2exp_size ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gmp_gmp_randinit_lc_2exp_size=yes
else
  ac_cv_lib_gmp_gmp_randinit_lc_2exp_size=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gmp_gmp_randinit_lc_2exp_size" >&5
$as_echo "$ac_cv_lib_gmp_gmp_randinit_lc_2exp_size" >&6; }
if test "x$ac_cv_lib_gmp_gmp_randinit_lc_2exp_size" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gmp_gmp_randinit_lc_2exp_size

      as_fn_error $? "GNU MP Library version 4.1.2 or greater required." "$LINENO" 5


fi



fi




  if test "$ext_shared" = "yes"; then
    GMP_SHARED_LIBADD="-lgmp $GMP_SHARED_LIBADD"
    if test -n "$GMP_DIR/$PHP_LIBDIR"; then

  if test "$GMP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GMP_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GMP_DIR/$PHP_LIBDIR" || echo "$GMP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GMP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GMP_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        GMP_SHARED_LIBADD="-L$ai_p $GMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && GMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $GMP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$GMP_DIR/$PHP_LIBDIR"; then

  if test "$GMP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$GMP_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$GMP_DIR/$PHP_LIBDIR" || echo "$GMP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $GMP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GMP_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case gmp in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lgmp $LIBS"
   ;;
  esac




  fi



  if test "$GMP_DIR/include" != "/usr/include"; then

  if test -z "$GMP_DIR/include" || echo "$GMP_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/include
  else

    ep_dir=`echo $GMP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$GMP_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  ext_builddir=ext/gmp
  ext_srcdir=$abs_srcdir/ext/gmp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_GMP_SHARED=no


  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gmp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gmp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_GMP_SHARED=yes

  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_gmp="$shared_objects_gmp $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpgmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(PHPGMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpgmp.so '$ext_builddir'/phpgmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) -L$(top_builddir)/netware -lphp5lib $(GMP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(PHPGMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpgmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpgmp.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpgmp.$suffix: $ext_builddir/phpgmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpgmp.$suffix \$(phplibdir)

$ext_builddir/phpgmp.$suffix: \$(shared_objects_gmp) \$(PHPGMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/gmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(GMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/gmp.so '$ext_builddir'/gmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_gmp) $(GMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/gmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/gmp.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gmp.$suffix: $ext_builddir/gmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/gmp.$suffix \$(phplibdir)

$ext_builddir/gmp.$suffix: \$(shared_objects_gmp) \$(GMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_GMP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_GMP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC gmp"
        ;;
      *)


  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC gmp"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=gmp

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST GMP_SHARED_LIBADD"


$as_echo "#define HAVE_GMP 1" >>confdefs.h

fi



php_with_mhash=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mhash support" >&5
$as_echo_n "checking for mhash support... " >&6; }

# Check whether --with-mhash was given.
if test "${with_mhash+set}" = set; then :
  withval=$with_mhash; PHP_MHASH=$withval
else

  PHP_MHASH=no
  test "$PHP_ENABLE_ALL" && PHP_MHASH=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MHASH in
shared,*)
  PHP_MHASH=`echo "$PHP_MHASH"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MHASH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_hash=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable hash support" >&5
$as_echo_n "checking whether to enable hash support... " >&6; }
# Check whether --enable-hash was given.
if test "${enable_hash+set}" = set; then :
  enableval=$enable_hash; PHP_HASH=$enableval
else

  PHP_HASH=yes
  test "$PHP_ENABLE_ALL" && PHP_HASH=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_HASH in
shared,*)
  PHP_HASH=`echo "$PHP_HASH"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_HASH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MHASH" != "no"; then
  if test "$PHP_HASH" = "no"; then
    PHP_HASH="yes"
  fi


$as_echo "#define PHP_MHASH_BC 1" >>confdefs.h

fi

if test "$PHP_HASH" != "no"; then

$as_echo "#define HAVE_HASH_EXT 1" >>confdefs.h


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
$as_echo_n "checking whether byte ordering is bigendian... " >&6; }
if ${ac_cv_c_bigendian_php+:} false; then :
  $as_echo_n "(cached) " >&6
else

  ac_cv_c_bigendian_php=unknown
  if test "$cross_compiling" = yes; then :
  ac_cv_c_bigendian_php=unknown
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int main(void)
{
  short one = 1;
  char *cp = (char *)&one;

  if (*cp == 0) {
    return(0);
  } else {
    return(1);
  }
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_c_bigendian_php=yes
else
  ac_cv_c_bigendian_php=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_bigendian_php" >&5
$as_echo "$ac_cv_c_bigendian_php" >&6; }
 if test $ac_cv_c_bigendian_php = yes; then

$as_echo "#define WORDS_BIGENDIAN /**/" >>confdefs.h

 fi


  # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of short" >&5
$as_echo_n "checking size of short... " >&6; }
if ${ac_cv_sizeof_short+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (short))" "ac_cv_sizeof_short"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_short" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (short)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_short=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_short" >&5
$as_echo "$ac_cv_sizeof_short" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
_ACEOF


  # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
$as_echo_n "checking size of int... " >&6; }
if ${ac_cv_sizeof_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_int" >&5
$as_echo "$ac_cv_sizeof_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_INT $ac_cv_sizeof_int
_ACEOF


  # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
$as_echo_n "checking size of long... " >&6; }
if ${ac_cv_sizeof_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long" >&5
$as_echo "$ac_cv_sizeof_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG $ac_cv_sizeof_long
_ACEOF


  # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long" >&5
$as_echo_n "checking size of long long... " >&6; }
if ${ac_cv_sizeof_long_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long))" "ac_cv_sizeof_long_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_long" >&5
$as_echo "$ac_cv_sizeof_long_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
_ACEOF



  EXT_HASH_SOURCES="hash.c hash_md.c hash_sha.c hash_ripemd.c hash_haval.c \
    hash_tiger.c hash_gost.c hash_snefru.c hash_whirlpool.c hash_adler32.c \
    hash_crc32.c hash_fnv.c hash_joaat.c"
  EXT_HASH_HEADERS="php_hash.h php_hash_md.h php_hash_sha.h php_hash_ripemd.h \
    php_hash_haval.h php_hash_tiger.h php_hash_gost.h php_hash_snefru.h \
    php_hash_whirlpool.h php_hash_adler32.h php_hash_crc32.h \
    php_hash_fnv.h php_hash_joaat.h php_hash_types.h"


  ext_builddir=ext/hash
  ext_srcdir=$abs_srcdir/ext/hash

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_HASH_SHARED=no


  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC hash"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC hash"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_HASH_SHARED=yes

  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_hash="$shared_objects_hash $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phphash.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(PHPHASH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phphash.so '$ext_builddir'/phphash.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) -L$(top_builddir)/netware -lphp5lib $(HASH_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(PHPHASH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phphash.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phphash.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_hash"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phphash.$suffix: $ext_builddir/phphash.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phphash.$suffix \$(phplibdir)

$ext_builddir/phphash.$suffix: \$(shared_objects_hash) \$(PHPHASH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/hash.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(HASH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/hash.so '$ext_builddir'/hash.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) -L$(top_builddir)/netware -lphp5lib $(H_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_hash) $(HASH_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/hash.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/hash.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_hash"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/hash.$suffix: $ext_builddir/hash.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/hash.$suffix \$(phplibdir)

$ext_builddir/hash.$suffix: \$(shared_objects_hash) \$(HASH_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_HASH 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_HASH_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC hash"
        ;;
      *)


  case ext/hash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hash/"; ac_bdir="ext/hash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $EXT_HASH_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC hash"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=hash

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi




    header_path=ext/hash
    for header_file in $EXT_HASH_HEADERS; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



fi



php_with_iconv=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for iconv support" >&5
$as_echo_n "checking for iconv support... " >&6; }

# Check whether --with-iconv was given.
if test "${with_iconv+set}" = set; then :
  withval=$with_iconv; PHP_ICONV=$withval
else

  PHP_ICONV=yes
  test "$PHP_ENABLE_ALL" && PHP_ICONV=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ICONV in
shared,*)
  PHP_ICONV=`echo "$PHP_ICONV"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ICONV=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_ICONV" != "no"; then


  found_iconv=no
  unset ICONV_DIR

  # Create the directories for a VPATH build:
  $php_shtool mkdir -p ext/iconv

  echo > ext/iconv/php_have_bsd_iconv.h
  echo > ext/iconv/php_have_ibm_iconv.h
  echo > ext/iconv/php_have_glibc_iconv.h
  echo > ext/iconv/php_have_libiconv.h
  echo > ext/iconv/php_have_iconv.h
  echo > ext/iconv/php_php_iconv_impl.h
  echo > ext/iconv/php_iconv_aliased_libiconv.h
  echo > ext/iconv/php_php_iconv_h_path.h
  echo > ext/iconv/php_iconv_supports_errno.h


  if test "$PHP_ICONV" = "yes"; then
            LIBS_save="$LIBS"
    LIBS=
    ac_fn_c_check_func "$LINENO" "iconv" "ac_cv_func_iconv"
if test "x$ac_cv_func_iconv" = xyes; then :

      found_iconv=yes

else

      ac_fn_c_check_func "$LINENO" "libiconv" "ac_cv_func_libiconv"
if test "x$ac_cv_func_libiconv" = xyes; then :


  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h


$as_echo "#define HAVE_LIBICONV 1" >>confdefs.h

        found_iconv=yes

fi


fi

    LIBS="$LIBS_save"
  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then

$as_echo "#define HAVE_GICONV_H 1" >>confdefs.h

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      as_fn_error $? "Please specify the install prefix of iconv with --with-iconv=<DIR>" "$LINENO" 5
    fi

    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$ICONV_DIR/$PHP_LIBDIR
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$iconv_lib_name''_libiconv" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for libiconv in -l$iconv_lib_name" >&5
$as_echo_n "checking for libiconv in -l$iconv_lib_name... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$iconv_lib_name  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char libiconv ();
int
main ()
{
return libiconv ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

        found_iconv=yes

  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h


$as_echo "#define HAVE_LIBICONV 1" >>confdefs.h


  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h


$as_echo "#define ICONV_ALIASED_LIBICONV 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_libiconv


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$ICONV_DIR/$PHP_LIBDIR
        "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$iconv_lib_name''_iconv" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for iconv in -l$iconv_lib_name" >&5
$as_echo_n "checking for iconv in -l$iconv_lib_name... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$iconv_lib_name  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char iconv ();
int
main ()
{
return iconv ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

          found_iconv=yes


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_iconv


fi



fi

    fi
  fi

  if test "$found_iconv" = "yes"; then

  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h


$as_echo "#define HAVE_ICONV 1" >>confdefs.h

    if test -n "$ICONV_DIR"; then


  if test "$ext_shared" = "yes"; then
    ICONV_SHARED_LIBADD="-l$iconv_lib_name $ICONV_SHARED_LIBADD"
    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then

  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ICONV_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        ICONV_SHARED_LIBADD="-L$ai_p $ICONV_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ICONV_SHARED_LIBADD="$ld_runpath_switch$ai_p $ICONV_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then

  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ICONV_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$iconv_lib_name $LIBS"
   ;;
  esac




  fi



  if test "$ICONV_DIR/include" != "/usr/include"; then

  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else

    ep_dir=`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ICONV_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    fi

    iconv_avail="yes";

else
    iconv_avail="no";

  fi


  if test "$iconv_avail" != "no"; then
    if test -z "$ICONV_DIR"; then
      for i in /usr/local /usr; do
        if test -f "$i/include/iconv.h" || test -f "$i/include/giconv.h"; then
          PHP_ICONV_PREFIX="$i"
          break
        fi
      done
      if test -z "$PHP_ICONV_PREFIX"; then
        PHP_ICONV_PREFIX="/usr"
      fi
    else
      PHP_ICONV_PREFIX="$ICONV_DIR"
    fi

    CFLAGS="-I$PHP_ICONV_PREFIX/include $CFLAGS"
    LDFLAGS="-L$PHP_ICONV_PREFIX/$PHP_LIBDIR $LDFLAGS"

    if test -r "$PHP_ICONV_PREFIX/include/giconv.h"; then
      PHP_ICONV_H_PATH="$PHP_ICONV_PREFIX/include/giconv.h"
    else
      PHP_ICONV_H_PATH="$PHP_ICONV_PREFIX/include/iconv.h"
    fi

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if iconv is glibc's" >&5
$as_echo_n "checking if iconv is glibc's... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <gnu/libc-version.h>
int
main ()
{
gnu_get_libc_version();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
      iconv_impl_name="glibc"

else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext

    if test -z "$iconv_impl_name"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking if using GNU libiconv" >&5
$as_echo_n "checking if using GNU libiconv... " >&6; }
      php_iconv_old_ld="$LDFLAGS"
      LDFLAGS="-liconv $LDFLAGS"
      if test "$cross_compiling" = yes; then :

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
        LDFLAGS="$php_iconv_old_ld"

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <$PHP_ICONV_H_PATH>
int main() {
	printf("%d", _libiconv_version);
	return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
        iconv_impl_name="gnu_libiconv"

else

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
        LDFLAGS="$php_iconv_old_ld"

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    fi

    if test -z "$iconv_impl_name"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking if iconv is Konstantin Chuguev's" >&5
$as_echo_n "checking if iconv is Konstantin Chuguev's... " >&6; }
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <iconv.h>
int
main ()
{
iconv_ccs_init(NULL, NULL);
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
        iconv_impl_name="bsd"

else

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
    fi

    if test -z "$iconv_impl_name"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking if using IBM iconv" >&5
$as_echo_n "checking if using IBM iconv... " >&6; }
      php_iconv_old_ld="$LDFLAGS"
      LDFLAGS="-liconv $LDFLAGS"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <iconv.h>
int
main ()
{
cstoccsid("");
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
        iconv_impl_name="ibm"

else

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
        LDFLAGS="$php_iconv_old_ld"

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
    fi

    echo > ext/iconv/php_have_bsd_iconv.h
    echo > ext/iconv/php_have_glibc_iconv.h
    echo > ext/iconv/php_have_libiconv.h
    echo > ext/iconv/php_have_ibm_iconv.h

    case "$iconv_impl_name" in
      gnu_libiconv )

  echo "#define PHP_ICONV_IMPL \"libiconv\"" > ext/iconv/php_php_iconv_impl.h


$as_echo "#define PHP_ICONV_IMPL \"libiconv\"" >>confdefs.h


  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h



  if test "$ext_shared" = "yes"; then
    ICONV_SHARED_LIBADD="-liconv $ICONV_SHARED_LIBADD"
    if test -n ""$PHP_ICONV_PREFIX/$PHP_LIBDIR""; then

  if test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/$PHP_LIBDIR" && test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/lib"; then

  if test -z ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" || echo ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" | grep '^/' >/dev/null ; then
    ai_p="$PHP_ICONV_PREFIX/$PHP_LIBDIR"
  else

    ep_dir=`echo "$PHP_ICONV_PREFIX/$PHP_LIBDIR"|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename ""$PHP_ICONV_PREFIX/$PHP_LIBDIR""`
  fi


      if test "$ext_shared" = "yes"; then
        ICONV_SHARED_LIBADD="-L$ai_p $ICONV_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ICONV_SHARED_LIBADD="$ld_runpath_switch$ai_p $ICONV_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n ""$PHP_ICONV_PREFIX/$PHP_LIBDIR""; then

  if test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/$PHP_LIBDIR" && test ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" != "/usr/lib"; then

  if test -z ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" || echo ""$PHP_ICONV_PREFIX/$PHP_LIBDIR"" | grep '^/' >/dev/null ; then
    ai_p="$PHP_ICONV_PREFIX/$PHP_LIBDIR"
  else

    ep_dir=`echo "$PHP_ICONV_PREFIX/$PHP_LIBDIR"|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename ""$PHP_ICONV_PREFIX/$PHP_LIBDIR""`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case iconv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-liconv $LIBS"
   ;;
  esac




  fi


        ;;

      bsd )

  echo "#define HAVE_BSD_ICONV 1" > ext/iconv/php_have_bsd_iconv.h


$as_echo "#define HAVE_BSD_ICONV 1" >>confdefs.h


  echo "#define PHP_ICONV_IMPL \"BSD iconv\"" > ext/iconv/php_php_iconv_impl.h


$as_echo "#define PHP_ICONV_IMPL \"BSD iconv\"" >>confdefs.h

        ;;

      glibc )

  echo "#define HAVE_GLIBC_ICONV 1" > ext/iconv/php_have_glibc_iconv.h


$as_echo "#define HAVE_GLIBC_ICONV 1" >>confdefs.h


  echo "#define PHP_ICONV_IMPL \"glibc\"" > ext/iconv/php_php_iconv_impl.h


$as_echo "#define PHP_ICONV_IMPL \"glibc\"" >>confdefs.h

        ;;
      ibm )

  echo "#define HAVE_IBM_ICONV 1" > ext/iconv/php_have_ibm_iconv.h


$as_echo "#define HAVE_IBM_ICONV 1" >>confdefs.h


  echo "#define PHP_ICONV_IMPL \"IBM iconv\"" > ext/iconv/php_php_iconv_impl.h


$as_echo "#define PHP_ICONV_IMPL \"IBM iconv\"" >>confdefs.h

        ;;
    esac

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if iconv supports errno" >&5
$as_echo_n "checking if iconv supports errno... " >&6; }
    if test "$cross_compiling" = yes; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

  echo "#define ICONV_SUPPORTS_ERRNO 0" > ext/iconv/php_iconv_supports_errno.h


$as_echo "#define ICONV_SUPPORTS_ERRNO 0" >>confdefs.h


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <$PHP_ICONV_H_PATH>
#include <errno.h>

int main() {
  iconv_t cd;
  cd = iconv_open( "*blahblah*", "*blahblah*" );
  if (cd == (iconv_t)(-1)) {
    if (errno == EINVAL) {
      return 0;
	} else {
      return 1;
    }
  }
  iconv_close( cd );
  return 2;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

  echo "#define ICONV_SUPPORTS_ERRNO 1" > ext/iconv/php_iconv_supports_errno.h


$as_echo "#define ICONV_SUPPORTS_ERRNO 1" >>confdefs.h


else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

  echo "#define ICONV_SUPPORTS_ERRNO 0" > ext/iconv/php_iconv_supports_errno.h


$as_echo "#define ICONV_SUPPORTS_ERRNO 0" >>confdefs.h


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if your cpp allows macro usage in include lines" >&5
$as_echo_n "checking if your cpp allows macro usage in include lines... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#define FOO <$PHP_ICONV_H_PATH>
#include FOO

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

  echo "#define PHP_ICONV_H_PATH <$PHP_ICONV_H_PATH>" > ext/iconv/php_php_iconv_h_path.h


cat >>confdefs.h <<_ACEOF
#define PHP_ICONV_H_PATH <$PHP_ICONV_H_PATH>
_ACEOF


else

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext


  ext_builddir=ext/iconv
  ext_srcdir=$abs_srcdir/ext/iconv

  ac_extra=`echo "-I\"$PHP_ICONV_PREFIX/include\""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ICONV_SHARED=no


  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC iconv"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC iconv"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ICONV_SHARED=yes

  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_iconv="$shared_objects_iconv $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpiconv.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(PHPICONV_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpiconv.so '$ext_builddir'/phpiconv.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) -L$(top_builddir)/netware -lphp5lib $(ICONV_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(PHPICONV_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpiconv.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpiconv.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_iconv"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpiconv.$suffix: $ext_builddir/phpiconv.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpiconv.$suffix \$(phplibdir)

$ext_builddir/phpiconv.$suffix: \$(shared_objects_iconv) \$(PHPICONV_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/iconv.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(ICONV_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/iconv.so '$ext_builddir'/iconv.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) -L$(top_builddir)/netware -lphp5lib $(NV_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_iconv) $(ICONV_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/iconv.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/iconv.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_iconv"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/iconv.$suffix: $ext_builddir/iconv.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/iconv.$suffix \$(phplibdir)

$ext_builddir/iconv.$suffix: \$(shared_objects_iconv) \$(ICONV_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_ICONV 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ICONV_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC iconv"
        ;;
      *)


  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC iconv"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=iconv

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST ICONV_SHARED_LIBADD"



    for header_file in ext/iconv/; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


  else
    as_fn_error $? "Please reinstall the iconv library." "$LINENO" 5
  fi
fi














php_with_imap=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for IMAP support" >&5
$as_echo_n "checking for IMAP support... " >&6; }

# Check whether --with-imap was given.
if test "${with_imap+set}" = set; then :
  withval=$with_imap; PHP_IMAP=$withval
else

  PHP_IMAP=no
  test "$PHP_ENABLE_ALL" && PHP_IMAP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IMAP in
shared,*)
  PHP_IMAP=`echo "$PHP_IMAP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_IMAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_kerberos=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for IMAP Kerberos support" >&5
$as_echo_n "checking for IMAP Kerberos support... " >&6; }

# Check whether --with-kerberos was given.
if test "${with_kerberos+set}" = set; then :
  withval=$with_kerberos; PHP_KERBEROS=$withval
else

  PHP_KERBEROS=no


fi


ext_output=$PHP_KERBEROS
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_imap_ssl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for IMAP SSL support" >&5
$as_echo_n "checking for IMAP SSL support... " >&6; }

# Check whether --with-imap-ssl was given.
if test "${with_imap_ssl+set}" = set; then :
  withval=$with_imap_ssl; PHP_IMAP_SSL=$withval
else

  PHP_IMAP_SSL=no


fi


ext_output=$PHP_IMAP_SSL
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





if test "$PHP_IMAP" != "no"; then

  PHP_VAR_SUBST="$PHP_VAR_SUBST IMAP_SHARED_LIBADD"


  ext_builddir=ext/imap
  ext_srcdir=$abs_srcdir/ext/imap

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_IMAP_SHARED=no


  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC imap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC imap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_IMAP_SHARED=yes

  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_imap="$shared_objects_imap $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpimap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(PHPIMAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpimap.so '$ext_builddir'/phpimap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) -L$(top_builddir)/netware -lphp5lib $(IMAP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(PHPIMAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpimap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpimap.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_imap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpimap.$suffix: $ext_builddir/phpimap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpimap.$suffix \$(phplibdir)

$ext_builddir/phpimap.$suffix: \$(shared_objects_imap) \$(PHPIMAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/imap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(IMAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/imap.so '$ext_builddir'/imap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) -L$(top_builddir)/netware -lphp5lib $(P_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_imap) $(IMAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/imap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/imap.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_imap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/imap.$suffix: $ext_builddir/imap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/imap.$suffix \$(phplibdir)

$ext_builddir/imap.$suffix: \$(shared_objects_imap) \$(IMAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_IMAP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_IMAP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC imap"
        ;;
      *)


  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC imap"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=imap

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


$as_echo "#define HAVE_IMAP 1" >>confdefs.h


    for i in $PHP_IMAP /usr/local /usr; do
      if test -r "$i/c-client.h"; then

$as_echo "#define HAVE_IMAP2000 1" >>confdefs.h

    IMAP_DIR=$i
    IMAP_INC_DIR=$i
    break
  elif test -r "$i/rfc822.h"; then
    IMAP_DIR=$i;
    IMAP_INC_DIR=$i
	break

      elif test -r "$i/include/c-client/c-client.h"; then

$as_echo "#define HAVE_IMAP2000 1" >>confdefs.h

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include/c-client
    break
  elif test -r "$i/include/c-client/rfc822.h"; then
    IMAP_DIR=$i;
    IMAP_INC_DIR=$i/include/c-client
	break

      elif test -r "$i/include/imap/c-client.h"; then

$as_echo "#define HAVE_IMAP2000 1" >>confdefs.h

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include/imap
    break
  elif test -r "$i/include/imap/rfc822.h"; then
    IMAP_DIR=$i;
    IMAP_INC_DIR=$i/include/imap
	break

      elif test -r "$i/include/c-client.h"; then

$as_echo "#define HAVE_IMAP2000 1" >>confdefs.h

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include
    break
  elif test -r "$i/include/rfc822.h"; then
    IMAP_DIR=$i;
    IMAP_INC_DIR=$i/include
	break

      elif test -r "$i/imap/c-client.h"; then

$as_echo "#define HAVE_IMAP2000 1" >>confdefs.h

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/imap
    break
  elif test -r "$i/imap/rfc822.h"; then
    IMAP_DIR=$i;
    IMAP_INC_DIR=$i/imap
	break

      elif test -r "$i/c-client/c-client.h"; then

$as_echo "#define HAVE_IMAP2000 1" >>confdefs.h

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/c-client
    break
  elif test -r "$i/c-client/rfc822.h"; then
    IMAP_DIR=$i;
    IMAP_INC_DIR=$i/c-client
	break

      fi
    done

        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <$IMAP_INC_DIR/mail.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "mail_fetch_overview_sequence" >/dev/null 2>&1; then :


$as_echo "#define HAVE_IMAP2004 1" >>confdefs.h


fi
rm -f conftest*


        old_CFLAGS=$CFLAGS
    CFLAGS="-I$IMAP_INC_DIR"
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for utf8_mime2text signature" >&5
$as_echo_n "checking for utf8_mime2text signature... " >&6; }
if ${ac_cv_utf8_mime2text+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <stdio.h>
#include <c-client.h>

int
main ()
{

        SIZEDTEXT *src, *dst;
        utf8_mime2text(src, dst);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

        ac_cv_utf8_mime2text=old

else

        ac_cv_utf8_mime2text=new

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_utf8_mime2text" >&5
$as_echo "$ac_cv_utf8_mime2text" >&6; }
    if test "$ac_cv_utf8_mime2text" = "new"; then

$as_echo "#define HAVE_NEW_MIME2TEXT 1" >>confdefs.h

    fi
    CFLAGS=$old_CFLAGS

    old_CFLAGS=$CFLAGS
    CFLAGS="-I$IMAP_INC_DIR"
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for U8T_DECOMPOSE" >&5
$as_echo_n "checking for U8T_DECOMPOSE... " >&6; }
if ${ac_cv_u8t_canonical+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <c-client.h>

int
main ()
{

         int i = U8T_CANONICAL;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

         ac_cv_u8t_decompose=yes

else

         ac_cv_u8t_decompose=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_u8t_canonical" >&5
$as_echo "$ac_cv_u8t_canonical" >&6; }
    CFLAGS=$old_CFLAGS

    if test "$ac_cv_u8t_decompose" = "no" && test "$ac_cv_utf8_mime2text" = "new"; then
		as_fn_error $? "utf8_mime2text() has new signature, but U8T_CANONICAL is missing. This should not happen. Check config.log for additional information." "$LINENO" 5
    fi
    if test "$ac_cv_u8t_decompose" = "yes" && test "$ac_cv_utf8_mime2text" = "old"; then
		as_fn_error $? "utf8_mime2text() has old signature, but U8T_CANONICAL is present. This should not happen. Check config.log for additional information." "$LINENO" 5
    fi

        old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$IMAP_INC_DIR
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "imap4r1.h"
#if defined(IMAPSSLPORT)
      this_is_true
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "this_is_true" >/dev/null 2>&1; then :


$as_echo "#define HAVE_IMAP2001 1" >>confdefs.h


fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pam_start in -lpam" >&5
$as_echo_n "checking for pam_start in -lpam... " >&6; }
if ${ac_cv_lib_pam_pam_start+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpam  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char pam_start ();
int
main ()
{
return pam_start ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pam_pam_start=yes
else
  ac_cv_lib_pam_pam_start=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pam_pam_start" >&5
$as_echo "$ac_cv_lib_pam_pam_start" >&6; }
if test "x$ac_cv_lib_pam_pam_start" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case pam in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lpam $IMAP_SHARED_LIBADD"
    else


  case pam in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpam $LIBS"
   ;;
  esac


    fi
   ;;
  esac



$as_echo "#define HAVE_LIBPAM 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_pam_pam_start


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for crypt in -lcrypt" >&5
$as_echo_n "checking for crypt in -lcrypt... " >&6; }
if ${ac_cv_lib_crypt_crypt+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char crypt ();
int
main ()
{
return crypt ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypt_crypt=yes
else
  ac_cv_lib_crypt_crypt=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypt_crypt" >&5
$as_echo "$ac_cv_lib_crypt_crypt" >&6; }
if test "x$ac_cv_lib_crypt_crypt" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case crypt in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lcrypt $IMAP_SHARED_LIBADD"
    else


  case crypt in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypt $LIBS"
   ;;
  esac


    fi
   ;;
  esac



$as_echo "#define HAVE_LIBCRYPT 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypt_crypt


fi



  if test -z "$IMAP_DIR" || echo "$IMAP_DIR" | grep '^/' >/dev/null ; then
    IMAP_DIR=$IMAP_DIR
  else

    ep_dir=`echo $IMAP_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    IMAP_DIR="$ep_realdir"/`basename "$IMAP_DIR"`
  fi


    if test -z "$IMAP_DIR"; then
      as_fn_error $? "Cannot find rfc822.h. Please check your c-client installation." "$LINENO" 5
    fi

    if test ! -r "$IMAP_DIR/c-client/libc-client.a" && test -r "$IMAP_DIR/c-client/c-client.a" ; then
      ln -s "$IMAP_DIR/c-client/c-client.a" "$IMAP_DIR/c-client/libc-client.a" >/dev/null 2>&1
    elif test ! -r "$IMAP_DIR/$PHP_LIBDIR/libc-client.a" && test -r "$IMAP_DIR/$PHP_LIBDIR/c-client.a"; then
      ln -s "$IMAP_DIR/$PHP_LIBDIR/c-client.a" "$IMAP_DIR/$PHP_LIBDIR/libc-client.a" >/dev/null 2>&1
    fi

    for lib in c-client4 c-client imap; do
      IMAP_LIB=$lib

  str="$IMAP_DIR/$PHP_LIBDIR/lib$lib.*"
  for i in `echo $str`; do
    test -r $i && IMAP_LIBDIR=$IMAP_DIR/$PHP_LIBDIR && break 2
  done


  str="$IMAP_DIR/c-client/lib$lib.*"
  for i in `echo $str`; do
    test -r $i && IMAP_LIBDIR=$IMAP_DIR/c-client && break 2
  done

    done

    if test -z "$IMAP_LIBDIR"; then
      as_fn_error $? "Cannot find imap library (libc-client.a). Please check your c-client installation." "$LINENO" 5
    fi


  if test "$IMAP_INC_DIR" != "/usr/include"; then

  if test -z "$IMAP_INC_DIR" || echo "$IMAP_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$IMAP_INC_DIR
  else

    ep_dir=`echo $IMAP_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$IMAP_INC_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  case $IMAP_LIB in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-l$IMAP_LIB $IMAP_SHARED_LIBADD"
    else


  case $IMAP_LIB in
  c|c_r|pthread*) ;;
  *)
      DLIBS="-l$IMAP_LIB $DLIBS"
   ;;
  esac


    fi
   ;;
  esac



  if test "$IMAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$IMAP_LIBDIR" != "/usr/lib"; then

  if test -z "$IMAP_LIBDIR" || echo "$IMAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IMAP_LIBDIR
  else

    ep_dir=`echo $IMAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$IMAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi


  if test "$PHP_KERBEROS" != "no"; then

  found_kerberos=no
  unset KERBEROS_CFLAGS
  unset KERBEROS_LIBS

    if test -z "$KRB5_CONFIG"; then
    # Extract the first word of "krb5-config", so it can be a program name with args.
set dummy krb5-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_KRB5_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $KRB5_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_KRB5_CONFIG="$KRB5_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_dummy="$PATH:/usr/kerberos/bin:/usr/local/bin"
for as_dir in $as_dummy
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_KRB5_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_KRB5_CONFIG" && ac_cv_path_KRB5_CONFIG="no"
  ;;
esac
fi
KRB5_CONFIG=$ac_cv_path_KRB5_CONFIG
if test -n "$KRB5_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $KRB5_CONFIG" >&5
$as_echo "$KRB5_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  fi

    if test "$PHP_KERBEROS" = "yes" && test -x "$KRB5_CONFIG"; then
    KERBEROS_LIBS=`$KRB5_CONFIG --libs gssapi`
    KERBEROS_CFLAGS=`$KRB5_CONFIG --cflags gssapi`

    if test -n "$KERBEROS_LIBS"; then
      found_kerberos=yes

  for ac_i in $KERBEROS_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $KERBEROS_CFLAGS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_kerberos" = "no"; then

    if test "$PHP_KERBEROS" = "yes"; then
      PHP_KERBEROS="/usr/kerberos /usr/local /usr"
    fi

    for i in $PHP_KERBEROS; do
      if test -f $i/$PHP_LIBDIR/libkrb5.a || test -f $i/$PHP_LIBDIR/libkrb5.$SHLIB_SUFFIX_NAME; then
        PHP_KERBEROS_DIR=$i
        break
      fi
    done

    if test "$PHP_KERBEROS_DIR"; then
      found_kerberos=yes

  if test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_KERBEROS_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_KERBEROS_DIR/$PHP_LIBDIR" || echo "$PHP_KERBEROS_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_KERBEROS_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_KERBEROS_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi



  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lgssapi_krb5"
    else


  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lgssapi_krb5"
   ;;
  esac


    fi
   ;;
  esac




  case krb5 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lkrb5"
    else


  case krb5 in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lkrb5"
   ;;
  esac


    fi
   ;;
  esac




  case k5crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lk5crypto"
    else


  case k5crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lk5crypto"
   ;;
  esac


    fi
   ;;
  esac




  case com_err in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lcom_err"
    else


  case com_err in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lcom_err"
   ;;
  esac


    fi
   ;;
  esac



  if test "$PHP_KERBEROS_DIR/include" != "/usr/include"; then

  if test -z "$PHP_KERBEROS_DIR/include" || echo "$PHP_KERBEROS_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/include
  else

    ep_dir=`echo $PHP_KERBEROS_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_KERBEROS_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    fi
  fi

  if test "$found_kerberos" = "yes"; then


$as_echo "#define HAVE_IMAP_KRB 1" >>confdefs.h


else
      as_fn_error $? "Kerberos libraries not found.

      Check the path given to --with-kerberos (if no path is given, searches in /usr/kerberos, /usr/local and /usr )
      " "$LINENO" 5

  fi

  else
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <$IMAP_INC_DIR/linkage.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "auth_gss" >/dev/null 2>&1; then :

      as_fn_error $? "This c-client library is built with Kerberos support.

      Add --with-kerberos to your configure line. Check config.log for details.
      " "$LINENO" 5

fi
rm -f conftest*

  fi


  if test "$PHP_IMAP_SSL" != "no"; then
    if test "$PHP_OPENSSL" = ""; then
      PHP_OPENSSL='no'
    fi

  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5
    fi

    if test -n "$OPENSSL_LIBS"; then

  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi
    if test -n "$OPENSSL_INCS"; then

  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then

    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      as_fn_error $? "Cannot find OpenSSL's <evp.h>" "$LINENO" 5
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      as_fn_error $? "Cannot find OpenSSL's libraries" "$LINENO" 5
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version" >&5
$as_echo_n "checking for OpenSSL version... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: >= 0.9.6" >&5
$as_echo ">= 0.9.6" >&6; }

else

      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5

fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS


  if test "$OPENSSL_INCDIR" != "/usr/include"; then

  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else

    ep_dir=`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRYPTO_free in -lcrypto" >&5
$as_echo_n "checking for CRYPTO_free in -lcrypto... " >&6; }
if ${ac_cv_lib_crypto_CRYPTO_free+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypto  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char CRYPTO_free ();
int
main ()
{
return CRYPTO_free ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypto_CRYPTO_free=yes
else
  ac_cv_lib_crypto_CRYPTO_free=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_CRYPTO_free" >&5
$as_echo "$ac_cv_lib_crypto_CRYPTO_free" >&6; }
if test "x$ac_cv_lib_crypto_CRYPTO_free" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lcrypto $IMAP_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free

      as_fn_error $? "libcrypto not found!" "$LINENO" 5


fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL_CTX_set_ssl_version in -lssl" >&5
$as_echo_n "checking for SSL_CTX_set_ssl_version in -lssl... " >&6; }
if ${ac_cv_lib_ssl_SSL_CTX_set_ssl_version+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lssl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char SSL_CTX_set_ssl_version ();
int
main ()
{
return SSL_CTX_set_ssl_version ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=yes
else
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&5
$as_echo "$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&6; }
if test "x$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      found_openssl=yes


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version

      as_fn_error $? "libssl not found!" "$LINENO" 5


fi

    LIBS=$old_LIBS


  case ssl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lssl $IMAP_SHARED_LIBADD"
    else


  case ssl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lssl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-lcrypto $IMAP_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then

  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else

    ep_dir=`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-L$ai_p $IMAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $IMAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR




$as_echo "#define HAVE_IMAP_SSL 1" >>confdefs.h


else
      as_fn_error $? "OpenSSL libraries not found.

      Check the path given to --with-openssl-dir and output in config.log)
      " "$LINENO" 5

  fi

  elif test -f "$IMAP_INC_DIR/linkage.c"; then
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <$IMAP_INC_DIR/linkage.c>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "ssl_onceonlyinit" >/dev/null 2>&1; then :

      as_fn_error $? "This c-client library is built with SSL support.

      Add --with-imap-ssl to your configure line. Check config.log for details.
      " "$LINENO" 5

fi
rm -f conftest*

  fi


        TST_LIBS="$DLIBS $IMAP_SHARED_LIBADD"



  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

    PHP_IMAP_EXPORT void mm_log(void){}
    PHP_IMAP_EXPORT void mm_dlog(void){}
    PHP_IMAP_EXPORT void mm_flags(void){}
    PHP_IMAP_EXPORT void mm_fatal(void){}
    PHP_IMAP_EXPORT void mm_critical(void){}
    PHP_IMAP_EXPORT void mm_nocritical(void){}
    PHP_IMAP_EXPORT void mm_notify(void){}
    PHP_IMAP_EXPORT void mm_login(void){}
    PHP_IMAP_EXPORT void mm_diskerror(void){}
    PHP_IMAP_EXPORT void mm_status(void){}
    PHP_IMAP_EXPORT void mm_lsub(void){}
    PHP_IMAP_EXPORT void mm_list(void){}
    PHP_IMAP_EXPORT void mm_exists(void){}
    PHP_IMAP_EXPORT void mm_searched(void){}
    PHP_IMAP_EXPORT void mm_expunged(void){}

    char auth_gssapi_valid();
    int main() {
      auth_gssapi_valid();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS


$as_echo "#define HAVE_IMAP_AUTH_GSS 1" >>confdefs.h



else

    LIBS=$old_LIBS


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi






  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

    PHP_IMAP_EXPORT void mm_log(void){}
    PHP_IMAP_EXPORT void mm_dlog(void){}
    PHP_IMAP_EXPORT void mm_flags(void){}
    PHP_IMAP_EXPORT void mm_fatal(void){}
    PHP_IMAP_EXPORT void mm_critical(void){}
    PHP_IMAP_EXPORT void mm_nocritical(void){}
    PHP_IMAP_EXPORT void mm_notify(void){}
    PHP_IMAP_EXPORT void mm_login(void){}
    PHP_IMAP_EXPORT void mm_diskerror(void){}
    PHP_IMAP_EXPORT void mm_status(void){}
    PHP_IMAP_EXPORT void mm_lsub(void){}
    PHP_IMAP_EXPORT void mm_list(void){}
    PHP_IMAP_EXPORT void mm_exists(void){}
    PHP_IMAP_EXPORT void mm_searched(void){}
    PHP_IMAP_EXPORT void mm_expunged(void){}

    char utf8_to_mutf7();
    int main() {
      utf8_to_mutf7();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS


$as_echo "#define HAVE_IMAP_MUTF7 1" >>confdefs.h



else

    LIBS=$old_LIBS


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi




    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether rfc822_output_address_list function present" >&5
$as_echo_n "checking whether rfc822_output_address_list function present... " >&6; }

  old_LIBS=$LIBS
  LIBS="
      $TST_LIBS
     $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

      PHP_IMAP_EXPORT void mm_log(void){}
      PHP_IMAP_EXPORT void mm_dlog(void){}
      PHP_IMAP_EXPORT void mm_flags(void){}
      PHP_IMAP_EXPORT void mm_fatal(void){}
      PHP_IMAP_EXPORT void mm_critical(void){}
      PHP_IMAP_EXPORT void mm_nocritical(void){}
      PHP_IMAP_EXPORT void mm_notify(void){}
      PHP_IMAP_EXPORT void mm_login(void){}
      PHP_IMAP_EXPORT void mm_diskerror(void){}
      PHP_IMAP_EXPORT void mm_status(void){}
      PHP_IMAP_EXPORT void mm_lsub(void){}
      PHP_IMAP_EXPORT void mm_list(void){}
      PHP_IMAP_EXPORT void mm_exists(void){}
      PHP_IMAP_EXPORT void mm_searched(void){}
      PHP_IMAP_EXPORT void mm_expunged(void){}
      void rfc822_output_address_list(void);
      void (*f)(void);
      char foobar () {f = rfc822_output_address_list;}

    char foobar();
    int main() {
      foobar();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_RFC822_OUTPUT_ADDRESS_LIST 1" >>confdefs.h



else

    LIBS=$old_LIBS

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build with IMAP works" >&5
$as_echo_n "checking whether build with IMAP works... " >&6; }


  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


#if defined(__GNUC__) && __GNUC__ >= 4
# define PHP_IMAP_EXPORT __attribute__ ((visibility("default")))
#else
# define PHP_IMAP_EXPORT
#endif

    PHP_IMAP_EXPORT void mm_log(void){}
    PHP_IMAP_EXPORT void mm_dlog(void){}
    PHP_IMAP_EXPORT void mm_flags(void){}
    PHP_IMAP_EXPORT void mm_fatal(void){}
    PHP_IMAP_EXPORT void mm_critical(void){}
    PHP_IMAP_EXPORT void mm_nocritical(void){}
    PHP_IMAP_EXPORT void mm_notify(void){}
    PHP_IMAP_EXPORT void mm_login(void){}
    PHP_IMAP_EXPORT void mm_diskerror(void){}
    PHP_IMAP_EXPORT void mm_status(void){}
    PHP_IMAP_EXPORT void mm_lsub(void){}
    PHP_IMAP_EXPORT void mm_list(void){}
    PHP_IMAP_EXPORT void mm_exists(void){}
    PHP_IMAP_EXPORT void mm_searched(void){}
    PHP_IMAP_EXPORT void mm_expunged(void){}

    char mail_newbody();
    int main() {
      mail_newbody();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }


else

    LIBS=$old_LIBS

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
      as_fn_error $? "build test failed. Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi


php_with_interbase=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for InterBase support" >&5
$as_echo_n "checking for InterBase support... " >&6; }

# Check whether --with-interbase was given.
if test "${with_interbase+set}" = set; then :
  withval=$with_interbase; PHP_INTERBASE=$withval
else

  PHP_INTERBASE=no
  test "$PHP_ENABLE_ALL" && PHP_INTERBASE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INTERBASE in
shared,*)
  PHP_INTERBASE=`echo "$PHP_INTERBASE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_INTERBASE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_INTERBASE" != "no"; then
  if test "$PHP_INTERBASE" = "yes"; then
    IBASE_INCDIR=/usr/interbase/include
    IBASE_LIBDIR=/usr/interbase/lib
  else
    IBASE_INCDIR=$PHP_INTERBASE/include
    IBASE_LIBDIR=$PHP_INTERBASE/$PHP_LIBDIR
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$IBASE_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isc_detach_database in -lfbclient" >&5
$as_echo_n "checking for isc_detach_database in -lfbclient... " >&6; }
if ${ac_cv_lib_fbclient_isc_detach_database+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lfbclient  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char isc_detach_database ();
int
main ()
{
return isc_detach_database ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_fbclient_isc_detach_database=yes
else
  ac_cv_lib_fbclient_isc_detach_database=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_fbclient_isc_detach_database" >&5
$as_echo "$ac_cv_lib_fbclient_isc_detach_database" >&6; }
if test "x$ac_cv_lib_fbclient_isc_detach_database" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

    IBASE_LIBNAME=fbclient


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_fbclient_isc_detach_database


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$IBASE_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isc_detach_database in -lgds" >&5
$as_echo_n "checking for isc_detach_database in -lgds... " >&6; }
if ${ac_cv_lib_gds_isc_detach_database+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgds  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char isc_detach_database ();
int
main ()
{
return isc_detach_database ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gds_isc_detach_database=yes
else
  ac_cv_lib_gds_isc_detach_database=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gds_isc_detach_database" >&5
$as_echo "$ac_cv_lib_gds_isc_detach_database" >&6; }
if test "x$ac_cv_lib_gds_isc_detach_database" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      IBASE_LIBNAME=gds


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gds_isc_detach_database


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$IBASE_LIBDIR
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isc_detach_database in -lib_util" >&5
$as_echo_n "checking for isc_detach_database in -lib_util... " >&6; }
if ${ac_cv_lib_ib_util_isc_detach_database+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lib_util  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char isc_detach_database ();
int
main ()
{
return isc_detach_database ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ib_util_isc_detach_database=yes
else
  ac_cv_lib_ib_util_isc_detach_database=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ib_util_isc_detach_database" >&5
$as_echo "$ac_cv_lib_ib_util_isc_detach_database" >&6; }
if test "x$ac_cv_lib_ib_util_isc_detach_database" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

        IBASE_LIBNAME=ib_util


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ib_util_isc_detach_database

        as_fn_error $? "libgds, libib_util or libfbclient not found! Check config.log for more information." "$LINENO" 5


fi



fi



fi




  if test "$ext_shared" = "yes"; then
    INTERBASE_SHARED_LIBADD="-l$IBASE_LIBNAME $INTERBASE_SHARED_LIBADD"
    if test -n "$IBASE_LIBDIR"; then

  if test "$IBASE_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$IBASE_LIBDIR" != "/usr/lib"; then

  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_LIBDIR
  else

    ep_dir=`echo $IBASE_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$IBASE_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        INTERBASE_SHARED_LIBADD="-L$ai_p $INTERBASE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && INTERBASE_SHARED_LIBADD="$ld_runpath_switch$ai_p $INTERBASE_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$IBASE_LIBDIR"; then

  if test "$IBASE_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$IBASE_LIBDIR" != "/usr/lib"; then

  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_LIBDIR
  else

    ep_dir=`echo $IBASE_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$IBASE_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $IBASE_LIBNAME in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$IBASE_LIBNAME $LIBS"
   ;;
  esac




  fi



  if test "$IBASE_INCDIR" != "/usr/include"; then

  if test -z "$IBASE_INCDIR" || echo "$IBASE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_INCDIR
  else

    ep_dir=`echo $IBASE_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$IBASE_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


$as_echo "#define HAVE_IBASE 1" >>confdefs.h


  ext_builddir=ext/interbase
  ext_srcdir=$abs_srcdir/ext/interbase

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_INTERBASE_SHARED=no


  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC interbase"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC interbase"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_INTERBASE_SHARED=yes

  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_interbase="$shared_objects_interbase $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpinterbase.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(PHPINTERBASE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpinterbase.so '$ext_builddir'/phpinterbase.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) -L$(top_builddir)/netware -lphp5lib $(INTERBASE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(PHPINTERBASE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpinterbase.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpinterbase.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_interbase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpinterbase.$suffix: $ext_builddir/phpinterbase.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpinterbase.$suffix \$(phplibdir)

$ext_builddir/phpinterbase.$suffix: \$(shared_objects_interbase) \$(PHPINTERBASE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/interbase.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(INTERBASE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/interbase.so '$ext_builddir'/interbase.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) -L$(top_builddir)/netware -lphp5lib $(ERBASE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_interbase) $(INTERBASE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/interbase.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/interbase.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_interbase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/interbase.$suffix: $ext_builddir/interbase.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/interbase.$suffix \$(phplibdir)

$ext_builddir/interbase.$suffix: \$(shared_objects_interbase) \$(INTERBASE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_INTERBASE 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_INTERBASE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC interbase"
        ;;
      *)


  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c ibase_query.c ibase_service.c ibase_events.c ibase_blobs.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC interbase"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=interbase

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST INTERBASE_SHARED_LIBADD"

fi



php_enable_intl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable internationalization support" >&5
$as_echo_n "checking whether to enable internationalization support... " >&6; }
# Check whether --enable-intl was given.
if test "${enable_intl+set}" = set; then :
  enableval=$enable_intl; PHP_INTL=$enableval
else

  PHP_INTL=no
  test "$PHP_ENABLE_ALL" && PHP_INTL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INTL in
shared,*)
  PHP_INTL=`echo "$PHP_INTL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_INTL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_INTL" != "no"; then


php_with_icu_dir=DEFAULT



# Check whether --with-icu-dir was given.
if test "${with_icu_dir+set}" = set; then :
  withval=$with_icu_dir; PHP_ICU_DIR=$withval
else

  PHP_ICU_DIR=DEFAULT


fi


ext_output=$PHP_ICU_DIR





  if test "$PHP_ICU_DIR" = "no"; then
    PHP_ICU_DIR=DEFAULT
  fi

  if test "$PHP_ICU_DIR" = "DEFAULT"; then
        # Extract the first word of "icu-config", so it can be a program name with args.
set dummy icu-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_ICU_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $ICU_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_ICU_CONFIG="$ICU_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_dummy="$PATH:/usr/local/bin"
for as_dir in $as_dummy
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_ICU_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_ICU_CONFIG" && ac_cv_path_ICU_CONFIG="no"
  ;;
esac
fi
ICU_CONFIG=$ac_cv_path_ICU_CONFIG
if test -n "$ICU_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ICU_CONFIG" >&5
$as_echo "$ICU_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  else
    ICU_CONFIG="$PHP_ICU_DIR/bin/icu-config"
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for location of ICU headers and libraries" >&5
$as_echo_n "checking for location of ICU headers and libraries... " >&6; }

    icu_install_prefix=`$ICU_CONFIG --prefix 2> /dev/null`
  if test "$?" != "0" || test -z "$icu_install_prefix"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    as_fn_error $? "Unable to detect ICU prefix or $ICU_CONFIG failed. Please verify ICU install prefix and make sure icu-config works." "$LINENO" 5
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $icu_install_prefix" >&5
$as_echo "$icu_install_prefix" >&6; }

        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ICU 4.0 or greater" >&5
$as_echo_n "checking for ICU 4.0 or greater... " >&6; }
    icu_version_full=`$ICU_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $icu_version_full
    IFS=$ac_IFS
    icu_version=`expr $1 \* 1000 + $2`
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: found $icu_version_full" >&5
$as_echo "found $icu_version_full" >&6; }

    if test "$icu_version" -lt "4000"; then
      as_fn_error $? "ICU version 4.0 or later is required" "$LINENO" 5
    fi

    ICU_VERSION=$icu_version
    ICU_INCS=`$ICU_CONFIG --cppflags-searchpath`
    ICU_LIBS=`$ICU_CONFIG --ldflags --ldflags-icuio`

  for ac_i in $ICU_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  for ac_i in $ICU_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        INTL_SHARED_LIBADD="$INTL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        INTL_SHARED_LIBADD="$INTL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        INTL_SHARED_LIBADD="-L$ai_p $INTL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && INTL_SHARED_LIBADD="$ld_runpath_switch$ai_p $INTL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST INTL_SHARED_LIBADD"


  if test -z "$php_cxx_done"; then
    ac_ext=cpp
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
if test -z "$CXX"; then
  if test -n "$CCC"; then
    CXX=$CCC
  else
    if test -n "$ac_tool_prefix"; then
  for ac_prog in g++ c++ gpp aCC CC cxx cc++ cl.exe FCC KCC RCC xlC_r xlC
  do
    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
set dummy $ac_tool_prefix$ac_prog; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_CXX+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_CXX="$ac_tool_prefix$ac_prog"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
CXX=$ac_cv_prog_CXX
if test -n "$CXX"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CXX" >&5
$as_echo "$CXX" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


    test -n "$CXX" && break
  done
fi
if test -z "$CXX"; then
  ac_ct_CXX=$CXX
  for ac_prog in g++ c++ gpp aCC CC cxx cc++ cl.exe FCC KCC RCC xlC_r xlC
do
  # Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_CXX+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_CXX"; then
  ac_cv_prog_ac_ct_CXX="$ac_ct_CXX" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_CXX="$ac_prog"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_CXX=$ac_cv_prog_ac_ct_CXX
if test -n "$ac_ct_CXX"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CXX" >&5
$as_echo "$ac_ct_CXX" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  test -n "$ac_ct_CXX" && break
done

  if test "x$ac_ct_CXX" = x; then
    CXX="g++"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    CXX=$ac_ct_CXX
  fi
fi

  fi
fi
# Provide some information about the compiler.
$as_echo "$as_me:${as_lineno-$LINENO}: checking for C++ compiler version" >&5
set X $ac_compile
ac_compiler=$2
for ac_option in --version -v -V -qversion; do
  { { ac_try="$ac_compiler $ac_option >&5"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    sed '10a\
... rest of stderr output deleted ...
         10q' conftest.err >conftest.er1
    cat conftest.er1 >&5
  fi
  rm -f conftest.er1 conftest.err
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }
done

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C++ compiler" >&5
$as_echo_n "checking whether we are using the GNU C++ compiler... " >&6; }
if ${ac_cv_cxx_compiler_gnu+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{
#ifndef __GNUC__
       choke me
#endif

  ;
  return 0;
}
_ACEOF
if ac_fn_cxx_try_compile "$LINENO"; then :
  ac_compiler_gnu=yes
else
  ac_compiler_gnu=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
ac_cv_cxx_compiler_gnu=$ac_compiler_gnu

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_cxx_compiler_gnu" >&5
$as_echo "$ac_cv_cxx_compiler_gnu" >&6; }
if test $ac_compiler_gnu = yes; then
  GXX=yes
else
  GXX=
fi
ac_test_CXXFLAGS=${CXXFLAGS+set}
ac_save_CXXFLAGS=$CXXFLAGS
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CXX accepts -g" >&5
$as_echo_n "checking whether $CXX accepts -g... " >&6; }
if ${ac_cv_prog_cxx_g+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_save_cxx_werror_flag=$ac_cxx_werror_flag
   ac_cxx_werror_flag=yes
   ac_cv_prog_cxx_g=no
   CXXFLAGS="-g"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_cxx_try_compile "$LINENO"; then :
  ac_cv_prog_cxx_g=yes
else
  CXXFLAGS=""
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_cxx_try_compile "$LINENO"; then :

else
  ac_cxx_werror_flag=$ac_save_cxx_werror_flag
	 CXXFLAGS="-g"
	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_cxx_try_compile "$LINENO"; then :
  ac_cv_prog_cxx_g=yes
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
   ac_cxx_werror_flag=$ac_save_cxx_werror_flag
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_g" >&5
$as_echo "$ac_cv_prog_cxx_g" >&6; }
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS=$ac_save_CXXFLAGS
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi
ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

    ac_ext=cpp
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C++ preprocessor" >&5
$as_echo_n "checking how to run the C++ preprocessor... " >&6; }
if test -z "$CXXCPP"; then
  if ${ac_cv_prog_CXXCPP+:} false; then :
  $as_echo_n "(cached) " >&6
else
      # Double quotes because CXXCPP needs to be expanded
    for CXXCPP in "$CXX -E" "/lib/cpp"
    do
      ac_preproc_ok=false
for ac_cxx_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :
  break
fi

    done
    ac_cv_prog_CXXCPP=$CXXCPP

fi
  CXXCPP=$ac_cv_prog_CXXCPP
else
  ac_cv_prog_CXXCPP=$CXXCPP
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CXXCPP" >&5
$as_echo "$CXXCPP" >&6; }
ac_preproc_ok=false
for ac_cxx_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :

else
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "C++ preprocessor \"$CXXCPP\" fails sanity check
See \`config.log' for more details" "$LINENO" 5; }
fi

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu



  case stdc++ in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lstdc++ $LIBS"
   ;;
  esac


    php_cxx_done=yes
  fi

  if test "$icu_version" -ge "4002"; then
    icu_spoof_src=" spoofchecker/spoofchecker_class.c \
    spoofchecker/spoofchecker.c\
    spoofchecker/spoofchecker_create.c\
    spoofchecker/spoofchecker_main.c"
  else
    icu_spoof_src=""
  fi

  ext_builddir=ext/intl
  ext_srcdir=$abs_srcdir/ext/intl

  ac_extra=`echo "$ICU_INCS -Wno-write-strings"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_INTL_SHARED=no


  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
	intl_convertcpp.cpp \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
	common/common_enum.cpp \
	common/common_date.cpp \
    converter/converter.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_format_object.cpp \
    dateformat/dateformat_parse.c \
    dateformat/dateformat_create.cpp \
    dateformat/dateformat_attrcpp.cpp \
    dateformat/dateformat_helpers.cpp \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    transliterator/transliterator.c \
    transliterator/transliterator_class.c \
    transliterator/transliterator_methods.c \
    timezone/timezone_class.cpp \
    timezone/timezone_methods.cpp \
    calendar/calendar_class.cpp \
    calendar/calendar_methods.cpp \
    calendar/gregoriancalendar_methods.cpp \
    breakiterator/breakiterator_class.cpp \
    breakiterator/breakiterator_iterators.cpp \
    breakiterator/breakiterator_methods.cpp \
    breakiterator/rulebasedbreakiterator_methods.cpp \
    breakiterator/codepointiterator_internal.cpp \
    breakiterator/codepointiterator_methods.cpp \
    idn/idn.c \
    $icu_spoof_src; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC intl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC intl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_INTL_SHARED=yes

  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
	intl_convertcpp.cpp \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
	common/common_enum.cpp \
	common/common_date.cpp \
    converter/converter.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_format_object.cpp \
    dateformat/dateformat_parse.c \
    dateformat/dateformat_create.cpp \
    dateformat/dateformat_attrcpp.cpp \
    dateformat/dateformat_helpers.cpp \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    transliterator/transliterator.c \
    transliterator/transliterator_class.c \
    transliterator/transliterator_methods.c \
    timezone/timezone_class.cpp \
    timezone/timezone_methods.cpp \
    calendar/calendar_class.cpp \
    calendar/calendar_methods.cpp \
    calendar/gregoriancalendar_methods.cpp \
    breakiterator/breakiterator_class.cpp \
    breakiterator/breakiterator_iterators.cpp \
    breakiterator/breakiterator_methods.cpp \
    breakiterator/rulebasedbreakiterator_methods.cpp \
    breakiterator/codepointiterator_internal.cpp \
    breakiterator/codepointiterator_methods.cpp \
    idn/idn.c \
    $icu_spoof_src; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_intl="$shared_objects_intl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpintl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(PHPINTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpintl.so '$ext_builddir'/phpintl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) -L$(top_builddir)/netware -lphp5lib $(INTL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(PHPINTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpintl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpintl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_intl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpintl.$suffix: $ext_builddir/phpintl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpintl.$suffix \$(phplibdir)

$ext_builddir/phpintl.$suffix: \$(shared_objects_intl) \$(PHPINTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/intl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(INTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/intl.so '$ext_builddir'/intl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) -L$(top_builddir)/netware -lphp5lib $(L_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_intl) $(INTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/intl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/intl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_intl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/intl.$suffix: $ext_builddir/intl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/intl.$suffix \$(phplibdir)

$ext_builddir/intl.$suffix: \$(shared_objects_intl) \$(INTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_INTL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_INTL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
	intl_convertcpp.cpp \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
	common/common_enum.cpp \
	common/common_date.cpp \
    converter/converter.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_format_object.cpp \
    dateformat/dateformat_parse.c \
    dateformat/dateformat_create.cpp \
    dateformat/dateformat_attrcpp.cpp \
    dateformat/dateformat_helpers.cpp \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    transliterator/transliterator.c \
    transliterator/transliterator_class.c \
    transliterator/transliterator_methods.c \
    timezone/timezone_class.cpp \
    timezone/timezone_methods.cpp \
    calendar/calendar_class.cpp \
    calendar/calendar_methods.cpp \
    calendar/gregoriancalendar_methods.cpp \
    breakiterator/breakiterator_class.cpp \
    breakiterator/breakiterator_iterators.cpp \
    breakiterator/breakiterator_methods.cpp \
    breakiterator/rulebasedbreakiterator_methods.cpp \
    breakiterator/codepointiterator_internal.cpp \
    breakiterator/codepointiterator_methods.cpp \
    idn/idn.c \
    $icu_spoof_src; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC intl"
        ;;
      *)


  case ext/intl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/intl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/intl/"; ac_bdir="ext/intl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_intl.c \
    intl_error.c \
    intl_convert.c \
	intl_convertcpp.cpp \
    collator/collator.c \
    collator/collator_class.c \
    collator/collator_sort.c \
    collator/collator_convert.c \
    collator/collator_locale.c \
    collator/collator_compare.c \
    collator/collator_attr.c \
    collator/collator_create.c \
    collator/collator_is_numeric.c \
    collator/collator_error.c \
    common/common_error.c \
	common/common_enum.cpp \
	common/common_date.cpp \
    converter/converter.c \
    formatter/formatter.c \
    formatter/formatter_main.c \
    formatter/formatter_class.c \
    formatter/formatter_attr.c \
    formatter/formatter_data.c \
    formatter/formatter_format.c \
    formatter/formatter_parse.c \
    normalizer/normalizer.c \
    normalizer/normalizer_class.c \
    normalizer/normalizer_normalize.c \
    locale/locale.c \
    locale/locale_class.c \
    locale/locale_methods.c \
    dateformat/dateformat.c \
    dateformat/dateformat_class.c \
    dateformat/dateformat_attr.c \
    dateformat/dateformat_data.c \
    dateformat/dateformat_format.c \
    dateformat/dateformat_format_object.cpp \
    dateformat/dateformat_parse.c \
    dateformat/dateformat_create.cpp \
    dateformat/dateformat_attrcpp.cpp \
    dateformat/dateformat_helpers.cpp \
    msgformat/msgformat.c \
    msgformat/msgformat_attr.c \
    msgformat/msgformat_class.c \
    msgformat/msgformat_data.c  \
    msgformat/msgformat_format.c \
    msgformat/msgformat_helpers.cpp \
    msgformat/msgformat_parse.c \
    grapheme/grapheme_string.c \
    grapheme/grapheme_util.c \
    resourcebundle/resourcebundle.c \
    resourcebundle/resourcebundle_class.c \
    resourcebundle/resourcebundle_iterator.c \
    transliterator/transliterator.c \
    transliterator/transliterator_class.c \
    transliterator/transliterator_methods.c \
    timezone/timezone_class.cpp \
    timezone/timezone_methods.cpp \
    calendar/calendar_class.cpp \
    calendar/calendar_methods.cpp \
    calendar/gregoriancalendar_methods.cpp \
    breakiterator/breakiterator_class.cpp \
    breakiterator/breakiterator_iterators.cpp \
    breakiterator/breakiterator_methods.cpp \
    breakiterator/rulebasedbreakiterator_methods.cpp \
    breakiterator/codepointiterator_internal.cpp \
    breakiterator/codepointiterator_methods.cpp \
    idn/idn.c \
    $icu_spoof_src; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC intl"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=intl

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/collator"




    BUILD_DIR="$BUILD_DIR $ext_builddir/converter"




    BUILD_DIR="$BUILD_DIR $ext_builddir/common"




    BUILD_DIR="$BUILD_DIR $ext_builddir/formatter"




    BUILD_DIR="$BUILD_DIR $ext_builddir/normalizer"




    BUILD_DIR="$BUILD_DIR $ext_builddir/dateformat"




    BUILD_DIR="$BUILD_DIR $ext_builddir/locale"




    BUILD_DIR="$BUILD_DIR $ext_builddir/msgformat"




    BUILD_DIR="$BUILD_DIR $ext_builddir/grapheme"




    BUILD_DIR="$BUILD_DIR $ext_builddir/resourcebundle"




    BUILD_DIR="$BUILD_DIR $ext_builddir/transliterator"




    BUILD_DIR="$BUILD_DIR $ext_builddir/timezone"




    BUILD_DIR="$BUILD_DIR $ext_builddir/calendar"




    BUILD_DIR="$BUILD_DIR $ext_builddir/idn"




    BUILD_DIR="$BUILD_DIR $ext_builddir/spoofchecker"




    BUILD_DIR="$BUILD_DIR $ext_builddir/breakiterator"


fi



php_enable_json=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable JavaScript Object Serialization support" >&5
$as_echo_n "checking whether to enable JavaScript Object Serialization support... " >&6; }
# Check whether --enable-json was given.
if test "${enable_json+set}" = set; then :
  enableval=$enable_json; PHP_JSON=$enableval
else

  PHP_JSON=yes
  test "$PHP_ENABLE_ALL" && PHP_JSON=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_JSON in
shared,*)
  PHP_JSON=`echo "$PHP_JSON"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_JSON=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_JSON" != "no"; then

$as_echo "#define HAVE_JSON 1 " >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
$as_echo_n "checking for ANSI C header files... " >&6; }
if ${ac_cv_header_stdc+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_header_stdc=yes
else
  ac_cv_header_stdc=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <string.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "memchr" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "free" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
  if test "$cross_compiling" = yes; then :
  :
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ctype.h>
#include <stdlib.h>
#if ((' ' & 0x0FF) == 0x020)
# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#else
# define ISLOWER(c) \
		   (('a' <= (c) && (c) <= 'i') \
		     || ('j' <= (c) && (c) <= 'r') \
		     || ('s' <= (c) && (c) <= 'z'))
# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
#endif

#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int
main ()
{
  int i;
  for (i = 0; i < 256; i++)
    if (XOR (islower (i), ISLOWER (i))
	|| toupper (i) != TOUPPER (i))
      return 2;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

else
  ac_cv_header_stdc=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
$as_echo "$ac_cv_header_stdc" >&6; }
if test $ac_cv_header_stdc = yes; then

$as_echo "#define STDC_HEADERS 1" >>confdefs.h

fi



  ext_builddir=ext/json
  ext_srcdir=$abs_srcdir/ext/json

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_JSON_SHARED=no


  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_decode.c JSON_parser.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC json"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC json"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_JSON_SHARED=yes

  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_decode.c JSON_parser.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_json="$shared_objects_json $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpjson.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(PHPJSON_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpjson.so '$ext_builddir'/phpjson.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) -L$(top_builddir)/netware -lphp5lib $(JSON_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(PHPJSON_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpjson.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpjson.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_json"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpjson.$suffix: $ext_builddir/phpjson.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpjson.$suffix \$(phplibdir)

$ext_builddir/phpjson.$suffix: \$(shared_objects_json) \$(PHPJSON_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/json.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(JSON_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/json.so '$ext_builddir'/json.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) -L$(top_builddir)/netware -lphp5lib $(N_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_json) $(JSON_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/json.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/json.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_json"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/json.$suffix: $ext_builddir/json.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/json.$suffix \$(phplibdir)

$ext_builddir/json.$suffix: \$(shared_objects_json) \$(JSON_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_JSON 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_JSON_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_decode.c JSON_parser.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC json"
        ;;
      *)


  case ext/json in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/json"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/json/"; ac_bdir="ext/json/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in json.c utf8_decode.c JSON_parser.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC json"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=json

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    header_path=ext/json
    for header_file in php_json.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



  PHP_VAR_SUBST="$PHP_VAR_SUBST JSON_SHARED_LIBADD"

fi







php_with_ldap=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for LDAP support" >&5
$as_echo_n "checking for LDAP support... " >&6; }

# Check whether --with-ldap was given.
if test "${with_ldap+set}" = set; then :
  withval=$with_ldap; PHP_LDAP=$withval
else

  PHP_LDAP=no
  test "$PHP_ENABLE_ALL" && PHP_LDAP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LDAP in
shared,*)
  PHP_LDAP=`echo "$PHP_LDAP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LDAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_ldap_sasl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for LDAP Cyrus SASL support" >&5
$as_echo_n "checking for LDAP Cyrus SASL support... " >&6; }

# Check whether --with-ldap-sasl was given.
if test "${with_ldap_sasl+set}" = set; then :
  withval=$with_ldap_sasl; PHP_LDAP_SASL=$withval
else

  PHP_LDAP_SASL=no


fi


ext_output=$PHP_LDAP_SASL
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_LDAP" != "no"; then


  ext_builddir=ext/ldap
  ext_srcdir=$abs_srcdir/ext/ldap

  ac_extra=`echo "-DLDAP_DEPRECATED=1"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_LDAP_SHARED=no


  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ldap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ldap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_LDAP_SHARED=yes

  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_ldap="$shared_objects_ldap $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpldap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(PHPLDAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpldap.so '$ext_builddir'/phpldap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) -L$(top_builddir)/netware -lphp5lib $(LDAP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(PHPLDAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpldap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpldap.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ldap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpldap.$suffix: $ext_builddir/phpldap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpldap.$suffix \$(phplibdir)

$ext_builddir/phpldap.$suffix: \$(shared_objects_ldap) \$(PHPLDAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ldap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(LDAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ldap.so '$ext_builddir'/ldap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) -L$(top_builddir)/netware -lphp5lib $(P_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ldap) $(LDAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ldap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ldap.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ldap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ldap.$suffix: $ext_builddir/ldap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/ldap.$suffix \$(phplibdir)

$ext_builddir/ldap.$suffix: \$(shared_objects_ldap) \$(LDAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_LDAP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_LDAP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC ldap"
        ;;
      *)


  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC ldap"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=ldap

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  if test "$PHP_LDAP" = "yes"; then
    for i in /usr/local /usr; do

  if test -f $i/include/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/include
    LDAP_LIBDIR=$i/$PHP_LIBDIR
  elif test -f $i/include/umich-ldap/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/include/umich-ldap
    LDAP_LIBDIR=$i/$PHP_LIBDIR
  elif test -f $i/ldap/public/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/ldap/public
    LDAP_LIBDIR=$i/$PHP_LIBDIR
  else

        # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long int" >&5
$as_echo_n "checking size of long int... " >&6; }
if ${ac_cv_sizeof_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long int))" "ac_cv_sizeof_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_int" >&5
$as_echo "$ac_cv_sizeof_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
_ACEOF


    if test "$ac_cv_sizeof_long_int" = "4"; then
      PHP_OCI8_IC_LIBDIR_SUFFIX=""
    else
      PHP_OCI8_IC_LIBDIR_SUFFIX=64
    fi
    OCISDKRPMINC=`echo "$i" | $SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`

        if test -f $OCISDKRPMINC/ldap.h; then
      LDAP_DIR=$i
      LDAP_INCDIR=$OCISDKRPMINC
      LDAP_LIBDIR=$i
        elif test -f $i/sdk/include/ldap.h; then
      LDAP_DIR=$i
      LDAP_INCDIR=$i/sdk/include
      LDAP_LIBDIR=$i
    fi
  fi

    done
  else

  if test -f $PHP_LDAP/include/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/include
    LDAP_LIBDIR=$PHP_LDAP/$PHP_LIBDIR
  elif test -f $PHP_LDAP/include/umich-ldap/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/include/umich-ldap
    LDAP_LIBDIR=$PHP_LDAP/$PHP_LIBDIR
  elif test -f $PHP_LDAP/ldap/public/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/ldap/public
    LDAP_LIBDIR=$PHP_LDAP/$PHP_LIBDIR
  else

        # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long int" >&5
$as_echo_n "checking size of long int... " >&6; }
if ${ac_cv_sizeof_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long int))" "ac_cv_sizeof_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_int" >&5
$as_echo "$ac_cv_sizeof_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
_ACEOF


    if test "$ac_cv_sizeof_long_int" = "4"; then
      PHP_OCI8_IC_LIBDIR_SUFFIX=""
    else
      PHP_OCI8_IC_LIBDIR_SUFFIX=64
    fi
    OCISDKRPMINC=`echo "$PHP_LDAP" | $SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`

        if test -f $OCISDKRPMINC/ldap.h; then
      LDAP_DIR=$PHP_LDAP
      LDAP_INCDIR=$OCISDKRPMINC
      LDAP_LIBDIR=$PHP_LDAP
        elif test -f $PHP_LDAP/sdk/include/ldap.h; then
      LDAP_DIR=$PHP_LDAP
      LDAP_INCDIR=$PHP_LDAP/sdk/include
      LDAP_LIBDIR=$PHP_LDAP
    fi
  fi

  fi

  if test -z "$LDAP_DIR"; then
    as_fn_error $? "Cannot find ldap.h" "$LINENO" 5
  fi


  if test `uname` = "Linux"; then
    LDAP_PTHREAD=pthread
  else
    LDAP_PTHREAD=
  fi

  if test -f $LDAP_LIBDIR/liblber.a || test -f $LDAP_LIBDIR/liblber.$SHLIB_SUFFIX_NAME; then


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-llber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case lber in
  c|c_r|pthread*) ;;
  *)
      LIBS="-llber $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ldap in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lldap $LIBS"
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libldap.$SHLIB_SUFFIX_NAME || test -f $LDAP_LIBDIR/libldap.$SHLIB_SUFFIX_NAME.3 || test -f $LDAP_LIBDIR/libldap.3.dylib; then


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ldap in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lldap $LIBS"
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libssldap50.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then


  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$LDAP_PTHREAD $LIBS"
   ;;
  esac


    fi


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lnspr4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case nspr4 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lnspr4 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplc4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case plc4 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lplc4 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplds4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case plds4 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lplds4 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lssldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ssldap50 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lssldap50 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ldap50 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lldap50 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lprldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case prldap50 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lprldap50 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lssl3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ssl3 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lssl3 $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_NSLDAP 1" >>confdefs.h


  elif test -f $LDAP_LIBDIR/libldapssl41.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then


  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$LDAP_PTHREAD $LIBS"
   ;;
  esac


    fi


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lnspr3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case nspr3 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lnspr3 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplc3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case plc3 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lplc3 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplds3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case plds3 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lplds3 $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl41 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ldapssl41 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lldapssl41 $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_NSLDAP 1" >>confdefs.h


  elif test -f $LDAP_LIBDIR/libldapssl30.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then


  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$LDAP_PTHREAD $LIBS"
   ;;
  esac


    fi


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ldapssl30 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lldapssl30 $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_NSLDAP 1" >>confdefs.h


  elif test -f $LDAP_LIBDIR/libldap30.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then


  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$LDAP_PTHREAD $LIBS"
   ;;
  esac


    fi


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case ldap30 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lldap30 $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_NSLDAP 1" >>confdefs.h


  elif test -f $LDAP_LIBDIR/libumich_ldap.$SHLIB_SUFFIX_NAME; then


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_lber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case umich_lber in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lumich_lber $LIBS"
   ;;
  esac




  fi




  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_ldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case umich_ldap in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lumich_ldap $LIBS"
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libclntsh.$SHLIB_SUFFIX_NAME.12.1; then


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lclntsh $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case clntsh in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lclntsh $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_ORALDAP 1" >>confdefs.h


$as_echo "#define HAVE_ORALDAP_12 1" >>confdefs.h


  elif test -f $LDAP_LIBDIR/libclntsh.$SHLIB_SUFFIX_NAME.11.1; then


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lclntsh $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case clntsh in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lclntsh $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_ORALDAP 1" >>confdefs.h


$as_echo "#define HAVE_ORALDAP_11 1" >>confdefs.h


  elif test -f $LDAP_LIBDIR/libclntsh.$SHLIB_SUFFIX_NAME; then


  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lclntsh $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_LIBDIR"; then

  if test "$LDAP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else

    ep_dir=`echo $LDAP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case clntsh in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lclntsh $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_ORALDAP 1" >>confdefs.h


$as_echo "#define HAVE_ORALDAP_10 1" >>confdefs.h


  else
    as_fn_error $? "Cannot find ldap libraries in $LDAP_LIBDIR." "$LINENO" 5
  fi


  if test "$LDAP_INCDIR" != "/usr/include"; then

  if test -z "$LDAP_INCDIR" || echo "$LDAP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_INCDIR
  else

    ep_dir=`echo $LDAP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST LDAP_SHARED_LIBADD"


$as_echo "#define HAVE_LDAP 1" >>confdefs.h


    _SAVE_CPPFLAGS=$CPPFLAGS
  _SAVE_LIBS=$LIBS
  CPPFLAGS="$CPPFLAGS -I$LDAP_INCDIR"
  LIBS="$LIBS $LDAP_SHARED_LIBADD"

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 3 arg ldap_set_rebind_proc" >&5
$as_echo_n "checking for 3 arg ldap_set_rebind_proc... " >&6; }
if ${ac_cv_3arg_setrebindproc+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ldap.h>
int
main ()
{
ldap_set_rebind_proc(0,0,0)
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_3arg_setrebindproc=yes
else
  ac_cv_3arg_setrebindproc=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_3arg_setrebindproc" >&5
$as_echo "$ac_cv_3arg_setrebindproc" >&6; }
  if test "$ac_cv_3arg_setrebindproc" = yes; then

$as_echo "#define HAVE_3ARG_SETREBINDPROC 1" >>confdefs.h

  fi

      for ac_func in ldap_parse_result ldap_parse_reference ldap_start_tls_s
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done


        if test "$PHP_LDAP_SASL" != "no"; then

  if test "$PHP_LDAP_SASL" = "yes"; then
    SEARCH_DIRS="/usr/local /usr"
  else
    SEARCH_DIRS=$PHP_LDAP_SASL
  fi

  for i in $SEARCH_DIRS; do
    if test -f $i/include/sasl/sasl.h; then
      LDAP_SASL_DIR=$i

$as_echo "#define HAVE_LDAP_SASL_SASL_H 1" >>confdefs.h

      break
    elif test -f $i/include/sasl.h; then
      LDAP_SASL_DIR=$i

$as_echo "#define HAVE_LDAP_SASL_H 1" >>confdefs.h

      break
    fi
  done

  if test "$LDAP_SASL_DIR"; then
    LDAP_SASL_INCDIR=$LDAP_SASL_DIR/include
    LDAP_SASL_LIBDIR=$LDAP_SASL_DIR/$PHP_LIBDIR
  else
    as_fn_error $? "sasl.h not found!" "$LINENO" 5
  fi

  if test "$PHP_LDAP_SASL" = "yes"; then
    SASL_LIB="-lsasl2"
  else
    SASL_LIB="-L$LDAP_SASL_LIBDIR -lsasl2"
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $LDAP_SHARED_LIBADD $SASL_LIB
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sasl_version in -lsasl2" >&5
$as_echo_n "checking for sasl_version in -lsasl2... " >&6; }
if ${ac_cv_lib_sasl2_sasl_version+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsasl2  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sasl_version ();
int
main ()
{
return sasl_version ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sasl2_sasl_version=yes
else
  ac_cv_lib_sasl2_sasl_version=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sasl2_sasl_version" >&5
$as_echo "$ac_cv_lib_sasl2_sasl_version" >&6; }
if test "x$ac_cv_lib_sasl2_sasl_version" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  if test "$LDAP_SASL_INCDIR" != "/usr/include"; then

  if test -z "$LDAP_SASL_INCDIR" || echo "$LDAP_SASL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_SASL_INCDIR
  else

    ep_dir=`echo $LDAP_SASL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_SASL_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lsasl2 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_SASL_LIBDIR"; then

  if test "$LDAP_SASL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_SASL_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_SASL_LIBDIR" || echo "$LDAP_SASL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_SASL_LIBDIR
  else

    ep_dir=`echo $LDAP_SASL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_SASL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="-L$ai_p $LDAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $LDAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LDAP_SASL_LIBDIR"; then

  if test "$LDAP_SASL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LDAP_SASL_LIBDIR" != "/usr/lib"; then

  if test -z "$LDAP_SASL_LIBDIR" || echo "$LDAP_SASL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_SASL_LIBDIR
  else

    ep_dir=`echo $LDAP_SASL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LDAP_SASL_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case sasl2 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsasl2 $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_LDAP_SASL 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sasl2_sasl_version

    as_fn_error $? "LDAP SASL check failed. Please check config.log for more information." "$LINENO" 5


fi


  fi

        ac_fn_c_check_func "$LINENO" "ldap_bind_s" "ac_cv_func_ldap_bind_s"
if test "x$ac_cv_func_ldap_bind_s" = xyes; then :

else

    as_fn_error $? "LDAP build check failed. Please check config.log for more information." "$LINENO" 5

fi


    CPPFLAGS=$_SAVE_CPPFLAGS
  LIBS=$_SAVE_LIBS
fi
























php_enable_mbstring=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable multibyte string support" >&5
$as_echo_n "checking whether to enable multibyte string support... " >&6; }
# Check whether --enable-mbstring was given.
if test "${enable_mbstring+set}" = set; then :
  enableval=$enable_mbstring; PHP_MBSTRING=$enableval
else

  PHP_MBSTRING=no
  test "$PHP_ENABLE_ALL" && PHP_MBSTRING=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MBSTRING in
shared,*)
  PHP_MBSTRING=`echo "$PHP_MBSTRING"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MBSTRING=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_mbregex=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable multibyte regex support" >&5
$as_echo_n "checking whether to enable multibyte regex support... " >&6; }
# Check whether --enable-mbregex was given.
if test "${enable_mbregex+set}" = set; then :
  enableval=$enable_mbregex; PHP_MBREGEX=$enableval
else

  PHP_MBREGEX=yes


fi


ext_output=$PHP_MBREGEX
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_mbregex_backtrack=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to check multibyte regex backtrack" >&5
$as_echo_n "checking whether to check multibyte regex backtrack... " >&6; }
# Check whether --enable-mbregex_backtrack was given.
if test "${enable_mbregex_backtrack+set}" = set; then :
  enableval=$enable_mbregex_backtrack; PHP_MBREGEX_BACKTRACK=$enableval
else

  PHP_MBREGEX_BACKTRACK=yes


fi


ext_output=$PHP_MBREGEX_BACKTRACK
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_libmbfl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for external libmbfl" >&5
$as_echo_n "checking for external libmbfl... " >&6; }

# Check whether --with-libmbfl was given.
if test "${with_libmbfl+set}" = set; then :
  withval=$with_libmbfl; PHP_LIBMBFL=$withval
else

  PHP_LIBMBFL=no


fi


ext_output=$PHP_LIBMBFL
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_onig=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for external oniguruma" >&5
$as_echo_n "checking for external oniguruma... " >&6; }

# Check whether --with-onig was given.
if test "${with_onig+set}" = set; then :
  withval=$with_onig; PHP_ONIG=$withval
else

  PHP_ONIG=no


fi


ext_output=$PHP_ONIG
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MBSTRING" != "no"; then

$as_echo "#define HAVE_MBSTRING 1" >>confdefs.h



  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES mbstring.c php_unicode.c mb_gpc.c"


  if test "$PHP_MBREGEX" != "no"; then

  if test "$PHP_MBREGEX" = "yes"; then
    if test "$PHP_ONIG" = "yes" || test "$PHP_ONIG" = "no"; then
                        if test "$PHP_MBREGEX_BACKTRACK" != "no"; then

$as_echo "#define USE_COMBINATION_EXPLOSION_CHECK 1" >>confdefs.h

      fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for variable length prototypes and stdarg.h" >&5
$as_echo_n "checking for variable length prototypes and stdarg.h... " >&6; }
if ${php_cv_mbstring_stdarg+:} false; then :
  $as_echo_n "(cached) " >&6
else

        if test "$cross_compiling" = yes; then :

                    case $host_alias in
          *netware*)
          php_cv_mbstring_stdarg=yes
          ;;
          *)
          php_cv_mbstring_stdarg=no
          ;;
          esac

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <stdarg.h>
int foo(int x, ...) {
	va_list va;
	va_start(va, x);
	va_arg(va, int);
	va_arg(va, char *);
	va_arg(va, double);
	return 0;
}
int main() { return foo(10, "", 3.14); }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  php_cv_mbstring_stdarg=yes
else
  php_cv_mbstring_stdarg=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_mbstring_stdarg" >&5
$as_echo "$php_cv_mbstring_stdarg" >&6; }

      for ac_header in stdlib.h string.h strings.h unistd.h sys/time.h sys/times.h stdarg.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

      # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
$as_echo_n "checking size of int... " >&6; }
if ${ac_cv_sizeof_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_int" >&5
$as_echo "$ac_cv_sizeof_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_INT $ac_cv_sizeof_int
_ACEOF


      # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of short" >&5
$as_echo_n "checking size of short... " >&6; }
if ${ac_cv_sizeof_short+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (short))" "ac_cv_sizeof_short"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_short" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (short)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_short=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_short" >&5
$as_echo "$ac_cv_sizeof_short" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
_ACEOF


      # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
$as_echo_n "checking size of long... " >&6; }
if ${ac_cv_sizeof_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long" >&5
$as_echo "$ac_cv_sizeof_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG $ac_cv_sizeof_long
_ACEOF


      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
$as_echo_n "checking for an ANSI C-conforming const... " >&6; }
if ${ac_cv_c_const+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

#ifndef __cplusplus
  /* Ultrix mips cc rejects this sort of thing.  */
  typedef int charset[2];
  const charset cs = { 0, 0 };
  /* SunOS 4.1.1 cc rejects this.  */
  char const *const *pcpcc;
  char **ppc;
  /* NEC SVR4.0.2 mips cc rejects this.  */
  struct point {int x, y;};
  static struct point const zero = {0,0};
  /* AIX XL C 1.02.0.0 rejects this.
     It does not let you subtract one const X* pointer from another in
     an arm of an if-expression whose if-part is not a constant
     expression */
  const char *g = "string";
  pcpcc = &g + (g ? g-g : 0);
  /* HPUX 7.0 cc rejects these. */
  ++pcpcc;
  ppc = (char**) pcpcc;
  pcpcc = (char const *const *) ppc;
  { /* SCO 3.2v4 cc rejects this sort of thing.  */
    char tx;
    char *t = &tx;
    char const *s = 0 ? (char *) 0 : (char const *) 0;

    *t++ = 0;
    if (s) return 0;
  }
  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
    int x[] = {25, 17};
    const int *foo = &x[0];
    ++foo;
  }
  { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
    typedef const int *iptr;
    iptr p = 0;
    ++p;
  }
  { /* AIX XL C 1.02.0.0 rejects this sort of thing, saying
       "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
    struct s { int j; const int *ap[3]; } bx;
    struct s *b = &bx; b->j = 5;
  }
  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
    const int foo = 10;
    if (!foo) return 0;
  }
  return !cs[0] && !zero.x;
#endif

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_c_const=yes
else
  ac_cv_c_const=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
$as_echo "$ac_cv_c_const" >&6; }
if test $ac_cv_c_const = no; then

$as_echo "#define const /**/" >>confdefs.h

fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether time.h and sys/time.h may both be included" >&5
$as_echo_n "checking whether time.h and sys/time.h may both be included... " >&6; }
if ${ac_cv_header_time+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>

int
main ()
{
if ((struct tm *) 0)
return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_header_time=yes
else
  ac_cv_header_time=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_time" >&5
$as_echo "$ac_cv_header_time" >&6; }
if test $ac_cv_header_time = yes; then

$as_echo "#define TIME_WITH_SYS_TIME 1" >>confdefs.h

fi

      # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
$as_echo_n "checking for working alloca.h... " >&6; }
if ${ac_cv_working_alloca_h+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <alloca.h>
int
main ()
{
char *p = (char *) alloca (2 * sizeof (int));
			  if (p) return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_working_alloca_h=yes
else
  ac_cv_working_alloca_h=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
$as_echo "$ac_cv_working_alloca_h" >&6; }
if test $ac_cv_working_alloca_h = yes; then

$as_echo "#define HAVE_ALLOCA_H 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
$as_echo_n "checking for alloca... " >&6; }
if ${ac_cv_func_alloca_works+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  ifdef HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
void *alloca (size_t);
#    endif
#   endif
#  endif
# endif
#endif

int
main ()
{
char *p = (char *) alloca (1);
				    if (p) return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_func_alloca_works=yes
else
  ac_cv_func_alloca_works=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
$as_echo "$ac_cv_func_alloca_works" >&6; }

if test $ac_cv_func_alloca_works = yes; then

$as_echo "#define HAVE_ALLOCA 1" >>confdefs.h

else
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
# that cause trouble.  Some versions do not even contain alloca or
# contain a buggy version.  If you still want to use their alloca,
# use ar to extract alloca.o from them instead of compiling alloca.c.

ALLOCA=\${LIBOBJDIR}alloca.$ac_objext

$as_echo "#define C_ALLOCA 1" >>confdefs.h


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
$as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
if ${ac_cv_os_cray+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#if defined CRAY && ! defined CRAY2
webecray
#else
wenotbecray
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "webecray" >/dev/null 2>&1; then :
  ac_cv_os_cray=yes
else
  ac_cv_os_cray=no
fi
rm -f conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_os_cray" >&5
$as_echo "$ac_cv_os_cray" >&6; }
if test $ac_cv_os_cray = yes; then
  for ac_func in _getb67 GETB67 getb67; do
    as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :

cat >>confdefs.h <<_ACEOF
#define CRAY_STACKSEG_END $ac_func
_ACEOF

    break
fi

  done
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
$as_echo_n "checking stack direction for C alloca... " >&6; }
if ${ac_cv_c_stack_direction+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "$cross_compiling" = yes; then :
  ac_cv_c_stack_direction=0
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$ac_includes_default
int
find_stack_direction (int *addr, int depth)
{
  int dir, dummy = 0;
  if (! addr)
    addr = &dummy;
  *addr = addr < &dummy ? 1 : addr == &dummy ? 0 : -1;
  dir = depth ? find_stack_direction (addr, depth - 1) : 0;
  return dir + dummy;
}

int
main (int argc, char **argv)
{
  return find_stack_direction (0, argc + !argv + 20) < 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_c_stack_direction=1
else
  ac_cv_c_stack_direction=-1
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
$as_echo "$ac_cv_c_stack_direction" >&6; }
cat >>confdefs.h <<_ACEOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
_ACEOF


fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working memcmp" >&5
$as_echo_n "checking for working memcmp... " >&6; }
if ${ac_cv_func_memcmp_working+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "$cross_compiling" = yes; then :
  ac_cv_func_memcmp_working=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$ac_includes_default
int
main ()
{

  /* Some versions of memcmp are not 8-bit clean.  */
  char c0 = '\100', c1 = '\200', c2 = '\201';
  if (memcmp(&c0, &c2, 1) >= 0 || memcmp(&c1, &c2, 1) >= 0)
    return 1;

  /* The Next x86 OpenStep bug shows up only when comparing 16 bytes
     or more and with at least one buffer not starting on a 4-byte boundary.
     William Lewis provided this test program.   */
  {
    char foo[21];
    char bar[21];
    int i;
    for (i = 0; i < 4; i++)
      {
	char *a = foo + i;
	char *b = bar + i;
	strcpy (a, "--------01111111");
	strcpy (b, "--------10000000");
	if (memcmp (a, b, 16) >= 0)
	  return 1;
      }
    return 0;
  }

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_func_memcmp_working=yes
else
  ac_cv_func_memcmp_working=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_memcmp_working" >&5
$as_echo "$ac_cv_func_memcmp_working" >&6; }
test $ac_cv_func_memcmp_working = no && case " $LIBOBJS " in
  *" memcmp.$ac_objext "* ) ;;
  *) LIBOBJS="$LIBOBJS memcmp.$ac_objext"
 ;;
esac


      ac_fn_c_check_header_mongrel "$LINENO" "stdarg.h" "ac_cv_header_stdarg_h" "$ac_includes_default"
if test "x$ac_cv_header_stdarg_h" = xyes; then :


$as_echo "#define HAVE_STDARG_PROTOTYPES 1" >>confdefs.h


fi



$as_echo "#define PHP_ONIG_BUNDLED 1" >>confdefs.h


$as_echo "#define HAVE_ONIG 1" >>confdefs.h


  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DNOT_RUBY"


  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma"


  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma/enc"


  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES oniguruma"


  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS oniguruma/config.h"


  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES
        oniguruma/regcomp.c
        oniguruma/regerror.c
        oniguruma/regexec.c
        oniguruma/reggnu.c
        oniguruma/regparse.c
        oniguruma/regenc.c
        oniguruma/regext.c
        oniguruma/regsyntax.c
        oniguruma/regtrav.c
        oniguruma/regversion.c
        oniguruma/st.c
        oniguruma/enc/unicode.c
        oniguruma/enc/ascii.c
        oniguruma/enc/utf8.c
        oniguruma/enc/euc_jp.c
        oniguruma/enc/euc_tw.c
        oniguruma/enc/euc_kr.c
        oniguruma/enc/sjis.c
        oniguruma/enc/iso8859_1.c
        oniguruma/enc/iso8859_2.c
        oniguruma/enc/iso8859_3.c
        oniguruma/enc/iso8859_4.c
        oniguruma/enc/iso8859_5.c
        oniguruma/enc/iso8859_6.c
        oniguruma/enc/iso8859_7.c
        oniguruma/enc/iso8859_8.c
        oniguruma/enc/iso8859_9.c
        oniguruma/enc/iso8859_10.c
        oniguruma/enc/iso8859_11.c
        oniguruma/enc/iso8859_13.c
        oniguruma/enc/iso8859_14.c
        oniguruma/enc/iso8859_15.c
        oniguruma/enc/iso8859_16.c
        oniguruma/enc/koi8.c
        oniguruma/enc/koi8_r.c
        oniguruma/enc/big5.c
        oniguruma/enc/utf16_be.c
        oniguruma/enc/utf16_le.c
        oniguruma/enc/utf32_be.c
        oniguruma/enc/utf32_le.c
      "


  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS oniguruma/oniguruma.h"

    else
                        if test ! -f "$PHP_ONIG/include/oniguruma.h"; then
        as_fn_error $? "oniguruma.h not found in $PHP_ONIG/include" "$LINENO" 5
      fi

  if test "$PHP_ONIG/include" != "/usr/include"; then

  if test -z "$PHP_ONIG/include" || echo "$PHP_ONIG/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ONIG/include
  else

    ep_dir=`echo $PHP_ONIG/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ONIG/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$PHP_ONIG/$PHP_LIBDIR
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for onig_init in -lonig" >&5
$as_echo_n "checking for onig_init in -lonig... " >&6; }
if ${ac_cv_lib_onig_onig_init+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lonig  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char onig_init ();
int
main ()
{
return onig_init ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_onig_onig_init=yes
else
  ac_cv_lib_onig_onig_init=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_onig_onig_init" >&5
$as_echo "$ac_cv_lib_onig_onig_init" >&6; }
if test "x$ac_cv_lib_onig_onig_init" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    MBSTRING_SHARED_LIBADD="-lonig $MBSTRING_SHARED_LIBADD"
    if test -n "$PHP_ONIG/$PHP_LIBDIR"; then

  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ONIG/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ONIG/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_ONIG/$PHP_LIBDIR"; then

  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ONIG/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ONIG/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case onig in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lonig $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_ONIG 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_onig_onig_init

        as_fn_error $? "Problem with oniguruma. Please check config.log for more information." "$LINENO" 5


fi


      save_old_LDFLAGS=$LDFLAGS

  for ac_i in $MBSTRING_SHARED_LIBADD; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

      { $as_echo "$as_me:${as_lineno-$LINENO}: checking if oniguruma has an invalid entry for KOI8 encoding" >&5
$as_echo_n "checking if oniguruma has an invalid entry for KOI8 encoding... " >&6; }
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <oniguruma.h>

int
main ()
{

return (int)(ONIG_ENCODING_KOI8 + 1);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else

        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define PHP_ONIG_BAD_KOI8_ENTRY 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
      LDFLAGS=$save_old_LDFLAGS
    fi


  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DONIG_ESCAPE_UCHAR_COLLISION=1"


  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DUChar=OnigUChar"



$as_echo "#define HAVE_MBREGEX 1" >>confdefs.h



  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES php_mbregex.c"


  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS php_mbregex.h php_onig_compat.h"

  fi

  fi


    if test "$PHP_LIBMBFL" = "yes" || test "$PHP_LIBMBFL" = "no"; then

  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl"


  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/mbfl"


  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/filters"


  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS libmbfl/nls"


  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl"


  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES libmbfl/mbfl"


  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS libmbfl/config.h"



  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES
     libmbfl/filters/html_entities.c
     libmbfl/filters/mbfilter_7bit.c
     libmbfl/filters/mbfilter_ascii.c
     libmbfl/filters/mbfilter_base64.c
     libmbfl/filters/mbfilter_big5.c
     libmbfl/filters/mbfilter_byte2.c
     libmbfl/filters/mbfilter_byte4.c
     libmbfl/filters/mbfilter_cp1251.c
     libmbfl/filters/mbfilter_cp1252.c
     libmbfl/filters/mbfilter_cp1254.c
     libmbfl/filters/mbfilter_cp5022x.c
     libmbfl/filters/mbfilter_cp51932.c
     libmbfl/filters/mbfilter_cp850.c
     libmbfl/filters/mbfilter_cp866.c
     libmbfl/filters/mbfilter_cp932.c
     libmbfl/filters/mbfilter_cp936.c
     libmbfl/filters/mbfilter_gb18030.c
     libmbfl/filters/mbfilter_euc_cn.c
     libmbfl/filters/mbfilter_euc_jp.c
     libmbfl/filters/mbfilter_euc_jp_2004.c
     libmbfl/filters/mbfilter_euc_jp_win.c
     libmbfl/filters/mbfilter_euc_kr.c
     libmbfl/filters/mbfilter_euc_tw.c
     libmbfl/filters/mbfilter_htmlent.c
     libmbfl/filters/mbfilter_hz.c
     libmbfl/filters/mbfilter_iso2022_jp_ms.c
     libmbfl/filters/mbfilter_iso2022jp_2004.c
     libmbfl/filters/mbfilter_iso2022jp_mobile.c
     libmbfl/filters/mbfilter_iso2022_kr.c
     libmbfl/filters/mbfilter_iso8859_1.c
     libmbfl/filters/mbfilter_iso8859_10.c
     libmbfl/filters/mbfilter_iso8859_13.c
     libmbfl/filters/mbfilter_iso8859_14.c
     libmbfl/filters/mbfilter_iso8859_15.c
     libmbfl/filters/mbfilter_iso8859_16.c
     libmbfl/filters/mbfilter_iso8859_2.c
     libmbfl/filters/mbfilter_iso8859_3.c
     libmbfl/filters/mbfilter_iso8859_4.c
     libmbfl/filters/mbfilter_iso8859_5.c
     libmbfl/filters/mbfilter_iso8859_6.c
     libmbfl/filters/mbfilter_iso8859_7.c
     libmbfl/filters/mbfilter_iso8859_8.c
     libmbfl/filters/mbfilter_iso8859_9.c
     libmbfl/filters/mbfilter_jis.c
     libmbfl/filters/mbfilter_koi8r.c
     libmbfl/filters/mbfilter_armscii8.c
     libmbfl/filters/mbfilter_qprint.c
     libmbfl/filters/mbfilter_sjis.c
     libmbfl/filters/mbfilter_sjis_open.c
     libmbfl/filters/mbfilter_sjis_mobile.c
     libmbfl/filters/mbfilter_sjis_mac.c
     libmbfl/filters/mbfilter_sjis_2004.c
     libmbfl/filters/mbfilter_tl_jisx0201_jisx0208.c
     libmbfl/filters/mbfilter_ucs2.c
     libmbfl/filters/mbfilter_ucs4.c
     libmbfl/filters/mbfilter_uhc.c
     libmbfl/filters/mbfilter_utf16.c
     libmbfl/filters/mbfilter_utf32.c
     libmbfl/filters/mbfilter_utf7.c
     libmbfl/filters/mbfilter_utf7imap.c
     libmbfl/filters/mbfilter_utf8.c
     libmbfl/filters/mbfilter_utf8_mobile.c
     libmbfl/filters/mbfilter_uuencode.c
     libmbfl/filters/mbfilter_koi8u.c
     libmbfl/mbfl/mbfilter.c
     libmbfl/mbfl/mbfilter_8bit.c
     libmbfl/mbfl/mbfilter_pass.c
     libmbfl/mbfl/mbfilter_wchar.c
     libmbfl/mbfl/mbfl_convert.c
     libmbfl/mbfl/mbfl_encoding.c
     libmbfl/mbfl/mbfl_filter_output.c
     libmbfl/mbfl/mbfl_ident.c
     libmbfl/mbfl/mbfl_language.c
     libmbfl/mbfl/mbfl_memory_device.c
     libmbfl/mbfl/mbfl_string.c
     libmbfl/mbfl/mbfl_allocators.c
     libmbfl/nls/nls_de.c
     libmbfl/nls/nls_en.c
     libmbfl/nls/nls_ja.c
     libmbfl/nls/nls_kr.c
     libmbfl/nls/nls_neutral.c
     libmbfl/nls/nls_ru.c
     libmbfl/nls/nls_uni.c
     libmbfl/nls/nls_zh.c
     libmbfl/nls/nls_hy.c
     libmbfl/nls/nls_tr.c
     libmbfl/nls/nls_ua.c
    "


  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DHAVE_CONFIG_H"


  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS libmbfl/config.h libmbfl/mbfl/eaw_table.h libmbfl/mbfl/mbfilter.h libmbfl/mbfl/mbfilter_8bit.h libmbfl/mbfl/mbfilter_pass.h libmbfl/mbfl/mbfilter_wchar.h libmbfl/mbfl/mbfl_allocators.h libmbfl/mbfl/mbfl_consts.h libmbfl/mbfl/mbfl_convert.h libmbfl/mbfl/mbfl_defs.h libmbfl/mbfl/mbfl_encoding.h libmbfl/mbfl/mbfl_filter_output.h libmbfl/mbfl/mbfl_ident.h libmbfl/mbfl/mbfl_language.h libmbfl/mbfl/mbfl_memory_device.h libmbfl/mbfl/mbfl_string.h"

  else
                for inc in include include/mbfl-1.0 include/mbfl; do
      if test -f "$PHP_LIBMBFL/$inc/mbfilter.h"; then
        PHP_LIBMBFL_INCLUDE="$inc"
        break
      fi
    done

    if test -z "$PHP_LIBMBFL_INCLUDE"; then
      as_fn_error $? "mbfilter.h not found. Please reinstall libmbfl library." "$LINENO" 5
    else

  if test "$PHP_LIBMBFL_INCLUDE" != "/usr/include"; then

  if test -z "$PHP_LIBMBFL_INCLUDE" || echo "$PHP_LIBMBFL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PHP_LIBMBFL_INCLUDE
  else

    ep_dir=`echo $PHP_LIBMBFL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_LIBMBFL_INCLUDE"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PHP_LIBMBFL/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mbfl_buffer_converter_new in -lmbfl" >&5
$as_echo_n "checking for mbfl_buffer_converter_new in -lmbfl... " >&6; }
if ${ac_cv_lib_mbfl_mbfl_buffer_converter_new+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lmbfl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mbfl_buffer_converter_new ();
int
main ()
{
return mbfl_buffer_converter_new ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_mbfl_mbfl_buffer_converter_new=yes
else
  ac_cv_lib_mbfl_mbfl_buffer_converter_new=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_mbfl_mbfl_buffer_converter_new" >&5
$as_echo "$ac_cv_lib_mbfl_mbfl_buffer_converter_new" >&6; }
if test "x$ac_cv_lib_mbfl_mbfl_buffer_converter_new" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    MBSTRING_SHARED_LIBADD="-lmbfl $MBSTRING_SHARED_LIBADD"
    if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then

  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_LIBMBFL/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_LIBMBFL/$PHP_LIBDIR"; then

  if test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_LIBMBFL/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_LIBMBFL/$PHP_LIBDIR" || echo "$PHP_LIBMBFL/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_LIBMBFL/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_LIBMBFL/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_LIBMBFL/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case mbfl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lmbfl $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_mbfl_mbfl_buffer_converter_new

      as_fn_error $? "Problem with libmbfl. Please check config.log for more information." "$LINENO" 5


fi

  fi



  ext_builddir=ext/mbstring
  ext_srcdir=$abs_srcdir/ext/mbstring

  ac_extra=`echo "$PHP_MBSTRING_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MBSTRING_SHARED=no


  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mbstring"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MBSTRING_SHARED=yes

  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmbstring.so '$ext_builddir'/phpmbstring.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(MBSTRING_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(PHPMBSTRING_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmbstring.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmbstring.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmbstring.$suffix: $ext_builddir/phpmbstring.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmbstring.$suffix \$(phplibdir)

$ext_builddir/phpmbstring.$suffix: \$(shared_objects_mbstring) \$(PHPMBSTRING_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mbstring.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mbstring.so '$ext_builddir'/mbstring.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) -L$(top_builddir)/netware -lphp5lib $(TRING_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mbstring) $(MBSTRING_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mbstring.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mbstring.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mbstring.$suffix: $ext_builddir/mbstring.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mbstring.$suffix \$(phplibdir)

$ext_builddir/mbstring.$suffix: \$(shared_objects_mbstring) \$(MBSTRING_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_MBSTRING 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MBSTRING_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mbstring"
        ;;
      *)


  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mbstring

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST MBSTRING_SHARED_LIBADD"


  for dir in $PHP_MBSTRING_EXTRA_BUILD_DIRS; do


    $php_shtool mkdir -p $ext_builddir/$dir


  done

  for dir in $PHP_MBSTRING_EXTRA_INCLUDES; do

  if test "$ext_srcdir/$dir" != "/usr/include"; then

  if test -z "$ext_srcdir/$dir" || echo "$ext_srcdir/$dir" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/$dir
  else

    ep_dir=`echo $ext_srcdir/$dir|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ext_srcdir/$dir"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$ext_builddir/$dir" != "/usr/include"; then

  if test -z "$ext_builddir/$dir" || echo "$ext_builddir/$dir" | grep '^/' >/dev/null ; then
    ai_p=$ext_builddir/$dir
  else

    ep_dir=`echo $ext_builddir/$dir|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ext_builddir/$dir"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

  done

  if test "$ext_shared" = "no"; then


  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    out="php_config.h"
  else

  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $PHP_MBSTRING_BASE_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

    if test -f "$ext_builddir/config.h.in"; then
      out="$abs_builddir/config.h"
    else
      out="php_config.h"
    fi
  fi

  for cfg in $PHP_MBSTRING_EXTRA_CONFIG_HEADERS; do
    cat > $ext_builddir/$cfg <<EOF
#include "$out"
EOF
  done

  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS mbstring.h"



    header_path=ext/mbstring
    for header_file in $PHP_MBSTRING_INSTALL_HEADERS; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



fi

# vim600: sts=2 sw=2 et






php_with_mcrypt=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mcrypt support" >&5
$as_echo_n "checking for mcrypt support... " >&6; }

# Check whether --with-mcrypt was given.
if test "${with_mcrypt+set}" = set; then :
  withval=$with_mcrypt; PHP_MCRYPT=$withval
else

  PHP_MCRYPT=no
  test "$PHP_ENABLE_ALL" && PHP_MCRYPT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MCRYPT in
shared,*)
  PHP_MCRYPT=`echo "$PHP_MCRYPT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MCRYPT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MCRYPT" != "no"; then
  for i in $PHP_MCRYPT /usr/local /usr; do
    test -f $i/include/mcrypt.h && MCRYPT_DIR=$i && break
  done

  if test -z "$MCRYPT_DIR"; then
    as_fn_error $? "mcrypt.h not found. Please reinstall libmcrypt." "$LINENO" 5
  fi


  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$MCRYPT_DIR/include
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libmcrypt version" >&5
$as_echo_n "checking for libmcrypt version... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <mcrypt.h>
#if MCRYPT_API_VERSION >= 20021217
  yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: >= 2.5.6" >&5
$as_echo ">= 2.5.6" >&6; }

else

    as_fn_error $? "libmcrypt version 2.5.6 or greater required." "$LINENO" 5

fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$MCRYPT_DIR/$PHP_LIBDIR -lltdl
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mcrypt_module_open in -lmcrypt" >&5
$as_echo_n "checking for mcrypt_module_open in -lmcrypt... " >&6; }
if ${ac_cv_lib_mcrypt_mcrypt_module_open+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lmcrypt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mcrypt_module_open ();
int
main ()
{
return mcrypt_module_open ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_mcrypt_mcrypt_module_open=yes
else
  ac_cv_lib_mcrypt_mcrypt_module_open=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_mcrypt_mcrypt_module_open" >&5
$as_echo "$ac_cv_lib_mcrypt_mcrypt_module_open" >&6; }
if test "x$ac_cv_lib_mcrypt_mcrypt_module_open" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case ltdl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MCRYPT_SHARED_LIBADD="-lltdl $MCRYPT_SHARED_LIBADD"
    else


  case ltdl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lltdl $LIBS"
   ;;
  esac


    fi
   ;;
  esac



$as_echo "#define HAVE_LIBMCRYPT 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_mcrypt_mcrypt_module_open


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$MCRYPT_DIR/$PHP_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mcrypt_module_open in -lmcrypt" >&5
$as_echo_n "checking for mcrypt_module_open in -lmcrypt... " >&6; }
if ${ac_cv_lib_mcrypt_mcrypt_module_open+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lmcrypt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mcrypt_module_open ();
int
main ()
{
return mcrypt_module_open ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_mcrypt_mcrypt_module_open=yes
else
  ac_cv_lib_mcrypt_mcrypt_module_open=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_mcrypt_mcrypt_module_open" >&5
$as_echo "$ac_cv_lib_mcrypt_mcrypt_module_open" >&6; }
if test "x$ac_cv_lib_mcrypt_mcrypt_module_open" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_LIBMCRYPT 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_mcrypt_mcrypt_module_open

      as_fn_error $? "Sorry, I was not able to diagnose which libmcrypt version you have installed." "$LINENO" 5


fi



fi




  if test "$ext_shared" = "yes"; then
    MCRYPT_SHARED_LIBADD="-lmcrypt $MCRYPT_SHARED_LIBADD"
    if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then

  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MCRYPT_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MCRYPT_SHARED_LIBADD="-L$ai_p $MCRYPT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MCRYPT_SHARED_LIBADD="$ld_runpath_switch$ai_p $MCRYPT_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$MCRYPT_DIR/$PHP_LIBDIR"; then

  if test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MCRYPT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$MCRYPT_DIR/$PHP_LIBDIR" || echo "$MCRYPT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $MCRYPT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MCRYPT_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case mcrypt in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lmcrypt $LIBS"
   ;;
  esac




  fi



  if test "$MCRYPT_DIR/include" != "/usr/include"; then

  if test -z "$MCRYPT_DIR/include" || echo "$MCRYPT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/include
  else

    ep_dir=`echo $MCRYPT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MCRYPT_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST MCRYPT_SHARED_LIBADD"


  ext_builddir=ext/mcrypt
  ext_srcdir=$abs_srcdir/ext/mcrypt

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MCRYPT_SHARED=no


  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mcrypt"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MCRYPT_SHARED=yes

  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mcrypt="$shared_objects_mcrypt $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmcrypt.so '$ext_builddir'/phpmcrypt.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(MCRYPT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(PHPMCRYPT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmcrypt.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmcrypt.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmcrypt.$suffix: $ext_builddir/phpmcrypt.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmcrypt.$suffix \$(phplibdir)

$ext_builddir/phpmcrypt.$suffix: \$(shared_objects_mcrypt) \$(PHPMCRYPT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mcrypt.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mcrypt.so '$ext_builddir'/mcrypt.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) -L$(top_builddir)/netware -lphp5lib $(YPT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mcrypt) $(MCRYPT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mcrypt.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcrypt.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mcrypt.$suffix: $ext_builddir/mcrypt.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mcrypt.$suffix \$(phplibdir)

$ext_builddir/mcrypt.$suffix: \$(shared_objects_mcrypt) \$(MCRYPT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_MCRYPT 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MCRYPT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mcrypt"
        ;;
      *)


  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c mcrypt_filter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mcrypt

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_with_mssql=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MSSQL support via FreeTDS" >&5
$as_echo_n "checking for MSSQL support via FreeTDS... " >&6; }

# Check whether --with-mssql was given.
if test "${with_mssql+set}" = set; then :
  withval=$with_mssql; PHP_MSSQL=$withval
else

  PHP_MSSQL=no
  test "$PHP_ENABLE_ALL" && PHP_MSSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MSSQL in
shared,*)
  PHP_MSSQL=`echo "$PHP_MSSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MSSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MSSQL" != "no"; then

  if test "$PHP_MSSQL" = "yes"; then
    for i in /usr/local /usr; do
      if test -f $i/include/sybdb.h; then
        FREETDS_INSTALLATION_DIR=$i
        FREETDS_INCLUDE_DIR=$i/include
        break
      elif test -f $i/include/freetds/sybdb.h; then
        FREETDS_INSTALLATION_DIR=$i
        FREETDS_INCLUDE_DIR=$i/include/freetds
        break
      fi
    done

    if test -z "$FREETDS_INSTALLATION_DIR"; then
      as_fn_error $? "Cannot find FreeTDS in known installation directories" "$LINENO" 5
    fi

  elif test "$PHP_MSSQL" != "no"; then

    if test -f $PHP_MSSQL/include/sybdb.h; then
      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include
    elif test -f $PHP_MSSQL/include/freetds/sybdb.h; then
      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
      FREETDS_INCLUDE_DIR=$PHP_MSSQL/include/freetds
    else
      as_fn_error $? "Directory $PHP_MSSQL is not a FreeTDS installation directory" "$LINENO" 5
    fi
  fi

  if test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
     as_fn_error $? "Could not find $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" "$LINENO" 5
  fi


  if test "$FREETDS_INCLUDE_DIR" != "/usr/include"; then

  if test -z "$FREETDS_INCLUDE_DIR" || echo "$FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETDS_INCLUDE_DIR
  else

    ep_dir=`echo $FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$FREETDS_INCLUDE_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    MSSQL_SHARED_LIBADD="-lsybdb $MSSQL_SHARED_LIBADD"
    if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then

  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then

  if test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case sybdb in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybdb $LIBS"
   ;;
  esac




  fi




  ext_builddir=ext/mssql
  ext_srcdir=$abs_srcdir/ext/mssql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MSSQL_SHARED=no


  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mssql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MSSQL_SHARED=yes

  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mssql="$shared_objects_mssql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmssql.so '$ext_builddir'/phpmssql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(MSSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(PHPMSSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmssql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmssql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmssql.$suffix: $ext_builddir/phpmssql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmssql.$suffix \$(phplibdir)

$ext_builddir/phpmssql.$suffix: \$(shared_objects_mssql) \$(PHPMSSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mssql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mssql.so '$ext_builddir'/mssql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) -L$(top_builddir)/netware -lphp5lib $(QL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mssql) $(MSSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mssql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mssql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mssql.$suffix: $ext_builddir/mssql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mssql.$suffix \$(phplibdir)

$ext_builddir/mssql.$suffix: \$(shared_objects_mssql) \$(MSSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_MSSQL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MSSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mssql"
        ;;
      *)


  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mssql

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dnet_addr in -ldnet_stub" >&5
$as_echo_n "checking for dnet_addr in -ldnet_stub... " >&6; }
if ${ac_cv_lib_dnet_stub_dnet_addr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldnet_stub  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dnet_addr ();
int
main ()
{
return dnet_addr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dnet_stub_dnet_addr=yes
else
  ac_cv_lib_dnet_stub_dnet_addr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_stub_dnet_addr" >&5
$as_echo "$ac_cv_lib_dnet_stub_dnet_addr" >&6; }
if test "x$ac_cv_lib_dnet_stub_dnet_addr" = xyes; then :


  if test "$ext_shared" = "yes"; then
    MSSQL_SHARED_LIBADD="-ldnet_stub $MSSQL_SHARED_LIBADD"
    if test -n ""; then

  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then

  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else

    ep_dir=`echo |$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename ""`
  fi


      if test "$ext_shared" = "yes"; then
        MSSQL_SHARED_LIBADD="-L$ai_p $MSSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MSSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n ""; then

  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then

  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else

    ep_dir=`echo |$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename ""`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case dnet_stub in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ldnet_stub $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_LIBDNET_STUB 1" >>confdefs.h


fi


$as_echo "#define HAVE_MSSQL 1" >>confdefs.h


$as_echo "#define HAVE_FREETDS 1" >>confdefs.h


  PHP_VAR_SUBST="$PHP_VAR_SUBST MSSQL_SHARED_LIBADD"

fi








php_with_mysql=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MySQL support" >&5
$as_echo_n "checking for MySQL support... " >&6; }

# Check whether --with-mysql was given.
if test "${with_mysql+set}" = set; then :
  withval=$with_mysql; PHP_MYSQL=$withval
else

  PHP_MYSQL=no
  test "$PHP_ENABLE_ALL" && PHP_MYSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQL in
shared,*)
  PHP_MYSQL=`echo "$PHP_MYSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MYSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_mysql_sock=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for specified location of the MySQL UNIX socket" >&5
$as_echo_n "checking for specified location of the MySQL UNIX socket... " >&6; }

# Check whether --with-mysql-sock was given.
if test "${with_mysql_sock+set}" = set; then :
  withval=$with_mysql_sock; PHP_MYSQL_SOCK=$withval
else

  PHP_MYSQL_SOCK=no


fi


ext_output=$PHP_MYSQL_SOCK
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_ZLIB_DIR"; then

php_with_zlib_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libz" >&5
$as_echo_n "checking for the location of libz... " >&6; }

# Check whether --with-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then :
  withval=$with_zlib_dir; PHP_ZLIB_DIR=$withval
else

  PHP_ZLIB_DIR=no


fi


ext_output=$PHP_ZLIB_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL" = "mysqlnd"; then
    PHP_MYSQLND_ENABLED=yes

elif test "$PHP_MYSQL" != "no"; then
  MYSQL_DIR=
  MYSQL_INC_DIR=

  if test -r $PHP_MYSQL/include/mysql/mysql.h; then
    MYSQL_DIR=$PHP_MYSQL
    MYSQL_INC_DIR=$PHP_MYSQL/include/mysql
    break
  elif test -r $PHP_MYSQL/include/mysql.h; then
    MYSQL_DIR=$PHP_MYSQL
    MYSQL_INC_DIR=$PHP_MYSQL/include
    break
  fi

  if test -z "$MYSQL_DIR"; then
    as_fn_error $? "Cannot find MySQL header files under $PHP_MYSQL.
Note that the MySQL client library is not bundled anymore!" "$LINENO" 5
  fi

  if test "$enable_maintainer_zts" = "yes"; then
    MYSQL_LIBNAME=mysqlclient_r
  else
    MYSQL_LIBNAME=mysqlclient
  fi
  case $host_alias in
    *netware*)
      MYSQL_LIBNAME=mysql
      ;;
  esac

    if test -z "$PHP_LIBDIR"; then
    PHP_LIBDIR=lib
  fi

  for i in $PHP_LIBDIR $PHP_LIBDIR/mysql; do

  str="$MYSQL_DIR/$i/lib$MYSQL_LIBNAME.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/$i
      break 2
    fi
  done

  done

  if test -z "$MYSQL_LIB_DIR"; then

  str="$MYSQL_DIR/lib/x86_64-linux-gnu/lib$MYSQL_LIBNAME.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/lib/x86_64-linux-gnu
      break 2
    fi
  done

  fi
  if test -z "$MYSQL_LIB_DIR"; then

  str="$MYSQL_DIR/lib/i386-linux-gnu/lib$MYSQL_LIBNAME.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/lib/i386-linux-gnu
      break 2
    fi
  done

  fi

  if test -z "$MYSQL_LIB_DIR"; then
    as_fn_error $? "Cannot find lib$MYSQL_LIBNAME under $MYSQL_DIR.
Note that the MySQL client library is not bundled anymore!" "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$MYSQL_LIB_DIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIBNAME''_mysql_close" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_close in -l$MYSQL_LIBNAME" >&5
$as_echo_n "checking for mysql_close in -l$MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_close ();
int
main ()
{
return mysql_close ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_close

    if test "$PHP_ZLIB_DIR" != "no"; then


  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR"; then

  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_ZLIB_DIR"; then

  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac




  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$MYSQL_LIB_DIR
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIBNAME''_mysql_error" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_error in -l$MYSQL_LIBNAME" >&5
$as_echo_n "checking for mysql_error in -l$MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_error ();
int
main ()
{
return mysql_error ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_error

        as_fn_error $? "mysql configure failed. Please check config.log for more information." "$LINENO" 5


fi

      MYSQL_LIBS="-L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
    else


  case z in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD"
    else


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac


    fi
   ;;
  esac



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$MYSQL_LIB_DIR
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIBNAME''_mysql_errno" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_errno in -l$MYSQL_LIBNAME" >&5
$as_echo_n "checking for mysql_errno in -l$MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_errno ();
int
main ()
{
return mysql_errno ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_mysql_errno

        as_fn_error $? "Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." "$LINENO" 5


fi

      MYSQL_LIBS="-lz"
    fi


fi




  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-l$MYSQL_LIBNAME $MYSQL_SHARED_LIBADD"
    if test -n "$MYSQL_LIB_DIR"; then

  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then

  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_LIB_DIR
  else

    ep_dir=`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MYSQL_LIB_DIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-L$ai_p $MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$MYSQL_LIB_DIR"; then

  if test "$MYSQL_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$MYSQL_LIB_DIR" != "/usr/lib"; then

  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_LIB_DIR
  else

    ep_dir=`echo $MYSQL_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MYSQL_LIB_DIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $MYSQL_LIBNAME in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$MYSQL_LIBNAME $LIBS"
   ;;
  esac




  fi



  if test "$MYSQL_INC_DIR" != "/usr/include"; then

  if test -z "$MYSQL_INC_DIR" || echo "$MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_INC_DIR
  else

    ep_dir=`echo $MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MYSQL_INC_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  MYSQL_MODULE_TYPE=external
  MYSQL_LIBS="-L$MYSQL_LIB_DIR -l$MYSQL_LIBNAME $MYSQL_LIBS"
  MYSQL_INCLUDE=-I$MYSQL_INC_DIR



  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_MODULE_TYPE"





  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_LIBS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_INCLUDE"



fi

if test "$PHP_MYSQL" != "no"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for MySQL UNIX socket location" >&5
$as_echo_n "checking for MySQL UNIX socket location... " >&6; }
  if test "$PHP_MYSQL_SOCK" != "no" && test "$PHP_MYSQL_SOCK" != "yes"; then
    MYSQL_SOCK=$PHP_MYSQL_SOCK

cat >>confdefs.h <<_ACEOF
#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
_ACEOF

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MYSQL_SOCK" >&5
$as_echo "$MYSQL_SOCK" >&6; }
  elif test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL_SOCK" = "yes"; then

  for i in  \
    /var/run/mysqld/mysqld.sock \
    /var/tmp/mysql.sock \
    /var/run/mysql/mysql.sock \
    /var/lib/mysql/mysql.sock \
    /var/mysql/mysql.sock \
    /usr/local/mysql/var/mysql.sock \
    /Private/tmp/mysql.sock \
    /private/tmp/mysql.sock \
    /tmp/mysql.sock \
  ; do
    if test -r $i; then
      MYSQL_SOCK=$i
      break 2
    fi
  done

  if test -n "$MYSQL_SOCK"; then

cat >>confdefs.h <<_ACEOF
#define PHP_MYSQL_UNIX_SOCK_ADDR "$MYSQL_SOCK"
_ACEOF

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MYSQL_SOCK" >&5
$as_echo "$MYSQL_SOCK" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


$as_echo "#define HAVE_MYSQL 1" >>confdefs.h


  ext_builddir=ext/mysql
  ext_srcdir=$abs_srcdir/ext/mysql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MYSQL_SHARED=no


  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MYSQL_SHARED=yes

  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mysql="$shared_objects_mysql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysql.so '$ext_builddir'/phpmysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(MYSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(PHPMYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmysql.$suffix: $ext_builddir/phpmysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysql.$suffix \$(phplibdir)

$ext_builddir/phpmysql.$suffix: \$(shared_objects_mysql) \$(PHPMYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysql.so '$ext_builddir'/mysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) -L$(top_builddir)/netware -lphp5lib $(QL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysql) $(MYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysql.$suffix: $ext_builddir/mysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysql.$suffix \$(phplibdir)

$ext_builddir/mysql.$suffix: \$(shared_objects_mysql) \$(MYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_MYSQL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MYSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mysql"
        ;;
      *)


  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mysql

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SHARED_LIBADD"


  if test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL" = "mysqlnd"; then

  am_i_shared=$PHP_MYSQL_SHARED
  is_it_shared=$PHP_MYSQLND_SHARED
  is_it_enabled=$PHP_MYSQLND
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension mysql to build statically, but it
depends on extension mysqlnd, which you've configured to build shared.
You either need to build mysql shared or build mysqlnd statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension mysql, which depends on extension mysqlnd,
but you've either not enabled mysqlnd, or have disabled it.
" "$LINENO" 5
  fi


$as_echo "#define MYSQL_USE_MYSQLND 1" >>confdefs.h

  fi
fi



php_with_mysqli=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MySQLi support" >&5
$as_echo_n "checking for MySQLi support... " >&6; }

# Check whether --with-mysqli was given.
if test "${with_mysqli+set}" = set; then :
  withval=$with_mysqli; PHP_MYSQLI=$withval
else

  PHP_MYSQLI=no
  test "$PHP_ENABLE_ALL" && PHP_MYSQLI=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQLI in
shared,*)
  PHP_MYSQLI=`echo "$PHP_MYSQLI"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MYSQLI=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_embedded_mysqli=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable embedded MySQLi support" >&5
$as_echo_n "checking whether to enable embedded MySQLi support... " >&6; }
# Check whether --enable-embedded_mysqli was given.
if test "${enable_embedded_mysqli+set}" = set; then :
  enableval=$enable_embedded_mysqli; PHP_EMBEDDED_MYSQLI=$enableval
else

  PHP_EMBEDDED_MYSQLI=no


fi


ext_output=$PHP_EMBEDDED_MYSQLI
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_MYSQLI" = "yes" || test "$PHP_MYSQLI" = "mysqlnd"; then
    PHP_MYSQLND_ENABLED=yes

elif test "$PHP_MYSQLI" != "no"; then

  MYSQL_CONFIG=$PHP_MYSQLI

  MYSQL_LIB_NAME='mysqlclient'
  if test "$PHP_EMBEDDED_MYSQLI" = "yes"; then

$as_echo "#define HAVE_EMBEDDED_MYSQLI 1" >>confdefs.h

    MYSQL_LIB_CFG='--libmysqld-libs'
        mysqli_extra_sources="mysqli_embedded.c"
  elif test "$enable_maintainer_zts" = "yes"; then
    MYSQL_LIB_CFG='--libs_r'
    MYSQL_LIB_NAME='mysqlclient_r'
  else
    MYSQL_LIB_CFG='--libs'
  fi

  if test -x "$MYSQL_CONFIG" && $MYSQL_CONFIG $MYSQL_LIB_CFG > /dev/null 2>&1; then
    MYSQLI_INCLINE=`$MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
    MYSQLI_LIBLINE=`$MYSQL_CONFIG $MYSQL_LIB_CFG | $SED -e "s/'//g"`
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: mysql_config not found" >&5
$as_echo "mysql_config not found" >&6; }
    as_fn_error $? "Please reinstall the mysql distribution" "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $MYSQLI_LIBLINE
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIB_NAME''_mysql_set_server_option" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_set_server_option in -l$MYSQL_LIB_NAME" >&5
$as_echo_n "checking for mysql_set_server_option in -l$MYSQL_LIB_NAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIB_NAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_set_server_option ();
int
main ()
{
return mysql_set_server_option ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  for ac_i in $MYSQLI_INCLINE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  for ac_i in $MYSQLI_LIBLINE; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MYSQLI_SHARED_LIBADD="$MYSQLI_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        MYSQLI_SHARED_LIBADD="-L$ai_p $MYSQLI_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQLI_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQLI_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


$as_echo "#define HAVE_MYSQLILIB 1" >>confdefs.h


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="$MYSQLI_LIBLINE"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIB_NAME''_mysql_set_character_set" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_set_character_set in -l$MYSQL_LIB_NAME" >&5
$as_echo_n "checking for mysql_set_character_set in -l$MYSQL_LIB_NAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIB_NAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_set_character_set ();
int
main ()
{
return mysql_set_character_set ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_character_set

      as_fn_error $? "MySQLI doesn't support versions < 4.1.13 (for MySQL 4.1.x) and < 5.0.7 for (MySQL 5.0.x) anymore. Please update your libraries." "$LINENO" 5


fi



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_set_server_option

    as_fn_error $? "wrong mysql library version or lib not found. Check config.log for more information." "$LINENO" 5


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $MYSQLI_LIBLINE
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIB_NAME''_mysql_stmt_next_result" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME" >&5
$as_echo_n "checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIB_NAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_stmt_next_result ();
int
main ()
{
return mysql_stmt_next_result ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_STMT_NEXT_RESULT 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIB_NAME_mysql_stmt_next_result



fi

fi

if test "$PHP_MYSQLI" != "no"; then
  mysqli_sources="mysqli.c mysqli_api.c mysqli_prop.c mysqli_nonapi.c \
                  mysqli_fe.c mysqli_report.c mysqli_driver.c mysqli_warning.c \
                  mysqli_exception.c mysqli_result_iterator.c $mysqli_extra_sources"

  ext_builddir=ext/mysqli
  ext_srcdir=$abs_srcdir/ext/mysqli

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MYSQLI_SHARED=no


  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysqli"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MYSQLI_SHARED=yes

  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mysqli="$shared_objects_mysqli $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysqli.so '$ext_builddir'/phpmysqli.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(MYSQLI_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(PHPMYSQLI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysqli.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysqli.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmysqli.$suffix: $ext_builddir/phpmysqli.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysqli.$suffix \$(phplibdir)

$ext_builddir/phpmysqli.$suffix: \$(shared_objects_mysqli) \$(PHPMYSQLI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysqli.so '$ext_builddir'/mysqli.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) -L$(top_builddir)/netware -lphp5lib $(QLI_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqli) $(MYSQLI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysqli.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysqli.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqli"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysqli.$suffix: $ext_builddir/mysqli.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysqli.$suffix \$(phplibdir)

$ext_builddir/mysqli.$suffix: \$(shared_objects_mysqli) \$(MYSQLI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_MYSQLI 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MYSQLI_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mysqli"
        ;;
      *)


  case ext/mysqli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqli/"; ac_bdir="ext/mysqli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqli_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysqli"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mysqli

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQLI_SHARED_LIBADD"



    for header_file in ext/mysqli/php_mysqli_structs.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



  if test "$PHP_MYSQLI" = "yes" || test "$PHP_MYSQLI" = "mysqlnd"; then

  am_i_shared=$PHP_MYSQLI_SHARED
  is_it_shared=$PHP_MYSQLND_SHARED
  is_it_enabled=$PHP_MYSQLND
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension mysqli to build statically, but it
depends on extension mysqlnd, which you've configured to build shared.
You either need to build mysqli shared or build mysqlnd statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension mysqli, which depends on extension mysqlnd,
but you've either not enabled mysqlnd, or have disabled it.
" "$LINENO" 5
  fi


$as_echo "#define MYSQLI_USE_MYSQLND 1" >>confdefs.h



    for header_file in ext/mysqli/mysqli_mysqlnd.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


  else


    for header_file in ext/mysqli/mysqli_libmysql.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


  fi
fi


if test -z "$SED"; then
  PHP_OCI8_SED="sed";
else
  PHP_OCI8_SED="$SED";
fi

PHP_OCI8_TAIL1=`echo a | tail -n1 2>/dev/null`
if test "$PHP_OCI8_TAIL1" = "a"; then
    PHP_OCI8_TAIL1="tail -n1"
else
    PHP_OCI8_TAIL1="tail -1"
fi











php_with_oci8=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Oracle Database OCI8 support" >&5
$as_echo_n "checking for Oracle Database OCI8 support... " >&6; }

# Check whether --with-oci8 was given.
if test "${with_oci8+set}" = set; then :
  withval=$with_oci8; PHP_OCI8=$withval
else

  PHP_OCI8=no
  test "$PHP_ENABLE_ALL" && PHP_OCI8=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OCI8 in
shared,*)
  PHP_OCI8=`echo "$PHP_OCI8"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_OCI8=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_OCI8" != "no"; then

  if test -z "$PHP_OCI8"; then
        as_fn_error $? "Empty parameter value passed to --with-oci8" "$LINENO" 5
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking PHP version" >&5
$as_echo_n "checking PHP version... " >&6; }

  tmp_version=$PHP_VERSION
  if test -z "$tmp_version"; then
    if test -z "$PHP_CONFIG"; then
      as_fn_error $? "php-config not found" "$LINENO" 5
    fi
    php_version=`$PHP_CONFIG --version 2>/dev/null|head -n 1|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
  else
    php_version=`echo "$tmp_version"|$PHP_OCI8_SED -e 's#\([0-9]\.[0-9]*\.[0-9]*\)\(.*\)#\1#'`
  fi

  if test -z "$php_version"; then
    as_fn_error $? "failed to detect PHP version, please report" "$LINENO" 5
  fi

  ac_IFS=$IFS
  IFS="."
  set $php_version
  IFS=$ac_IFS
  oci8_php_version=`expr $1 \* 1000000 + $2 \* 1000 + $3`

  if test "$oci8_php_version" -lt "4003009"; then
    as_fn_error $? "You need at least PHP 4.3.9 to be able to use this version of OCI8. PHP $php_version found" "$LINENO" 5
  elif test "$oci8_php_version" -ge "6000000"; then
    as_fn_error $? "This version of OCI8 is not compatible with PHP 6 or higher" "$LINENO" 5
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_version, ok" >&5
$as_echo "$php_version, ok" >&6; }
  fi


  # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long int" >&5
$as_echo_n "checking size of long int... " >&6; }
if ${ac_cv_sizeof_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long int))" "ac_cv_sizeof_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_int" >&5
$as_echo "$ac_cv_sizeof_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
_ACEOF


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking checking if we're on a 64-bit platform" >&5
$as_echo_n "checking checking if we're on a 64-bit platform... " >&6; }
  if test "$ac_cv_sizeof_long_int" = "4"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    PHP_OCI8_OH_LIBDIR=lib32
    PHP_OCI8_IC_LIBDIR_SUFFIX=""
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
    PHP_OCI8_OH_LIBDIR=lib
    PHP_OCI8_IC_LIBDIR_SUFFIX=64
  fi


  PHP_OCI8_INSTANT_CLIENT="no"

            if test "$PHP_OCI8" = "yes" && test -z "$ORACLE_HOME"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: OCI8 extension: ORACLE_HOME is not set, looking for default Oracle Instant Client instead" >&5
$as_echo "$as_me: WARNING: OCI8 extension: ORACLE_HOME is not set, looking for default Oracle Instant Client instead" >&2;}
    PHP_OCI8=instantclient
  fi

  if test "`echo $PHP_OCI8`" = "instantclient"; then
    PHP_OCI8_INSTANT_CLIENT="yes"
  elif test "`echo $PHP_OCI8 | cut -d, -f2`" = "instantclient"; then
    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f3`"
    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f1,4`"
    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
	PHP_OCI8_INSTANT_CLIENT="yes"
    fi
    if test -z "$PHP_OCI8"; then
	PHP_OCI8=yes
    fi
  elif test "`echo $PHP_OCI8 | cut -d, -f1`" = "instantclient"; then
    PHP_OCI8_INSTANT_CLIENT="`echo $PHP_OCI8 | cut -d, -f2`"
    PHP_OCI8="`echo $PHP_OCI8 | cut -d, -f3,4`"
    if test "$PHP_OCI8_INSTANT_CLIENT" = ""; then
	PHP_OCI8_INSTANT_CLIENT="yes"
    fi
    if test -z "$PHP_OCI8"; then
	PHP_OCI8=yes
    fi
  fi

  if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle ORACLE_HOME install directory" >&5
$as_echo_n "checking Oracle ORACLE_HOME install directory... " >&6; }

    if test "$PHP_OCI8" = "yes"; then
      OCI8_DIR=$ORACLE_HOME
    else
      OCI8_DIR=$PHP_OCI8
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCI8_DIR" >&5
$as_echo "$OCI8_DIR" >&6; }


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking ORACLE_HOME library validity" >&5
$as_echo_n "checking ORACLE_HOME library validity... " >&6; }
  if test ! -d "$OCI8_DIR"; then
    as_fn_error $? "${OCI8_DIR} is not a directory" "$LINENO" 5
  fi
  if test -d "$OCI8_DIR/lib" && test ! -d "$OCI8_DIR/lib32"; then
    OCI8_LIB_DIR=lib
  elif test ! -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
    OCI8_LIB_DIR=lib32
  elif test -d "$OCI8_DIR/lib" && test -d "$OCI8_DIR/lib32"; then
    OCI8_LIB_DIR=$PHP_OCI8_OH_LIBDIR
  else
        if test -f "$OCI8_DIR/libociei.$SHLIB_SUFFIX_NAME"; then
      as_fn_error $? "Expected an ORACLE_HOME top level directory but ${OCI8_DIR} appears to be an Instant Client directory. Try --with-oci8=instantclient,${OCI8_DIR}" "$LINENO" 5
    else
      as_fn_error $? "Oracle library directory not found in ${OCI8_DIR}" "$LINENO" 5
    fi
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCI8_LIB_DIR" >&5
$as_echo "$OCI8_LIB_DIR" >&6; }


    if test -d "$OCI8_DIR/rdbms/public"; then

  if test "$OCI8_DIR/rdbms/public" != "/usr/include"; then

  if test -z "$OCI8_DIR/rdbms/public" || echo "$OCI8_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/rdbms/public
  else

    ep_dir=`echo $OCI8_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCI8_DIR/rdbms/public"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public"
    fi
    if test -d "$OCI8_DIR/rdbms/demo"; then

  if test "$OCI8_DIR/rdbms/demo" != "/usr/include"; then

  if test -z "$OCI8_DIR/rdbms/demo" || echo "$OCI8_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/rdbms/demo
  else

    ep_dir=`echo $OCI8_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCI8_DIR/rdbms/demo"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo"
    fi
    if test -d "$OCI8_DIR/network/public"; then

  if test "$OCI8_DIR/network/public" != "/usr/include"; then

  if test -z "$OCI8_DIR/network/public" || echo "$OCI8_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/network/public
  else

    ep_dir=`echo $OCI8_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCI8_DIR/network/public"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/network/public"
    fi
    if test -d "$OCI8_DIR/plsql/public"; then

  if test "$OCI8_DIR/plsql/public" != "/usr/include"; then

  if test -z "$OCI8_DIR/plsql/public" || echo "$OCI8_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/plsql/public
  else

    ep_dir=`echo $OCI8_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCI8_DIR/plsql/public"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/plsql/public"
    fi

    if test -f "$OCI8_DIR/$OCI8_LIB_DIR/sysliblist"; then

  for ac_i in `cat $OCI8_DIR/$OCI8_LIB_DIR/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    elif test -f "$OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist"; then

  for ac_i in `cat $OCI8_DIR/rdbms/$OCI8_LIB_DIR/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle library version compatibility" >&5
$as_echo_n "checking Oracle library version compatibility... " >&6; }
  OCI8_LCS_BASE=$OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME
  OCI8_LCS=`ls $OCI8_LCS_BASE.*.1 2> /dev/null | $PHP_OCI8_TAIL1`  # Oracle 10g, 11g etc
  if test -s "$OCI8_DIR/orainst/unix.rgs"; then
    OCI8_ORACLE_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | $PHP_OCI8_SED 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
    test -z "$OCI8_ORACLE_VERSION" && OCI8_ORACLE_VERSION=7.3
  elif test -f "$OCI8_LCS"; then
        OCI8_ORACLE_VERSION=`echo $OCI8_LCS | $PHP_OCI8_SED -e 's/.*\.\(.*\)\.1$/\1.1/'`
  elif test -f $OCI8_LCS_BASE.9.0; then
        OCI8_ORACLE_VERSION=9.0
  elif test -f $OCI8_LCS_BASE.8.0; then
    OCI8_ORACLE_VERSION=8.1
  elif test -f $OCI8_LCS_BASE.1.0; then
    OCI8_ORACLE_VERSION=8.0
  elif test -f $OCI8_DIR/$OCI8_LIB_DIR/libclntsh.a; then
    if test -f $OCI8_DIR/$OCI8_LIB_DIR/libcore4.a; then
      OCI8_ORACLE_VERSION=8.0
    else
      OCI8_ORACLE_VERSION=8.1
    fi
  else
    as_fn_error $? "Oracle libclntsh.$SHLIB_SUFFIX_NAME client library not found" "$LINENO" 5
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCI8_ORACLE_VERSION" >&5
$as_echo "$OCI8_ORACLE_VERSION" >&6; }


    case $OCI8_ORACLE_VERSION in
      7.3|8.0|8.1)
	as_fn_error $? "Oracle client libraries < 9.2 are not supported" "$LINENO" 5
	;;

      9.0)

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
	  -L$OCI8_DIR/$OCI8_LIB_DIR $OCI8_SHARED_LIBADD
	"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCIEnvNlsCreate in -lclntsh" >&5
$as_echo_n "checking for OCIEnvNlsCreate in -lclntsh... " >&6; }
if ${ac_cv_lib_clntsh_OCIEnvNlsCreate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lclntsh  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCIEnvNlsCreate ();
int
main ()
{
return OCIEnvNlsCreate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_clntsh_OCIEnvNlsCreate=yes
else
  ac_cv_lib_clntsh_OCIEnvNlsCreate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_clntsh_OCIEnvNlsCreate" >&5
$as_echo "$ac_cv_lib_clntsh_OCIEnvNlsCreate" >&6; }
if test "x$ac_cv_lib_clntsh_OCIEnvNlsCreate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

	  OCI8_ORACLE_VERSION=9.2


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIEnvNlsCreate

	  as_fn_error $? "Oracle client libraries < 9.2 are not supported" "$LINENO" 5


fi

	;;

      *)

$as_echo "#define HAVE_OCI_LOB_READ2 1" >>confdefs.h

	;;
    esac



  case clntsh in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh"
    else


  case clntsh in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lclntsh"
   ;;
  esac


    fi
   ;;
  esac



  if test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$OCI8_DIR/$OCI8_LIB_DIR" != "/usr/lib"; then

  if test -z "$OCI8_DIR/$OCI8_LIB_DIR" || echo "$OCI8_DIR/$OCI8_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/$OCI8_LIB_DIR
  else

    ep_dir=`echo $OCI8_DIR/$OCI8_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCI8_DIR/$OCI8_LIB_DIR"`
  fi


      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi


  ext_builddir=ext/oci8
  ext_srcdir=$abs_srcdir/ext/oci8

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_OCI8_SHARED=no


  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC oci8"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_OCI8_SHARED=yes

  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(OCI8_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)

$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(8_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)

$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_OCI8 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_OCI8_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC oci8"
        ;;
      *)


  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=oci8

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


$as_echo "#define HAVE_OCI8 1" >>confdefs.h




  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"





  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"





  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"





cat >>confdefs.h <<_ACEOF
#define PHP_OCI8_DEF_DIR "$OCI8_DIR"
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_OCI8_DEF_SHARED_LIBADD "$OCI8_SHARED_LIBADD"
_ACEOF


  else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle Instant Client directory" >&5
$as_echo_n "checking Oracle Instant Client directory... " >&6; }

    if test "$PHP_OCI8_INSTANT_CLIENT" = "yes"; then
                                    PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib/libclntsh.* 2> /dev/null | $PHP_OCI8_TAIL1 | $PHP_OCI8_SED -e 's#/libclntsh[^/]*##'`
      if test -z "$PHP_OCI8_INSTANT_CLIENT"; then
	as_fn_error $? "Oracle Instant Client directory /usr/lib/oracle/.../client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib libraries not found. Try --with-oci8=instantclient,DIR" "$LINENO" 5
      fi
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_OCI8_INSTANT_CLIENT" >&5
$as_echo "$PHP_OCI8_INSTANT_CLIENT" >&6; }

    OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle Instant Client SDK header directory" >&5
$as_echo_n "checking Oracle Instant Client SDK header directory... " >&6; }

        OCISDKRPMINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`

        OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include

        OCISDKMANINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!\(.*\)/lib/*$!\1/include!'`

    if test -f "$OCISDKRPMINC/oci.h"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCISDKRPMINC" >&5
$as_echo "$OCISDKRPMINC" >&6; }

  if test "$OCISDKRPMINC" != "/usr/include"; then

  if test -z "$OCISDKRPMINC" || echo "$OCISDKRPMINC" | grep '^/' >/dev/null ; then
    ai_p=$OCISDKRPMINC
  else

    ep_dir=`echo $OCISDKRPMINC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCISDKRPMINC"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8INCDIR=$OCISDKRPMINC
    elif test -f "$OCISDKZIPINC/oci.h"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCISDKZIPINC" >&5
$as_echo "$OCISDKZIPINC" >&6; }

  if test "$OCISDKZIPINC" != "/usr/include"; then

  if test -z "$OCISDKZIPINC" || echo "$OCISDKZIPINC" | grep '^/' >/dev/null ; then
    ai_p=$OCISDKZIPINC
  else

    ep_dir=`echo $OCISDKZIPINC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCISDKZIPINC"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8INCDIR=$OCISDKZIPINC
    elif test -f "$OCISDKMANINC/oci.h"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCISDKMANINC" >&5
$as_echo "$OCISDKMANINC" >&6; }

  if test "$OCISDKMANINC" != "/usr/include"; then

  if test -z "$OCISDKMANINC" || echo "$OCISDKMANINC" | grep '^/' >/dev/null ; then
    ai_p=$OCISDKMANINC
  else

    ep_dir=`echo $OCISDKMANINC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OCISDKMANINC"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      OCI8INCDIR=$OCISDKMANINC
    else
      as_fn_error $? "Oracle Instant Client SDK header files not found" "$LINENO" 5
    fi

    OCISYSLIBLIST=`echo "$OCI8INCDIR" | $PHP_OCI8_SED -e 's!\(.*\)/include$!\1/demo/sysliblist!'`
    if test -f "$OCISYSLIBLIST"; then

  for ac_i in `cat $OCISYSLIBLIST`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="-L$ai_p $OCI8_SYSLIB"
        test -n "$ld_runpath_switch" && OCI8_SYSLIB="$ld_runpath_switch$ai_p $OCI8_SYSLIB"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle Instant Client library version compatibility" >&5
$as_echo_n "checking Oracle Instant Client library version compatibility... " >&6; }
  OCI8_LCS_BASE=$PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME
  OCI8_LCS=`ls $OCI8_LCS_BASE.*.1 2> /dev/null | $PHP_OCI8_TAIL1`  # Oracle 10g, 11g etc
  OCI8_NNZ=`ls $PHP_OCI8_INSTANT_CLIENT/libnnz*.$SHLIB_SUFFIX_NAME 2> /dev/null | $PHP_OCI8_TAIL1`
  if test -f "$OCI8_NNZ" && test -f "$OCI8_LCS"; then
    if test ! -f "$OCI8_LCS_BASE"; then
      as_fn_error $? "Link from $OCI8_LCS_BASE to $OCI8_LCS_BASE.*.1 not found" "$LINENO" 5
    fi
    OCI8_ORACLE_VERSION=`echo $OCI8_LCS | $PHP_OCI8_SED -e 's/.*\.\(.*\)\.1$/\1.1/'`
  else
    as_fn_error $? "Oracle Instant Client libraries libnnz.$SHLIB_SUFFIX_NAME and libclntsh.$SHLIB_SUFFIX_NAME not found" "$LINENO" 5
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OCI8_ORACLE_VERSION" >&5
$as_echo "$OCI8_ORACLE_VERSION" >&6; }



  case clntsh in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh"
    else


  case clntsh in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lclntsh"
   ;;
  esac


    fi
   ;;
  esac



  if test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/$PHP_LIBDIR" && test "$PHP_OCI8_INSTANT_CLIENT" != "/usr/lib"; then

  if test -z "$PHP_OCI8_INSTANT_CLIENT" || echo "$PHP_OCI8_INSTANT_CLIENT" | grep '^/' >/dev/null ; then
    ai_p=$PHP_OCI8_INSTANT_CLIENT
  else

    ep_dir=`echo $PHP_OCI8_INSTANT_CLIENT|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_OCI8_INSTANT_CLIENT"`
  fi


      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="-L$ai_p $OCI8_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p $OCI8_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi



$as_echo "#define HAVE_OCI_INSTANT_CLIENT 1" >>confdefs.h


$as_echo "#define HAVE_OCI_LOB_READ2 1" >>confdefs.h



  ext_builddir=ext/oci8
  ext_srcdir=$abs_srcdir/ext/oci8

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_OCI8_SHARED=no


  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC oci8"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_OCI8_SHARED=yes

  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpoci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpoci8.so '$ext_builddir'/phpoci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(OCI8_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(PHPOCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpoci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpoci8.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpoci8.$suffix: $ext_builddir/phpoci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpoci8.$suffix \$(phplibdir)

$ext_builddir/phpoci8.$suffix: \$(shared_objects_oci8) \$(PHPOCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/oci8.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/oci8.so '$ext_builddir'/oci8.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) -L$(top_builddir)/netware -lphp5lib $(8_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_oci8) $(OCI8_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/oci8.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/oci8.$suffix: $ext_builddir/oci8.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.$suffix \$(phplibdir)

$ext_builddir/oci8.$suffix: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_OCI8 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_OCI8_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC oci8"
        ;;
      *)


  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c oci8_lob.c oci8_statement.c oci8_collection.c oci8_interface.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=oci8

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


$as_echo "#define HAVE_OCI8 1" >>confdefs.h




  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"





  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"





  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_ORACLE_VERSION"




  fi
fi












if test -z "$ODBC_TYPE"; then

php_with_adabas=no



# Check whether --with-adabas was given.
if test "${with_adabas+set}" = set; then :
  withval=$with_adabas; PHP_ADABAS=$withval
else

  PHP_ADABAS=no
  test "$PHP_ENABLE_ALL" && PHP_ADABAS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ADABAS in
shared,*)
  PHP_ADABAS=`echo "$PHP_ADABAS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ADABAS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_ADABAS" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Adabas support" >&5
$as_echo_n "checking for Adabas support... " >&6; }
    if test "$PHP_ADABAS" = "yes"; then
      PHP_ADABAS=/usr/local
    fi

  if test "$PHP_ADABAS/incl" != "/usr/include"; then

  if test -z "$PHP_ADABAS/incl" || echo "$PHP_ADABAS/incl" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ADABAS/incl
  else

    ep_dir=`echo $PHP_ADABAS/incl|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ADABAS/incl"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ADABAS/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ADABAS/$PHP_LIBDIR" || echo "$PHP_ADABAS/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ADABAS/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ADABAS/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ADABAS/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

    ODBC_OBJS="$PHP_ADABAS/$PHP_LIBDIR/odbclib.a"
    ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
    $srcdir/build/shtool mkdir -f -p ext/odbc
    rm -f "$ODBC_LIB"
    cp "$ODBC_OBJS" "$ODBC_LIB"


  case sqlptc in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsqlptc $LIBS"
   ;;
  esac




  case sqlrte in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsqlrte $LIBS"
   ;;
  esac




  if test -n "$abs_builddir/ext/odbc"; then

  if test "$abs_builddir/ext/odbc" != "/usr/$PHP_LIBDIR" && test "$abs_builddir/ext/odbc" != "/usr/lib"; then

  if test -z "$abs_builddir/ext/odbc" || echo "$abs_builddir/ext/odbc" | grep '^/' >/dev/null ; then
    ai_p=$abs_builddir/ext/odbc
  else

    ep_dir=`echo $abs_builddir/ext/odbc|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$abs_builddir/ext/odbc"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case odbc_adabas in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lodbc_adabas $LIBS"
   ;;
  esac




    ODBC_TYPE=adabas
    ODBC_INCDIR=$PHP_ADABAS/incl

if ! test -f "$ODBC_INCDIR/sqlext.h"; then
  as_fn_error $? "ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" "$LINENO" 5
fi


$as_echo "#define HAVE_ADABAS 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_sapdb=no



# Check whether --with-sapdb was given.
if test "${with_sapdb+set}" = set; then :
  withval=$with_sapdb; PHP_SAPDB=$withval
else

  PHP_SAPDB=no
  test "$PHP_ENABLE_ALL" && PHP_SAPDB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SAPDB in
shared,*)
  PHP_SAPDB=`echo "$PHP_SAPDB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SAPDB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_SAPDB" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SAP DB support" >&5
$as_echo_n "checking for SAP DB support... " >&6; }
    if test "$PHP_SAPDB" = "yes"; then
      PHP_SAPDB=/usr/local
    fi

  if test "$PHP_SAPDB/incl" != "/usr/include"; then

  if test -z "$PHP_SAPDB/incl" || echo "$PHP_SAPDB/incl" | grep '^/' >/dev/null ; then
    ai_p=$PHP_SAPDB/incl
  else

    ep_dir=`echo $PHP_SAPDB/incl|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_SAPDB/incl"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  if test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_SAPDB/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_SAPDB/$PHP_LIBDIR" || echo "$PHP_SAPDB/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_SAPDB/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_SAPDB/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_SAPDB/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi



  case sqlod in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsqlod $LIBS"
   ;;
  esac


    ODBC_TYPE=sapdb

$as_echo "#define HAVE_SAPDB 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_solid=no



# Check whether --with-solid was given.
if test "${with_solid+set}" = set; then :
  withval=$with_solid; PHP_SOLID=$withval
else

  PHP_SOLID=no
  test "$PHP_ENABLE_ALL" && PHP_SOLID=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOLID in
shared,*)
  PHP_SOLID=`echo "$PHP_SOLID"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SOLID=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_SOLID" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Solid support" >&5
$as_echo_n "checking for Solid support... " >&6; }
    if test "$PHP_SOLID" = "yes"; then
      PHP_SOLID=/usr/local/solid
    fi
    ODBC_INCDIR=$PHP_SOLID/include
    ODBC_LIBDIR=$PHP_SOLID/$PHP_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=solid
    if test -f $ODBC_LIBDIR/soc*35.a; then

$as_echo "#define HAVE_SOLID_35 1" >>confdefs.h

    elif test -f $ODBC_LIBDIR/scl*30.a; then

$as_echo "#define HAVE_SOLID_30 1" >>confdefs.h

    elif test -f $ODBC_LIBDIR/scl*23.a; then

$as_echo "#define HAVE_SOLID 1" >>confdefs.h

    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Solid library file" >&5
$as_echo_n "checking Solid library file... " >&6; }
  ac_solid_uname_r=`uname -r 2>/dev/null`
  ac_solid_uname_s=`uname -s 2>/dev/null`
  case $ac_solid_uname_s in
    AIX) ac_solid_os=a3x;;   # a4x for AIX4/ Solid 2.3/3.0 only
    HP-UX) ac_solid_os=h9x;; # h1x for hpux11, h0x for hpux10
    IRIX) ac_solid_os=irx;;  # Solid 2.3(?)/ 3.0 only
    Linux)
      if ldd -v /bin/sh | grep GLIBC > /dev/null; then

$as_echo "#define SS_LINUX 1" >>confdefs.h

        ac_solid_os=l2x
      else

$as_echo "#define SS_LINUX 1" >>confdefs.h

        ac_solid_os=lux
      fi;;
    SunOS)
      ac_solid_os=ssx;; # should we deal with SunOS 4?
    FreeBSD)
      if test `expr $ac_solid_uname_r : '\(.\)'` -gt "2"; then

$as_echo "#define SS_FBX 1" >>confdefs.h

        ac_solid_os=fex
      else

$as_echo "#define SS_FBX 1" >>confdefs.h

        ac_solid_os=fbx
      fi;;
  esac

  if test -f $ODBC_LIBDIR/soc${ac_solid_os}35.a; then
    ac_solid_version=35
    ac_solid_prefix=soc
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}30.a; then
    ac_solid_version=30
    ac_solid_prefix=scl
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}23.a; then
    ac_solid_version=23
    ac_solid_prefix=scl
  fi

#
# Check for the library files, and setup the ODBC_LIBS path...
#
if test ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -a \
  ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a; then
  #
  # we have an error and should bail out, as we can't find the libs!
  #
  echo ""
  echo "*********************************************************************"
  echo "* Unable to locate $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so or $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
  echo "* Please correct this by creating the following links and reconfiguring:"
  echo "* $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
  echo "* $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so"
  echo "*********************************************************************"
else
  ODBC_LFLAGS=-L$ODBC_LIBDIR
  ODBC_LIBS=-l${ac_solid_prefix}${ac_solid_os}${ac_solid_version}
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: \`echo $ODBC_LIBS | sed -e 's!.*/!!'\`" >&5
$as_echo "\`echo $ODBC_LIBS | sed -e 's!.*/!!'\`" >&6; }

  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_ibm_db2=no



# Check whether --with-ibm-db2 was given.
if test "${with_ibm_db2+set}" = set; then :
  withval=$with_ibm_db2; PHP_IBM_DB2=$withval
else

  PHP_IBM_DB2=no
  test "$PHP_ENABLE_ALL" && PHP_IBM_DB2=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IBM_DB2 in
shared,*)
  PHP_IBM_DB2=`echo "$PHP_IBM_DB2"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_IBM_DB2=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_IBM_DB2" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IBM DB2 support" >&5
$as_echo_n "checking for IBM DB2 support... " >&6; }
    if test "$PHP_IBM_DB2" = "yes"; then
      ODBC_INCDIR=/home/db2inst1/sqllib/include
      ODBC_LIBDIR=/home/db2inst1/sqllib/lib
    else
      ODBC_INCDIR=$PHP_IBM_DB2/include
      ODBC_LIBDIR=$PHP_IBM_DB2/$PHP_LIBDIR
    fi


if ! test -f "$ODBC_INCDIR/sqlcli1.h"; then
  as_fn_error $? "ODBC header file '$ODBC_INCDIR/sqlcli1.h' not found!" "$LINENO" 5
fi


    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_TYPE=ibm-db2
    ODBC_LIBS=-ldb2


  old_LIBS=$LIBS
  LIBS="
      $ODBC_LFLAGS $ODBC_LIBS
     $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char SQLExecute();
    int main() {
      SQLExecute();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS


$as_echo "#define HAVE_IBMDB2 1" >>confdefs.h

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }


else

    LIBS=$old_LIBS

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
      as_fn_error $? "
build test failed. Please check the config.log for details.
You need to source your DB2 environment before running PHP configure:
# . \$IBM_DB2/db2profile
" "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_odbcrouter=no



# Check whether --with-ODBCRouter was given.
if test "${with_ODBCRouter+set}" = set; then :
  withval=$with_ODBCRouter; PHP_ODBCROUTER=$withval
else

  PHP_ODBCROUTER=no
  test "$PHP_ENABLE_ALL" && PHP_ODBCROUTER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ODBCROUTER in
shared,*)
  PHP_ODBCROUTER=`echo "$PHP_ODBCROUTER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ODBCROUTER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_ODBCROUTER" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ODBCRouter.com support" >&5
$as_echo_n "checking for ODBCRouter.com support... " >&6; }
    if test "$PHP_ODBCROUTER" = "yes"; then
      PHP_ODBCROUTER=/usr
    fi
    ODBC_INCDIR=$PHP_ODBCROUTER/include
    ODBC_LIBDIR=$PHP_ODBCROUTER/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lodbcsdk
    ODBC_TYPE=ODBCRouter

$as_echo "#define HAVE_ODBC_ROUTER 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_empress=no



# Check whether --with-empress was given.
if test "${with_empress+set}" = set; then :
  withval=$with_empress; PHP_EMPRESS=$withval
else

  PHP_EMPRESS=no
  test "$PHP_ENABLE_ALL" && PHP_EMPRESS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EMPRESS in
shared,*)
  PHP_EMPRESS=`echo "$PHP_EMPRESS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_EMPRESS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_EMPRESS" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Empress support" >&5
$as_echo_n "checking for Empress support... " >&6; }
    if test "$PHP_EMPRESS" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/include/odbc
      ODBC_LIBDIR=$EMPRESSPATH/shlib
    else
      ODBC_INCDIR=$PHP_EMPRESS/include/odbc
      ODBC_LIBDIR=$PHP_EMPRESS/shlib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_TYPE=empress

$as_echo "#define HAVE_EMPRESS 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Empress library file" >&5
$as_echo_n "checking Empress library file... " >&6; }
  ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
  if test ! -f $ODBC_LIBS; then
    ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: \`echo $ODBC_LIBS | sed -e 's!.*/!!'\`" >&5
$as_echo "\`echo $ODBC_LIBS | sed -e 's!.*/!!'\`" >&6; }

  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_empress_bcs=no



# Check whether --with-empress-bcs was given.
if test "${with_empress_bcs+set}" = set; then :
  withval=$with_empress_bcs; PHP_EMPRESS_BCS=$withval
else

  PHP_EMPRESS_BCS=no
  test "$PHP_ENABLE_ALL" && PHP_EMPRESS_BCS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EMPRESS_BCS in
shared,*)
  PHP_EMPRESS_BCS=`echo "$PHP_EMPRESS_BCS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_EMPRESS_BCS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_EMPRESS_BCS" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Empress local access support" >&5
$as_echo_n "checking for Empress local access support... " >&6; }
    if test "$PHP_EMPRESS_BCS" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/include/odbc
      ODBC_LIBDIR=$EMPRESSPATH/shlib
    else
      ODBC_INCDIR=$PHP_EMPRESS_BCS/include/odbc
      ODBC_LIBDIR=$PHP_EMPRESS_BCS/shlib
    fi
    CC="empocc -bcs";export CC;
    LD="empocc -bcs";export LD;
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    LIST=`empocc -listlines -bcs -o a a.c`

    NEWLIST=
    for I in $LIST
    do
      case $I in
        $EMPRESSPATH/odbccl/lib/* | \
        $EMPRESSPATH/rdbms/lib/* | \
        $EMPRESSPATH/common/lib/*)
              NEWLIST="$NEWLIST $I"
              ;;
      esac
    done
    ODBC_LIBS="-lempphpbcs -lms -lmscfg -lbasic -lbasic_os -lnlscstab -lnlsmsgtab -lm -ldl -lcrypt"
    ODBC_TYPE=empress-bcs

$as_echo "#define HAVE_EMPRESS 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Empress local access library file" >&5
$as_echo_n "checking Empress local access library file... " >&6; }
  ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
  if test ! -f $ODBCBCS_LIBS; then
    ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: \`echo $ODBCBCS_LIBS | sed -e 's!.*/!!'\`" >&5
$as_echo "\`echo $ODBCBCS_LIBS | sed -e 's!.*/!!'\`" >&6; }

  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_birdstep=no



# Check whether --with-birdstep was given.
if test "${with_birdstep+set}" = set; then :
  withval=$with_birdstep; PHP_BIRDSTEP=$withval
else

  PHP_BIRDSTEP=no
  test "$PHP_ENABLE_ALL" && PHP_BIRDSTEP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BIRDSTEP in
shared,*)
  PHP_BIRDSTEP=`echo "$PHP_BIRDSTEP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_BIRDSTEP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_BIRDSTEP" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Birdstep support" >&5
$as_echo_n "checking for Birdstep support... " >&6; }
    if test "$PHP_BIRDSTEP" = "yes"; then
        ODBC_INCDIR=/usr/local/birdstep/include
        ODBC_LIBDIR=/usr/local/birdstep/lib
    else
        ODBC_INCDIR=$PHP_BIRDSTEP/include
        ODBC_LIBDIR=$PHP_BIRDSTEP/$PHP_LIBDIR
    fi

    case $host_alias in
      *aix*)

$as_echo "#define AIX 1" >>confdefs.h
;;
      *hpux*)

$as_echo "#define HPUX 1" >>confdefs.h
;;
      *linux*)

$as_echo "#define LINUX 1" >>confdefs.h
;;
      *qnx*)

$as_echo "#define NEUTRINO 1" >>confdefs.h
;;
      i?86-*-solaris*)

$as_echo "#define ISOLARIS 1" >>confdefs.h
;;
      sparc-*-solaris*)

$as_echo "#define SOLARIS 1" >>confdefs.h
;;
      *unixware*)

$as_echo "#define UNIXWARE 1" >>confdefs.h
;;
    esac

    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=birdstep
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_LIBS="-lCadm -lCdict -lCenc -lCrdm -lCrpc -lCrdbc -lCrm -lCuapi -lutil"

    if test -f "$ODBC_LIBDIR/libCrdbc32.$SHLIB_SUFFIX_NAME"; then
      ODBC_LIBS="-lCrdbc32 -lCadm32 -lCncp32 -lCrm32 -lCsql32 -lCdict32 -lCrdm32 -lCrpc32 -lutil"
    elif test -f "$ODBC_LIBDIR/libCrdbc.$SHLIB_SUFFIX_NAME"; then
      ODBC_LIBS="-lCrdbc -lCadm -lCncp -lCrm -lCsql -lCdict -lCrdm -lCrpc -lutil"
    fi


$as_echo "#define HAVE_BIRDSTEP 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_custom_odbc=no



# Check whether --with-custom-odbc was given.
if test "${with_custom_odbc+set}" = set; then :
  withval=$with_custom_odbc; PHP_CUSTOM_ODBC=$withval
else

  PHP_CUSTOM_ODBC=no
  test "$PHP_ENABLE_ALL" && PHP_CUSTOM_ODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CUSTOM_ODBC in
shared,*)
  PHP_CUSTOM_ODBC=`echo "$PHP_CUSTOM_ODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_CUSTOM_ODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_CUSTOM_ODBC" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a custom ODBC support" >&5
$as_echo_n "checking for a custom ODBC support... " >&6; }
    if test "$PHP_CUSTOM_ODBC" = "yes"; then
      PHP_CUSTOM_ODBC=/usr/local
    fi
    ODBC_INCDIR=$PHP_CUSTOM_ODBC/include
    ODBC_LIBDIR=$PHP_CUSTOM_ODBC/$PHP_LIBDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=$CUSTOM_ODBC_LIBS
    ODBC_TYPE=custom-odbc

$as_echo "#define HAVE_CODBC 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_iodbc=no



# Check whether --with-iodbc was given.
if test "${with_iodbc+set}" = set; then :
  withval=$with_iodbc; PHP_IODBC=$withval
else

  PHP_IODBC=no
  test "$PHP_ENABLE_ALL" && PHP_IODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IODBC in
shared,*)
  PHP_IODBC=`echo "$PHP_IODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_IODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_IODBC" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iODBC support" >&5
$as_echo_n "checking for iODBC support... " >&6; }
    if test -z "$PKG_CONFIG"; then
      # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


    fi
    if test -x "$PKG_CONFIG" && $PKG_CONFIG --exists libiodbc ; then


  if test -n "$PHP_IODBC/$PHP_LIBDIR"; then

  if test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_IODBC/$PHP_LIBDIR" || echo "$PHP_IODBC/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IODBC/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_IODBC/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_IODBC/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case iodbc in
  c|c_r|pthread*) ;;
  *)
      LIBS="-liodbc $LIBS"
   ;;
  esac




      ODBC_TYPE=iodbc
      ODBC_INCLUDE=`$PKG_CONFIG --cflags-only-I libiodbc`
      ODBC_LFLAGS=`$PKG_CONFIG --libs-only-L libiodbc`
      ODBC_LIBS=`$PKG_CONFIG --libs-only-l libiodbc`

  for ac_i in $ODBC_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


$as_echo "#define HAVE_IODBC 1" >>confdefs.h


$as_echo "#define HAVE_ODBC2 1" >>confdefs.h

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
    else
      if test "$PHP_IODBC" = "yes"; then
        PHP_IODBC=/usr/local
      fi


  if test -n "$PHP_IODBC/$PHP_LIBDIR"; then

  if test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_IODBC/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_IODBC/$PHP_LIBDIR" || echo "$PHP_IODBC/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IODBC/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_IODBC/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_IODBC/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case iodbc in
  c|c_r|pthread*) ;;
  *)
      LIBS="-liodbc $LIBS"
   ;;
  esac





  if test "$PHP_IODBC/include" != "/usr/include"; then

  if test -z "$PHP_IODBC/include" || echo "$PHP_IODBC/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IODBC/include
  else

    ep_dir=`echo $PHP_IODBC/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_IODBC/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test "1"; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      ODBC_TYPE=iodbc
      ODBC_INCLUDE=-I$PHP_IODBC/include
      ODBC_LFLAGS=-L$PHP_IODBC/$PHP_LIBDIR
      ODBC_LIBS=-liodbc

$as_echo "#define HAVE_IODBC 1" >>confdefs.h


$as_echo "#define HAVE_ODBC2 1" >>confdefs.h

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
    fi
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_esoob=no



# Check whether --with-esoob was given.
if test "${with_esoob+set}" = set; then :
  withval=$with_esoob; PHP_ESOOB=$withval
else

  PHP_ESOOB=no
  test "$PHP_ENABLE_ALL" && PHP_ESOOB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ESOOB in
shared,*)
  PHP_ESOOB=`echo "$PHP_ESOOB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ESOOB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_ESOOB" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Easysoft ODBC-ODBC Bridge support" >&5
$as_echo_n "checking for Easysoft ODBC-ODBC Bridge support... " >&6; }
    if test "$PHP_ESOOB" = "yes"; then
      PHP_ESOOB=/usr/local/easysoft/oob/client
    fi
    ODBC_INCDIR=$PHP_ESOOB/include
    ODBC_LIBDIR=$PHP_ESOOB/$PHP_LIBDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lesoobclient
    ODBC_TYPE=esoob

$as_echo "#define HAVE_ESOOB 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_unixodbc=no



# Check whether --with-unixODBC was given.
if test "${with_unixODBC+set}" = set; then :
  withval=$with_unixODBC; PHP_UNIXODBC=$withval
else

  PHP_UNIXODBC=no
  test "$PHP_ENABLE_ALL" && PHP_UNIXODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_UNIXODBC in
shared,*)
  PHP_UNIXODBC=`echo "$PHP_UNIXODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_UNIXODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_UNIXODBC" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for unixODBC support" >&5
$as_echo_n "checking for unixODBC support... " >&6; }
    if test "$PHP_UNIXODBC" = "yes"; then
      PHP_UNIXODBC=/usr/local
    fi
    ODBC_INCDIR=$PHP_UNIXODBC/include
    ODBC_LIBDIR=$PHP_UNIXODBC/$PHP_LIBDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lodbc
    ODBC_TYPE=unixODBC

if ! test -f "$ODBC_INCDIR/sqlext.h"; then
  as_fn_error $? "ODBC header file '$ODBC_INCDIR/sqlext.h' not found!" "$LINENO" 5
fi


$as_echo "#define HAVE_UNIXODBC 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }
  fi
fi

if test -z "$ODBC_TYPE"; then

php_with_dbmaker=no



# Check whether --with-dbmaker was given.
if test "${with_dbmaker+set}" = set; then :
  withval=$with_dbmaker; PHP_DBMAKER=$withval
else

  PHP_DBMAKER=no
  test "$PHP_ENABLE_ALL" && PHP_DBMAKER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBMAKER in
shared,*)
  PHP_DBMAKER=`echo "$PHP_DBMAKER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_DBMAKER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac








  if test "$PHP_DBMAKER" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DBMaker support" >&5
$as_echo_n "checking for DBMaker support... " >&6; }
    if test "$PHP_DBMAKER" = "yes"; then
      # find dbmaker's home directory
      DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | $AWK -F: '{print $6}'`

      # check DBMaker version (from 5.0 to 2.0)
      DBMAKER_VERSION=5.0

      while test ! -d $DBMAKER_HOME/$DBMAKER_VERSION -a "$DBMAKER_VERSION" != "2.9"; do
        DM_VER=`echo $DBMAKER_VERSION | sed -e 's/\.//' | $AWK '{ print $1-1;}'`
        MAJOR_V=`echo $DM_VER | $AWK '{ print $1/10; }'  | $AWK -F. '{ print $1; }'`
        MINOR_V=`echo $DM_VER | $AWK '{ print $1%10; }'`
        DBMAKER_VERSION=$MAJOR_V.$MINOR_V
      done

      if test "$DBMAKER_VERSION" = "2.9"; then
        PHP_DBMAKER=$DBMAKER_HOME
      else
        PHP_DBMAKER=$DBMAKER_HOME/$DBMAKER_VERSION
      fi
    fi

    ODBC_INCDIR=$PHP_DBMAKER/include
    ODBC_LIBDIR=$PHP_DBMAKER/$PHP_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS="-ldmapic -lc"
    ODBC_TYPE=dbmaker


$as_echo "#define HAVE_DBMAKER 1" >>confdefs.h


    if test "$ext_shared" = "yes"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes (shared)" >&5
$as_echo "yes (shared)" >&6; }
      ODBC_LIBS="-ldmapic -lc -lm"
      ODBC_SHARED="odbc.la"
    else
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes (static)" >&5
$as_echo "yes (static)" >&6; }


  if test -n "$ODBC_LIBDIR"; then

  if test "$ODBC_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ODBC_LIBDIR" != "/usr/lib"; then

  if test -z "$ODBC_LIBDIR" || echo "$ODBC_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ODBC_LIBDIR
  else

    ep_dir=`echo $ODBC_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ODBC_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case dmapic in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ldmapic $LIBS"
   ;;
  esac





  if test "$ODBC_INCDIR" != "/usr/include"; then

  if test -z "$ODBC_INCDIR" || echo "$ODBC_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ODBC_INCDIR
  else

    ep_dir=`echo $ODBC_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ODBC_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      ODBC_STATIC="libphpext_odbc.la"
    fi
  fi
fi

if test -n "$ODBC_TYPE"; then
  if test "$ODBC_TYPE" != "dbmaker"; then

  for ac_i in $ODBC_LFLAGS $ODBC_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="-L$ai_p $ODBC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $ODBC_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    if test "$ODBC_TYPE" != "birdstep" && test "$ODBC_TYPE" != "solid"; then

$as_echo "#define HAVE_SQLDATASOURCES 1" >>confdefs.h

    fi
  fi


$as_echo "#define HAVE_UODBC 1" >>confdefs.h


  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_SHARED_LIBADD"


  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCDIR"


  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBDIR"



  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCLUDE"





  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LFLAGS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_TYPE"





  ext_builddir=ext/odbc
  ext_srcdir=$abs_srcdir/ext/odbc

  ac_extra=`echo "$ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ODBC_SHARED=no


  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC odbc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ODBC_SHARED=yes

  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_odbc="$shared_objects_odbc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpodbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpodbc.so '$ext_builddir'/phpodbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(ODBC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(PHPODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpodbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpodbc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpodbc.$suffix: $ext_builddir/phpodbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpodbc.$suffix \$(phplibdir)

$ext_builddir/phpodbc.$suffix: \$(shared_objects_odbc) \$(PHPODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/odbc.so '$ext_builddir'/odbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) -L$(top_builddir)/netware -lphp5lib $(C_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_odbc) $(ODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/odbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/odbc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/odbc.$suffix: $ext_builddir/odbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/odbc.$suffix \$(phplibdir)

$ext_builddir/odbc.$suffix: \$(shared_objects_odbc) \$(ODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_ODBC 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ODBC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC odbc"
        ;;
      *)


  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=odbc

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_opcache=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable Zend OPcache support" >&5
$as_echo_n "checking whether to enable Zend OPcache support... " >&6; }
# Check whether --enable-opcache was given.
if test "${enable_opcache+set}" = set; then :
  enableval=$enable_opcache; PHP_OPCACHE=$enableval
else

  PHP_OPCACHE=yes
  test "$PHP_ENABLE_ALL" && PHP_OPCACHE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OPCACHE in
shared,*)
  PHP_OPCACHE=`echo "$PHP_OPCACHE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_OPCACHE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_OPCACHE" != "no"; then

  ac_fn_c_check_func "$LINENO" "mprotect" "ac_cv_func_mprotect"
if test "x$ac_cv_func_mprotect" = xyes; then :


$as_echo "#define HAVE_MPROTECT 1" >>confdefs.h


fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysvipc shared memory support" >&5
$as_echo_n "checking for sysvipc shared memory support... " >&6; }
  if test "$cross_compiling" = yes; then :
  msg=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/wait.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <unistd.h>
#include <string.h>

int main() {
  pid_t pid;
  int status;
  int ipc_id;
  char *shm;
  struct shmid_ds shmbuf;

  ipc_id = shmget(IPC_PRIVATE, 4096, (IPC_CREAT | SHM_R | SHM_W));
  if (ipc_id == -1) {
    return 1;
  }

  shm = shmat(ipc_id, NULL, 0);
  if (shm == (void *)-1) {
    shmctl(ipc_id, IPC_RMID, NULL);
    return 2;
  }

  if (shmctl(ipc_id, IPC_STAT, &shmbuf) != 0) {
    shmdt(shm);
    shmctl(ipc_id, IPC_RMID, NULL);
    return 3;
  }

  shmbuf.shm_perm.uid = getuid();
  shmbuf.shm_perm.gid = getgid();
  shmbuf.shm_perm.mode = 0600;

  if (shmctl(ipc_id, IPC_SET, &shmbuf) != 0) {
    shmdt(shm);
    shmctl(ipc_id, IPC_RMID, NULL);
    return 4;
  }

  shmctl(ipc_id, IPC_RMID, NULL);

  strcpy(shm, "hello");

  pid = fork();
  if (pid < 0) {
    return 5;
  } else if (pid == 0) {
    strcpy(shm, "bye");
    return 6;
  }
  if (wait(&status) != pid) {
    return 7;
  }
  if (!WIFEXITED(status) || WEXITSTATUS(status) != 6) {
    return 8;
  }
  if (strcmp(shm, "bye") != 0) {
    return 9;
  }
  return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

$as_echo "#define HAVE_SHM_IPC 1" >>confdefs.h

    msg=yes
else
  msg=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $msg" >&5
$as_echo "$msg" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mmap() using MAP_ANON shared memory support" >&5
$as_echo_n "checking for mmap() using MAP_ANON shared memory support... " >&6; }
  if test "$cross_compiling" = yes; then :
  msg=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/wait.h>
#include <sys/mman.h>
#include <unistd.h>
#include <string.h>

#ifndef MAP_ANON
# ifdef MAP_ANONYMOUS
#  define MAP_ANON MAP_ANONYMOUS
# endif
#endif
#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

int main() {
  pid_t pid;
  int status;
  char *shm;

  shm = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANON, -1, 0);
  if (shm == MAP_FAILED) {
    return 1;
  }

  strcpy(shm, "hello");

  pid = fork();
  if (pid < 0) {
    return 5;
  } else if (pid == 0) {
    strcpy(shm, "bye");
    return 6;
  }
  if (wait(&status) != pid) {
    return 7;
  }
  if (!WIFEXITED(status) || WEXITSTATUS(status) != 6) {
    return 8;
  }
  if (strcmp(shm, "bye") != 0) {
    return 9;
  }
  return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

$as_echo "#define HAVE_SHM_MMAP_ANON 1" >>confdefs.h

    msg=yes
else
  msg=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $msg" >&5
$as_echo "$msg" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mmap() using /dev/zero shared memory support" >&5
$as_echo_n "checking for mmap() using /dev/zero shared memory support... " >&6; }
  if test "$cross_compiling" = yes; then :
  msg=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/wait.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <string.h>

#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

int main() {
  pid_t pid;
  int status;
  int fd;
  char *shm;

  fd = open("/dev/zero", O_RDWR, S_IRUSR | S_IWUSR);
  if (fd == -1) {
    return 1;
  }

  shm = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
  if (shm == MAP_FAILED) {
    return 2;
  }

  strcpy(shm, "hello");

  pid = fork();
  if (pid < 0) {
    return 5;
  } else if (pid == 0) {
    strcpy(shm, "bye");
    return 6;
  }
  if (wait(&status) != pid) {
    return 7;
  }
  if (!WIFEXITED(status) || WEXITSTATUS(status) != 6) {
    return 8;
  }
  if (strcmp(shm, "bye") != 0) {
    return 9;
  }
  return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

$as_echo "#define HAVE_SHM_MMAP_ZERO 1" >>confdefs.h

    msg=yes
else
  msg=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $msg" >&5
$as_echo "$msg" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mmap() using shm_open() shared memory support" >&5
$as_echo_n "checking for mmap() using shm_open() shared memory support... " >&6; }
  if test "$cross_compiling" = yes; then :
  msg=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/wait.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

int main() {
  pid_t pid;
  int status;
  int fd;
  char *shm;
  char tmpname[4096];

  sprintf(tmpname,"test.shm.%dXXXXXX", getpid());
  if (mktemp(tmpname) == NULL) {
    return 1;
  }
  fd = shm_open(tmpname, O_RDWR | O_CREAT, S_IRUSR | S_IWUSR);
  if (fd == -1) {
    return 2;
  }
  if (ftruncate(fd, 4096) < 0) {
    close(fd);
    shm_unlink(tmpname);
    return 3;
  }

  shm = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
  if (shm == MAP_FAILED) {
    return 4;
  }
  shm_unlink(tmpname);
  close(fd);

  strcpy(shm, "hello");

  pid = fork();
  if (pid < 0) {
    return 5;
  } else if (pid == 0) {
    strcpy(shm, "bye");
    return 6;
  }
  if (wait(&status) != pid) {
    return 7;
  }
  if (!WIFEXITED(status) || WEXITSTATUS(status) != 6) {
    return 8;
  }
  if (strcmp(shm, "bye") != 0) {
    return 9;
  }
  return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

$as_echo "#define HAVE_SHM_MMAP_POSIX 1" >>confdefs.h

    msg=yes
else
  msg=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $msg" >&5
$as_echo "$msg" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mmap() using regular file shared memory support" >&5
$as_echo_n "checking for mmap() using regular file shared memory support... " >&6; }
  if test "$cross_compiling" = yes; then :
  msg=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/wait.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

int main() {
  pid_t pid;
  int status;
  int fd;
  char *shm;
  char tmpname[4096];

  sprintf(tmpname,"test.shm.%dXXXXXX", getpid());
  if (mktemp(tmpname) == NULL) {
    return 1;
  }
  fd = open(tmpname, O_RDWR | O_CREAT, S_IRUSR | S_IWUSR);
  if (fd == -1) {
    return 2;
  }
  if (ftruncate(fd, 4096) < 0) {
    close(fd);
    unlink(tmpname);
    return 3;
  }

  shm = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
  if (shm == MAP_FAILED) {
    return 4;
  }
  unlink(tmpname);
  close(fd);

  strcpy(shm, "hello");

  pid = fork();
  if (pid < 0) {
    return 5;
  } else if (pid == 0) {
    strcpy(shm, "bye");
    return 6;
  }
  if (wait(&status) != pid) {
    return 7;
  }
  if (!WIFEXITED(status) || WEXITSTATUS(status) != 6) {
    return 8;
  }
  if (strcmp(shm, "bye") != 0) {
    return 9;
  }
  return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

$as_echo "#define HAVE_SHM_MMAP_FILE 1" >>confdefs.h

    msg=yes
else
  msg=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $msg" >&5
$as_echo "$msg" >&6; }

flock_type=unknown
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking \"whether flock struct is linux ordered\"" >&5
$as_echo_n "checking \"whether flock struct is linux ordered\"... " >&6; }
if test "$cross_compiling" = yes; then :
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "cannot run test program while cross compiling
See \`config.log' for more details" "$LINENO" 5; }
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

  #include <fcntl.h>
  struct flock lock = { 1, 2, 3, 4, 5 };
  int main() {
    if(lock.l_type == 1 && lock.l_whence == 2 && lock.l_start == 3 && lock.l_len == 4) {
		return 0;
    }
    return 1;
  }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

	flock_type=linux

$as_echo "#define HAVE_FLOCK_LINUX /**/" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: \"yes\"" >&5
$as_echo "\"yes\"" >&6; }

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: \"no\"" >&5
$as_echo "\"no\"" >&6; }
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking \"whether flock struct is BSD ordered\"" >&5
$as_echo_n "checking \"whether flock struct is BSD ordered\"... " >&6; }
if test "$cross_compiling" = yes; then :
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "cannot run test program while cross compiling
See \`config.log' for more details" "$LINENO" 5; }
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

  #include <fcntl.h>
  struct flock lock = { 1, 2, 3, 4, 5 };
  int main() {
    if(lock.l_start == 1 && lock.l_len == 2 && lock.l_type == 4 && lock.l_whence == 5) {
		return 0;
    }
    return 1;
  }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

	flock_type=bsd

$as_echo "#define HAVE_FLOCK_BSD /**/" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: \"yes\"" >&5
$as_echo "\"yes\"" >&6; }

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: \"no\"" >&5
$as_echo "\"no\"" >&6; }
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


if test "$flock_type" == "unknown"; then
	as_fn_error $? "Don't know how to define struct flock on this system, set --enable-opcache=no" "$LINENO" 5
fi


  ext_builddir=ext/opcache
  ext_srcdir=$abs_srcdir/ext/opcache

  ac_extra=

  if test "shared" != "shared" && test "shared" != "yes" && test "" != "cli"; then
    PHP_OPCACHE_SHARED=no


  case ext/opcache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/opcache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/opcache/"; ac_bdir="ext/opcache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ZendAccelerator.c \
	zend_accelerator_blacklist.c \
	zend_accelerator_debug.c \
	zend_accelerator_hash.c \
	zend_accelerator_module.c \
	zend_persist.c \
	zend_persist_calc.c \
	zend_shared_alloc.c \
	zend_accelerator_util_funcs.c \
	shared_alloc_shm.c \
	shared_alloc_mmap.c \
	shared_alloc_posix.c \
	Optimizer/zend_optimizer.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC opcache"
    if test "shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC opcache"
    fi
  else
    if test "shared" = "shared" || test "shared" = "yes"; then
      PHP_OPCACHE_SHARED=yes

  case ext/opcache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/opcache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/opcache/"; ac_bdir="ext/opcache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ZendAccelerator.c \
	zend_accelerator_blacklist.c \
	zend_accelerator_debug.c \
	zend_accelerator_hash.c \
	zend_accelerator_module.c \
	zend_persist.c \
	zend_persist_calc.c \
	zend_shared_alloc.c \
	zend_accelerator_util_funcs.c \
	shared_alloc_shm.c \
	shared_alloc_mmap.c \
	shared_alloc_posix.c \
	Optimizer/zend_optimizer.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_opcache="$shared_objects_opcache $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpopcache.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_opcache) $(PHPOPCACHE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpopcache.so '$ext_builddir'/phpopcache.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_opcache) -L$(top_builddir)/netware -lphp5lib $(OPCACHE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_opcache) $(PHPOPCACHE_SHARED_LIBADD)'
      ;;
  esac

  if test "xyes" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpopcache.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpopcache.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_opcache"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpopcache.$suffix: $ext_builddir/phpopcache.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpopcache.$suffix \$(phplibdir)

$ext_builddir/phpopcache.$suffix: \$(shared_objects_opcache) \$(PHPOPCACHE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/opcache.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_opcache) $(OPCACHE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/opcache.so '$ext_builddir'/opcache.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_opcache) -L$(top_builddir)/netware -lphp5lib $(ACHE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_opcache) $(OPCACHE_SHARED_LIBADD)'
      ;;
  esac

  if test "xyes" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/opcache.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/opcache.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_opcache"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/opcache.$suffix: $ext_builddir/opcache.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/opcache.$suffix \$(phplibdir)

$ext_builddir/opcache.$suffix: \$(shared_objects_opcache) \$(OPCACHE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_OPCACHE 1
_ACEOF

    fi
  fi

  if test "shared" != "shared" && test "shared" != "yes" && test "" = "cli"; then
    PHP_OPCACHE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/opcache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/opcache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/opcache/"; ac_bdir="ext/opcache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ZendAccelerator.c \
	zend_accelerator_blacklist.c \
	zend_accelerator_debug.c \
	zend_accelerator_hash.c \
	zend_accelerator_module.c \
	zend_persist.c \
	zend_persist_calc.c \
	zend_shared_alloc.c \
	zend_accelerator_util_funcs.c \
	shared_alloc_shm.c \
	shared_alloc_mmap.c \
	shared_alloc_posix.c \
	Optimizer/zend_optimizer.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC opcache"
        ;;
      *)


  case ext/opcache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/opcache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/opcache/"; ac_bdir="ext/opcache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ZendAccelerator.c \
	zend_accelerator_blacklist.c \
	zend_accelerator_debug.c \
	zend_accelerator_hash.c \
	zend_accelerator_module.c \
	zend_persist.c \
	zend_persist_calc.c \
	zend_shared_alloc.c \
	zend_accelerator_util_funcs.c \
	shared_alloc_shm.c \
	shared_alloc_mmap.c \
	shared_alloc_posix.c \
	Optimizer/zend_optimizer.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC opcache"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=opcache

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi




    $php_shtool mkdir -p $ext_builddir/Optimizer


fi



php_enable_pcntl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable pcntl support" >&5
$as_echo_n "checking whether to enable pcntl support... " >&6; }
# Check whether --enable-pcntl was given.
if test "${enable_pcntl+set}" = set; then :
  enableval=$enable_pcntl; PHP_PCNTL=$enableval
else

  PHP_PCNTL=no
  test "$PHP_ENABLE_ALL" && PHP_PCNTL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PCNTL in
shared,*)
  PHP_PCNTL=`echo "$PHP_PCNTL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PCNTL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PCNTL" != "no"; then
  for ac_func in fork
do :
  ac_fn_c_check_func "$LINENO" "fork" "ac_cv_func_fork"
if test "x$ac_cv_func_fork" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_FORK 1
_ACEOF

$as_echo "#define HAVE_FORK 1" >>confdefs.h

else
   as_fn_error $? "pcntl: fork() not supported by this platform" "$LINENO" 5
fi
done

  for ac_func in waitpid
do :
  ac_fn_c_check_func "$LINENO" "waitpid" "ac_cv_func_waitpid"
if test "x$ac_cv_func_waitpid" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_WAITPID 1
_ACEOF

$as_echo "#define HAVE_WAITPID 1" >>confdefs.h

else
   as_fn_error $? "pcntl: waitpid() not supported by this platform" "$LINENO" 5
fi
done

  for ac_func in sigaction
do :
  ac_fn_c_check_func "$LINENO" "sigaction" "ac_cv_func_sigaction"
if test "x$ac_cv_func_sigaction" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SIGACTION 1
_ACEOF

$as_echo "#define HAVE_SIGACTION 1" >>confdefs.h

else
   as_fn_error $? "pcntl: sigaction() not supported by this platform" "$LINENO" 5
fi
done

  for ac_func in getpriority setpriority wait3 sigprocmask sigwaitinfo sigtimedwait
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done


  ext_builddir=ext/pcntl
  ext_srcdir=$abs_srcdir/ext/pcntl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
    PHP_PCNTL_SHARED=no


  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcntl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PCNTL_SHARED=yes

  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pcntl="$shared_objects_pcntl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppcntl.so '$ext_builddir'/phppcntl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(PCNTL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PHPPCNTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppcntl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppcntl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppcntl.$suffix: $ext_builddir/phppcntl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppcntl.$suffix \$(phplibdir)

$ext_builddir/phppcntl.$suffix: \$(shared_objects_pcntl) \$(PHPPCNTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pcntl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pcntl.so '$ext_builddir'/pcntl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) -L$(top_builddir)/netware -lphp5lib $(TL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pcntl) $(PCNTL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pcntl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcntl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcntl.$suffix: $ext_builddir/pcntl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcntl.$suffix \$(phplibdir)

$ext_builddir/pcntl.$suffix: \$(shared_objects_pcntl) \$(PCNTL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PCNTL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    PHP_PCNTL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pcntl"
        ;;
      *)


  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pcntl

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi





php_enable_pdo=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable PDO support" >&5
$as_echo_n "checking whether to enable PDO support... " >&6; }
# Check whether --enable-pdo was given.
if test "${enable_pdo+set}" = set; then :
  enableval=$enable_pdo; PHP_PDO=$enableval
else

  PHP_PDO=yes
  test "$PHP_ENABLE_ALL" && PHP_PDO=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO in
shared,*)
  PHP_PDO=`echo "$PHP_PDO"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PDO" != "no"; then

    PHP_PDO=yes


  pdo_running_under_pear=0
  case `pwd` in
    /var/tmp/pear-build-*)
      pdo_running_under_pear=1
      ;;
  esac

  if test "$pdo_running_under_pear$PHP_PEAR_VERSION" = "1"; then
    # we're running in an environment that smells like pear,
    # and the PHP_PEAR_VERSION env var is not set.  That implies
    # that we're running under a slightly broken pear installer
    as_fn_error $? "
PDO requires that you upgrade your PEAR installer tools. Please
do so now by running:

  % sudo pear upgrade pear

or by manually downloading and installing PEAR version 1.3.5 or higher.

Once you've upgraded, please re-try your PDO install.
    " "$LINENO" 5
  fi


  if test "$ext_shared" = "yes" ; then
    case $host_alias in
      *darwin*)
          as_fn_error $? "
Due to the way that loadable modules work on OSX/Darwin, you need to
compile the PDO package statically into the PHP core.

Please follow the instructions at: http://netevil.org/node.php?nid=202
for more detail on this issue.
          " "$LINENO" 5
        ext_shared=no
        ;;
    esac
  fi

  ext_builddir=ext/pdo
  ext_srcdir=$abs_srcdir/ext/pdo

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_SHARED=no


  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_SHARED=yes

  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo="$shared_objects_pdo $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo.so '$ext_builddir'/phppdo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(PDO_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PHPPDO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo.$suffix: $ext_builddir/phppdo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo.$suffix \$(phplibdir)

$ext_builddir/phppdo.$suffix: \$(shared_objects_pdo) \$(PHPPDO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo.so '$ext_builddir'/pdo.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo) $(PDO_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo.$suffix: $ext_builddir/pdo.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo.$suffix \$(phplibdir)

$ext_builddir/pdo.$suffix: \$(shared_objects_pdo) \$(PDO_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo"
        ;;
      *)


  case ext/pdo in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo/"; ac_bdir="ext/pdo/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo.c pdo_dbh.c pdo_stmt.c pdo_sql_parser.c pdo_sqlstate.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  am_i_shared=$PHP_PDO_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build pdo shared or build spl statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" "$LINENO" 5
  fi






    header_path=ext/pdo
    for header_file in php_pdo.h php_pdo_driver.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done





  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi




php_with_pdo_dblib=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO_DBLIB support via FreeTDS" >&5
$as_echo_n "checking for PDO_DBLIB support via FreeTDS... " >&6; }

# Check whether --with-pdo-dblib was given.
if test "${with_pdo_dblib+set}" = set; then :
  withval=$with_pdo_dblib; PHP_PDO_DBLIB=$withval
else

  PHP_PDO_DBLIB=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_DBLIB=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_DBLIB in
shared,*)
  PHP_PDO_DBLIB=`echo "$PHP_PDO_DBLIB"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_DBLIB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PDO_DBLIB" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi

  if test "$PHP_PDO_DBLIB" = "yes"; then

    for i in /usr/local /usr; do
      if test -f $i/include/sybdb.h; then
        PDO_FREETDS_INSTALLATION_DIR=$i
        PDO_FREETDS_INCLUDE_DIR=$i/include
        break
      elif test -f $i/include/freetds/sybdb.h; then
        PDO_FREETDS_INSTALLATION_DIR=$i
        PDO_FREETDS_INCLUDE_DIR=$i/include/freetds
        break;
      fi
    done

    if test -z "$PDO_FREETDS_INSTALLATION_DIR"; then
      as_fn_error $? "Cannot find FreeTDS in known installation directories" "$LINENO" 5
    fi

  elif test "$PHP_PDO_DBLIB" != "no"; then

    if test -f $PHP_PDO_DBLIB/include/sybdb.h; then
      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include
    elif test -f $PHP_PDO_DBLIB/include/freetds/sybdb.h; then
      PDO_FREETDS_INSTALLATION_DIR=$PHP_PDO_DBLIB
      PDO_FREETDS_INCLUDE_DIR=$PHP_PDO_DBLIB/include/freetds
    else
      as_fn_error $? "Directory $PHP_PDO_DBLIB is not a FreeTDS installation directory" "$LINENO" 5
    fi
  fi

  if test "x$PHP_LIBDIR" = "x" ; then
    PHP_LIBDIR=lib
  fi

  if test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a" && test ! -r "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.so"; then
     as_fn_error $? "Could not find $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR/libsybdb.a|so" "$LINENO" 5
  fi


  if test "$PDO_FREETDS_INCLUDE_DIR" != "/usr/include"; then

  if test -z "$PDO_FREETDS_INCLUDE_DIR" || echo "$PDO_FREETDS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_FREETDS_INCLUDE_DIR
  else

    ep_dir=`echo $PDO_FREETDS_INCLUDE_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_FREETDS_INCLUDE_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    PDO_DBLIB_SHARED_LIBADD="-lsybdb $PDO_DBLIB_SHARED_LIBADD"
    if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then

  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"; then

  if test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" || echo "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_FREETDS_INSTALLATION_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case sybdb in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybdb $LIBS"
   ;;
  esac




  fi





  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi



  PDO_DBLIB_DEFS="-DPDO_DBLIB_FLAVOUR=\\\"freetds\\\""

  ext_builddir=ext/pdo_dblib
  ext_srcdir=$abs_srcdir/ext/pdo_dblib

  ac_extra=`echo "-I$pdo_cv_inc_path $PDO_DBLIB_DEFS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_DBLIB_SHARED=no


  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_dblib"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_DBLIB_SHARED=yes

  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_dblib="$shared_objects_pdo_dblib $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_dblib.so '$ext_builddir'/phppdo_dblib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(PDO_DBLIB_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PHPPDO_DBLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_dblib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_dblib.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_dblib.$suffix: $ext_builddir/phppdo_dblib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_dblib.$suffix \$(phplibdir)

$ext_builddir/phppdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PHPPDO_DBLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_dblib.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_dblib.so '$ext_builddir'/pdo_dblib.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) -L$(top_builddir)/netware -lphp5lib $(_DBLIB_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_dblib) $(PDO_DBLIB_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_dblib.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_dblib.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_dblib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_dblib.$suffix: $ext_builddir/pdo_dblib.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_dblib.$suffix \$(phplibdir)

$ext_builddir/pdo_dblib.$suffix: \$(shared_objects_pdo_dblib) \$(PDO_DBLIB_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_DBLIB 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_DBLIB_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_dblib"
        ;;
      *)


  case ext/pdo_dblib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_dblib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_dblib/"; ac_bdir="ext/pdo_dblib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_dblib.c dblib_driver.c dblib_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_dblib"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_dblib

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dnet_addr in -ldnet_stub" >&5
$as_echo_n "checking for dnet_addr in -ldnet_stub... " >&6; }
if ${ac_cv_lib_dnet_stub_dnet_addr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldnet_stub  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dnet_addr ();
int
main ()
{
return dnet_addr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dnet_stub_dnet_addr=yes
else
  ac_cv_lib_dnet_stub_dnet_addr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_stub_dnet_addr" >&5
$as_echo "$ac_cv_lib_dnet_stub_dnet_addr" >&6; }
if test "x$ac_cv_lib_dnet_stub_dnet_addr" = xyes; then :


  if test "$ext_shared" = "yes"; then
    PDO_DBLIB_SHARED_LIBADD="-ldnet_stub $PDO_DBLIB_SHARED_LIBADD"
    if test -n ""; then

  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then

  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else

    ep_dir=`echo |$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename ""`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_DBLIB_SHARED_LIBADD="-L$ai_p $PDO_DBLIB_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_DBLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_DBLIB_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n ""; then

  if test "" != "/usr/$PHP_LIBDIR" && test "" != "/usr/lib"; then

  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else

    ep_dir=`echo |$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename ""`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case dnet_stub in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ldnet_stub $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_LIBDNET_STUB 1" >>confdefs.h


fi


$as_echo "#define HAVE_PDO_DBLIB 1" >>confdefs.h


$as_echo "#define HAVE_FREETDS 1" >>confdefs.h


  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_DBLIB_SHARED_LIBADD"




  am_i_shared=$PHP_PDO_DBLIB_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_dblib to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_dblib shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_dblib, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi


fi


php_with_pdo_firebird=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Firebird support for PDO" >&5
$as_echo_n "checking for Firebird support for PDO... " >&6; }

# Check whether --with-pdo-firebird was given.
if test "${with_pdo_firebird+set}" = set; then :
  withval=$with_pdo_firebird; PHP_PDO_FIREBIRD=$withval
else

  PHP_PDO_FIREBIRD=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_FIREBIRD=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_FIREBIRD in
shared,*)
  PHP_PDO_FIREBIRD=`echo "$PHP_PDO_FIREBIRD"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_FIREBIRD=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PDO_FIREBIRD" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi

  if test "$PHP_PDO_FIREBIRD" = "yes"; then
    FIREBIRD_INCDIR=
    FIREBIRD_LIBDIR=
    FIREBIRD_LIBDIR_FLAG=
  else
    FIREBIRD_INCDIR=$PHP_PDO_FIREBIRD/include
    FIREBIRD_LIBDIR=$PHP_PDO_FIREBIRD/$PHP_LIBDIR
    FIREBIRD_LIBDIR_FLAG=-L$FIREBIRD_LIBDIR
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $FIREBIRD_LIBDIR_FLAG
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isc_detach_database in -lfbclient" >&5
$as_echo_n "checking for isc_detach_database in -lfbclient... " >&6; }
if ${ac_cv_lib_fbclient_isc_detach_database+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lfbclient  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char isc_detach_database ();
int
main ()
{
return isc_detach_database ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_fbclient_isc_detach_database=yes
else
  ac_cv_lib_fbclient_isc_detach_database=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_fbclient_isc_detach_database" >&5
$as_echo "$ac_cv_lib_fbclient_isc_detach_database" >&6; }
if test "x$ac_cv_lib_fbclient_isc_detach_database" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

    FIREBIRD_LIBNAME=fbclient


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_fbclient_isc_detach_database


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $FIREBIRD_LIBDIR_FLAG
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isc_detach_database in -lgds" >&5
$as_echo_n "checking for isc_detach_database in -lgds... " >&6; }
if ${ac_cv_lib_gds_isc_detach_database+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lgds  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char isc_detach_database ();
int
main ()
{
return isc_detach_database ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_gds_isc_detach_database=yes
else
  ac_cv_lib_gds_isc_detach_database=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gds_isc_detach_database" >&5
$as_echo "$ac_cv_lib_gds_isc_detach_database" >&6; }
if test "x$ac_cv_lib_gds_isc_detach_database" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      FIREBIRD_LIBNAME=gds


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_gds_isc_detach_database


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        $FIREBIRD_LIBDIR_FLAG
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isc_detach_database in -lib_util" >&5
$as_echo_n "checking for isc_detach_database in -lib_util... " >&6; }
if ${ac_cv_lib_ib_util_isc_detach_database+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lib_util  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char isc_detach_database ();
int
main ()
{
return isc_detach_database ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ib_util_isc_detach_database=yes
else
  ac_cv_lib_ib_util_isc_detach_database=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ib_util_isc_detach_database" >&5
$as_echo "$ac_cv_lib_ib_util_isc_detach_database" >&6; }
if test "x$ac_cv_lib_ib_util_isc_detach_database" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

        FIREBIRD_LIBNAME=ib_util


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ib_util_isc_detach_database

        as_fn_error $? "libfbclient, libgds or libib_util not found! Check config.log for more information." "$LINENO" 5


fi



fi



fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi




  if test "$ext_shared" = "yes"; then
    PDO_FIREBIRD_SHARED_LIBADD="-l$FIREBIRD_LIBNAME $PDO_FIREBIRD_SHARED_LIBADD"
    if test -n "$FIREBIRD_LIBDIR"; then

  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then

  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FIREBIRD_LIBDIR
  else

    ep_dir=`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$FIREBIRD_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_FIREBIRD_SHARED_LIBADD="-L$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_FIREBIRD_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_FIREBIRD_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$FIREBIRD_LIBDIR"; then

  if test "$FIREBIRD_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$FIREBIRD_LIBDIR" != "/usr/lib"; then

  if test -z "$FIREBIRD_LIBDIR" || echo "$FIREBIRD_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$FIREBIRD_LIBDIR
  else

    ep_dir=`echo $FIREBIRD_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$FIREBIRD_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $FIREBIRD_LIBNAME in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$FIREBIRD_LIBNAME $LIBS"
   ;;
  esac




  fi



  if test "$FIREBIRD_INCDIR" != "/usr/include"; then

  if test -z "$FIREBIRD_INCDIR" || echo "$FIREBIRD_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$FIREBIRD_INCDIR
  else

    ep_dir=`echo $FIREBIRD_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$FIREBIRD_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


$as_echo "#define HAVE_PDO_FIREBIRD 1" >>confdefs.h


  ext_builddir=ext/pdo_firebird
  ext_srcdir=$abs_srcdir/ext/pdo_firebird

  ac_extra=`echo "-I$pdo_cv_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_FIREBIRD_SHARED=no


  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_firebird"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_FIREBIRD_SHARED=yes

  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_firebird="$shared_objects_pdo_firebird $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_firebird.so '$ext_builddir'/phppdo_firebird.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(PDO_FIREBIRD_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PHPPDO_FIREBIRD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_firebird.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_firebird.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_firebird.$suffix: $ext_builddir/phppdo_firebird.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_firebird.$suffix \$(phplibdir)

$ext_builddir/phppdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PHPPDO_FIREBIRD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_firebird.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_firebird.so '$ext_builddir'/pdo_firebird.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) -L$(top_builddir)/netware -lphp5lib $(_FIREBIRD_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_firebird) $(PDO_FIREBIRD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_firebird.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_firebird.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_firebird"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_firebird.$suffix: $ext_builddir/pdo_firebird.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_firebird.$suffix \$(phplibdir)

$ext_builddir/pdo_firebird.$suffix: \$(shared_objects_pdo_firebird) \$(PDO_FIREBIRD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_FIREBIRD 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_FIREBIRD_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_firebird"
        ;;
      *)


  case ext/pdo_firebird in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_firebird"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_firebird/"; ac_bdir="ext/pdo_firebird/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_firebird.c firebird_driver.c firebird_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_firebird"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_firebird

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_FIREBIRD_SHARED_LIBADD"


  am_i_shared=$PHP_PDO_FIREBIRD_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_firebird to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_firebird shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_firebird, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi

fi



php_with_pdo_mysql=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MySQL support for PDO" >&5
$as_echo_n "checking for MySQL support for PDO... " >&6; }

# Check whether --with-pdo-mysql was given.
if test "${with_pdo_mysql+set}" = set; then :
  withval=$with_pdo_mysql; PHP_PDO_MYSQL=$withval
else

  PHP_PDO_MYSQL=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_MYSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_MYSQL in
shared,*)
  PHP_PDO_MYSQL=`echo "$PHP_PDO_MYSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_MYSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_ZLIB_DIR"; then

php_with_zlib_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libz" >&5
$as_echo_n "checking for the location of libz... " >&6; }

# Check whether --with-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then :
  withval=$with_zlib_dir; PHP_ZLIB_DIR=$withval
else

  PHP_ZLIB_DIR=no


fi


ext_output=$PHP_ZLIB_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_PDO_MYSQL" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi



  if test "$PHP_PDO_MYSQL" != "yes" && test "$PHP_PDO_MYSQL" != "mysqlnd"; then
    if test -f $PHP_PDO_MYSQL && test -x $PHP_PDO_MYSQL ; then
      PDO_MYSQL_CONFIG=$PHP_PDO_MYSQL
    else
      if test -d "$PHP_PDO_MYSQL" ; then
        if test -x "$PHP_PDO_MYSQL/bin/mysql_config" ; then
          PDO_MYSQL_CONFIG="$PHP_PDO_MYSQL/bin/mysql_config"
        else
          PDO_MYSQL_DIR="$PHP_PDO_MYSQL"
        fi
      fi
    fi
  fi

  if test "$PHP_PDO_MYSQL" = "yes" || test "$PHP_PDO_MYSQL" = "mysqlnd"; then
        PHP_MYSQLND_ENABLED=yes

$as_echo "#define PDO_USE_MYSQLND 1" >>confdefs.h

  else

$as_echo "#define HAVE_MYSQL 1" >>confdefs.h


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_config" >&5
$as_echo_n "checking for mysql_config... " >&6; }
    if test -n "$PDO_MYSQL_CONFIG"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_MYSQL_CONFIG" >&5
$as_echo "$PDO_MYSQL_CONFIG" >&6; }
      if test "x$SED" = "x"; then
        # Extract the first word of "sed", so it can be a program name with args.
set dummy sed; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_SED+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $SED in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_SED="$SED" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_SED="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  ;;
esac
fi
SED=$ac_cv_path_SED
if test -n "$SED"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $SED" >&5
$as_echo "$SED" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


      fi
      if test "$enable_maintainer_zts" = "yes"; then
        PDO_MYSQL_LIBNAME=mysqlclient_r
        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs_r | $SED -e "s/'//g"`
      else
        PDO_MYSQL_LIBNAME=mysqlclient
        PDO_MYSQL_LIBS=`$PDO_MYSQL_CONFIG --libs | $SED -e "s/'//g"`
      fi
      PDO_MYSQL_INCLUDE=`$PDO_MYSQL_CONFIG --cflags | $SED -e "s/'//g"`
    elif test -n "$PDO_MYSQL_DIR"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql install under $PDO_MYSQL_DIR" >&5
$as_echo_n "checking for mysql install under $PDO_MYSQL_DIR... " >&6; }
      if test -r $PDO_MYSQL_DIR/include/mysql; then
        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include/mysql
      else
        PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include
      fi
      if test -r $PDO_MYSQL_DIR/$PHP_LIBDIR/mysql; then
        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR/mysql
      else
        PDO_MYSQL_LIB_DIR=$PDO_MYSQL_DIR/$PHP_LIBDIR
      fi

      if test -r "$PDO_MYSQL_LIB_DIR"; then
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: libs under $PDO_MYSQL_LIB_DIR; seems promising" >&5
$as_echo "libs under $PDO_MYSQL_LIB_DIR; seems promising" >&6; }
      else
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: can not find it" >&5
$as_echo "can not find it" >&6; }
        as_fn_error $? "Unable to find your mysql installation" "$LINENO" 5
      fi


  if test "$PDO_MYSQL_INC_DIR" != "/usr/include"; then

  if test -z "$PDO_MYSQL_INC_DIR" || echo "$PDO_MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_MYSQL_INC_DIR
  else

    ep_dir=`echo $PDO_MYSQL_INC_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_MYSQL_INC_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      PDO_MYSQL_INCLUDE=-I$PDO_MYSQL_INC_DIR
    else
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
      as_fn_error $? "Unable to find your mysql installation" "$LINENO" 5
    fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $PDO_MYSQL_LIBS
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$PDO_MYSQL_LIBNAME''_mysql_commit" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_commit in -l$PDO_MYSQL_LIBNAME" >&5
$as_echo_n "checking for mysql_commit in -l$PDO_MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_commit ();
int
main ()
{
return mysql_commit ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  for ac_i in $PDO_MYSQL_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  for ac_i in $PDO_MYSQL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_commit

      if test "$PHP_ZLIB_DIR" != "no"; then


  if test "$ext_shared" = "yes"; then
    PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR"; then

  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_ZLIB_DIR"; then

  if test "$PHP_ZLIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac




  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$PHP_ZLIB_DIR/$PHP_LIBDIR -L$PDO_MYSQL_LIB_DIR
        "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$PDO_MYSQL_LIBNAME''_mysql_commit" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_commit in -l$PDO_MYSQL_LIBNAME" >&5
$as_echo_n "checking for mysql_commit in -l$PDO_MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_commit ();
int
main ()
{
return mysql_commit ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_commit

          as_fn_error $? "PDO_MYSQL configure failed, MySQL 4.1 needed. Please check config.log for more information." "$LINENO" 5


fi

        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -L$PHP_ZLIB_DIR/$PHP_LIBDIR -lz"
      else


  case z in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-lz $PDO_MYSQL_SHARED_LIBADD"
    else


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac


    fi
   ;;
  esac



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$PDO_MYSQL_LIB_DIR
        "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$PDO_MYSQL_LIBNAME''_mysql_query" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
$as_echo_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char mysql_query ();
int
main ()
{
return mysql_query ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$PDO_MYSQL_LIBNAME_mysql_query

          as_fn_error $? "Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." "$LINENO" 5


fi

        PDO_MYSQL_LIBS="$PDO_MYSQL_LIBS -lz"
      fi


  for ac_i in $PDO_MYSQL_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


  for ac_i in $PDO_MYSQL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="$PDO_MYSQL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_MYSQL_SHARED_LIBADD="-L$ai_p $PDO_MYSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_MYSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done



fi

  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi



  if test -n "$PDO_MYSQL_CONFIG"; then
    PDO_MYSQL_SOCKET=`$PDO_MYSQL_CONFIG --socket`

cat >>confdefs.h <<_ACEOF
#define PDO_MYSQL_UNIX_ADDR "$PDO_MYSQL_SOCKET"
_ACEOF

  fi


  ext_builddir=ext/pdo_mysql
  ext_srcdir=$abs_srcdir/ext/pdo_mysql

  ac_extra=`echo "-I$pdo_cv_inc_path -I"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_MYSQL_SHARED=no


  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_mysql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_MYSQL_SHARED=yes

  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_mysql="$shared_objects_pdo_mysql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_mysql.so '$ext_builddir'/phppdo_mysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(PDO_MYSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PHPPDO_MYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_mysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_mysql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_mysql.$suffix: $ext_builddir/phppdo_mysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_mysql.$suffix \$(phplibdir)

$ext_builddir/phppdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PHPPDO_MYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_mysql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_mysql.so '$ext_builddir'/pdo_mysql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) -L$(top_builddir)/netware -lphp5lib $(_MYSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_mysql) $(PDO_MYSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_mysql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_mysql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_mysql.$suffix: $ext_builddir/pdo_mysql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_mysql.$suffix \$(phplibdir)

$ext_builddir/pdo_mysql.$suffix: \$(shared_objects_pdo_mysql) \$(PDO_MYSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_MYSQL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_MYSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_mysql"
        ;;
      *)


  case ext/pdo_mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_mysql/"; ac_bdir="ext/pdo_mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_mysql.c mysql_driver.c mysql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_mysql"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_mysql

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  am_i_shared=$PHP_PDO_MYSQL_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_mysql to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_mysql shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_mysql, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi

    if test "$PHP_MYSQL" = "mysqlnd"; then

  am_i_shared=$PHP_PDO_MYSQL_SHARED
  is_it_shared=$PHP_MYSQLND_SHARED
  is_it_enabled=$PHP_MYSQLND
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_mysql to build statically, but it
depends on extension mysqlnd, which you've configured to build shared.
You either need to build pdo_mysql shared or build mysqlnd statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_mysql, which depends on extension mysqlnd,
but you've either not enabled mysqlnd, or have disabled it.
" "$LINENO" 5
  fi

    fi

  PDO_MYSQL_MODULE_TYPE=external


  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_SHARED_LIBADD"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_MYSQL_MODULE_TYPE"



fi


SUPPORTED_LIB_VERS="9.0 10.1 11.1 12.1"  # The lib vers are not bumped when the DB version is bumped





php_with_pdo_oci=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle OCI support for PDO" >&5
$as_echo_n "checking Oracle OCI support for PDO... " >&6; }

# Check whether --with-pdo-oci was given.
if test "${with_pdo_oci+set}" = set; then :
  withval=$with_pdo_oci; PHP_PDO_OCI=$withval
else

  PHP_PDO_OCI=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_OCI=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_OCI in
shared,*)
  PHP_PDO_OCI=`echo "$PHP_PDO_OCI"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_OCI=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PDO_OCI" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle Install-Dir" >&5
$as_echo_n "checking Oracle Install-Dir... " >&6; }
  if test "$PHP_PDO_OCI" = "yes" || test -z "$PHP_PDO_OCI"; then
    PDO_OCI_DIR=$ORACLE_HOME
  else
    PDO_OCI_DIR=$PHP_PDO_OCI
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_PDO_OCI" >&5
$as_echo "$PHP_PDO_OCI" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if that is sane" >&5
$as_echo_n "checking if that is sane... " >&6; }
  if test -z "$PDO_OCI_DIR"; then
    as_fn_error $? "
You need to tell me where to find your Oracle Instant Client SDK, or set ORACLE_HOME.
" "$LINENO" 5
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  fi

  if test "instantclient" = "`echo $PDO_OCI_DIR | cut -d, -f1`" ; then
    # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long int" >&5
$as_echo_n "checking size of long int... " >&6; }
if ${ac_cv_sizeof_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long int))" "ac_cv_sizeof_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_int" >&5
$as_echo "$ac_cv_sizeof_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
_ACEOF


    if test "$ac_cv_sizeof_long_int" = "4" ; then
      PDO_OCI_CLIENT_DIR="client"
    else
      PDO_OCI_CLIENT_DIR="client64"
    fi
    PDO_OCI_IC_PREFIX="`echo $PDO_OCI_DIR | cut -d, -f2`"
    PDO_OCI_IC_VERS="`echo $PDO_OCI_DIR | cut -d, -f3`"
    if test -n "$PDO_OCI_IC_VERS"; then
      PDO_OCI_IC_MAJ_VER="`echo $PDO_OCI_IC_VERS | cut -d. -f1`"
      if test "$PDO_OCI_IC_MAJ_VER" -ge 11; then
        # From 11.1.0.7 the RPM path only has an X.Y component
        PDO_OCI_IC_VERS="`echo $PDO_OCI_IC_VERS | cut -d. -f1-2`"
      fi
    fi
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for oci.h" >&5
$as_echo_n "checking for oci.h... " >&6; }
    if test -f $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/oci.h ; then

  if test "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" != "/usr/include"; then

  if test -z "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" || echo "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR
  else

    ep_dir=`echo $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" >&5
$as_echo "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" >&6; }
    elif test -f $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include/oci.h ; then

  if test "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" != "/usr/include"; then

  if test -z "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" || echo "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include
  else

    ep_dir=`echo $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" >&5
$as_echo "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/include" >&6; }
    elif test -f $PDO_OCI_IC_PREFIX/sdk/include/oci.h ; then

  if test "$PDO_OCI_IC_PREFIX/sdk/include" != "/usr/include"; then

  if test -z "$PDO_OCI_IC_PREFIX/sdk/include" || echo "$PDO_OCI_IC_PREFIX/sdk/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/sdk/include
  else

    ep_dir=`echo $PDO_OCI_IC_PREFIX/sdk/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_IC_PREFIX/sdk/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_OCI_IC_PREFIX/sdk/include" >&5
$as_echo "$PDO_OCI_IC_PREFIX/sdk/include" >&6; }
    elif test -f $PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include/oci.h ; then

  if test "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" != "/usr/include"; then

  if test -z "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" || echo "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include
  else

    ep_dir=`echo $PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" >&5
$as_echo "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/include" >&6; }
    else
      as_fn_error $? "I'm too dumb to figure out where the include dir is in your Instant Client install" "$LINENO" 5
    fi
    if test -f "$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME" ; then
    PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/lib"
    elif test -f "$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME" ; then
      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX/$PDO_OCI_CLIENT_DIR/lib"
    elif test -f "$PDO_OCI_IC_PREFIX/libclntsh.$SHLIB_SUFFIX_NAME" ; then
      PDO_OCI_LIB_DIR="$PDO_OCI_IC_PREFIX"
    else
      as_fn_error $? "I'm too dumb to figure out where the libraries are in your Instant Client install" "$LINENO" 5
    fi
    PDO_OCI_VERSION="`echo $PDO_OCI_IC_VERS | cut -d. -f1-2`"
  else

  # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long int" >&5
$as_echo_n "checking size of long int... " >&6; }
if ${ac_cv_sizeof_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long int))" "ac_cv_sizeof_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_int" >&5
$as_echo "$ac_cv_sizeof_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
_ACEOF


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we're on a 64-bit platform" >&5
$as_echo_n "checking if we're on a 64-bit platform... " >&6; }
  if test "$ac_cv_sizeof_long_int" = "4" ; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
    TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking OCI8 libraries dir" >&5
$as_echo_n "checking OCI8 libraries dir... " >&6; }
  if test -d "$PDO_OCI_DIR/lib" && test ! -d "$PDO_OCI_DIR/lib32"; then
    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
  elif test ! -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
    PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
  elif test -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
    PDO_OCI_LIB_DIR=$TMP_PDO_OCI_LIB_DIR
  else
    as_fn_error $? "Oracle required OCI8 libraries not found" "$LINENO" 5
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_OCI_LIB_DIR" >&5
$as_echo "$PDO_OCI_LIB_DIR" >&6; }


    if test -d "$PDO_OCI_DIR/rdbms/public"; then

  if test "$PDO_OCI_DIR/rdbms/public" != "/usr/include"; then

  if test -z "$PDO_OCI_DIR/rdbms/public" || echo "$PDO_OCI_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/rdbms/public
  else

    ep_dir=`echo $PDO_OCI_DIR/rdbms/public|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_DIR/rdbms/public"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/public"
    fi
    if test -d "$PDO_OCI_DIR/rdbms/demo"; then

  if test "$PDO_OCI_DIR/rdbms/demo" != "/usr/include"; then

  if test -z "$PDO_OCI_DIR/rdbms/demo" || echo "$PDO_OCI_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/rdbms/demo
  else

    ep_dir=`echo $PDO_OCI_DIR/rdbms/demo|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_DIR/rdbms/demo"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/rdbms/demo"
    fi
    if test -d "$PDO_OCI_DIR/network/public"; then

  if test "$PDO_OCI_DIR/network/public" != "/usr/include"; then

  if test -z "$PDO_OCI_DIR/network/public" || echo "$PDO_OCI_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/network/public
  else

    ep_dir=`echo $PDO_OCI_DIR/network/public|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_DIR/network/public"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/network/public"
    fi
    if test -d "$PDO_OCI_DIR/plsql/public"; then

  if test "$PDO_OCI_DIR/plsql/public" != "/usr/include"; then

  if test -z "$PDO_OCI_DIR/plsql/public" || echo "$PDO_OCI_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/plsql/public
  else

    ep_dir=`echo $PDO_OCI_DIR/plsql/public|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_DIR/plsql/public"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/plsql/public"
    fi
    if test -d "$PDO_OCI_DIR/include"; then

  if test "$PDO_OCI_DIR/include" != "/usr/include"; then

  if test -z "$PDO_OCI_DIR/include" || echo "$PDO_OCI_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_DIR/include
  else

    ep_dir=`echo $PDO_OCI_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

      PDO_OCI_INCLUDES="$PDO_OCI_INCLUDES -I$PDO_OCI_DIR/include"
    fi

    if test -f "$PDO_OCI_LIB_DIR/sysliblist"; then

  for ac_i in `cat $PDO_OCI_LIB_DIR/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    elif test -f "$PDO_OCI_DIR/rdbms/lib/sysliblist"; then

  for ac_i in `cat $PDO_OCI_DIR/rdbms/lib/sysliblist`; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="$PDO_OCI_SYSLIB -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_OCI_SYSLIB="-L$ai_p $PDO_OCI_SYSLIB"
        test -n "$ld_runpath_switch" && PDO_OCI_SYSLIB="$ld_runpath_switch$ai_p $PDO_OCI_SYSLIB"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Oracle version" >&5
$as_echo_n "checking Oracle version... " >&6; }
  for OCI_VER in $SUPPORTED_LIB_VERS; do
    if test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.$OCI_VER; then
      PDO_OCI_VERSION="$OCI_VER"
    fi
  done
  if test -z "$PDO_OCI_VERSION"; then
    as_fn_error $? "Oracle required OCI8 libraries not found under $PDO_OCI_DIR" "$LINENO" 5
  fi
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PDO_OCI_VERSION" >&5
$as_echo "$PDO_OCI_VERSION" >&6; }

  fi

  case $PDO_OCI_VERSION in
    9.0|10.1|10.2|11.1|11.2|12.1)


  case clntsh in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -lclntsh"
    else


  case clntsh in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -lclntsh"
   ;;
  esac


    fi
   ;;
  esac


      ;;

    *)
      as_fn_error $? "Unsupported Oracle version $PDO_OCI_VERSION" "$LINENO" 5
      ;;
  esac


  if test "$PDO_OCI_LIB_DIR" != "/usr/$PHP_LIBDIR" && test "$PDO_OCI_LIB_DIR" != "/usr/lib"; then

  if test -z "$PDO_OCI_LIB_DIR" || echo "$PDO_OCI_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_OCI_LIB_DIR
  else

    ep_dir=`echo $PDO_OCI_LIB_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_OCI_LIB_DIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_OCI_SHARED_LIBADD="-L$ai_p $PDO_OCI_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_OCI_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_OCI_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCIEnvCreate in -lclntsh" >&5
$as_echo_n "checking for OCIEnvCreate in -lclntsh... " >&6; }
if ${ac_cv_lib_clntsh_OCIEnvCreate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lclntsh  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCIEnvCreate ();
int
main ()
{
return OCIEnvCreate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_clntsh_OCIEnvCreate=yes
else
  ac_cv_lib_clntsh_OCIEnvCreate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_clntsh_OCIEnvCreate" >&5
$as_echo "$ac_cv_lib_clntsh_OCIEnvCreate" >&6; }
if test "x$ac_cv_lib_clntsh_OCIEnvCreate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_OCIENVCREATE 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIEnvCreate


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCIEnvNlsCreate in -lclntsh" >&5
$as_echo_n "checking for OCIEnvNlsCreate in -lclntsh... " >&6; }
if ${ac_cv_lib_clntsh_OCIEnvNlsCreate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lclntsh  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCIEnvNlsCreate ();
int
main ()
{
return OCIEnvNlsCreate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_clntsh_OCIEnvNlsCreate=yes
else
  ac_cv_lib_clntsh_OCIEnvNlsCreate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_clntsh_OCIEnvNlsCreate" >&5
$as_echo "$ac_cv_lib_clntsh_OCIEnvNlsCreate" >&6; }
if test "x$ac_cv_lib_clntsh_OCIEnvNlsCreate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_OCIENVNLSCREATE 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIEnvNlsCreate


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCILobIsTemporary in -lclntsh" >&5
$as_echo_n "checking for OCILobIsTemporary in -lclntsh... " >&6; }
if ${ac_cv_lib_clntsh_OCILobIsTemporary+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lclntsh  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCILobIsTemporary ();
int
main ()
{
return OCILobIsTemporary ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_clntsh_OCILobIsTemporary=yes
else
  ac_cv_lib_clntsh_OCILobIsTemporary=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_clntsh_OCILobIsTemporary" >&5
$as_echo "$ac_cv_lib_clntsh_OCILobIsTemporary" >&6; }
if test "x$ac_cv_lib_clntsh_OCILobIsTemporary" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_OCILOBISTEMPORARY 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCILobIsTemporary


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCILobIsTemporary in -locijdbc8" >&5
$as_echo_n "checking for OCILobIsTemporary in -locijdbc8... " >&6; }
if ${ac_cv_lib_ocijdbc8_OCILobIsTemporary+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-locijdbc8  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCILobIsTemporary ();
int
main ()
{
return OCILobIsTemporary ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ocijdbc8_OCILobIsTemporary=yes
else
  ac_cv_lib_ocijdbc8_OCILobIsTemporary=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ocijdbc8_OCILobIsTemporary" >&5
$as_echo "$ac_cv_lib_ocijdbc8_OCILobIsTemporary" >&6; }
if test "x$ac_cv_lib_ocijdbc8_OCILobIsTemporary" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case ocijdbc8 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_OCI_SHARED_LIBADD="$PDO_OCI_SHARED_LIBADD -locijdbc8"
    else


  case ocijdbc8 in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -locijdbc8"
   ;;
  esac


    fi
   ;;
  esac



$as_echo "#define HAVE_OCILOBISTEMPORARY 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ocijdbc8_OCILobIsTemporary


fi



fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCICollAssign in -lclntsh" >&5
$as_echo_n "checking for OCICollAssign in -lclntsh... " >&6; }
if ${ac_cv_lib_clntsh_OCICollAssign+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lclntsh  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCICollAssign ();
int
main ()
{
return OCICollAssign ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_clntsh_OCICollAssign=yes
else
  ac_cv_lib_clntsh_OCICollAssign=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_clntsh_OCICollAssign" >&5
$as_echo "$ac_cv_lib_clntsh_OCICollAssign" >&6; }
if test "x$ac_cv_lib_clntsh_OCICollAssign" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_OCICOLLASSIGN 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCICollAssign


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$PDO_OCI_LIB_DIR $PDO_OCI_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OCIStmtFetch2 in -lclntsh" >&5
$as_echo_n "checking for OCIStmtFetch2 in -lclntsh... " >&6; }
if ${ac_cv_lib_clntsh_OCIStmtFetch2+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lclntsh  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char OCIStmtFetch2 ();
int
main ()
{
return OCIStmtFetch2 ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_clntsh_OCIStmtFetch2=yes
else
  ac_cv_lib_clntsh_OCIStmtFetch2=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_clntsh_OCIStmtFetch2" >&5
$as_echo "$ac_cv_lib_clntsh_OCIStmtFetch2" >&6; }
if test "x$ac_cv_lib_clntsh_OCIStmtFetch2" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_OCISTMTFETCH2 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_clntsh_OCIStmtFetch2


fi




  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi




  ext_builddir=ext/pdo_oci
  ext_srcdir=$abs_srcdir/ext/pdo_oci

  ac_extra=`echo "-I$pdo_cv_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_OCI_SHARED=no


  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_oci"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_OCI_SHARED=yes

  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_oci="$shared_objects_pdo_oci $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_oci.so '$ext_builddir'/phppdo_oci.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(PDO_OCI_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PHPPDO_OCI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_oci.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_oci.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_oci.$suffix: $ext_builddir/phppdo_oci.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_oci.$suffix \$(phplibdir)

$ext_builddir/phppdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PHPPDO_OCI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_oci.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_oci.so '$ext_builddir'/pdo_oci.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) -L$(top_builddir)/netware -lphp5lib $(_OCI_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_oci) $(PDO_OCI_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_oci.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_oci.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_oci"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_oci.$suffix: $ext_builddir/pdo_oci.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_oci.$suffix \$(phplibdir)

$ext_builddir/pdo_oci.$suffix: \$(shared_objects_pdo_oci) \$(PDO_OCI_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_OCI 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_OCI_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_oci"
        ;;
      *)


  case ext/pdo_oci in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_oci"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_oci/"; ac_bdir="ext/pdo_oci/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_oci.c oci_driver.c oci_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_oci"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_oci

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi




  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_SHARED_LIBADD"





  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_DIR"





  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_OCI_VERSION"






  am_i_shared=$PHP_PDO_OCI_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_oci to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_oci shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_oci, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi




cat >>confdefs.h <<_ACEOF
#define PHP_PDO_OCI_CLIENT_VERSION "$PDO_OCI_VERSION"
_ACEOF

fi






php_with_pdo_odbc=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ODBC v3 support for PDO" >&5
$as_echo_n "checking for ODBC v3 support for PDO... " >&6; }

# Check whether --with-pdo-odbc was given.
if test "${with_pdo_odbc+set}" = set; then :
  withval=$with_pdo_odbc; PHP_PDO_ODBC=$withval
else

  PHP_PDO_ODBC=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_ODBC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_ODBC in
shared,*)
  PHP_PDO_ODBC=`echo "$PHP_PDO_ODBC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_ODBC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }







if test "$PHP_PDO_ODBC" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for selected PDO ODBC flavour" >&5
$as_echo_n "checking for selected PDO ODBC flavour... " >&6; }

  pdo_odbc_flavour="`echo $PHP_PDO_ODBC | cut -d, -f1`"
  pdo_odbc_dir="`echo $PHP_PDO_ODBC | cut -d, -f2`"

  if test "$pdo_odbc_dir" = "$PHP_PDO_ODBC" ; then
    pdo_odbc_dir=
  fi

  case $pdo_odbc_flavour in
    ibm-db2)
        pdo_odbc_def_libdir=/home/db2inst1/sqllib/lib
        pdo_odbc_def_incdir=/home/db2inst1/sqllib/include
        pdo_odbc_def_lib=db2
        ;;

    iODBC|iodbc)
        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
        pdo_odbc_def_incdir=/usr/local/include
        pdo_odbc_def_lib=iodbc
        ;;

    unixODBC|unixodbc)
        pdo_odbc_def_libdir=/usr/local/$PHP_LIBDIR
        pdo_odbc_def_incdir=/usr/local/include
        pdo_odbc_def_lib=odbc
        ;;

    ODBCRouter|odbcrouter)
        pdo_odbc_def_libdir=/usr/$PHP_LIBDIR
        pdo_odbc_def_incdir=/usr/include
        pdo_odbc_def_lib=odbcsdk
        ;;

    generic)
        pdo_odbc_def_lib="`echo $PHP_PDO_ODBC | cut -d, -f3`"
        pdo_odbc_def_ldflags="`echo $PHP_PDO_ODBC | cut -d, -f4`"
        pdo_odbc_def_cflags="`echo $PHP_PDO_ODBC | cut -d, -f5`"
        pdo_odbc_flavour="generic-$pdo_odbc_def_lib"
        ;;

      *)
        as_fn_error $? "Unknown ODBC flavour $pdo_odbc_flavour
			  include and lib dirs are looked for under 'dir'.

			  'flavour' can be one of:  ibm-db2, iODBC, unixODBC, generic
			  If ',dir' part is omitted, default for the flavour
			  you have selected will be used. e.g.:

			    --with-pdo-odbc=unixODBC

			  will check for unixODBC under /usr/local. You may attempt
			  to use an otherwise unsupported driver using the \"generic\"
			  flavour.  The syntax for generic ODBC support is:

			    --with-pdo-odbc=generic,dir,libname,ldflags,cflags

			  When built as 'shared' the extension filename is always pdo_odbc.so" "$LINENO" 5
        ;;
  esac

  if test -n "$pdo_odbc_dir"; then
    PDO_ODBC_INCDIR="$pdo_odbc_dir/include"
    PDO_ODBC_LIBDIR="$pdo_odbc_dir/$PHP_LIBDIR"
  else
    PDO_ODBC_INCDIR="$pdo_odbc_def_incdir"
    PDO_ODBC_LIBDIR="$pdo_odbc_def_libdir"
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_odbc_flavour
          libs       $PDO_ODBC_LIBDIR,
          headers    $PDO_ODBC_INCDIR" >&5
$as_echo "$pdo_odbc_flavour
          libs       $PDO_ODBC_LIBDIR,
          headers    $PDO_ODBC_INCDIR" >&6; }

  if test ! -d "$PDO_ODBC_LIBDIR" ; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: library dir $PDO_ODBC_LIBDIR does not exist" >&5
$as_echo "$as_me: WARNING: library dir $PDO_ODBC_LIBDIR does not exist" >&2;}
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for odbc.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for odbc.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/odbc.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_ODBC_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for odbcsdk.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for odbcsdk.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/odbcsdk.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_ODBCSDK_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iodbc.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for iodbc.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/iodbc.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_IODBC_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlunix.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for sqlunix.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/sqlunix.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_SQLUNIX_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqltypes.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for sqltypes.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/sqltypes.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_SQLTYPES_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlucode.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for sqlucode.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/sqlucode.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_SQLUCODE_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sql.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for sql.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/sql.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_SQL_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isql.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for isql.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/isql.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_ISQL_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlext.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for sqlext.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/sqlext.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_SQLEXT_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for isqlext.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for isqlext.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/isqlext.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_ISQLEXT_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for udbcext.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for udbcext.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/udbcext.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_UDBCEXT_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlcli1.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for sqlcli1.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/sqlcli1.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_SQLCLI1_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LibraryManager.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for LibraryManager.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/LibraryManager.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_LIBRARYMANAGER_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cli0core.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for cli0core.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/cli0core.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_CLI0CORE_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cli0ext.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for cli0ext.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/cli0ext.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_CLI0EXT_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cli0cli.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for cli0cli.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/cli0cli.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_CLI0CLI_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cli0defs.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for cli0defs.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/cli0defs.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_CLI0DEFS_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cli0env.h in $PDO_ODBC_INCDIR" >&5
$as_echo_n "checking for cli0env.h in $PDO_ODBC_INCDIR... " >&6; }
  if test -f "$PDO_ODBC_INCDIR/cli0env.h"; then
    php_pdo_have_header=yes

$as_echo "#define HAVE_CLI0ENV_H 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


  if test "$php_pdo_have_header" != "yes"; then
    as_fn_error $? "Cannot find header file(s) for pdo_odbc" "$LINENO" 5
  fi

  PDO_ODBC_INCLUDE="$pdo_odbc_def_cflags -I$PDO_ODBC_INCDIR -DPDO_ODBC_TYPE=\\\"$pdo_odbc_flavour\\\""
  PDO_ODBC_LDFLAGS="$pdo_odbc_def_ldflags -L$PDO_ODBC_LIBDIR -l$pdo_odbc_def_lib"


  for ac_i in $PDO_ODBC_LDFLAGS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_ODBC_SHARED_LIBADD="$PDO_ODBC_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_ODBC_SHARED_LIBADD="-L$ai_p $PDO_ODBC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_ODBC_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="$PDO_ODBC_LDFLAGS"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$pdo_odbc_def_lib''_SQLBindCol" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SQLBindCol in -l$pdo_odbc_def_lib" >&5
$as_echo_n "checking for SQLBindCol in -l$pdo_odbc_def_lib... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$pdo_odbc_def_lib  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char SQLBindCol ();
int
main ()
{
return SQLBindCol ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="$PDO_ODBC_LDFLAGS"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$pdo_odbc_def_lib''_SQLAllocHandle" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SQLAllocHandle in -l$pdo_odbc_def_lib" >&5
$as_echo_n "checking for SQLAllocHandle in -l$pdo_odbc_def_lib... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$pdo_odbc_def_lib  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char SQLAllocHandle ();
int
main ()
{
return SQLAllocHandle ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$pdo_odbc_def_lib_SQLAllocHandle

      as_fn_error $? "
Your ODBC library does not appear to be ODBC 3 compatible.
You should consider using iODBC or unixODBC instead, and loading your
libraries as a driver in that environment; it will emulate the
functions required for PDO support.
" "$LINENO" 5

fi



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$pdo_odbc_def_lib_SQLBindCol

    as_fn_error $? "Your ODBC library does not exist or there was an error. Check config.log for more information" "$LINENO" 5


fi



  ext_builddir=ext/pdo_odbc
  ext_srcdir=$abs_srcdir/ext/pdo_odbc

  ac_extra=`echo "-I$pdo_cv_inc_path $PDO_ODBC_INCLUDE"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_ODBC_SHARED=no


  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_odbc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_ODBC_SHARED=yes

  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_odbc="$shared_objects_pdo_odbc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_odbc.so '$ext_builddir'/phppdo_odbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(PDO_ODBC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PHPPDO_ODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_odbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_odbc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_odbc.$suffix: $ext_builddir/phppdo_odbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_odbc.$suffix \$(phplibdir)

$ext_builddir/phppdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PHPPDO_ODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_odbc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_odbc.so '$ext_builddir'/pdo_odbc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) -L$(top_builddir)/netware -lphp5lib $(_ODBC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_odbc) $(PDO_ODBC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_odbc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_odbc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_odbc.$suffix: $ext_builddir/pdo_odbc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_odbc.$suffix \$(phplibdir)

$ext_builddir/pdo_odbc.$suffix: \$(shared_objects_pdo_odbc) \$(PDO_ODBC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_ODBC 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_ODBC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_odbc"
        ;;
      *)


  case ext/pdo_odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_odbc/"; ac_bdir="ext/pdo_odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_odbc.c odbc_driver.c odbc_stmt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_odbc"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_odbc

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_ODBC_SHARED_LIBADD"



  am_i_shared=$PHP_PDO_ODBC_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_odbc to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_odbc shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_odbc, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi


fi



php_with_pdo_pgsql=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for PostgreSQL support for PDO" >&5
$as_echo_n "checking for PostgreSQL support for PDO... " >&6; }

# Check whether --with-pdo-pgsql was given.
if test "${with_pdo_pgsql+set}" = set; then :
  withval=$with_pdo_pgsql; PHP_PDO_PGSQL=$withval
else

  PHP_PDO_PGSQL=no
  test "$PHP_ENABLE_ALL" && PHP_PDO_PGSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_PGSQL in
shared,*)
  PHP_PDO_PGSQL=`echo "$PHP_PDO_PGSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_PGSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PDO_PGSQL" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi


  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    PGSQL_INCLUDE=$PGSQL_INCLUDE
  else

    ep_dir=`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    PGSQL_INCLUDE="$ep_realdir"/`basename "$PGSQL_INCLUDE"`
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pg_config" >&5
$as_echo_n "checking for pg_config... " >&6; }
  for i in $PHP_PDO_PGSQL $PHP_PDO_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
    if test -x $i/pg_config; then
      PG_CONFIG="$i/pg_config"
      break;
    fi
  done

  if test -n "$PG_CONFIG"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PG_CONFIG" >&5
$as_echo "$PG_CONFIG" >&6; }
    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
    PGSQL_LIBDIR=`$PG_CONFIG --libdir`

$as_echo "#define HAVE_PG_CONFIG_H 1" >>confdefs.h

  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    if test "$PHP_PDO_PGSQL" = "yes"; then
      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
    else
      PGSQL_SEARCH_PATHS=$PHP_PDO_PGSQL
    fi

    for i in $PGSQL_SEARCH_PATHS; do
      for j in include include/pgsql include/postgres include/postgresql ""; do
        if test -r "$i/$j/libpq-fe.h"; then
          PGSQL_INC_BASE=$i
          PGSQL_INCLUDE=$i/$j
          if test -r "$i/$j/pg_config.h"; then

$as_echo "#define HAVE_PG_CONFIG_H 1" >>confdefs.h

          fi
        fi
      done

      for j in $PHP_LIBDIR $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then
          PGSQL_LIBDIR=$i/$j
        fi
      done
    done
  fi

  if test -z "$PGSQL_INCLUDE"; then
    as_fn_error $? "Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" "$LINENO" 5
  fi

  if test -z "$PGSQL_LIBDIR"; then
    as_fn_error $? "Cannot find libpq.so. Please specify correct PostgreSQL installation path" "$LINENO" 5
  fi

  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
    as_fn_error $? "Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" "$LINENO" 5
  fi


$as_echo "#define HAVE_PDO_PGSQL 1" >>confdefs.h


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for openssl dependencies" >&5
$as_echo_n "checking for openssl dependencies... " >&6; }
  grep openssl $PGSQL_INCLUDE/libpq-fe.h >/dev/null 2>&1
  if test $? -eq 0 ; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
        # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


    if test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
      PDO_PGSQL_CFLAGS=`$PKG_CONFIG openssl --cflags`
    fi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi

  old_LIBS=$LIBS
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQparameterStatus in -lpq" >&5
$as_echo_n "checking for PQparameterStatus in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQparameterStatus+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQparameterStatus ();
int
main ()
{
return PQparameterStatus ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQparameterStatus=yes
else
  ac_cv_lib_pq_PQparameterStatus=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQparameterStatus" >&5
$as_echo "$ac_cv_lib_pq_PQparameterStatus" >&6; }
if test "x$ac_cv_lib_pq_PQparameterStatus" = xyes; then :

$as_echo "#define HAVE_PQPARAMETERSTATUS 1" >>confdefs.h

else

    echo "Unable to build the PDO PostgreSQL driver: libpq 7.4+ is required"
    exit 1

fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQprepare in -lpq" >&5
$as_echo_n "checking for PQprepare in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQprepare+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQprepare ();
int
main ()
{
return PQprepare ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQprepare=yes
else
  ac_cv_lib_pq_PQprepare=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQprepare" >&5
$as_echo "$ac_cv_lib_pq_PQprepare" >&6; }
if test "x$ac_cv_lib_pq_PQprepare" = xyes; then :

$as_echo "#define HAVE_PQPREPARE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQescapeStringConn in -lpq" >&5
$as_echo_n "checking for PQescapeStringConn in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQescapeStringConn+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQescapeStringConn ();
int
main ()
{
return PQescapeStringConn ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQescapeStringConn=yes
else
  ac_cv_lib_pq_PQescapeStringConn=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQescapeStringConn" >&5
$as_echo "$ac_cv_lib_pq_PQescapeStringConn" >&6; }
if test "x$ac_cv_lib_pq_PQescapeStringConn" = xyes; then :

$as_echo "#define HAVE_PQESCAPE_CONN 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQescapeByteaConn in -lpq" >&5
$as_echo_n "checking for PQescapeByteaConn in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQescapeByteaConn+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQescapeByteaConn ();
int
main ()
{
return PQescapeByteaConn ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQescapeByteaConn=yes
else
  ac_cv_lib_pq_PQescapeByteaConn=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQescapeByteaConn" >&5
$as_echo "$ac_cv_lib_pq_PQescapeByteaConn" >&6; }
if test "x$ac_cv_lib_pq_PQescapeByteaConn" = xyes; then :

$as_echo "#define HAVE_PQESCAPE_BYTEA_CONN 1" >>confdefs.h

fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pg_encoding_to_char in -lpq" >&5
$as_echo_n "checking for pg_encoding_to_char in -lpq... " >&6; }
if ${ac_cv_lib_pq_pg_encoding_to_char+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char pg_encoding_to_char ();
int
main ()
{
return pg_encoding_to_char ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_pg_encoding_to_char=yes
else
  ac_cv_lib_pq_pg_encoding_to_char=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_pg_encoding_to_char" >&5
$as_echo "$ac_cv_lib_pq_pg_encoding_to_char" >&6; }
if test "x$ac_cv_lib_pq_pg_encoding_to_char" = xyes; then :

$as_echo "#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1" >>confdefs.h

fi



  LIBS=$old_LIBS
  LDFLAGS=$old_LDFLAGS



  if test "$ext_shared" = "yes"; then
    PDO_PGSQL_SHARED_LIBADD="-lpq $PDO_PGSQL_SHARED_LIBADD"
    if test -n "$PGSQL_LIBDIR"; then

  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then

  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else

    ep_dir=`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PGSQL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_PGSQL_SHARED_LIBADD="-L$ai_p $PDO_PGSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_PGSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PGSQL_LIBDIR"; then

  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then

  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else

    ep_dir=`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PGSQL_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case pq in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpq $LIBS"
   ;;
  esac




  fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_PGSQL_SHARED_LIBADD"



  if test "$PGSQL_INCLUDE" != "/usr/include"; then

  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_INCLUDE
  else

    ep_dir=`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PGSQL_INCLUDE"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi




  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi




  ext_builddir=ext/pdo_pgsql
  ext_srcdir=$abs_srcdir/ext/pdo_pgsql

  ac_extra=`echo "-I$pdo_cv_inc_path $PDO_PGSQL_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_PGSQL_SHARED=no


  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_pgsql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_PGSQL_SHARED=yes

  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_pgsql="$shared_objects_pdo_pgsql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_pgsql.so '$ext_builddir'/phppdo_pgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(PDO_PGSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PHPPDO_PGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_pgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_pgsql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_pgsql.$suffix: $ext_builddir/phppdo_pgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_pgsql.$suffix \$(phplibdir)

$ext_builddir/phppdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PHPPDO_PGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_pgsql.so '$ext_builddir'/pdo_pgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) -L$(top_builddir)/netware -lphp5lib $(_PGSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_pgsql) $(PDO_PGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_pgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_pgsql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_pgsql.$suffix: $ext_builddir/pdo_pgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_pgsql.$suffix \$(phplibdir)

$ext_builddir/pdo_pgsql.$suffix: \$(shared_objects_pdo_pgsql) \$(PDO_PGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_PGSQL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_PGSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_pgsql"
        ;;
      *)


  case ext/pdo_pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_pgsql/"; ac_bdir="ext/pdo_pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdo_pgsql.c pgsql_driver.c pgsql_statement.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_pgsql"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_pgsql

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  am_i_shared=$PHP_PDO_PGSQL_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_pgsql to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_pgsql shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_pgsql, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi


fi



php_with_pdo_sqlite=$PHP_PDO

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite 3 support for PDO" >&5
$as_echo_n "checking for sqlite 3 support for PDO... " >&6; }

# Check whether --with-pdo-sqlite was given.
if test "${with_pdo_sqlite+set}" = set; then :
  withval=$with_pdo_sqlite; PHP_PDO_SQLITE=$withval
else

  PHP_PDO_SQLITE=$PHP_PDO
  test "$PHP_ENABLE_ALL" && PHP_PDO_SQLITE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDO_SQLITE in
shared,*)
  PHP_PDO_SQLITE=`echo "$PHP_PDO_SQLITE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PDO_SQLITE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PDO_SQLITE" != "no"; then

  if test "$PHP_PDO" = "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "PDO is not enabled! Add --enable-pdo to your configure line." "$LINENO" 5
  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
if ${pdo_cv_inc_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PDO includes" >&5
$as_echo_n "checking for PDO includes... " >&6; }
    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$abs_srcdir/ext
    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
      pdo_cv_inc_path=$prefix/include/php/ext
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $pdo_cv_inc_path" >&5
$as_echo "$pdo_cv_inc_path" >&6; }
  if test -n "$pdo_cv_inc_path"; then
:
  else
as_fn_error $? "Cannot find php_pdo_driver.h." "$LINENO" 5
  fi



  php_pdo_sqlite_sources_core="pdo_sqlite.c sqlite_driver.c sqlite_statement.c"

  if test "$PHP_PDO_SQLITE" != "yes"; then
    SEARCH_PATH="$PHP_PDO_SQLITE /usr/local /usr"     # you might want to change this
    SEARCH_FOR="/include/sqlite3.h"  # you most likely want to change this
    if test -r $PHP_PDO_SQLITE/$SEARCH_FOR; then # path given as parameter
      PDO_SQLITE_DIR=$PHP_PDO_SQLITE
    else # search default path list
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3 files in default path" >&5
$as_echo_n "checking for sqlite3 files in default path... " >&6; }
      for i in $SEARCH_PATH ; do
        if test -r $i/$SEARCH_FOR; then
          PDO_SQLITE_DIR=$i
          { $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $i" >&5
$as_echo "found in $i" >&6; }
        fi
      done
    fi
    if test -z "$PDO_SQLITE_DIR"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
      as_fn_error $? "Please reinstall the sqlite3 distribution" "$LINENO" 5
    fi


  if test "$PDO_SQLITE_DIR/include" != "/usr/include"; then

  if test -z "$PDO_SQLITE_DIR/include" || echo "$PDO_SQLITE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PDO_SQLITE_DIR/include
  else

    ep_dir=`echo $PDO_SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_SQLITE_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


    LIBNAME=sqlite3
    LIBSYMBOL=sqlite3_open


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$PDO_SQLITE_DIR/$PHP_LIBDIR -lm
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$LIBNAME''_$LIBSYMBOL" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $LIBSYMBOL in -l$LIBNAME" >&5
$as_echo_n "checking for $LIBSYMBOL in -l$LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char $LIBSYMBOL ();
int
main ()
{
return $LIBSYMBOL ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    PDO_SQLITE_SHARED_LIBADD="-l$LIBNAME $PDO_SQLITE_SHARED_LIBADD"
    if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then

  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_SQLITE_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PDO_SQLITE_SHARED_LIBADD="-L$ai_p $PDO_SQLITE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PDO_SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $PDO_SQLITE_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PDO_SQLITE_DIR/$PHP_LIBDIR"; then

  if test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PDO_SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PDO_SQLITE_DIR/$PHP_LIBDIR" || echo "$PDO_SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PDO_SQLITE_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PDO_SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PDO_SQLITE_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $LIBNAME in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$LIBNAME $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_PDO_SQLITELIB 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$LIBNAME_$LIBSYMBOL

      as_fn_error $? "wrong sqlite lib version or lib not found" "$LINENO" 5


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3_key in -lsqlite3" >&5
$as_echo_n "checking for sqlite3_key in -lsqlite3... " >&6; }
if ${ac_cv_lib_sqlite3_sqlite3_key+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsqlite3  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char sqlite3_key ();
int
main ()
{
return sqlite3_key ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sqlite3_sqlite3_key=yes
else
  ac_cv_lib_sqlite3_sqlite3_key=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sqlite3_sqlite3_key" >&5
$as_echo "$ac_cv_lib_sqlite3_sqlite3_key" >&6; }
if test "x$ac_cv_lib_sqlite3_sqlite3_key" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_SQLITE3_KEY 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sqlite3_sqlite3_key


fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"


  ext_builddir=ext/pdo_sqlite
  ext_srcdir=$abs_srcdir/ext/pdo_sqlite

  ac_extra=`echo "-I$pdo_cv_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_SQLITE_SHARED=no


  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_sqlite"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_SQLITE_SHARED=yes

  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(PDO_SQLITE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(_SQLITE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_SQLITE 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_SQLITE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_sqlite"
        ;;
      *)


  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_sqlite

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  else
      # use bundled libs
      if test "$enable_maintainer_zts" = "yes"; then
        threadsafe_flags="-DSQLITE_THREADSAFE=1"
      else
        threadsafe_flags="-DSQLITE_THREADSAFE=0"
      fi

      other_flags="-DSQLITE_ENABLE_FTS3=1 -DSQLITE_CORE=1 -DSQLITE_ENABLE_COLUMN_METADATA=1"

	        if test "$PHP_INTL" = "yes" && test "$PHP_INTL_SHARED" != "yes"; then
        other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
      fi

      if test "$PHP_SQLITE3" != "yes"; then


  case ext/sqlite3 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sqlite3"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sqlite3/"; ac_bdir="ext/sqlite3/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in libsqlite/sqlite3.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      fi


  ext_builddir=ext/pdo_sqlite
  ext_srcdir=$abs_srcdir/ext/pdo_sqlite

  ac_extra=`echo "-DPDO_SQLITE_BUNDLED=1 $other_flags $threadsafe_flags -I$pdo_cv_inc_path"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PDO_SQLITE_SHARED=no


  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdo_sqlite"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PDO_SQLITE_SHARED=yes

  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pdo_sqlite="$shared_objects_pdo_sqlite $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppdo_sqlite.so '$ext_builddir'/phppdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(PDO_SQLITE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PHPPDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppdo_sqlite.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppdo_sqlite.$suffix: $ext_builddir/phppdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/phppdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PHPPDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pdo_sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pdo_sqlite.so '$ext_builddir'/pdo_sqlite.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) -L$(top_builddir)/netware -lphp5lib $(_SQLITE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pdo_sqlite) $(PDO_SQLITE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pdo_sqlite.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdo_sqlite.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdo_sqlite"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdo_sqlite.$suffix: $ext_builddir/pdo_sqlite.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdo_sqlite.$suffix \$(phplibdir)

$ext_builddir/pdo_sqlite.$suffix: \$(shared_objects_pdo_sqlite) \$(PDO_SQLITE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PDO_SQLITE 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PDO_SQLITE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pdo_sqlite"
        ;;
      *)


  case ext/pdo_sqlite in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdo_sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdo_sqlite/"; ac_bdir="ext/pdo_sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $php_pdo_sqlite_sources_core; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdo_sqlite"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pdo_sqlite

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST PDO_SQLITE_SHARED_LIBADD"


  am_i_shared=$PHP_PDO_SQLITE_SHARED
  is_it_shared=$PHP_SQLITE3_SHARED
  is_it_enabled=$PHP_SQLITE3
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_sqlite to build statically, but it
depends on extension sqlite3, which you've configured to build shared.
You either need to build pdo_sqlite shared or build sqlite3 statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_sqlite, which depends on extension sqlite3,
but you've either not enabled sqlite3, or have disabled it.
" "$LINENO" 5
  fi


  if test "$abs_srcdir/ext/sqlite3/libsqlite" != "/usr/include"; then

  if test -z "$abs_srcdir/ext/sqlite3/libsqlite" || echo "$abs_srcdir/ext/sqlite3/libsqlite" | grep '^/' >/dev/null ; then
    ai_p=$abs_srcdir/ext/sqlite3/libsqlite
  else

    ep_dir=`echo $abs_srcdir/ext/sqlite3/libsqlite|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$abs_srcdir/ext/sqlite3/libsqlite"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


      for ac_func in usleep nanosleep
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done

      for ac_header in time.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "time.h" "ac_cv_header_time_h" "$ac_includes_default"
if test "x$ac_cv_header_time_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_TIME_H 1
_ACEOF

fi

done

  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fdatasync in -lrt" >&5
$as_echo_n "checking for fdatasync in -lrt... " >&6; }
if ${ac_cv_lib_rt_fdatasync+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lrt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char fdatasync ();
int
main ()
{
return fdatasync ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_rt_fdatasync=yes
else
  ac_cv_lib_rt_fdatasync=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rt_fdatasync" >&5
$as_echo "$ac_cv_lib_rt_fdatasync" >&6; }
if test "x$ac_cv_lib_rt_fdatasync" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case rt in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        PDO_SQLITE_SHARED_LIBADD="-lrt $PDO_SQLITE_SHARED_LIBADD"
    else


  case rt in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lrt $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_rt_fdatasync


fi




  am_i_shared=$PHP_PDO_SQLITE_SHARED
  is_it_shared=$PHP_PDO_SHARED
  is_it_enabled=$PHP_PDO
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension pdo_sqlite to build statically, but it
depends on extension pdo, which you've configured to build shared.
You either need to build pdo_sqlite shared or build pdo statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension pdo_sqlite, which depends on extension pdo,
but you've either not enabled pdo, or have disabled it.
" "$LINENO" 5
  fi


fi



php_with_pgsql=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for PostgreSQL support" >&5
$as_echo_n "checking for PostgreSQL support... " >&6; }

# Check whether --with-pgsql was given.
if test "${with_pgsql+set}" = set; then :
  withval=$with_pgsql; PHP_PGSQL=$withval
else

  PHP_PGSQL=no
  test "$PHP_ENABLE_ALL" && PHP_PGSQL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PGSQL in
shared,*)
  PHP_PGSQL=`echo "$PHP_PGSQL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PGSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PGSQL" != "no"; then

  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    PGSQL_INCLUDE=$PGSQL_INCLUDE
  else

    ep_dir=`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    PGSQL_INCLUDE="$ep_realdir"/`basename "$PGSQL_INCLUDE"`
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pg_config" >&5
$as_echo_n "checking for pg_config... " >&6; }
  for i in $PHP_PGSQL $PHP_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
	if test -x $i/pg_config; then
      PG_CONFIG="$i/pg_config"
      break;
    fi
  done

  if test -n "$PG_CONFIG"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PG_CONFIG" >&5
$as_echo "$PG_CONFIG" >&6; }
    PGSQL_INCLUDE=`$PG_CONFIG --includedir`
    PGSQL_LIBDIR=`$PG_CONFIG --libdir`
    if test -r "$PGSQL_INCLUDE/pg_config.h"; then

$as_echo "#define HAVE_PG_CONFIG_H 1" >>confdefs.h

    fi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    if test "$PHP_PGSQL" = "yes"; then
      PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
    else
      PGSQL_SEARCH_PATHS=$PHP_PGSQL
    fi

    for i in $PGSQL_SEARCH_PATHS; do
      for j in include include/pgsql include/postgres include/postgresql ""; do
        if test -r "$i/$j/libpq-fe.h"; then
          PGSQL_INC_BASE=$i
          PGSQL_INCLUDE=$i/$j
          if test -r "$i/$j/pg_config.h"; then

$as_echo "#define HAVE_PG_CONFIG_H 1" >>confdefs.h

          fi
        fi
      done

      for j in lib $PHP_LIBDIR/pgsql $PHP_LIBDIR/postgres $PHP_LIBDIR/postgresql ""; do
        if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then
          PGSQL_LIBDIR=$i/$j
        fi
      done
    done
  fi

  if test -z "$PGSQL_INCLUDE"; then
    as_fn_error $? "Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" "$LINENO" 5
  fi

  if test -z "$PGSQL_LIBDIR"; then
    as_fn_error $? "Cannot find libpq.so. Please specify correct PostgreSQL installation path" "$LINENO" 5
  fi

  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
    as_fn_error $? "Unable to find libpq anywhere under $PGSQL_SEARCH_PATHS" "$LINENO" 5
  fi


$as_echo "#define HAVE_PGSQL 1" >>confdefs.h

  old_LIBS=$LIBS
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQescapeString in -lpq" >&5
$as_echo_n "checking for PQescapeString in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQescapeString+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQescapeString ();
int
main ()
{
return PQescapeString ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQescapeString=yes
else
  ac_cv_lib_pq_PQescapeString=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQescapeString" >&5
$as_echo "$ac_cv_lib_pq_PQescapeString" >&6; }
if test "x$ac_cv_lib_pq_PQescapeString" = xyes; then :

$as_echo "#define HAVE_PQESCAPE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQunescapeBytea in -lpq" >&5
$as_echo_n "checking for PQunescapeBytea in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQunescapeBytea+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQunescapeBytea ();
int
main ()
{
return PQunescapeBytea ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQunescapeBytea=yes
else
  ac_cv_lib_pq_PQunescapeBytea=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQunescapeBytea" >&5
$as_echo "$ac_cv_lib_pq_PQunescapeBytea" >&6; }
if test "x$ac_cv_lib_pq_PQunescapeBytea" = xyes; then :

$as_echo "#define HAVE_PQUNESCAPEBYTEA 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQsetnonblocking in -lpq" >&5
$as_echo_n "checking for PQsetnonblocking in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQsetnonblocking+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQsetnonblocking ();
int
main ()
{
return PQsetnonblocking ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQsetnonblocking=yes
else
  ac_cv_lib_pq_PQsetnonblocking=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQsetnonblocking" >&5
$as_echo "$ac_cv_lib_pq_PQsetnonblocking" >&6; }
if test "x$ac_cv_lib_pq_PQsetnonblocking" = xyes; then :

$as_echo "#define HAVE_PQSETNONBLOCKING 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQcmdTuples in -lpq" >&5
$as_echo_n "checking for PQcmdTuples in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQcmdTuples+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQcmdTuples ();
int
main ()
{
return PQcmdTuples ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQcmdTuples=yes
else
  ac_cv_lib_pq_PQcmdTuples=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQcmdTuples" >&5
$as_echo "$ac_cv_lib_pq_PQcmdTuples" >&6; }
if test "x$ac_cv_lib_pq_PQcmdTuples" = xyes; then :

$as_echo "#define HAVE_PQCMDTUPLES 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQoidValue in -lpq" >&5
$as_echo_n "checking for PQoidValue in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQoidValue+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQoidValue ();
int
main ()
{
return PQoidValue ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQoidValue=yes
else
  ac_cv_lib_pq_PQoidValue=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQoidValue" >&5
$as_echo "$ac_cv_lib_pq_PQoidValue" >&6; }
if test "x$ac_cv_lib_pq_PQoidValue" = xyes; then :

$as_echo "#define HAVE_PQOIDVALUE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQclientEncoding in -lpq" >&5
$as_echo_n "checking for PQclientEncoding in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQclientEncoding+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQclientEncoding ();
int
main ()
{
return PQclientEncoding ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQclientEncoding=yes
else
  ac_cv_lib_pq_PQclientEncoding=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQclientEncoding" >&5
$as_echo "$ac_cv_lib_pq_PQclientEncoding" >&6; }
if test "x$ac_cv_lib_pq_PQclientEncoding" = xyes; then :

$as_echo "#define HAVE_PQCLIENTENCODING 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQparameterStatus in -lpq" >&5
$as_echo_n "checking for PQparameterStatus in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQparameterStatus+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQparameterStatus ();
int
main ()
{
return PQparameterStatus ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQparameterStatus=yes
else
  ac_cv_lib_pq_PQparameterStatus=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQparameterStatus" >&5
$as_echo "$ac_cv_lib_pq_PQparameterStatus" >&6; }
if test "x$ac_cv_lib_pq_PQparameterStatus" = xyes; then :

$as_echo "#define HAVE_PQPARAMETERSTATUS 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQprotocolVersion in -lpq" >&5
$as_echo_n "checking for PQprotocolVersion in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQprotocolVersion+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQprotocolVersion ();
int
main ()
{
return PQprotocolVersion ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQprotocolVersion=yes
else
  ac_cv_lib_pq_PQprotocolVersion=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQprotocolVersion" >&5
$as_echo "$ac_cv_lib_pq_PQprotocolVersion" >&6; }
if test "x$ac_cv_lib_pq_PQprotocolVersion" = xyes; then :

$as_echo "#define HAVE_PQPROTOCOLVERSION 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQtransactionStatus in -lpq" >&5
$as_echo_n "checking for PQtransactionStatus in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQtransactionStatus+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQtransactionStatus ();
int
main ()
{
return PQtransactionStatus ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQtransactionStatus=yes
else
  ac_cv_lib_pq_PQtransactionStatus=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQtransactionStatus" >&5
$as_echo "$ac_cv_lib_pq_PQtransactionStatus" >&6; }
if test "x$ac_cv_lib_pq_PQtransactionStatus" = xyes; then :

$as_echo "#define HAVE_PGTRANSACTIONSTATUS 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQexecParams in -lpq" >&5
$as_echo_n "checking for PQexecParams in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQexecParams+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQexecParams ();
int
main ()
{
return PQexecParams ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQexecParams=yes
else
  ac_cv_lib_pq_PQexecParams=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQexecParams" >&5
$as_echo "$ac_cv_lib_pq_PQexecParams" >&6; }
if test "x$ac_cv_lib_pq_PQexecParams" = xyes; then :

$as_echo "#define HAVE_PQEXECPARAMS 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQprepare in -lpq" >&5
$as_echo_n "checking for PQprepare in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQprepare+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQprepare ();
int
main ()
{
return PQprepare ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQprepare=yes
else
  ac_cv_lib_pq_PQprepare=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQprepare" >&5
$as_echo "$ac_cv_lib_pq_PQprepare" >&6; }
if test "x$ac_cv_lib_pq_PQprepare" = xyes; then :

$as_echo "#define HAVE_PQPREPARE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQexecPrepared in -lpq" >&5
$as_echo_n "checking for PQexecPrepared in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQexecPrepared+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQexecPrepared ();
int
main ()
{
return PQexecPrepared ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQexecPrepared=yes
else
  ac_cv_lib_pq_PQexecPrepared=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQexecPrepared" >&5
$as_echo "$ac_cv_lib_pq_PQexecPrepared" >&6; }
if test "x$ac_cv_lib_pq_PQexecPrepared" = xyes; then :

$as_echo "#define HAVE_PQEXECPREPARED 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQresultErrorField in -lpq" >&5
$as_echo_n "checking for PQresultErrorField in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQresultErrorField+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQresultErrorField ();
int
main ()
{
return PQresultErrorField ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQresultErrorField=yes
else
  ac_cv_lib_pq_PQresultErrorField=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQresultErrorField" >&5
$as_echo "$ac_cv_lib_pq_PQresultErrorField" >&6; }
if test "x$ac_cv_lib_pq_PQresultErrorField" = xyes; then :

$as_echo "#define HAVE_PQRESULTERRORFIELD 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQsendQueryParams in -lpq" >&5
$as_echo_n "checking for PQsendQueryParams in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQsendQueryParams+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQsendQueryParams ();
int
main ()
{
return PQsendQueryParams ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQsendQueryParams=yes
else
  ac_cv_lib_pq_PQsendQueryParams=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQsendQueryParams" >&5
$as_echo "$ac_cv_lib_pq_PQsendQueryParams" >&6; }
if test "x$ac_cv_lib_pq_PQsendQueryParams" = xyes; then :

$as_echo "#define HAVE_PQSENDQUERYPARAMS 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQsendPrepare in -lpq" >&5
$as_echo_n "checking for PQsendPrepare in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQsendPrepare+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQsendPrepare ();
int
main ()
{
return PQsendPrepare ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQsendPrepare=yes
else
  ac_cv_lib_pq_PQsendPrepare=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQsendPrepare" >&5
$as_echo "$ac_cv_lib_pq_PQsendPrepare" >&6; }
if test "x$ac_cv_lib_pq_PQsendPrepare" = xyes; then :

$as_echo "#define HAVE_PQSENDPREPARE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQsendQueryPrepared in -lpq" >&5
$as_echo_n "checking for PQsendQueryPrepared in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQsendQueryPrepared+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQsendQueryPrepared ();
int
main ()
{
return PQsendQueryPrepared ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQsendQueryPrepared=yes
else
  ac_cv_lib_pq_PQsendQueryPrepared=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQsendQueryPrepared" >&5
$as_echo "$ac_cv_lib_pq_PQsendQueryPrepared" >&6; }
if test "x$ac_cv_lib_pq_PQsendQueryPrepared" = xyes; then :

$as_echo "#define HAVE_PQSENDQUERYPREPARED 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQputCopyData in -lpq" >&5
$as_echo_n "checking for PQputCopyData in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQputCopyData+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQputCopyData ();
int
main ()
{
return PQputCopyData ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQputCopyData=yes
else
  ac_cv_lib_pq_PQputCopyData=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQputCopyData" >&5
$as_echo "$ac_cv_lib_pq_PQputCopyData" >&6; }
if test "x$ac_cv_lib_pq_PQputCopyData" = xyes; then :

$as_echo "#define HAVE_PQPUTCOPYDATA 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQputCopyEnd in -lpq" >&5
$as_echo_n "checking for PQputCopyEnd in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQputCopyEnd+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQputCopyEnd ();
int
main ()
{
return PQputCopyEnd ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQputCopyEnd=yes
else
  ac_cv_lib_pq_PQputCopyEnd=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQputCopyEnd" >&5
$as_echo "$ac_cv_lib_pq_PQputCopyEnd" >&6; }
if test "x$ac_cv_lib_pq_PQputCopyEnd" = xyes; then :

$as_echo "#define HAVE_PQPUTCOPYEND 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQgetCopyData in -lpq" >&5
$as_echo_n "checking for PQgetCopyData in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQgetCopyData+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQgetCopyData ();
int
main ()
{
return PQgetCopyData ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQgetCopyData=yes
else
  ac_cv_lib_pq_PQgetCopyData=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQgetCopyData" >&5
$as_echo "$ac_cv_lib_pq_PQgetCopyData" >&6; }
if test "x$ac_cv_lib_pq_PQgetCopyData" = xyes; then :

$as_echo "#define HAVE_PQGETCOPYDATA 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQfreemem in -lpq" >&5
$as_echo_n "checking for PQfreemem in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQfreemem+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQfreemem ();
int
main ()
{
return PQfreemem ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQfreemem=yes
else
  ac_cv_lib_pq_PQfreemem=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQfreemem" >&5
$as_echo "$ac_cv_lib_pq_PQfreemem" >&6; }
if test "x$ac_cv_lib_pq_PQfreemem" = xyes; then :

$as_echo "#define HAVE_PQFREEMEM 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQsetErrorVerbosity in -lpq" >&5
$as_echo_n "checking for PQsetErrorVerbosity in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQsetErrorVerbosity+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQsetErrorVerbosity ();
int
main ()
{
return PQsetErrorVerbosity ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQsetErrorVerbosity=yes
else
  ac_cv_lib_pq_PQsetErrorVerbosity=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQsetErrorVerbosity" >&5
$as_echo "$ac_cv_lib_pq_PQsetErrorVerbosity" >&6; }
if test "x$ac_cv_lib_pq_PQsetErrorVerbosity" = xyes; then :

$as_echo "#define HAVE_PQSETERRORVERBOSITY 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQftable in -lpq" >&5
$as_echo_n "checking for PQftable in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQftable+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQftable ();
int
main ()
{
return PQftable ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQftable=yes
else
  ac_cv_lib_pq_PQftable=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQftable" >&5
$as_echo "$ac_cv_lib_pq_PQftable" >&6; }
if test "x$ac_cv_lib_pq_PQftable" = xyes; then :

$as_echo "#define HAVE_PQFTABLE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQescapeStringConn in -lpq" >&5
$as_echo_n "checking for PQescapeStringConn in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQescapeStringConn+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQescapeStringConn ();
int
main ()
{
return PQescapeStringConn ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQescapeStringConn=yes
else
  ac_cv_lib_pq_PQescapeStringConn=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQescapeStringConn" >&5
$as_echo "$ac_cv_lib_pq_PQescapeStringConn" >&6; }
if test "x$ac_cv_lib_pq_PQescapeStringConn" = xyes; then :

$as_echo "#define HAVE_PQESCAPE_CONN 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQescapeByteaConn in -lpq" >&5
$as_echo_n "checking for PQescapeByteaConn in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQescapeByteaConn+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQescapeByteaConn ();
int
main ()
{
return PQescapeByteaConn ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQescapeByteaConn=yes
else
  ac_cv_lib_pq_PQescapeByteaConn=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQescapeByteaConn" >&5
$as_echo "$ac_cv_lib_pq_PQescapeByteaConn" >&6; }
if test "x$ac_cv_lib_pq_PQescapeByteaConn" = xyes; then :

$as_echo "#define HAVE_PQESCAPE_BYTEA_CONN 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pg_encoding_to_char in -lpq" >&5
$as_echo_n "checking for pg_encoding_to_char in -lpq... " >&6; }
if ${ac_cv_lib_pq_pg_encoding_to_char+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char pg_encoding_to_char ();
int
main ()
{
return pg_encoding_to_char ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_pg_encoding_to_char=yes
else
  ac_cv_lib_pq_pg_encoding_to_char=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_pg_encoding_to_char" >&5
$as_echo "$ac_cv_lib_pq_pg_encoding_to_char" >&6; }
if test "x$ac_cv_lib_pq_pg_encoding_to_char" = xyes; then :

$as_echo "#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for lo_create in -lpq" >&5
$as_echo_n "checking for lo_create in -lpq... " >&6; }
if ${ac_cv_lib_pq_lo_create+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char lo_create ();
int
main ()
{
return lo_create ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_lo_create=yes
else
  ac_cv_lib_pq_lo_create=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_lo_create" >&5
$as_echo "$ac_cv_lib_pq_lo_create" >&6; }
if test "x$ac_cv_lib_pq_lo_create" = xyes; then :

$as_echo "#define HAVE_PG_LO_CREATE 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for lo_import_with_oid in -lpq" >&5
$as_echo_n "checking for lo_import_with_oid in -lpq... " >&6; }
if ${ac_cv_lib_pq_lo_import_with_oid+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char lo_import_with_oid ();
int
main ()
{
return lo_import_with_oid ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_lo_import_with_oid=yes
else
  ac_cv_lib_pq_lo_import_with_oid=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_lo_import_with_oid" >&5
$as_echo "$ac_cv_lib_pq_lo_import_with_oid" >&6; }
if test "x$ac_cv_lib_pq_lo_import_with_oid" = xyes; then :

$as_echo "#define HAVE_PG_LO_IMPORT_WITH_OID 1" >>confdefs.h

fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQescapeLiteral in -lpq" >&5
$as_echo_n "checking for PQescapeLiteral in -lpq... " >&6; }
if ${ac_cv_lib_pq_PQescapeLiteral+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lpq  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char PQescapeLiteral ();
int
main ()
{
return PQescapeLiteral ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_pq_PQescapeLiteral=yes
else
  ac_cv_lib_pq_PQescapeLiteral=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQescapeLiteral" >&5
$as_echo "$ac_cv_lib_pq_PQescapeLiteral" >&6; }
if test "x$ac_cv_lib_pq_PQescapeLiteral" = xyes; then :

$as_echo "#define HAVE_PQESCAPELITERAL 1" >>confdefs.h

fi

  LIBS=$old_LIBS
  LDFLAGS=$old_LDFLAGS



  if test "$ext_shared" = "yes"; then
    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
    if test -n "$PGSQL_LIBDIR"; then

  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then

  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else

    ep_dir=`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PGSQL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PGSQL_SHARED_LIBADD="-L$ai_p $PGSQL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PGSQL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PGSQL_LIBDIR"; then

  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then

  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else

    ep_dir=`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PGSQL_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case pq in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpq $LIBS"
   ;;
  esac




  fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"



  if test "$PGSQL_INCLUDE" != "/usr/include"; then

  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_INCLUDE
  else

    ep_dir=`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PGSQL_INCLUDE"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  ext_builddir=ext/pgsql
  ext_srcdir=$abs_srcdir/ext/pgsql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PGSQL_SHARED=no


  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pgsql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PGSQL_SHARED=yes

  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppgsql.so '$ext_builddir'/phppgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(PGSQL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppgsql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppgsql.$suffix: $ext_builddir/phppgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppgsql.$suffix \$(phplibdir)

$ext_builddir/phppgsql.$suffix: \$(shared_objects_pgsql) \$(PHPPGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pgsql.so '$ext_builddir'/pgsql.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(QL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pgsql.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pgsql.$suffix: $ext_builddir/pgsql.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.$suffix \$(phplibdir)

$ext_builddir/pgsql.$suffix: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PGSQL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PGSQL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pgsql"
        ;;
      *)


  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pgsql

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi





php_enable_phar=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for phar archive support" >&5
$as_echo_n "checking for phar archive support... " >&6; }
# Check whether --enable-phar was given.
if test "${enable_phar+set}" = set; then :
  enableval=$enable_phar; PHP_PHAR=$enableval
else

  PHP_PHAR=yes
  test "$PHP_ENABLE_ALL" && PHP_PHAR=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PHAR in
shared,*)
  PHP_PHAR=`echo "$PHP_PHAR"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PHAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PHAR" != "no"; then

  ext_builddir=ext/phar
  ext_srcdir=$abs_srcdir/ext/phar

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PHAR_SHARED=no


  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC phar"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PHAR_SHARED=yes

  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_phar="$shared_objects_phar $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpphar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpphar.so '$ext_builddir'/phpphar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(PHAR_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpphar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpphar.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpphar.$suffix: $ext_builddir/phpphar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpphar.$suffix \$(phplibdir)

$ext_builddir/phpphar.$suffix: \$(shared_objects_phar) \$(PHPPHAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phar.so '$ext_builddir'/phar.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(R_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phar.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phar.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phar.$suffix: $ext_builddir/phar.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phar.$suffix \$(phplibdir)

$ext_builddir/phar.$suffix: \$(shared_objects_phar) \$(PHAR_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PHAR 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PHAR_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC phar"
        ;;
      *)


  case ext/phar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=phar

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for phar openssl support" >&5
$as_echo_n "checking for phar openssl support... " >&6; }
  if test "$PHP_HASH_SHARED" != "yes"; then
    if test "$PHP_HASH" != "no"; then

$as_echo "#define PHAR_HASH_OK 1" >>confdefs.h

    fi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" >&5
$as_echo "$as_me: WARNING: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" >&2;}
  fi
  if test "$PHP_OPENSSL_SHARED" = "yes"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no (shared openssl)" >&5
$as_echo "no (shared openssl)" >&6; }
  else
    if test "$PHP_OPENSSL" = "yes"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define PHAR_HAVE_OPENSSL 1" >>confdefs.h

    else
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    fi
  fi

  am_i_shared=$PHP_PHAR_SHARED
  is_it_shared=$PHP_HASH_SHARED
  is_it_enabled=$PHP_HASH
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension phar to build statically, but it
depends on extension hash, which you've configured to build shared.
You either need to build phar shared or build hash statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension phar, which depends on extension hash,
but you've either not enabled hash, or have disabled it.
" "$LINENO" 5
  fi


  am_i_shared=$PHP_PHAR_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension phar to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build phar shared or build spl statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension phar, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" "$LINENO" 5
  fi


  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments




    header_path=ext/phar
    for header_file in php_phar.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done




  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES ext/phar/phar.1 ext/phar/phar.phar.1"

fi



php_enable_posix=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable POSIX-like functions" >&5
$as_echo_n "checking whether to enable POSIX-like functions... " >&6; }
# Check whether --enable-posix was given.
if test "${enable_posix+set}" = set; then :
  enableval=$enable_posix; PHP_POSIX=$enableval
else

  PHP_POSIX=yes
  test "$PHP_ENABLE_ALL" && PHP_POSIX=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_POSIX in
shared,*)
  PHP_POSIX=`echo "$PHP_POSIX"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_POSIX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_POSIX" = "yes"; then

$as_echo "#define HAVE_POSIX 1" >>confdefs.h


  ext_builddir=ext/posix
  ext_srcdir=$abs_srcdir/ext/posix

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_POSIX_SHARED=no


  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC posix"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_POSIX_SHARED=yes

  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in posix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpposix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpposix.so '$ext_builddir'/phpposix.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(POSIX_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpposix.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpposix.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpposix.$suffix: $ext_builddir/phpposix.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpposix.$suffix \$(phplibdir)

$ext_builddir/phpposix.$suffix: \$(shared_objects_posix) \$(PHPPOSIX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/posix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/posix.so '$ext_builddir'/posix.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(IX_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/posix.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/posix.$suffix: $ext_builddir/posix.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.$suffix \$(phplibdir)

$ext_builddir/posix.$suffix: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_POSIX 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_POSIX_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC posix"
        ;;
      *)


  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=posix

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  for ac_header in sys/mkdev.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "sys/mkdev.h" "ac_cv_header_sys_mkdev_h" "$ac_includes_default"
if test "x$ac_cv_header_sys_mkdev_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SYS_MKDEV_H 1
_ACEOF

fi

done


  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo mknod getrlimit getlogin getgroups makedev initgroups getpwuid_r getgrgid_r
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working ttyname_r() implementation" >&5
$as_echo_n "checking for working ttyname_r() implementation... " >&6; }
  if test "$cross_compiling" = yes; then :

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" >&5
$as_echo "no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <unistd.h>

int main(int argc, char *argv[])
{
	char buf[64];

	return ttyname_r(0, buf, 64) ? 1 : 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define HAVE_TTYNAME_R 1" >>confdefs.h


else

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no, posix_ttyname() will be thread-unsafe" >&5
$as_echo "no, posix_ttyname() will be thread-unsafe" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for utsname.domainname" >&5
$as_echo_n "checking for utsname.domainname... " >&6; }
if ${ac_cv_have_utsname_domainname+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

      #define _GNU_SOURCE
      #include <sys/utsname.h>

int
main ()
{

      return sizeof(((struct utsname *)0)->domainname);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

      ac_cv_have_utsname_domainname=yes

else

      ac_cv_have_utsname_domainname=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_utsname_domainname" >&5
$as_echo "$ac_cv_have_utsname_domainname" >&6; }
  if test "$ac_cv_have_utsname_domainname" = yes; then

$as_echo "#define HAVE_UTSNAME_DOMAINNAME 1" >>confdefs.h

  fi
fi



php_with_pspell=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for PSPELL support" >&5
$as_echo_n "checking for PSPELL support... " >&6; }

# Check whether --with-pspell was given.
if test "${with_pspell+set}" = set; then :
  withval=$with_pspell; PHP_PSPELL=$withval
else

  PHP_PSPELL=no
  test "$PHP_ENABLE_ALL" && PHP_PSPELL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PSPELL in
shared,*)
  PHP_PSPELL=`echo "$PHP_PSPELL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PSPELL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PSPELL" != "no"; then

  ext_builddir=ext/pspell
  ext_srcdir=$abs_srcdir/ext/pspell

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_PSPELL_SHARED=no


  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pspell"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_PSPELL_SHARED=yes

  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppspell.so '$ext_builddir'/phppspell.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(PSPELL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppspell.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppspell.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phppspell.$suffix: $ext_builddir/phppspell.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phppspell.$suffix \$(phplibdir)

$ext_builddir/phppspell.$suffix: \$(shared_objects_pspell) \$(PHPPSPELL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pspell.so '$ext_builddir'/pspell.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(ELL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pspell.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pspell.$suffix: $ext_builddir/pspell.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.$suffix \$(phplibdir)

$ext_builddir/pspell.$suffix: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_PSPELL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_PSPELL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC pspell"
        ;;
      *)


  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=pspell

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

	if test "$PHP_PSPELL" != "yes"; then
	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
	else
	    PSPELL_SEARCH_DIRS="/usr/local /usr"
	fi
	for i in $PSPELL_SEARCH_DIRS; do
		if test -f $i/include/pspell/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include/pspell
		elif test -f $i/include/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include
		fi
	done

	if test -z "$PSPELL_DIR"; then
		as_fn_error $? "Cannot find pspell" "$LINENO" 5
	fi

	PSPELL_LIBDIR=$PSPELL_DIR/$PHP_LIBDIR



  if test "$ext_shared" = "yes"; then
    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
    if test -n "$PSPELL_LIBDIR"; then

  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then

  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else

    ep_dir=`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PSPELL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PSPELL_LIBDIR"; then

  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then

  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else

    ep_dir=`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PSPELL_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case pspell in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lpspell $LIBS"
   ;;
  esac




  fi




  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
		-L$PSPELL_LIBDIR
	"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for new_aspell_config in -laspell" >&5
$as_echo_n "checking for new_aspell_config in -laspell... " >&6; }
if ${ac_cv_lib_aspell_new_aspell_config+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-laspell  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char new_aspell_config ();
int
main ()
{
return new_aspell_config ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_aspell_new_aspell_config=yes
else
  ac_cv_lib_aspell_new_aspell_config=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_aspell_new_aspell_config" >&5
$as_echo "$ac_cv_lib_aspell_new_aspell_config" >&6; }
if test "x$ac_cv_lib_aspell_new_aspell_config" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    PSPELL_SHARED_LIBADD="-laspell $PSPELL_SHARED_LIBADD"
    if test -n "$PSPELL_LIBDIR"; then

  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then

  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else

    ep_dir=`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PSPELL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PSPELL_LIBDIR"; then

  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then

  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else

    ep_dir=`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PSPELL_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case aspell in
  c|c_r|pthread*) ;;
  *)
      LIBS="-laspell $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_aspell_new_aspell_config


fi



  if test "$PSPELL_INCDIR" != "/usr/include"; then

  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_INCDIR
  else

    ep_dir=`echo $PSPELL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PSPELL_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"


$as_echo "#define HAVE_PSPELL 1" >>confdefs.h

fi



php_with_libedit=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for libedit readline replacement" >&5
$as_echo_n "checking for libedit readline replacement... " >&6; }

# Check whether --with-libedit was given.
if test "${with_libedit+set}" = set; then :
  withval=$with_libedit; PHP_LIBEDIT=$withval
else

  PHP_LIBEDIT=no
  test "$PHP_ENABLE_ALL" && PHP_LIBEDIT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LIBEDIT in
shared,*)
  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_LIBEDIT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_LIBEDIT" = "no"; then

php_with_readline=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for readline support" >&5
$as_echo_n "checking for readline support... " >&6; }

# Check whether --with-readline was given.
if test "${with_readline+set}" = set; then :
  withval=$with_readline; PHP_READLINE=$withval
else

  PHP_READLINE=no
  test "$PHP_ENABLE_ALL" && PHP_READLINE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_READLINE in
shared,*)
  PHP_READLINE=`echo "$PHP_READLINE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_READLINE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



else
    php_with_readline=no
fi

if test "$PHP_READLINE" && test "$PHP_READLINE" != "no"; then
  for i in $PHP_READLINE /usr/local /usr; do
    test -f $i/include/readline/readline.h && READLINE_DIR=$i && break
  done

  if test -z "$READLINE_DIR"; then
    as_fn_error $? "Please reinstall readline - I cannot find readline.h" "$LINENO" 5
  fi


  if test "$READLINE_DIR/include" != "/usr/include"; then

  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/include
  else

    ep_dir=`echo $READLINE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$READLINE_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  PHP_READLINE_LIBS=""
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -lncurses" >&5
$as_echo_n "checking for tgetent in -lncurses... " >&6; }
if ${ac_cv_lib_ncurses_tgetent+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lncurses  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char tgetent ();
int
main ()
{
return tgetent ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ncurses_tgetent=yes
else
  ac_cv_lib_ncurses_tgetent=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ncurses_tgetent" >&5
$as_echo "$ac_cv_lib_ncurses_tgetent" >&6; }
if test "x$ac_cv_lib_ncurses_tgetent" = xyes; then :



  case ncurses in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD"
    else


  case ncurses in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lncurses $LIBS"
   ;;
  esac


    fi
   ;;
  esac


    PHP_READLINE_LIBS="$PHP_READLINE_LIBS -lncurses"

else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -ltermcap" >&5
$as_echo_n "checking for tgetent in -ltermcap... " >&6; }
if ${ac_cv_lib_termcap_tgetent+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ltermcap  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char tgetent ();
int
main ()
{
return tgetent ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_termcap_tgetent=yes
else
  ac_cv_lib_termcap_tgetent=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_termcap_tgetent" >&5
$as_echo "$ac_cv_lib_termcap_tgetent" >&6; }
if test "x$ac_cv_lib_termcap_tgetent" = xyes; then :



  case termcap in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD"
    else


  case termcap in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ltermcap $LIBS"
   ;;
  esac


    fi
   ;;
  esac


      PHP_READLINE_LIBS="$PHP_READLINE_LIBS -ltermcap"

fi


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for readline in -lreadline" >&5
$as_echo_n "checking for readline in -lreadline... " >&6; }
if ${ac_cv_lib_readline_readline+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lreadline  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char readline ();
int
main ()
{
return readline ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_readline_readline=yes
else
  ac_cv_lib_readline_readline=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_readline" >&5
$as_echo "$ac_cv_lib_readline_readline" >&6; }
if test "x$ac_cv_lib_readline_readline" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
    if test -n "$READLINE_DIR/$PHP_LIBDIR"; then

  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$READLINE_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$READLINE_DIR/$PHP_LIBDIR"; then

  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$READLINE_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case readline in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lreadline $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_readline_readline

    as_fn_error $? "readline library not found" "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_pending_input in -lreadline" >&5
$as_echo_n "checking for rl_pending_input in -lreadline... " >&6; }
if ${ac_cv_lib_readline_rl_pending_input+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lreadline  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char rl_pending_input ();
int
main ()
{
return rl_pending_input ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_readline_rl_pending_input=yes
else
  ac_cv_lib_readline_rl_pending_input=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_pending_input" >&5
$as_echo "$ac_cv_lib_readline_rl_pending_input" >&6; }
if test "x$ac_cv_lib_readline_rl_pending_input" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_readline_rl_pending_input

    as_fn_error $? "invalid readline installation detected. Try --with-libedit instead." "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_callback_read_char in -lreadline" >&5
$as_echo_n "checking for rl_callback_read_char in -lreadline... " >&6; }
if ${ac_cv_lib_readline_rl_callback_read_char+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lreadline  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char rl_callback_read_char ();
int
main ()
{
return rl_callback_read_char ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_readline_rl_callback_read_char=yes
else
  ac_cv_lib_readline_rl_callback_read_char=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_callback_read_char" >&5
$as_echo "$ac_cv_lib_readline_rl_callback_read_char" >&6; }
if test "x$ac_cv_lib_readline_rl_callback_read_char" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_RL_CALLBACK_READ_CHAR 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_readline_rl_callback_read_char


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_on_new_line in -ledit" >&5
$as_echo_n "checking for rl_on_new_line in -ledit... " >&6; }
if ${ac_cv_lib_edit_rl_on_new_line+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ledit  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char rl_on_new_line ();
int
main ()
{
return rl_on_new_line ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_edit_rl_on_new_line=yes
else
  ac_cv_lib_edit_rl_on_new_line=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_edit_rl_on_new_line" >&5
$as_echo "$ac_cv_lib_edit_rl_on_new_line" >&6; }
if test "x$ac_cv_lib_edit_rl_on_new_line" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_RL_ON_NEW_LINE 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_edit_rl_on_new_line


fi



$as_echo "#define HAVE_LIBREADLINE 1" >>confdefs.h


elif test "$PHP_LIBEDIT" != "no"; then

  for i in $PHP_LIBEDIT /usr/local /usr; do
    test -f $i/include/editline/readline.h && LIBEDIT_DIR=$i && break
  done

  if test -z "$LIBEDIT_DIR"; then
    as_fn_error $? "Please reinstall libedit - I cannot find readline.h" "$LINENO" 5
  fi


  if test "$LIBEDIT_DIR/include" != "/usr/include"; then

  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/include
  else

    ep_dir=`echo $LIBEDIT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LIBEDIT_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -lncurses" >&5
$as_echo_n "checking for tgetent in -lncurses... " >&6; }
if ${ac_cv_lib_ncurses_tgetent+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lncurses  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char tgetent ();
int
main ()
{
return tgetent ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ncurses_tgetent=yes
else
  ac_cv_lib_ncurses_tgetent=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ncurses_tgetent" >&5
$as_echo "$ac_cv_lib_ncurses_tgetent" >&6; }
if test "x$ac_cv_lib_ncurses_tgetent" = xyes; then :



  case ncurses in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD"
    else


  case ncurses in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lncurses $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -ltermcap" >&5
$as_echo_n "checking for tgetent in -ltermcap... " >&6; }
if ${ac_cv_lib_termcap_tgetent+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ltermcap  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char tgetent ();
int
main ()
{
return tgetent ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_termcap_tgetent=yes
else
  ac_cv_lib_termcap_tgetent=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_termcap_tgetent" >&5
$as_echo "$ac_cv_lib_termcap_tgetent" >&6; }
if test "x$ac_cv_lib_termcap_tgetent" = xyes; then :



  case termcap in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD"
    else


  case termcap in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ltermcap $LIBS"
   ;;
  esac


    fi
   ;;
  esac



fi


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for readline in -ledit" >&5
$as_echo_n "checking for readline in -ledit... " >&6; }
if ${ac_cv_lib_edit_readline+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ledit  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char readline ();
int
main ()
{
return readline ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_edit_readline=yes
else
  ac_cv_lib_edit_readline=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_edit_readline" >&5
$as_echo "$ac_cv_lib_edit_readline" >&6; }
if test "x$ac_cv_lib_edit_readline" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
    if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then

  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LIBEDIT_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then

  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$LIBEDIT_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case edit in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ledit $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_edit_readline

    as_fn_error $? "edit library required by readline not found" "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_callback_read_char in -ledit" >&5
$as_echo_n "checking for rl_callback_read_char in -ledit... " >&6; }
if ${ac_cv_lib_edit_rl_callback_read_char+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ledit  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char rl_callback_read_char ();
int
main ()
{
return rl_callback_read_char ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_edit_rl_callback_read_char=yes
else
  ac_cv_lib_edit_rl_callback_read_char=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_edit_rl_callback_read_char" >&5
$as_echo "$ac_cv_lib_edit_rl_callback_read_char" >&6; }
if test "x$ac_cv_lib_edit_rl_callback_read_char" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_RL_CALLBACK_READ_CHAR 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_edit_rl_callback_read_char


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$READLINE_DIR/$PHP_LIBDIR
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_on_new_line in -ledit" >&5
$as_echo_n "checking for rl_on_new_line in -ledit... " >&6; }
if ${ac_cv_lib_edit_rl_on_new_line+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ledit  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char rl_on_new_line ();
int
main ()
{
return rl_on_new_line ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_edit_rl_on_new_line=yes
else
  ac_cv_lib_edit_rl_on_new_line=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_edit_rl_on_new_line" >&5
$as_echo "$ac_cv_lib_edit_rl_on_new_line" >&6; }
if test "x$ac_cv_lib_edit_rl_on_new_line" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_RL_ON_NEW_LINE 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_edit_rl_on_new_line


fi



$as_echo "#define HAVE_LIBEDIT 1" >>confdefs.h

fi

if test "$PHP_READLINE" != "no" || test "$PHP_LIBEDIT" != "no"; then
  for ac_func in rl_completion_matches
do :
  ac_fn_c_check_func "$LINENO" "rl_completion_matches" "ac_cv_func_rl_completion_matches"
if test "x$ac_cv_func_rl_completion_matches" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_RL_COMPLETION_MATCHES 1
_ACEOF

fi
done


  ext_builddir=ext/readline
  ext_srcdir=$abs_srcdir/ext/readline

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
    PHP_READLINE_SHARED=no


  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c readline_cli.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC readline"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_READLINE_SHARED=yes

  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in readline.c readline_cli.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreadline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreadline.so '$ext_builddir'/phpreadline.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(READLINE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreadline.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreadline.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpreadline.$suffix: $ext_builddir/phpreadline.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreadline.$suffix \$(phplibdir)

$ext_builddir/phpreadline.$suffix: \$(shared_objects_readline) \$(PHPREADLINE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/readline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/readline.so '$ext_builddir'/readline.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(DLINE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/readline.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/readline.$suffix: $ext_builddir/readline.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.$suffix \$(phplibdir)

$ext_builddir/readline.$suffix: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_READLINE 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    PHP_READLINE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c readline_cli.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC readline"
        ;;
      *)


  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c readline_cli.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=readline

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"

fi



php_with_recode=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for recode support" >&5
$as_echo_n "checking for recode support... " >&6; }

# Check whether --with-recode was given.
if test "${with_recode+set}" = set; then :
  withval=$with_recode; PHP_RECODE=$withval
else

  PHP_RECODE=no
  test "$PHP_ENABLE_ALL" && PHP_RECODE=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_RECODE in
shared,*)
  PHP_RECODE=`echo "$PHP_RECODE"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_RECODE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_RECODE" != "no"; then
  RECODE_LIST="$PHP_RECODE /usr/local /usr /opt"

  for i in $RECODE_LIST; do
    if test -f $i/include/recode.h; then
      RECODE_DIR=$i
      RECODE_INC=include
      RECODE_LIB=$PHP_LIBDIR
    fi
    if test -f $i/include/recode/recode.h; then
      RECODE_DIR=$i
      RECODE_INC=include/recode
      RECODE_LIB=$PHP_LIBDIR/recode
    fi
    if test -f $i/recode/include/recode.h; then
      RECODE_DIR=$i/recode
      RECODE_INC=include
      RECODE_LIB=$PHP_LIBDIR
    fi
    test -n "$RECODE_DIR" && break
  done

  if test -z "$RECODE_DIR"; then
    as_fn_error $? "Can not find recode.h anywhere under $RECODE_LIST." "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    -L$RECODE_DIR/$RECODE_LIB
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for recode_format_table in -lrecode" >&5
$as_echo_n "checking for recode_format_table in -lrecode... " >&6; }
if ${ac_cv_lib_recode_recode_format_table+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lrecode  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char recode_format_table ();
int
main ()
{
return recode_format_table ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_recode_recode_format_table=yes
else
  ac_cv_lib_recode_recode_format_table=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_recode_recode_format_table" >&5
$as_echo "$ac_cv_lib_recode_recode_format_table" >&6; }
if test "x$ac_cv_lib_recode_recode_format_table" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then

  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then

  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else

    ep_dir=`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$RECODE_DIR/$RECODE_LIB"`
  fi


      if test "$ext_shared" = "yes"; then
        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$RECODE_DIR/$RECODE_LIB"; then

  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then

  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else

    ep_dir=`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$RECODE_DIR/$RECODE_LIB"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case recode in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lrecode $LIBS"
   ;;
  esac




  fi




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_recode_recode_format_table

    old_LDFLAGS=$LDFLAGS
    old_LIBS=$LIBS
    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
    LIBS="$LIBS -lrecode"
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

char *program_name;

int
main ()
{

recode_format_table();

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :



  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then

  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then

  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else

    ep_dir=`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$RECODE_DIR/$RECODE_LIB"`
  fi


      if test "$ext_shared" = "yes"; then
        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$RECODE_DIR/$RECODE_LIB"; then

  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then

  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else

    ep_dir=`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$RECODE_DIR/$RECODE_LIB"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case recode in
  c|c_r|pthread*) ;;
  *)
      DLIBS="-lrecode $DLIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_BROKEN_RECODE 1" >>confdefs.h


else

      as_fn_error $? "I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" "$LINENO" 5

fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
    LIBS=$old_LIBS
    LDFLAGS=$old_LDFLAGS


fi



$as_echo "#define HAVE_LIBRECODE 1" >>confdefs.h


  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then

  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_INC
  else

    ep_dir=`echo $RECODE_DIR/$RECODE_INC|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$RECODE_DIR/$RECODE_INC"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"

  for ac_header in stdbool.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "stdbool.h" "ac_cv_header_stdbool_h" "$ac_includes_default"
if test "x$ac_cv_header_stdbool_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_STDBOOL_H 1
_ACEOF

fi

done


  ext_builddir=ext/recode
  ext_srcdir=$abs_srcdir/ext/recode

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_RECODE_SHARED=no


  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC recode"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_RECODE_SHARED=yes

  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in recode.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phprecode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phprecode.so '$ext_builddir'/phprecode.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(RECODE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phprecode.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phprecode.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phprecode.$suffix: $ext_builddir/phprecode.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phprecode.$suffix \$(phplibdir)

$ext_builddir/phprecode.$suffix: \$(shared_objects_recode) \$(PHPRECODE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/recode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/recode.so '$ext_builddir'/recode.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(ODE_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/recode.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/recode.$suffix: $ext_builddir/recode.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.$suffix \$(phplibdir)

$ext_builddir/recode.$suffix: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_RECODE 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_RECODE_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC recode"
        ;;
      *)


  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=recode

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



$as_echo "#define HAVE_REFLECTION 1" >>confdefs.h


  ext_builddir=ext/reflection
  ext_srcdir=$abs_srcdir/ext/reflection

  ac_extra=

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_REFLECTION_SHARED=no


  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC reflection"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_REFLECTION_SHARED=yes

  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_reflection="$shared_objects_reflection $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreflection.so '$ext_builddir'/phpreflection.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(REFLECTION_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreflection.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreflection.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpreflection.$suffix: $ext_builddir/phpreflection.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreflection.$suffix \$(phplibdir)

$ext_builddir/phpreflection.$suffix: \$(shared_objects_reflection) \$(PHPREFLECTION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/reflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/reflection.so '$ext_builddir'/reflection.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(LECTION_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/reflection.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/reflection.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/reflection.$suffix: $ext_builddir/reflection.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/reflection.$suffix \$(phplibdir)

$ext_builddir/reflection.$suffix: \$(shared_objects_reflection) \$(REFLECTION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_REFLECTION 1
_ACEOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_REFLECTION_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC reflection"
        ;;
      *)


  case ext/reflection in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_reflection.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=reflection

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi




php_enable_session=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable PHP sessions" >&5
$as_echo_n "checking whether to enable PHP sessions... " >&6; }
# Check whether --enable-session was given.
if test "${enable_session+set}" = set; then :
  enableval=$enable_session; PHP_SESSION=$enableval
else

  PHP_SESSION=yes
  test "$PHP_ENABLE_ALL" && PHP_SESSION=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SESSION in
shared,*)
  PHP_SESSION=`echo "$PHP_SESSION"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SESSION=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_mm=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mm support" >&5
$as_echo_n "checking for mm support... " >&6; }

# Check whether --with-mm was given.
if test "${with_mm+set}" = set; then :
  withval=$with_mm; PHP_MM=$withval
else

  PHP_MM=no


fi


ext_output=$PHP_MM
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SESSION" != "no"; then

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether pwrite works" >&5
$as_echo_n "checking whether pwrite works... " >&6; }
if ${ac_cv_pwrite+:} false; then :
  $as_echo_n "(cached) " >&6
else


  if test "$cross_compiling" = yes; then :

    ac_cv_pwrite=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>

    main() {
    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);

    if (fd < 0) exit(1);
    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }


_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    ac_cv_pwrite=yes

else

    ac_cv_pwrite=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


    if test "$ac_cv_pwrite" = "no"; then

  if test "$cross_compiling" = yes; then :

    ac_cv_pwrite=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>
ssize_t pwrite(int, void *, size_t, off64_t);
    main() {
    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);

    if (fd < 0) exit(1);
    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }


_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    ac_cv_pwrite=yes

else

    ac_cv_pwrite=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


      if test "$ac_cv_pwrite" = "yes"; then
        ac_cv_pwrite=64
      fi
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_pwrite" >&5
$as_echo "$ac_cv_pwrite" >&6; }

  if test "$ac_cv_pwrite" != "no"; then

$as_echo "#define HAVE_PWRITE 1" >>confdefs.h

    if test "$ac_cv_pwrite" = "64"; then

$as_echo "#define PHP_PWRITE_64 1" >>confdefs.h

    fi
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether pread works" >&5
$as_echo_n "checking whether pread works... " >&6; }
if ${ac_cv_pread+:} false; then :
  $as_echo_n "(cached) " >&6
else


  echo test > conftest_in
  if test "$cross_compiling" = yes; then :

    ac_cv_pread=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>

    main() {
    char buf[3];
    int fd = open("conftest_in", O_RDONLY);
    if (fd < 0) exit(1);
    if (pread(fd, buf, 2, 0) != 2) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    ac_cv_pread=yes

else

    ac_cv_pread=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  rm -f conftest_in

    if test "$ac_cv_pread" = "no"; then

  echo test > conftest_in
  if test "$cross_compiling" = yes; then :

    ac_cv_pread=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>
ssize_t pread(int, void *, size_t, off64_t);
    main() {
    char buf[3];
    int fd = open("conftest_in", O_RDONLY);
    if (fd < 0) exit(1);
    if (pread(fd, buf, 2, 0) != 2) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    ac_cv_pread=yes

else

    ac_cv_pread=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  rm -f conftest_in

      if test "$ac_cv_pread" = "yes"; then
        ac_cv_pread=64
      fi
    fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_pread" >&5
$as_echo "$ac_cv_pread" >&6; }

  if test "$ac_cv_pread" != "no"; then

$as_echo "#define HAVE_PREAD 1" >>confdefs.h

    if test "$ac_cv_pread" = "64"; then

$as_echo "#define PHP_PREAD_64 1" >>confdefs.h

    fi
  fi


  ext_builddir=ext/session
  ext_srcdir=$abs_srcdir/ext/session

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SESSION_SHARED=no


  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_user_class.c session.c mod_files.c mod_mm.c mod_user.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC session"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SESSION_SHARED=yes

  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mod_user_class.c session.c mod_files.c mod_mm.c mod_user.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsession.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsession.so '$ext_builddir'/phpsession.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(SESSION_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsession.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsession.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsession.$suffix: $ext_builddir/phpsession.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsession.$suffix \$(phplibdir)

$ext_builddir/phpsession.$suffix: \$(shared_objects_session) \$(PHPSESSION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/session.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/session.so '$ext_builddir'/session.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(SION_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/session.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/session.$suffix: $ext_builddir/session.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/session.$suffix \$(phplibdir)

$ext_builddir/session.$suffix: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SESSION 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SESSION_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_user_class.c session.c mod_files.c mod_mm.c mod_user.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC session"
        ;;
      *)


  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mod_user_class.c session.c mod_files.c mod_mm.c mod_user.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=session

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  am_i_shared=$PHP_SESSION_SHARED
  is_it_shared=$PHP_HASH_SHARED
  is_it_enabled=$PHP_HASH
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension session to build statically, but it
depends on extension hash, which you've configured to build shared.
You either need to build session shared or build hash statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension session, which depends on extension hash,
but you've either not enabled hash, or have disabled it.
" "$LINENO" 5
  fi


  am_i_shared=$PHP_SESSION_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension session to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build session shared or build spl statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension session, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" "$LINENO" 5
  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"



    header_path=ext/session
    for header_file in php_session.h mod_files.h mod_user.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



$as_echo "#define HAVE_PHP_SESSION 1" >>confdefs.h

fi

if test "$PHP_MM" != "no"; then
  for i in $PHP_MM /usr/local /usr; do
    test -f "$i/include/mm.h" && MM_DIR=$i && break
  done

  if test -z "$MM_DIR" ; then
    as_fn_error $? "cannot find mm library" "$LINENO" 5
  fi



  if test "$ext_shared" = "yes"; then
    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
    if test -n "$MM_DIR/$PHP_LIBDIR"; then

  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MM_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        SESSION_SHARED_LIBADD="-L$ai_p $SESSION_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p $SESSION_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$MM_DIR/$PHP_LIBDIR"; then

  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MM_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case mm in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lmm $LIBS"
   ;;
  esac




  fi



  if test "$MM_DIR/include" != "/usr/include"; then

  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/include
  else

    ep_dir=`echo $MM_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$MM_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



    for header_file in ext/session/mod_mm.h; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



$as_echo "#define HAVE_LIBMM 1" >>confdefs.h

fi


php_enable_shmop=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable shmop support" >&5
$as_echo_n "checking whether to enable shmop support... " >&6; }
# Check whether --enable-shmop was given.
if test "${enable_shmop+set}" = set; then :
  enableval=$enable_shmop; PHP_SHMOP=$enableval
else

  PHP_SHMOP=no
  test "$PHP_ENABLE_ALL" && PHP_SHMOP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SHMOP in
shared,*)
  PHP_SHMOP=`echo "$PHP_SHMOP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SHMOP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SHMOP" != "no"; then

$as_echo "#define HAVE_SHMOP 1" >>confdefs.h


  ext_builddir=ext/shmop
  ext_srcdir=$abs_srcdir/ext/shmop

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SHMOP_SHARED=no


  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC shmop"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SHMOP_SHARED=yes

  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpshmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpshmop.so '$ext_builddir'/phpshmop.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(SHMOP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpshmop.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpshmop.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpshmop.$suffix: $ext_builddir/phpshmop.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpshmop.$suffix \$(phplibdir)

$ext_builddir/phpshmop.$suffix: \$(shared_objects_shmop) \$(PHPSHMOP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/shmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/shmop.so '$ext_builddir'/shmop.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(OP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/shmop.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/shmop.$suffix: $ext_builddir/shmop.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.$suffix \$(phplibdir)

$ext_builddir/shmop.$suffix: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SHMOP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SHMOP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC shmop"
        ;;
      *)


  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=shmop

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_simplexml=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable SimpleXML support" >&5
$as_echo_n "checking whether to enable SimpleXML support... " >&6; }
# Check whether --enable-simplexml was given.
if test "${enable_simplexml+set}" = set; then :
  enableval=$enable_simplexml; PHP_SIMPLEXML=$enableval
else

  PHP_SIMPLEXML=yes
  test "$PHP_ENABLE_ALL" && PHP_SIMPLEXML=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SIMPLEXML in
shared,*)
  PHP_SIMPLEXML=`echo "$PHP_SIMPLEXML"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SIMPLEXML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_SIMPLEXML" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    as_fn_error $? "SimpleXML extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        SIMPLEXML_SHARED_LIBADD="-L$ai_p $SIMPLEXML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SIMPLEXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $SIMPLEXML_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $SIMPLEXML_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi


$as_echo "#define HAVE_SIMPLEXML 1" >>confdefs.h


  ext_builddir=ext/simplexml
  ext_srcdir=$abs_srcdir/ext/simplexml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SIMPLEXML_SHARED=no


  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC simplexml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SIMPLEXML_SHARED=yes

  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_simplexml="$shared_objects_simplexml $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsimplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsimplexml.so '$ext_builddir'/phpsimplexml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(SIMPLEXML_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsimplexml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsimplexml.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsimplexml.$suffix: $ext_builddir/phpsimplexml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsimplexml.$suffix \$(phplibdir)

$ext_builddir/phpsimplexml.$suffix: \$(shared_objects_simplexml) \$(PHPSIMPLEXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/simplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/simplexml.so '$ext_builddir'/simplexml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(PLEXML_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/simplexml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/simplexml.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/simplexml.$suffix: $ext_builddir/simplexml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/simplexml.$suffix \$(phplibdir)

$ext_builddir/simplexml.$suffix: \$(shared_objects_simplexml) \$(SIMPLEXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SIMPLEXML 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SIMPLEXML_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC simplexml"
        ;;
      *)


  case ext/simplexml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in simplexml.c sxe.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=simplexml

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST SIMPLEXML_SHARED_LIBADD"


    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
    as_fn_error $? "xml2-config not found. Please check your libxml2 installation." "$LINENO" 5

  fi


  am_i_shared=$PHP_SIMPLEXML_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension simplexml to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build simplexml shared or build libxml statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension simplexml, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" "$LINENO" 5
  fi


  am_i_shared=$PHP_SIMPLEXML_SHARED
  is_it_shared=$PHP_SPL_SHARED
  is_it_enabled=$PHP_SPL
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension simplexml to build statically, but it
depends on extension spl, which you've configured to build shared.
You either need to build simplexml shared or build spl statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension simplexml, which depends on extension spl,
but you've either not enabled spl, or have disabled it.
" "$LINENO" 5
  fi

fi



php_with_snmp=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SNMP support" >&5
$as_echo_n "checking for SNMP support... " >&6; }

# Check whether --with-snmp was given.
if test "${with_snmp+set}" = set; then :
  withval=$with_snmp; PHP_SNMP=$withval
else

  PHP_SNMP=no
  test "$PHP_ENABLE_ALL" && PHP_SNMP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SNMP in
shared,*)
  PHP_SNMP=`echo "$PHP_SNMP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SNMP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_openssl_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking OpenSSL dir for SNMP" >&5
$as_echo_n "checking OpenSSL dir for SNMP... " >&6; }

# Check whether --with-openssl-dir was given.
if test "${with_openssl_dir+set}" = set; then :
  withval=$with_openssl_dir; PHP_OPENSSL_DIR=$withval
else

  PHP_OPENSSL_DIR=no


fi


ext_output=$PHP_OPENSSL_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SNMP" != "no"; then

  if test "$PHP_SNMP" = "yes"; then
    # Extract the first word of "net-snmp-config", so it can be a program name with args.
set dummy net-snmp-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_SNMP_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $SNMP_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
as_dummy="/usr/local/bin:$PATH"
for as_dir in $as_dummy
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_SNMP_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  ;;
esac
fi
SNMP_CONFIG=$ac_cv_path_SNMP_CONFIG
if test -n "$SNMP_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $SNMP_CONFIG" >&5
$as_echo "$SNMP_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  else
    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
  fi

  if test -x "$SNMP_CONFIG"; then
    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
    SNMP_PREFIX=`$SNMP_CONFIG --prefix`
    snmp_full_version=`$SNMP_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $snmp_full_version
    IFS=$ac_IFS
    SNMP_VERSION=`expr $1 \* 1000 + $2`
    if test "$SNMP_VERSION" -ge "5003"; then
      if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then

  if test "${SNMP_PREFIX}/include" != "/usr/include"; then

  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
    ai_p=${SNMP_PREFIX}/include
  else

    ep_dir=`echo $SNMP_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "${SNMP_PREFIX}/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


  for ac_i in $SNMP_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

        SNMP_LIBNAME=netsnmp
      else
        as_fn_error $? "Could not find the required paths. Please check your net-snmp installation." "$LINENO" 5
      fi
    else
      as_fn_error $? "Net-SNMP version 5.3 or greater reqired (detected $snmp_full_version)." "$LINENO" 5
    fi
  else
    as_fn_error $? "Could not find net-snmp-config binary. Please check your net-snmp installation." "$LINENO" 5
  fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $SNMP_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$SNMP_LIBNAME''_init_snmp" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for init_snmp in -l$SNMP_LIBNAME" >&5
$as_echo_n "checking for init_snmp in -l$SNMP_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$SNMP_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char init_snmp ();
int
main ()
{
return init_snmp ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_SNMP 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$SNMP_LIBNAME_init_snmp

    as_fn_error $? "SNMP sanity check failed. Please check config.log for more information." "$LINENO" 5


fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
    $SNMP_SHARED_LIBADD
  "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$SNMP_LIBNAME''_shutdown_snmp_logging" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for shutdown_snmp_logging in -l$SNMP_LIBNAME" >&5
$as_echo_n "checking for shutdown_snmp_logging in -l$SNMP_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$SNMP_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char shutdown_snmp_logging ();
int
main ()
{
return shutdown_snmp_logging ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_SHUTDOWN_SNMP_LOGGING 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$SNMP_LIBNAME_shutdown_snmp_logging


fi



  ext_builddir=ext/snmp
  ext_srcdir=$abs_srcdir/ext/snmp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SNMP_SHARED=no


  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC snmp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SNMP_SHARED=yes

  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsnmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsnmp.so '$ext_builddir'/phpsnmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(SNMP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsnmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsnmp.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsnmp.$suffix: $ext_builddir/phpsnmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsnmp.$suffix \$(phplibdir)

$ext_builddir/phpsnmp.$suffix: \$(shared_objects_snmp) \$(PHPSNMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/snmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/snmp.so '$ext_builddir'/snmp.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(P_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/snmp.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/snmp.$suffix: $ext_builddir/snmp.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.$suffix \$(phplibdir)

$ext_builddir/snmp.$suffix: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SNMP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SNMP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC snmp"
        ;;
      *)


  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=snmp

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"

fi



php_enable_soap=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable SOAP support" >&5
$as_echo_n "checking whether to enable SOAP support... " >&6; }
# Check whether --enable-soap was given.
if test "${enable_soap+set}" = set; then :
  enableval=$enable_soap; PHP_SOAP=$enableval
else

  PHP_SOAP=no
  test "$PHP_ENABLE_ALL" && PHP_SOAP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOAP in
shared,*)
  PHP_SOAP=`echo "$PHP_SOAP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SOAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_SOAP" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    as_fn_error $? "SOAP extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        SOAP_SHARED_LIBADD="-L$ai_p $SOAP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SOAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SOAP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $SOAP_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi


$as_echo "#define HAVE_SOAP 1" >>confdefs.h


  ext_builddir=ext/soap
  ext_srcdir=$abs_srcdir/ext/soap

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SOAP_SHARED=no


  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC soap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SOAP_SHARED=yes

  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_soap="$shared_objects_soap $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsoap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsoap.so '$ext_builddir'/phpsoap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(SOAP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsoap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsoap.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsoap.$suffix: $ext_builddir/phpsoap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsoap.$suffix \$(phplibdir)

$ext_builddir/phpsoap.$suffix: \$(shared_objects_soap) \$(PHPSOAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/soap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/soap.so '$ext_builddir'/soap.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(P_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/soap.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/soap.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/soap.$suffix: $ext_builddir/soap.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/soap.$suffix \$(phplibdir)

$ext_builddir/soap.$suffix: \$(shared_objects_soap) \$(SOAP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SOAP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SOAP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC soap"
        ;;
      *)


  case ext/soap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=soap

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST SOAP_SHARED_LIBADD"


    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
    as_fn_error $? "xml2-config not found. Please check your libxml2 installation." "$LINENO" 5

  fi

fi



php_enable_sockets=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable sockets support" >&5
$as_echo_n "checking whether to enable sockets support... " >&6; }
# Check whether --enable-sockets was given.
if test "${enable_sockets+set}" = set; then :
  enableval=$enable_sockets; PHP_SOCKETS=$enableval
else

  PHP_SOCKETS=no
  test "$PHP_ENABLE_ALL" && PHP_SOCKETS=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOCKETS in
shared,*)
  PHP_SOCKETS=`echo "$PHP_SOCKETS"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SOCKETS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SOCKETS" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct cmsghdr" >&5
$as_echo_n "checking for struct cmsghdr... " >&6; }
if ${ac_cv_cmsghdr+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/socket.h>
int
main ()
{
struct cmsghdr s; s
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_cmsghdr=yes
else
  ac_cv_cmsghdr=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_cmsghdr" >&5
$as_echo "$ac_cv_cmsghdr" >&6; }

  if test "$ac_cv_cmsghdr" = yes; then

$as_echo "#define HAVE_CMSGHDR 1" >>confdefs.h

  fi

  for ac_func in hstrerror socketpair if_nametoindex if_indextoname
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done

  for ac_header in netdb.h netinet/tcp.h sys/un.h sys/sockio.h errno.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/socket.h>

int
main ()
{
static struct msghdr tp; int n = (int) tp.msg_flags; return n
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

else

$as_echo "#define MISSING_MSGHDR_MSGFLAGS 1" >>confdefs.h


fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

$as_echo "#define HAVE_SOCKETS 1" >>confdefs.h


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for field ss_family in struct sockaddr_storage" >&5
$as_echo_n "checking for field ss_family in struct sockaddr_storage... " >&6; }
if ${ac_cv_ss_family+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/socket.h>
#include <sys/types.h>
#include <netdb.h>

int
main ()
{
struct sockaddr_storage sa_store; sa_store.ss_family = AF_INET6;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_ss_family=yes
else
  ac_cv_ss_family=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_ss_family" >&5
$as_echo "$ac_cv_ss_family" >&6; }

  if test "$ac_cv_ss_family" = yes; then

$as_echo "#define HAVE_SA_SS_FAMILY 1" >>confdefs.h

  fi

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking if getaddrinfo supports AI_V4MAPPED" >&5
$as_echo_n "checking if getaddrinfo supports AI_V4MAPPED... " >&6; }
if ${ac_cv_gai_ai_v4mapped+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <netdb.h>

int
main ()
{
int flag = AI_V4MAPPED;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_gai_ai_v4mapped=yes
else
  ac_cv_gai_ai_v4mapped=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gai_ai_v4mapped" >&5
$as_echo "$ac_cv_gai_ai_v4mapped" >&6; }

  if test "$ac_cv_gai_ai_v4mapped" = yes; then

$as_echo "#define HAVE_AI_V4MAPPED 1" >>confdefs.h

  fi


  ext_builddir=ext/sockets
  ext_srcdir=$abs_srcdir/ext/sockets

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SOCKETS_SHARED=no


  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c multicast.c conversions.c sockaddr_conv.c sendrecvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sockets"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SOCKETS_SHARED=yes

  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sockets.c multicast.c conversions.c sockaddr_conv.c sendrecvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsockets.so '$ext_builddir'/phpsockets.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(SOCKETS_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsockets.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsockets.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsockets.$suffix: $ext_builddir/phpsockets.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsockets.$suffix \$(phplibdir)

$ext_builddir/phpsockets.$suffix: \$(shared_objects_sockets) \$(PHPSOCKETS_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sockets.so '$ext_builddir'/sockets.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(KETS_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sockets.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sockets.$suffix: $ext_builddir/sockets.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.$suffix \$(phplibdir)

$ext_builddir/sockets.$suffix: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SOCKETS 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SOCKETS_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c multicast.c conversions.c sockaddr_conv.c sendrecvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sockets"
        ;;
      *)


  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c multicast.c conversions.c sockaddr_conv.c sendrecvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sockets

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    header_path=ext/sockets/
    for header_file in php_sockets.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done


fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether zend_object_value is packed" >&5
$as_echo_n "checking whether zend_object_value is packed... " >&6; }
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS="$INCLUDES -I$abs_srcdir $CPPFLAGS"
  if test "$cross_compiling" = yes; then :

    ac_result=0
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include "Zend/zend_types.h"
int main(int argc, char **argv) {
	return ((sizeof(zend_object_handle) + sizeof(zend_object_handlers*)) == sizeof(zend_object_value)) ? 0 : 1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    ac_result=1
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

    ac_result=0
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  CPPFLAGS=$old_CPPFLAGS

cat >>confdefs.h <<_ACEOF
#define HAVE_PACKED_OBJECT_VALUE $ac_result
_ACEOF


$as_echo "#define HAVE_SPL 1" >>confdefs.h


  ext_builddir=ext/spl
  ext_srcdir=$abs_srcdir/ext/spl

  ac_extra=

  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
    PHP_SPL_SHARED=no


  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC spl"
    if test "no" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
    fi
  else
    if test "no" = "shared" || test "no" = "yes"; then
      PHP_SPL_SHARED=yes

  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_spl="$shared_objects_spl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpspl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpspl.so '$ext_builddir'/phpspl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(SPL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpspl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpspl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpspl.$suffix: $ext_builddir/phpspl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpspl.$suffix \$(phplibdir)

$ext_builddir/phpspl.$suffix: \$(shared_objects_spl) \$(PHPSPL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/spl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/spl.so '$ext_builddir'/spl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/spl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/spl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/spl.$suffix: $ext_builddir/spl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/spl.$suffix \$(phplibdir)

$ext_builddir/spl.$suffix: \$(shared_objects_spl) \$(SPL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SPL 1
_ACEOF

    fi
  fi

  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
    PHP_SPL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC spl"
        ;;
      *)


  case ext/spl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=spl

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    header_path=ext/spl
    for header_file in php_spl.h spl_array.h spl_directory.h spl_engine.h spl_exceptions.h spl_functions.h spl_iterators.h spl_observer.h spl_dllist.h spl_heap.h spl_fixedarray.h; do
      hp_hf="$header_path/$header_file"


  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"

  fi

    done



  am_i_shared=$PHP_SPL_SHARED
  is_it_shared=$PHP_PCRE_SHARED
  is_it_enabled=$PHP_PCRE
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension spl to build statically, but it
depends on extension pcre, which you've configured to build shared.
You either need to build spl shared or build pcre statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension spl, which depends on extension pcre,
but you've either not enabled pcre, or have disabled it.
" "$LINENO" 5
  fi



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether flush should be called explicitly after a buffered io" >&5
$as_echo_n "checking whether flush should be called explicitly after a buffered io... " >&6; }
if ${ac_cv_flush_io+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_flush_io=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
	char *filename = tmpnam(NULL);
	char buffer[64];
	int result = 0;

	FILE *fp = fopen(filename, "wb");
	if (NULL == fp)
		return 0;
	fputs("line 1\n", fp);
	fputs("line 2\n", fp);
	fclose(fp);

	fp = fopen(filename, "rb+");
	if (NULL == fp)
		return 0;
	fgets(buffer, sizeof(buffer), fp);
	fputs("line 3\n", fp);
	rewind(fp);
	fgets(buffer, sizeof(buffer), fp);
	if (0 != strcmp(buffer, "line 1\n"))
		result = 1;
	fgets(buffer, sizeof(buffer), fp);
	if (0 != strcmp(buffer, "line 3\n"))
		result = 1;
	fclose(fp);
	unlink(filename);

	exit(result);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_flush_io=no

else

  ac_cv_flush_io=yes

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_flush_io" >&5
$as_echo "$ac_cv_flush_io" >&6; }
if test "$ac_cv_flush_io" = "yes"; then

$as_echo "#define HAVE_FLUSHIO 1" >>confdefs.h

fi

if test "$ac_cv_func_crypt" = "no"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for crypt in -lcrypt" >&5
$as_echo_n "checking for crypt in -lcrypt... " >&6; }
if ${ac_cv_lib_crypt_crypt+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypt  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char crypt ();
int
main ()
{
return crypt ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypt_crypt=yes
else
  ac_cv_lib_crypt_crypt=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypt_crypt" >&5
$as_echo "$ac_cv_lib_crypt_crypt" >&6; }
if test "x$ac_cv_lib_crypt_crypt" = xyes; then :

    LIBS="-lcrypt $LIBS -lcrypt"

$as_echo "#define HAVE_CRYPT 1" >>confdefs.h


fi

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for standard DES crypt" >&5
$as_echo_n "checking for standard DES crypt... " >&6; }
if ${ac_cv_crypt_des+:} false; then :
  $as_echo_n "(cached) " >&6
else

  if test "$cross_compiling" = yes; then :

  ac_cv_crypt_des=yes

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
#else
	exit(0);
#endif
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_crypt_des=yes

else

  ac_cv_crypt_des=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_crypt_des" >&5
$as_echo "$ac_cv_crypt_des" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for extended DES crypt" >&5
$as_echo_n "checking for extended DES crypt... " >&6; }
if ${ac_cv_crypt_ext_des+:} false; then :
  $as_echo_n "(cached) " >&6
else

  if test "$cross_compiling" = yes; then :

  ac_cv_crypt_ext_des=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
  exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
#else
  exit(0);
#endif
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_crypt_ext_des=yes

else

  ac_cv_crypt_ext_des=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_crypt_ext_des" >&5
$as_echo "$ac_cv_crypt_ext_des" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MD5 crypt" >&5
$as_echo_n "checking for MD5 crypt... " >&6; }
if ${ac_cv_crypt_md5+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_crypt_md5=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[15], answer[40];

    salt[0]='$'; salt[1]='1'; salt[2]='$';
    salt[3]='r'; salt[4]='a'; salt[5]='s';
    salt[6]='m'; salt[7]='u'; salt[8]='s';
    salt[9]='l'; salt[10]='e'; salt[11]='$';
    salt[12]='\0';
    strcpy(answer,salt);
    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_crypt_md5=yes

else

  ac_cv_crypt_md5=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_crypt_md5" >&5
$as_echo "$ac_cv_crypt_md5" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Blowfish crypt" >&5
$as_echo_n "checking for Blowfish crypt... " >&6; }
if ${ac_cv_crypt_blowfish+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_crypt_blowfish=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[30], answer[70];

    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
    strcat(salt,"rasmuslerd............");
    strcpy(answer,salt);
    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_crypt_blowfish=yes

else

  ac_cv_crypt_blowfish=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_crypt_blowfish" >&5
$as_echo "$ac_cv_crypt_blowfish" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SHA512 crypt" >&5
$as_echo_n "checking for SHA512 crypt... " >&6; }
if ${ac_cv_crypt_SHA512+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_crypt_SHA512=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[21], answer[21+86];

    strcpy(salt,"\$6\$rasmuslerdorf\$");
    strcpy(answer, salt);
    strcat(answer, "EeHCRjm0bljalWuALHSTs1NB9ipEiLEXLhYeXdOpx22gmlmVejnVXFhd84cEKbYxCo.XuUTrW.RLraeEnsvWs/");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_crypt_SHA512=yes

else

  ac_cv_crypt_SHA512=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_crypt_SHA512" >&5
$as_echo "$ac_cv_crypt_SHA512" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SHA256 crypt" >&5
$as_echo_n "checking for SHA256 crypt... " >&6; }
if ${ac_cv_crypt_SHA256+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_crypt_SHA256=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_UNISTD_H
#include <unistd.h>
#endif

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[21], answer[21+43];

    strcpy(salt,"\$5\$rasmuslerdorf\$");
    strcpy(answer, salt);
    strcat(answer, "cFAm2puLCujQ9t.0CxiFIIvFi4JyQx5UncCt/xRIX23");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));

#else
	exit(0);
#endif
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_crypt_SHA256=yes

else

  ac_cv_crypt_SHA256=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_crypt_SHA256" >&5
$as_echo "$ac_cv_crypt_SHA256" >&6; }


if test "$ac_cv_crypt_blowfish" = "no" || test "$ac_cv_crypt_des" = "no" || test "$ac_cv_crypt_ext_des" = "no" || test "x$php_crypt_r" = "x0"; then

        { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports __alignof__" >&5
$as_echo_n "checking whether the compiler supports __alignof__... " >&6; }
if ${ac_cv_alignof_exists+:} false; then :
  $as_echo_n "(cached) " >&6
else

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


int
main ()
{

    int align = __alignof__(int);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    ac_cv_alignof_exists=yes

else

    ac_cv_alignof_exists=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_alignof_exists" >&5
$as_echo "$ac_cv_alignof_exists" >&6; }
  if test "$ac_cv_alignof_exists" = "yes"; then

$as_echo "#define HAVE_ALIGNOF 1" >>confdefs.h

  fi

        { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports aligned attribute" >&5
$as_echo_n "checking whether the compiler supports aligned attribute... " >&6; }
if ${ac_cv_attribute_aligned+:} false; then :
  $as_echo_n "(cached) " >&6
else

  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


int
main ()
{

    unsigned char test[32] __attribute__ ((__aligned__ (__alignof__ (int))));

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

    ac_cv_attribute_aligned=yes

else

    ac_cv_attribute_aligned=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_attribute_aligned" >&5
$as_echo "$ac_cv_attribute_aligned" >&6; }
  if test "$ac_cv_attribute_aligned" = "yes"; then

$as_echo "#define HAVE_ATTRIBUTE_ALIGNED 1" >>confdefs.h

  fi



cat >>confdefs.h <<_ACEOF
#define PHP_USE_PHP_CRYPT_R 1
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_STD_DES_CRYPT 1
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_BLOWFISH_CRYPT 1
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_EXT_DES_CRYPT 1
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_MD5_CRYPT 1
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_SHA512_CRYPT 1
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_SHA256_CRYPT 1
_ACEOF




  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in crypt_freesec.c crypt_blowfish.c crypt_sha512.c crypt_sha256.c php_crypt_r.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


else
  if test "$ac_cv_crypt_des" = "yes"; then
    ac_result=1
    ac_crypt_des=1
  else
    ac_result=0
    ac_crypt_des=0
  fi

cat >>confdefs.h <<_ACEOF
#define PHP_STD_DES_CRYPT $ac_result
_ACEOF


  if test "$ac_cv_crypt_blowfish" = "yes"; then
    ac_result=1
    ac_crypt_blowfish=1
  else
    ac_result=0
    ac_crypt_blowfish=0
  fi

cat >>confdefs.h <<_ACEOF
#define PHP_BLOWFISH_CRYPT $ac_result
_ACEOF


  if test "$ac_cv_crypt_ext_des" = "yes"; then
    ac_result=1
    ac_crypt_edes=1
  else
    ac_result=0
    ac_crypt_edes=0
  fi

cat >>confdefs.h <<_ACEOF
#define PHP_EXT_DES_CRYPT $ac_result
_ACEOF


  if test "$ac_cv_crypt_md5" = "yes"; then
    ac_result=1
    ac_crypt_md5=1
  else
    ac_result=0
    ac_crypt_md5=0
  fi

cat >>confdefs.h <<_ACEOF
#define PHP_MD5_CRYPT $ac_result
_ACEOF


  if test "$ac_cv_crypt_sha512" = "yes"; then
    ac_result=1
    ac_crypt_sha512=1
  else
    ac_result=0
    ac_crypt_sha512=0
  fi

cat >>confdefs.h <<_ACEOF
#define PHP_SHA512_CRYPT $ac_result
_ACEOF


  if test "$ac_cv_crypt_sha256" = "yes"; then
    ac_result=1
    ac_crypt_sha256=1
  else
    ac_result=0
    ac_crypt_sha256=0
  fi

cat >>confdefs.h <<_ACEOF
#define PHP_SHA256_CRYPT $ac_result
_ACEOF



cat >>confdefs.h <<_ACEOF
#define PHP_USE_PHP_CRYPT_R 0
_ACEOF

fi

for ac_func in getcwd getwd asinh acosh atanh log1p hypot glob strfmon nice fpclass isinf isnan mempcpy strpncpy
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working POSIX fnmatch" >&5
$as_echo_n "checking for working POSIX fnmatch... " >&6; }
if ${ac_cv_func_fnmatch_works+:} false; then :
  $as_echo_n "(cached) " >&6
else
  # Some versions of Solaris, SCO, and the GNU C Library
   # have a broken or incompatible fnmatch.
   # So we run a test program.  If we are cross-compiling, take no chance.
   # Thanks to John Oleynick, Franc,ois Pinard, and Paul Eggert for this test.
   if test "$cross_compiling" = yes; then :
  ac_cv_func_fnmatch_works=cross
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <fnmatch.h>
#	   define y(a, b, c) (fnmatch (a, b, c) == 0)
#	   define n(a, b, c) (fnmatch (a, b, c) == FNM_NOMATCH)

int
main ()
{
return
	   (!(y ("a*", "abc", 0)
	      && n ("d*/*1", "d/s/1", FNM_PATHNAME)
	      && y ("a\\\\bc", "abc", 0)
	      && n ("a\\\\bc", "abc", FNM_NOESCAPE)
	      && y ("*x", ".x", 0)
	      && n ("*x", ".x", FNM_PERIOD)
	      && 1));
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_func_fnmatch_works=yes
else
  ac_cv_func_fnmatch_works=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_fnmatch_works" >&5
$as_echo "$ac_cv_func_fnmatch_works" >&6; }
if test $ac_cv_func_fnmatch_works = yes; then :

$as_echo "#define HAVE_FNMATCH 1" >>confdefs.h

fi



for ac_func in fork CreateProcess
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

  php_can_support_proc_open=yes
  break

else

  php_can_support_proc_open=no

fi
done

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if your OS can spawn processes with inherited handles" >&5
$as_echo_n "checking if your OS can spawn processes with inherited handles... " >&6; }
if test "$php_can_support_proc_open" = "yes"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define PHP_CAN_SUPPORT_PROC_OPEN 1" >>confdefs.h

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

PHP_ENABLE_CHROOT_FUNC=no
case "$PHP_SAPI" in
  embed)
    PHP_ENABLE_CHROOT_FUNC=yes
  ;;

  none)
    for PROG in $PHP_BINARIES; do
      case "$PROG" in
        cgi|cli)
          PHP_ENABLE_CHROOT_FUNC=yes
        ;;

        *)
          PHP_ENABLE_CHROOT_FUNC=no
          break
        ;;
      esac
   done
  ;;
esac

if test "$PHP_ENABLE_CHROOT_FUNC" = "yes"; then

$as_echo "#define ENABLE_CHROOT_FUNC 1" >>confdefs.h

fi


  unset ac_cv_func_res_nsearch
  unset ac_cv_func___res_nsearch
  unset found

  ac_fn_c_check_func "$LINENO" "res_nsearch" "ac_cv_func_res_nsearch"
if test "x$ac_cv_func_res_nsearch" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__res_nsearch" "ac_cv_func___res_nsearch"
if test "x$ac_cv_func___res_nsearch" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_RES_NSEARCH 1" >>confdefs.h

    ac_cv_func_res_nsearch=yes
  ;;

    *)

  unset ac_cv_lib_resolv_res_nsearch
  unset ac_cv_lib_resolv___res_nsearch
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_nsearch in -lresolv" >&5
$as_echo_n "checking for res_nsearch in -lresolv... " >&6; }
if ${ac_cv_lib_resolv_res_nsearch+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char res_nsearch ();
int
main ()
{
return res_nsearch ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv_res_nsearch=yes
else
  ac_cv_lib_resolv_res_nsearch=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_res_nsearch" >&5
$as_echo "$ac_cv_lib_resolv_res_nsearch" >&6; }
if test "x$ac_cv_lib_resolv_res_nsearch" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __res_nsearch in -lresolv" >&5
$as_echo_n "checking for __res_nsearch in -lresolv... " >&6; }
if ${ac_cv_lib_resolv___res_nsearch+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __res_nsearch ();
int
main ()
{
return __res_nsearch ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv___res_nsearch=yes
else
  ac_cv_lib_resolv___res_nsearch=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___res_nsearch" >&5
$as_echo "$ac_cv_lib_resolv___res_nsearch" >&6; }
if test "x$ac_cv_lib_resolv___res_nsearch" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case resolv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lresolv $LIBS"
   ;;
  esac



$as_echo "#define HAVE_RES_NSEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBRESOLV 1" >>confdefs.h

    ac_cv_func_res_nsearch=yes
  else


  unset ac_cv_lib_bind_res_nsearch
  unset ac_cv_lib_bind___res_nsearch
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_nsearch in -lbind" >&5
$as_echo_n "checking for res_nsearch in -lbind... " >&6; }
if ${ac_cv_lib_bind_res_nsearch+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char res_nsearch ();
int
main ()
{
return res_nsearch ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind_res_nsearch=yes
else
  ac_cv_lib_bind_res_nsearch=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind_res_nsearch" >&5
$as_echo "$ac_cv_lib_bind_res_nsearch" >&6; }
if test "x$ac_cv_lib_bind_res_nsearch" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __res_nsearch in -lbind" >&5
$as_echo_n "checking for __res_nsearch in -lbind... " >&6; }
if ${ac_cv_lib_bind___res_nsearch+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __res_nsearch ();
int
main ()
{
return __res_nsearch ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind___res_nsearch=yes
else
  ac_cv_lib_bind___res_nsearch=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind___res_nsearch" >&5
$as_echo "$ac_cv_lib_bind___res_nsearch" >&6; }
if test "x$ac_cv_lib_bind___res_nsearch" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case bind in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbind $LIBS"
   ;;
  esac



$as_echo "#define HAVE_RES_NSEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBBIND 1" >>confdefs.h

    ac_cv_func_res_nsearch=yes
  else


  unset ac_cv_lib_socket_res_nsearch
  unset ac_cv_lib_socket___res_nsearch
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_nsearch in -lsocket" >&5
$as_echo_n "checking for res_nsearch in -lsocket... " >&6; }
if ${ac_cv_lib_socket_res_nsearch+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char res_nsearch ();
int
main ()
{
return res_nsearch ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_res_nsearch=yes
else
  ac_cv_lib_socket_res_nsearch=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_res_nsearch" >&5
$as_echo "$ac_cv_lib_socket_res_nsearch" >&6; }
if test "x$ac_cv_lib_socket_res_nsearch" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __res_nsearch in -lsocket" >&5
$as_echo_n "checking for __res_nsearch in -lsocket... " >&6; }
if ${ac_cv_lib_socket___res_nsearch+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __res_nsearch ();
int
main ()
{
return __res_nsearch ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___res_nsearch=yes
else
  ac_cv_lib_socket___res_nsearch=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___res_nsearch" >&5
$as_echo "$ac_cv_lib_socket___res_nsearch" >&6; }
if test "x$ac_cv_lib_socket___res_nsearch" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_RES_NSEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_res_nsearch=yes
  else

  :

  fi


  fi


  fi

 ;;

  esac


  unset ac_cv_func_dns_search
  unset ac_cv_func___dns_search
  unset found

  ac_fn_c_check_func "$LINENO" "dns_search" "ac_cv_func_dns_search"
if test "x$ac_cv_func_dns_search" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__dns_search" "ac_cv_func___dns_search"
if test "x$ac_cv_func___dns_search" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_DNS_SEARCH 1" >>confdefs.h

    ac_cv_func_dns_search=yes
  ;;

    *)

  unset ac_cv_lib_resolv_dns_search
  unset ac_cv_lib_resolv___dns_search
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dns_search in -lresolv" >&5
$as_echo_n "checking for dns_search in -lresolv... " >&6; }
if ${ac_cv_lib_resolv_dns_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dns_search ();
int
main ()
{
return dns_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv_dns_search=yes
else
  ac_cv_lib_resolv_dns_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_dns_search" >&5
$as_echo "$ac_cv_lib_resolv_dns_search" >&6; }
if test "x$ac_cv_lib_resolv_dns_search" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dns_search in -lresolv" >&5
$as_echo_n "checking for __dns_search in -lresolv... " >&6; }
if ${ac_cv_lib_resolv___dns_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dns_search ();
int
main ()
{
return __dns_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv___dns_search=yes
else
  ac_cv_lib_resolv___dns_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___dns_search" >&5
$as_echo "$ac_cv_lib_resolv___dns_search" >&6; }
if test "x$ac_cv_lib_resolv___dns_search" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case resolv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lresolv $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DNS_SEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBRESOLV 1" >>confdefs.h

    ac_cv_func_dns_search=yes
  else


  unset ac_cv_lib_bind_dns_search
  unset ac_cv_lib_bind___dns_search
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dns_search in -lbind" >&5
$as_echo_n "checking for dns_search in -lbind... " >&6; }
if ${ac_cv_lib_bind_dns_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dns_search ();
int
main ()
{
return dns_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind_dns_search=yes
else
  ac_cv_lib_bind_dns_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind_dns_search" >&5
$as_echo "$ac_cv_lib_bind_dns_search" >&6; }
if test "x$ac_cv_lib_bind_dns_search" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dns_search in -lbind" >&5
$as_echo_n "checking for __dns_search in -lbind... " >&6; }
if ${ac_cv_lib_bind___dns_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dns_search ();
int
main ()
{
return __dns_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind___dns_search=yes
else
  ac_cv_lib_bind___dns_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind___dns_search" >&5
$as_echo "$ac_cv_lib_bind___dns_search" >&6; }
if test "x$ac_cv_lib_bind___dns_search" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case bind in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbind $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DNS_SEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBBIND 1" >>confdefs.h

    ac_cv_func_dns_search=yes
  else


  unset ac_cv_lib_socket_dns_search
  unset ac_cv_lib_socket___dns_search
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dns_search in -lsocket" >&5
$as_echo_n "checking for dns_search in -lsocket... " >&6; }
if ${ac_cv_lib_socket_dns_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dns_search ();
int
main ()
{
return dns_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_dns_search=yes
else
  ac_cv_lib_socket_dns_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_dns_search" >&5
$as_echo "$ac_cv_lib_socket_dns_search" >&6; }
if test "x$ac_cv_lib_socket_dns_search" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dns_search in -lsocket" >&5
$as_echo_n "checking for __dns_search in -lsocket... " >&6; }
if ${ac_cv_lib_socket___dns_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dns_search ();
int
main ()
{
return __dns_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___dns_search=yes
else
  ac_cv_lib_socket___dns_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___dns_search" >&5
$as_echo "$ac_cv_lib_socket___dns_search" >&6; }
if test "x$ac_cv_lib_socket___dns_search" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DNS_SEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_dns_search=yes
  else

  :

  fi


  fi


  fi

 ;;

  esac


  unset ac_cv_func_dn_expand
  unset ac_cv_func___dn_expand
  unset found

  ac_fn_c_check_func "$LINENO" "dn_expand" "ac_cv_func_dn_expand"
if test "x$ac_cv_func_dn_expand" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__dn_expand" "ac_cv_func___dn_expand"
if test "x$ac_cv_func___dn_expand" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_DN_EXPAND 1" >>confdefs.h

    ac_cv_func_dn_expand=yes
  ;;

    *)

  unset ac_cv_lib_resolv_dn_expand
  unset ac_cv_lib_resolv___dn_expand
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_expand in -lresolv" >&5
$as_echo_n "checking for dn_expand in -lresolv... " >&6; }
if ${ac_cv_lib_resolv_dn_expand+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dn_expand ();
int
main ()
{
return dn_expand ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv_dn_expand=yes
else
  ac_cv_lib_resolv_dn_expand=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_dn_expand" >&5
$as_echo "$ac_cv_lib_resolv_dn_expand" >&6; }
if test "x$ac_cv_lib_resolv_dn_expand" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_expand in -lresolv" >&5
$as_echo_n "checking for __dn_expand in -lresolv... " >&6; }
if ${ac_cv_lib_resolv___dn_expand+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dn_expand ();
int
main ()
{
return __dn_expand ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv___dn_expand=yes
else
  ac_cv_lib_resolv___dn_expand=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___dn_expand" >&5
$as_echo "$ac_cv_lib_resolv___dn_expand" >&6; }
if test "x$ac_cv_lib_resolv___dn_expand" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case resolv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lresolv $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DN_EXPAND 1" >>confdefs.h


$as_echo "#define HAVE_LIBRESOLV 1" >>confdefs.h

    ac_cv_func_dn_expand=yes
  else


  unset ac_cv_lib_bind_dn_expand
  unset ac_cv_lib_bind___dn_expand
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_expand in -lbind" >&5
$as_echo_n "checking for dn_expand in -lbind... " >&6; }
if ${ac_cv_lib_bind_dn_expand+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dn_expand ();
int
main ()
{
return dn_expand ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind_dn_expand=yes
else
  ac_cv_lib_bind_dn_expand=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind_dn_expand" >&5
$as_echo "$ac_cv_lib_bind_dn_expand" >&6; }
if test "x$ac_cv_lib_bind_dn_expand" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_expand in -lbind" >&5
$as_echo_n "checking for __dn_expand in -lbind... " >&6; }
if ${ac_cv_lib_bind___dn_expand+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dn_expand ();
int
main ()
{
return __dn_expand ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind___dn_expand=yes
else
  ac_cv_lib_bind___dn_expand=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind___dn_expand" >&5
$as_echo "$ac_cv_lib_bind___dn_expand" >&6; }
if test "x$ac_cv_lib_bind___dn_expand" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case bind in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbind $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DN_EXPAND 1" >>confdefs.h


$as_echo "#define HAVE_LIBBIND 1" >>confdefs.h

    ac_cv_func_dn_expand=yes
  else


  unset ac_cv_lib_socket_dn_expand
  unset ac_cv_lib_socket___dn_expand
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_expand in -lsocket" >&5
$as_echo_n "checking for dn_expand in -lsocket... " >&6; }
if ${ac_cv_lib_socket_dn_expand+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dn_expand ();
int
main ()
{
return dn_expand ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_dn_expand=yes
else
  ac_cv_lib_socket_dn_expand=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_dn_expand" >&5
$as_echo "$ac_cv_lib_socket_dn_expand" >&6; }
if test "x$ac_cv_lib_socket_dn_expand" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_expand in -lsocket" >&5
$as_echo_n "checking for __dn_expand in -lsocket... " >&6; }
if ${ac_cv_lib_socket___dn_expand+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dn_expand ();
int
main ()
{
return __dn_expand ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___dn_expand=yes
else
  ac_cv_lib_socket___dn_expand=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___dn_expand" >&5
$as_echo "$ac_cv_lib_socket___dn_expand" >&6; }
if test "x$ac_cv_lib_socket___dn_expand" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DN_EXPAND 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_dn_expand=yes
  else

  :

  fi


  fi


  fi

 ;;

  esac


  unset ac_cv_func_dn_skipname
  unset ac_cv_func___dn_skipname
  unset found

  ac_fn_c_check_func "$LINENO" "dn_skipname" "ac_cv_func_dn_skipname"
if test "x$ac_cv_func_dn_skipname" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__dn_skipname" "ac_cv_func___dn_skipname"
if test "x$ac_cv_func___dn_skipname" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_DN_SKIPNAME 1" >>confdefs.h

    ac_cv_func_dn_skipname=yes
  ;;

    *)

  unset ac_cv_lib_resolv_dn_skipname
  unset ac_cv_lib_resolv___dn_skipname
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_skipname in -lresolv" >&5
$as_echo_n "checking for dn_skipname in -lresolv... " >&6; }
if ${ac_cv_lib_resolv_dn_skipname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dn_skipname ();
int
main ()
{
return dn_skipname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv_dn_skipname=yes
else
  ac_cv_lib_resolv_dn_skipname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_dn_skipname" >&5
$as_echo "$ac_cv_lib_resolv_dn_skipname" >&6; }
if test "x$ac_cv_lib_resolv_dn_skipname" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_skipname in -lresolv" >&5
$as_echo_n "checking for __dn_skipname in -lresolv... " >&6; }
if ${ac_cv_lib_resolv___dn_skipname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dn_skipname ();
int
main ()
{
return __dn_skipname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv___dn_skipname=yes
else
  ac_cv_lib_resolv___dn_skipname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___dn_skipname" >&5
$as_echo "$ac_cv_lib_resolv___dn_skipname" >&6; }
if test "x$ac_cv_lib_resolv___dn_skipname" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case resolv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lresolv $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DN_SKIPNAME 1" >>confdefs.h


$as_echo "#define HAVE_LIBRESOLV 1" >>confdefs.h

    ac_cv_func_dn_skipname=yes
  else


  unset ac_cv_lib_bind_dn_skipname
  unset ac_cv_lib_bind___dn_skipname
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_skipname in -lbind" >&5
$as_echo_n "checking for dn_skipname in -lbind... " >&6; }
if ${ac_cv_lib_bind_dn_skipname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dn_skipname ();
int
main ()
{
return dn_skipname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind_dn_skipname=yes
else
  ac_cv_lib_bind_dn_skipname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind_dn_skipname" >&5
$as_echo "$ac_cv_lib_bind_dn_skipname" >&6; }
if test "x$ac_cv_lib_bind_dn_skipname" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_skipname in -lbind" >&5
$as_echo_n "checking for __dn_skipname in -lbind... " >&6; }
if ${ac_cv_lib_bind___dn_skipname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dn_skipname ();
int
main ()
{
return __dn_skipname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind___dn_skipname=yes
else
  ac_cv_lib_bind___dn_skipname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind___dn_skipname" >&5
$as_echo "$ac_cv_lib_bind___dn_skipname" >&6; }
if test "x$ac_cv_lib_bind___dn_skipname" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case bind in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbind $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DN_SKIPNAME 1" >>confdefs.h


$as_echo "#define HAVE_LIBBIND 1" >>confdefs.h

    ac_cv_func_dn_skipname=yes
  else


  unset ac_cv_lib_socket_dn_skipname
  unset ac_cv_lib_socket___dn_skipname
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_skipname in -lsocket" >&5
$as_echo_n "checking for dn_skipname in -lsocket... " >&6; }
if ${ac_cv_lib_socket_dn_skipname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dn_skipname ();
int
main ()
{
return dn_skipname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_dn_skipname=yes
else
  ac_cv_lib_socket_dn_skipname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_dn_skipname" >&5
$as_echo "$ac_cv_lib_socket_dn_skipname" >&6; }
if test "x$ac_cv_lib_socket_dn_skipname" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_skipname in -lsocket" >&5
$as_echo_n "checking for __dn_skipname in -lsocket... " >&6; }
if ${ac_cv_lib_socket___dn_skipname+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __dn_skipname ();
int
main ()
{
return __dn_skipname ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___dn_skipname=yes
else
  ac_cv_lib_socket___dn_skipname=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___dn_skipname" >&5
$as_echo "$ac_cv_lib_socket___dn_skipname" >&6; }
if test "x$ac_cv_lib_socket___dn_skipname" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_DN_SKIPNAME 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_dn_skipname=yes
  else

  :

  fi


  fi


  fi

 ;;

  esac




  unset ac_cv_func_res_search
  unset ac_cv_func___res_search
  unset found

  ac_fn_c_check_func "$LINENO" "res_search" "ac_cv_func_res_search"
if test "x$ac_cv_func_res_search" = xyes; then :
  found=yes
else
   ac_fn_c_check_func "$LINENO" "__res_search" "ac_cv_func___res_search"
if test "x$ac_cv_func___res_search" = xyes; then :
  found=yes
else
  found=no
fi

fi


  case $found in
  yes)

$as_echo "#define HAVE_RES_SEARCH 1" >>confdefs.h

    ac_cv_func_res_search=yes
  ;;

    *)

  unset ac_cv_lib_resolv_res_search
  unset ac_cv_lib_resolv___res_search
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_search in -lresolv" >&5
$as_echo_n "checking for res_search in -lresolv... " >&6; }
if ${ac_cv_lib_resolv_res_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char res_search ();
int
main ()
{
return res_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv_res_search=yes
else
  ac_cv_lib_resolv_res_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_res_search" >&5
$as_echo "$ac_cv_lib_resolv_res_search" >&6; }
if test "x$ac_cv_lib_resolv_res_search" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __res_search in -lresolv" >&5
$as_echo_n "checking for __res_search in -lresolv... " >&6; }
if ${ac_cv_lib_resolv___res_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lresolv  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __res_search ();
int
main ()
{
return __res_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_resolv___res_search=yes
else
  ac_cv_lib_resolv___res_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___res_search" >&5
$as_echo "$ac_cv_lib_resolv___res_search" >&6; }
if test "x$ac_cv_lib_resolv___res_search" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case resolv in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lresolv $LIBS"
   ;;
  esac



$as_echo "#define HAVE_RES_SEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBRESOLV 1" >>confdefs.h

    ac_cv_func_res_search=yes
  else


  unset ac_cv_lib_bind_res_search
  unset ac_cv_lib_bind___res_search
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_search in -lbind" >&5
$as_echo_n "checking for res_search in -lbind... " >&6; }
if ${ac_cv_lib_bind_res_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char res_search ();
int
main ()
{
return res_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind_res_search=yes
else
  ac_cv_lib_bind_res_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind_res_search" >&5
$as_echo "$ac_cv_lib_bind_res_search" >&6; }
if test "x$ac_cv_lib_bind_res_search" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __res_search in -lbind" >&5
$as_echo_n "checking for __res_search in -lbind... " >&6; }
if ${ac_cv_lib_bind___res_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lbind  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __res_search ();
int
main ()
{
return __res_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_bind___res_search=yes
else
  ac_cv_lib_bind___res_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bind___res_search" >&5
$as_echo "$ac_cv_lib_bind___res_search" >&6; }
if test "x$ac_cv_lib_bind___res_search" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case bind in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lbind $LIBS"
   ;;
  esac



$as_echo "#define HAVE_RES_SEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBBIND 1" >>confdefs.h

    ac_cv_func_res_search=yes
  else


  unset ac_cv_lib_socket_res_search
  unset ac_cv_lib_socket___res_search
  unset found
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_search in -lsocket" >&5
$as_echo_n "checking for res_search in -lsocket... " >&6; }
if ${ac_cv_lib_socket_res_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char res_search ();
int
main ()
{
return res_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket_res_search=yes
else
  ac_cv_lib_socket_res_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_res_search" >&5
$as_echo "$ac_cv_lib_socket_res_search" >&6; }
if test "x$ac_cv_lib_socket_res_search" = xyes; then :
  found=yes
else

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __res_search in -lsocket" >&5
$as_echo_n "checking for __res_search in -lsocket... " >&6; }
if ${ac_cv_lib_socket___res_search+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsocket  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char __res_search ();
int
main ()
{
return __res_search ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_socket___res_search=yes
else
  ac_cv_lib_socket___res_search=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket___res_search" >&5
$as_echo "$ac_cv_lib_socket___res_search" >&6; }
if test "x$ac_cv_lib_socket___res_search" = xyes; then :
  found=yes
else
  found=no
fi


fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then :
  found=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() { return (0); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  found=yes
else
  found=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then


  case socket in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsocket $LIBS"
   ;;
  esac



$as_echo "#define HAVE_RES_SEARCH 1" >>confdefs.h


$as_echo "#define HAVE_LIBSOCKET 1" >>confdefs.h

    ac_cv_func_res_search=yes
  else

  :

  fi


  fi


  fi

 ;;

  esac


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether atof() accepts NAN" >&5
$as_echo_n "checking whether atof() accepts NAN... " >&6; }
if ${ac_cv_atof_accept_nan+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_atof_accept_nan=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISNAN
#define zend_isnan(a) isnan(a)
#elif defined(HAVE_FPCLASS)
#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
#else
#define zend_isnan(a) 0
#endif

int main(int argc, char** argv)
{
	return zend_isnan(atof("NAN")) ? 0 : 1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_atof_accept_nan=yes

else

  ac_cv_atof_accept_nan=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_atof_accept_nan" >&5
$as_echo "$ac_cv_atof_accept_nan" >&6; }
if test "$ac_cv_atof_accept_nan" = "yes"; then

$as_echo "#define HAVE_ATOF_ACCEPTS_NAN 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether atof() accepts INF" >&5
$as_echo_n "checking whether atof() accepts INF... " >&6; }
if ${ac_cv_atof_accept_inf+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_atof_accept_inf=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISINF
#define zend_isinf(a) isinf(a)
#elif defined(INFINITY)
/* Might not work, but is required by ISO C99 */
#define zend_isinf(a) (((a)==INFINITY)?1:0)
#elif defined(HAVE_FPCLASS)
#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
#else
#define zend_isinf(a) 0
#endif

int main(int argc, char** argv)
{
	return zend_isinf(atof("INF")) && zend_isinf(atof("-INF")) ? 0 : 1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_atof_accept_inf=yes

else

  ac_cv_atof_accept_inf=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_atof_accept_inf" >&5
$as_echo "$ac_cv_atof_accept_inf" >&6; }
if test "$ac_cv_atof_accept_inf" = "yes"; then

$as_echo "#define HAVE_ATOF_ACCEPTS_INF 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether HUGE_VAL == INF" >&5
$as_echo_n "checking whether HUGE_VAL == INF... " >&6; }
if ${ac_cv_huge_val_inf+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_huge_val_inf=yes

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISINF
#define zend_isinf(a) isinf(a)
#elif defined(INFINITY)
/* Might not work, but is required by ISO C99 */
#define zend_isinf(a) (((a)==INFINITY)?1:0)
#elif defined(HAVE_FPCLASS)
#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
#else
#define zend_isinf(a) 0
#endif

int main(int argc, char** argv)
{
	return zend_isinf(HUGE_VAL) ? 0 : 1;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_huge_val_inf=yes

else

  ac_cv_huge_val_inf=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_huge_val_inf" >&5
$as_echo "$ac_cv_huge_val_inf" >&6; }
if test "$ac_cv_huge_val_inf" = "yes"; then

$as_echo "#define HAVE_HUGE_VAL_INF 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether HUGE_VAL + -HUGEVAL == NAN" >&5
$as_echo_n "checking whether HUGE_VAL + -HUGEVAL == NAN... " >&6; }
if ${ac_cv_huge_val_nan+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_huge_val_nan=yes

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <math.h>
#include <stdlib.h>

#ifdef HAVE_ISNAN
#define zend_isnan(a) isnan(a)
#elif defined(HAVE_FPCLASS)
#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
#else
#define zend_isnan(a) 0
#endif

int main(int argc, char** argv)
{
#if defined(__sparc__) && !(__GNUC__ >= 3)
	/* prevent bug #27830 */
	return 1;
#else
	return zend_isnan(HUGE_VAL + -HUGE_VAL) ? 0 : 1;
#endif
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_huge_val_nan=yes

else

  ac_cv_huge_val_nan=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_huge_val_nan" >&5
$as_echo "$ac_cv_huge_val_nan" >&6; }
if test "$ac_cv_huge_val_nan" = "yes"; then

$as_echo "#define HAVE_HUGE_VAL_NAN 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether strptime() declaration fails" >&5
$as_echo_n "checking whether strptime() declaration fails... " >&6; }
if ${ac_cv_strptime_decl_fails+:} false; then :
  $as_echo_n "(cached) " >&6
else

cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <time.h>

int
main ()
{

#ifndef HAVE_STRPTIME
#error no strptime() on this platform
#else
/* use invalid strptime() declaration to see if it fails to compile */
int strptime(const char *s, const char *format, struct tm *tm);
#endif

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

  ac_cv_strptime_decl_fails=no

else

  ac_cv_strptime_decl_fails=yes

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_strptime_decl_fails" >&5
$as_echo "$ac_cv_strptime_decl_fails" >&6; }
if test "$ac_cv_strptime_decl_fails" = "yes"; then

$as_echo "#define HAVE_STRPTIME_DECL_FAILS 1" >>confdefs.h

fi

for ac_header in wchar.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "wchar.h" "ac_cv_header_wchar_h" "$ac_includes_default"
if test "x$ac_cv_header_wchar_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_WCHAR_H 1
_ACEOF

fi

done

for ac_func in mblen
do :
  ac_fn_c_check_func "$LINENO" "mblen" "ac_cv_func_mblen"
if test "x$ac_cv_func_mblen" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_MBLEN 1
_ACEOF

fi
done

for ac_func in mbrlen mbsinit
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mbstate_t" >&5
$as_echo_n "checking for mbstate_t... " >&6; }
if ${ac_cv_type_mbstate_t+:} false; then :
  $as_echo_n "(cached) " >&6
else

cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#ifdef HAVE_WCHAR_H
# include <wchar.h>
#endif

int
main ()
{

int __tmp__() { mbstate_t a; }

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

  ac_cv_type_mbstate_t=yes

else

  ac_cv_type_mbstate_t=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_mbstate_t" >&5
$as_echo "$ac_cv_type_mbstate_t" >&6; }
if test "$ac_cv_type_mbstate_t" = "yes"; then

$as_echo "#define HAVE_MBSTATE_T 1" >>confdefs.h

fi

for ac_header in atomic.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "atomic.h" "ac_cv_header_atomic_h" "$ac_includes_default"
if test "x$ac_cv_header_atomic_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_ATOMIC_H 1
_ACEOF

fi

done



  ext_builddir=ext/standard
  ext_srcdir=$abs_srcdir/ext/standard

  ac_extra=

  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then
    PHP_STANDARD_SHARED=no


  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c password.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC standard"
    if test "" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
    fi
  else
    if test "" = "shared" || test "" = "yes"; then
      PHP_STANDARD_SHARED=yes

  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c password.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpstandard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpstandard.so '$ext_builddir'/phpstandard.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(STANDARD_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpstandard.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpstandard.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpstandard.$suffix: $ext_builddir/phpstandard.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpstandard.$suffix \$(phplibdir)

$ext_builddir/phpstandard.$suffix: \$(shared_objects_standard) \$(PHPSTANDARD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/standard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/standard.so '$ext_builddir'/standard.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(NDARD_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/standard.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/standard.$suffix: $ext_builddir/standard.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.$suffix \$(phplibdir)

$ext_builddir/standard.$suffix: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_STANDARD 1
_ACEOF

    fi
  fi

  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
    PHP_STANDARD_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c password.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC standard"
        ;;
      *)


  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
                            filters.c proc_open.c streamsfuncs.c http.c password.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=standard

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments



    for header_file in ext/standard/; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done





php_with_sybase_ct=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for Sybase-CT support" >&5
$as_echo_n "checking for Sybase-CT support... " >&6; }

# Check whether --with-sybase-ct was given.
if test "${with_sybase_ct+set}" = set; then :
  withval=$with_sybase_ct; PHP_SYBASE_CT=$withval
else

  PHP_SYBASE_CT=no
  test "$PHP_ENABLE_ALL" && PHP_SYBASE_CT=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYBASE_CT in
shared,*)
  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYBASE_CT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SYBASE_CT" != "no"; then

  if test "$PHP_SYBASE" && test "$PHP_SYBASE" != "no" && test "$ext_shared" = "no"; then
    as_fn_error $? "You can not use both --with-sybase and --with-sybase-ct in same build!" "$LINENO" 5
  fi


$as_echo "#define HAVE_SYBASE_CT 1" >>confdefs.h


  ext_builddir=ext/sybase_ct
  ext_srcdir=$abs_srcdir/ext/sybase_ct

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYBASE_CT_SHARED=no


  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sybase_ct"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYBASE_CT_SHARED=yes

  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsybase_ct.so '$ext_builddir'/phpsybase_ct.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(SYBASE_CT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsybase_ct.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsybase_ct.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsybase_ct.$suffix: $ext_builddir/phpsybase_ct.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsybase_ct.$suffix \$(phplibdir)

$ext_builddir/phpsybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(PHPSYBASE_CT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sybase_ct.so '$ext_builddir'/sybase_ct.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(ASE_CT_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sybase_ct.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sybase_ct.$suffix: $ext_builddir/sybase_ct.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.$suffix \$(phplibdir)

$ext_builddir/sybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SYBASE_CT 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYBASE_CT_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sybase_ct"
        ;;
      *)


  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sybase_ct

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"


  if test "$PHP_SYBASE_CT" = "yes"; then
    SYBASE_CT_INCDIR=/home/sybase/include
    SYBASE_CT_LIBDIR=/home/sybase/lib
  else
    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
  fi

    # The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long int" >&5
$as_echo_n "checking size of long int... " >&6; }
if ${ac_cv_sizeof_long_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long int))" "ac_cv_sizeof_long_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_int" >&5
$as_echo "$ac_cv_sizeof_long_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
_ACEOF


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking checking if we're on a 64-bit platform" >&5
$as_echo_n "checking checking if we're on a 64-bit platform... " >&6; }
  if test "$ac_cv_sizeof_long_int" = "4"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    PHP_SYBASE_64=no
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
    PHP_SYBASE_64=yes
  fi


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Checking for ctpublic.h" >&5
$as_echo_n "checking Checking for ctpublic.h... " >&6; }
  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $SYBASE_CT_INCDIR" >&5
$as_echo "found in $SYBASE_CT_INCDIR" >&6; }

  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then

  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_CT_INCDIR
  else

    ep_dir=`echo $SYBASE_CT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$SYBASE_CT_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

  else
    as_fn_error $? "ctpublic.h missing!" "$LINENO" 5
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Checking Sybase libdir" >&5
$as_echo_n "checking Checking Sybase libdir... " >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: Have $SYBASE_CT_LIBDIR" >&5
$as_echo "Have $SYBASE_CT_LIBDIR" >&6; }

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking Checking for Sybase platform libraries" >&5
$as_echo_n "checking Checking for Sybase platform libraries... " >&6; }


  if test "$SYBASE_CT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then

  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_CT_LIBDIR
  else

    ep_dir=`echo $SYBASE_CT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$SYBASE_CT_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-L$ai_p $SYBASE_CT_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p $SYBASE_CT_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

  if test -f $SYBASE_CT_INCDIR/tds.h || test -f $SYBASE_CT_INCDIR/tds_sysdep_public.h; then


  case ct in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD"
    else


  case ct in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lct $LIBS"
   ;;
  esac


    fi
   ;;
  esac


    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: FreeTDS: $SYBASE_CT_LIBS" >&5
$as_echo "FreeTDS: $SYBASE_CT_LIBS" >&6; }
  elif test -f $SYBASE_CT_LIBDIR/libsybct64.so && test $PHP_SYBASE_64 = "yes"; then


  case sybcs64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcs64 $SYBASE_CT_SHARED_LIBADD"
    else


  case sybcs64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybcs64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case sybct64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybct64 $SYBASE_CT_SHARED_LIBADD"
    else


  case sybct64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybct64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case sybcomn64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcomn64 $SYBASE_CT_SHARED_LIBADD"
    else


  case sybcomn64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybcomn64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case sybintl64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybintl64 $SYBASE_CT_SHARED_LIBADD"
    else


  case sybintl64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybintl64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac



    ac_solid_uname_s=`uname -s 2>/dev/null`
    case $ac_solid_uname_s in
      *OSF*)                            ;; # Tru64/DEC OSF does NOT use the SYB_LP64 define
      *) CFLAGS="${CFLAGS} -DSYB_LP64"  ;; #
    esac
    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs64 -lsybct64 -lsybcomn64 -lsybintl64"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sybase64: $SYBASE_CT_LIBS" >&5
$as_echo "Sybase64: $SYBASE_CT_LIBS" >&6; }


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $SYBASE_CT_LIBS
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for netg_errstr in -lsybtcl64" >&5
$as_echo_n "checking for netg_errstr in -lsybtcl64... " >&6; }
if ${ac_cv_lib_sybtcl64_netg_errstr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsybtcl64  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char netg_errstr ();
int
main ()
{
return netg_errstr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sybtcl64_netg_errstr=yes
else
  ac_cv_lib_sybtcl64_netg_errstr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sybtcl64_netg_errstr" >&5
$as_echo "$ac_cv_lib_sybtcl64_netg_errstr" >&6; }
if test "x$ac_cv_lib_sybtcl64_netg_errstr" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case sybtcl64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD"
    else


  case sybtcl64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybtcl64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sybtcl64_netg_errstr



  case sybtcl64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD"
    else


  case sybtcl64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybtcl64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac




fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for insck__getVdate in -linsck64" >&5
$as_echo_n "checking for insck__getVdate in -linsck64... " >&6; }
if ${ac_cv_lib_insck64_insck__getVdate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-linsck64  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char insck__getVdate ();
int
main ()
{
return insck__getVdate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_insck64_insck__getVdate=yes
else
  ac_cv_lib_insck64_insck__getVdate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_insck64_insck__getVdate" >&5
$as_echo "$ac_cv_lib_insck64_insck__getVdate" >&6; }
if test "x$ac_cv_lib_insck64_insck__getVdate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case insck64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD"
    else


  case insck64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-linsck64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck64_insck__getVdate


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bsd_tcp in -linsck64" >&5
$as_echo_n "checking for bsd_tcp in -linsck64... " >&6; }
if ${ac_cv_lib_insck64_bsd_tcp+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-linsck64  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char bsd_tcp ();
int
main ()
{
return bsd_tcp ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_insck64_bsd_tcp=yes
else
  ac_cv_lib_insck64_bsd_tcp=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_insck64_bsd_tcp" >&5
$as_echo "$ac_cv_lib_insck64_bsd_tcp" >&6; }
if test "x$ac_cv_lib_insck64_bsd_tcp" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case insck64 in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD"
    else


  case insck64 in
  c|c_r|pthread*) ;;
  *)
      LIBS="-linsck64 $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck64_bsd_tcp


fi

  elif test -f $SYBASE_CT_LIBDIR/libsybct.so; then


  case sybcs in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcs $SYBASE_CT_SHARED_LIBADD"
    else


  case sybcs in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybcs $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case sybct in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybct $SYBASE_CT_SHARED_LIBADD"
    else


  case sybct in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybct $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case sybcomn in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybcomn $SYBASE_CT_SHARED_LIBADD"
    else


  case sybcomn in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybcomn $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case sybintl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybintl $SYBASE_CT_SHARED_LIBADD"
    else


  case sybintl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybintl $LIBS"
   ;;
  esac


    fi
   ;;
  esac



    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs -lsybct -lsybcomn -lsybintl"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sybase32 syb-prefix: $SYBASE_CT_LIBS" >&5
$as_echo "Sybase32 syb-prefix: $SYBASE_CT_LIBS" >&6; }


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $SYBASE_CT_LIBS
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for netg_errstr in -lsybtcl" >&5
$as_echo_n "checking for netg_errstr in -lsybtcl... " >&6; }
if ${ac_cv_lib_sybtcl_netg_errstr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsybtcl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char netg_errstr ();
int
main ()
{
return netg_errstr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_sybtcl_netg_errstr=yes
else
  ac_cv_lib_sybtcl_netg_errstr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sybtcl_netg_errstr" >&5
$as_echo "$ac_cv_lib_sybtcl_netg_errstr" >&6; }
if test "x$ac_cv_lib_sybtcl_netg_errstr" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case sybtcl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD"
    else


  case sybtcl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybtcl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_sybtcl_netg_errstr



  case sybtcl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD"
    else


  case sybtcl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybtcl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for insck__getVdate in -linsck" >&5
$as_echo_n "checking for insck__getVdate in -linsck... " >&6; }
if ${ac_cv_lib_insck_insck__getVdate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-linsck  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char insck__getVdate ();
int
main ()
{
return insck__getVdate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_insck_insck__getVdate=yes
else
  ac_cv_lib_insck_insck__getVdate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_insck_insck__getVdate" >&5
$as_echo "$ac_cv_lib_insck_insck__getVdate" >&6; }
if test "x$ac_cv_lib_insck_insck__getVdate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case insck in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD"
    else


  case insck in
  c|c_r|pthread*) ;;
  *)
      LIBS="-linsck $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_insck__getVdate


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bsd_tcp in -linsck" >&5
$as_echo_n "checking for bsd_tcp in -linsck... " >&6; }
if ${ac_cv_lib_insck_bsd_tcp+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-linsck  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char bsd_tcp ();
int
main ()
{
return bsd_tcp ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_insck_bsd_tcp=yes
else
  ac_cv_lib_insck_bsd_tcp=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_insck_bsd_tcp" >&5
$as_echo "$ac_cv_lib_insck_bsd_tcp" >&6; }
if test "x$ac_cv_lib_insck_bsd_tcp" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case insck in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD"
    else


  case insck in
  c|c_r|pthread*) ;;
  *)
      LIBS="-linsck $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_bsd_tcp


fi

  else


  case cs in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD"
    else


  case cs in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcs $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case ct in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD"
    else


  case ct in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lct $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case comn in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD"
    else


  case comn in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcomn $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case intl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD"
    else


  case intl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lintl $LIBS"
   ;;
  esac


    fi
   ;;
  esac



    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: Sybase32 default: $SYBASE_CT_LIBS" >&5
$as_echo "Sybase32 default: $SYBASE_CT_LIBS" >&6; }


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      $SYBASE_CT_LIBS
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for netg_errstr in -ltcl" >&5
$as_echo_n "checking for netg_errstr in -ltcl... " >&6; }
if ${ac_cv_lib_tcl_netg_errstr+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ltcl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char netg_errstr ();
int
main ()
{
return netg_errstr ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_tcl_netg_errstr=yes
else
  ac_cv_lib_tcl_netg_errstr=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_tcl_netg_errstr" >&5
$as_echo "$ac_cv_lib_tcl_netg_errstr" >&6; }
if test "x$ac_cv_lib_tcl_netg_errstr" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case tcl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD"
    else


  case tcl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ltcl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_tcl_netg_errstr



  case sybtcl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD"
    else


  case sybtcl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lsybtcl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for insck__getVdate in -linsck" >&5
$as_echo_n "checking for insck__getVdate in -linsck... " >&6; }
if ${ac_cv_lib_insck_insck__getVdate+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-linsck  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char insck__getVdate ();
int
main ()
{
return insck__getVdate ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_insck_insck__getVdate=yes
else
  ac_cv_lib_insck_insck__getVdate=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_insck_insck__getVdate" >&5
$as_echo "$ac_cv_lib_insck_insck__getVdate" >&6; }
if test "x$ac_cv_lib_insck_insck__getVdate" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case insck in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD"
    else


  case insck in
  c|c_r|pthread*) ;;
  *)
      LIBS="-linsck $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_insck__getVdate


fi


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="-L$SYBASE_CT_LIBDIR"

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bsd_tcp in -linsck" >&5
$as_echo_n "checking for bsd_tcp in -linsck... " >&6; }
if ${ac_cv_lib_insck_bsd_tcp+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-linsck  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char bsd_tcp ();
int
main ()
{
return bsd_tcp ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_insck_bsd_tcp=yes
else
  ac_cv_lib_insck_bsd_tcp=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_insck_bsd_tcp" >&5
$as_echo "$ac_cv_lib_insck_bsd_tcp" >&6; }
if test "x$ac_cv_lib_insck_bsd_tcp" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


  case insck in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD"
    else


  case insck in
  c|c_r|pthread*) ;;
  *)
      LIBS="-linsck $LIBS"
   ;;
  esac


    fi
   ;;
  esac



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_insck_bsd_tcp


fi

  fi
fi



php_enable_sysvmsg=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable System V IPC support" >&5
$as_echo_n "checking whether to enable System V IPC support... " >&6; }
# Check whether --enable-sysvmsg was given.
if test "${enable_sysvmsg+set}" = set; then :
  enableval=$enable_sysvmsg; PHP_SYSVMSG=$enableval
else

  PHP_SYSVMSG=no
  test "$PHP_ENABLE_ALL" && PHP_SYSVMSG=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVMSG in
shared,*)
  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYSVMSG=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SYSVMSG" != "no"; then
  ac_fn_c_check_header_mongrel "$LINENO" "sys/msg.h" "ac_cv_header_sys_msg_h" "$ac_includes_default"
if test "x$ac_cv_header_sys_msg_h" = xyes; then :

else
  as_fn_error $? "Cannot enable System V IPC support, sys/msg.h is missing" "$LINENO" 5

fi




$as_echo "#define HAVE_SYSVMSG 1" >>confdefs.h


  ext_builddir=ext/sysvmsg
  ext_srcdir=$abs_srcdir/ext/sysvmsg

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYSVMSG_SHARED=no


  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvmsg"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYSVMSG_SHARED=yes

  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvmsg.so '$ext_builddir'/phpsysvmsg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(SYSVMSG_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvmsg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvmsg.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsysvmsg.$suffix: $ext_builddir/phpsysvmsg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvmsg.$suffix \$(phplibdir)

$ext_builddir/phpsysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(PHPSYSVMSG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvmsg.so '$ext_builddir'/sysvmsg.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(VMSG_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvmsg.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvmsg.$suffix: $ext_builddir/sysvmsg.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.$suffix \$(phplibdir)

$ext_builddir/sysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SYSVMSG 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYSVMSG_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sysvmsg"
        ;;
      *)


  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sysvmsg

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_enable_sysvsem=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable System V semaphore support" >&5
$as_echo_n "checking whether to enable System V semaphore support... " >&6; }
# Check whether --enable-sysvsem was given.
if test "${enable_sysvsem+set}" = set; then :
  enableval=$enable_sysvsem; PHP_SYSVSEM=$enableval
else

  PHP_SYSVSEM=no
  test "$PHP_ENABLE_ALL" && PHP_SYSVSEM=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVSEM in
shared,*)
  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYSVSEM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SYSVSEM" != "no"; then

  ext_builddir=ext/sysvsem
  ext_srcdir=$abs_srcdir/ext/sysvsem

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYSVSEM_SHARED=no


  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvsem"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYSVSEM_SHARED=yes

  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvsem.so '$ext_builddir'/phpsysvsem.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(SYSVSEM_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvsem.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvsem.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsysvsem.$suffix: $ext_builddir/phpsysvsem.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvsem.$suffix \$(phplibdir)

$ext_builddir/phpsysvsem.$suffix: \$(shared_objects_sysvsem) \$(PHPSYSVSEM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvsem.so '$ext_builddir'/sysvsem.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(VSEM_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvsem.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvsem.$suffix: $ext_builddir/sysvsem.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.$suffix \$(phplibdir)

$ext_builddir/sysvsem.$suffix: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SYSVSEM 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYSVSEM_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sysvsem"
        ;;
      *)


  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sysvsem

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


$as_echo "#define HAVE_SYSVSEM 1" >>confdefs.h

 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for union semun" >&5
$as_echo_n "checking for union semun... " >&6; }
if ${php_cv_semun+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>

int
main ()
{
union semun x;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

     php_cv_semun=yes

else

     php_cv_semun=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_semun" >&5
$as_echo "$php_cv_semun" >&6; }
 if test "$php_cv_semun" = "yes"; then

$as_echo "#define HAVE_SEMUN 1" >>confdefs.h

 else

$as_echo "#define HAVE_SEMUN 0" >>confdefs.h

 fi
fi



php_enable_sysvshm=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable System V shared memory support" >&5
$as_echo_n "checking whether to enable System V shared memory support... " >&6; }
# Check whether --enable-sysvshm was given.
if test "${enable_sysvshm+set}" = set; then :
  enableval=$enable_sysvshm; PHP_SYSVSHM=$enableval
else

  PHP_SYSVSHM=no
  test "$PHP_ENABLE_ALL" && PHP_SYSVSHM=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVSHM in
shared,*)
  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_SYSVSHM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_SYSVSHM" != "no"; then

$as_echo "#define HAVE_SYSVSHM 1" >>confdefs.h


  ext_builddir=ext/sysvshm
  ext_srcdir=$abs_srcdir/ext/sysvshm

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_SYSVSHM_SHARED=no


  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvshm"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_SYSVSHM_SHARED=yes

  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvshm.so '$ext_builddir'/phpsysvshm.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(SYSVSHM_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvshm.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvshm.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpsysvshm.$suffix: $ext_builddir/phpsysvshm.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvshm.$suffix \$(phplibdir)

$ext_builddir/phpsysvshm.$suffix: \$(shared_objects_sysvshm) \$(PHPSYSVSHM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvshm.so '$ext_builddir'/sysvshm.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(VSHM_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvshm.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvshm.$suffix: $ext_builddir/sysvshm.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.$suffix \$(phplibdir)

$ext_builddir/sysvshm.$suffix: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_SYSVSHM 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_SYSVSHM_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC sysvshm"
        ;;
      *)


  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=sysvshm

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

fi



php_with_tidy=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for TIDY support" >&5
$as_echo_n "checking for TIDY support... " >&6; }

# Check whether --with-tidy was given.
if test "${with_tidy+set}" = set; then :
  withval=$with_tidy; PHP_TIDY=$withval
else

  PHP_TIDY=no
  test "$PHP_ENABLE_ALL" && PHP_TIDY=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_TIDY in
shared,*)
  PHP_TIDY=`echo "$PHP_TIDY"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_TIDY=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_TIDY" != "no"; then

  if test "$PHP_TIDY" != "yes"; then
    TIDY_SEARCH_DIRS=$PHP_TIDY
  else
    TIDY_SEARCH_DIRS="/usr/local /usr"
  fi

  for i in $TIDY_SEARCH_DIRS; do
    if test -f $i/include/tidy/tidy.h; then
      TIDY_DIR=$i
      TIDY_INCDIR=$i/include/tidy
    elif test -f $i/include/tidy.h; then
      TIDY_DIR=$i
      TIDY_INCDIR=$i/include
    fi
  done

  if test -z "$TIDY_DIR"; then
    as_fn_error $? "Cannot find libtidy" "$LINENO" 5
  fi

  TIDY_LIBDIR=$TIDY_DIR/$PHP_LIBDIR



  if test "$ext_shared" = "yes"; then
    TIDY_SHARED_LIBADD="-ltidy $TIDY_SHARED_LIBADD"
    if test -n "$TIDY_LIBDIR"; then

  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then

  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$TIDY_LIBDIR
  else

    ep_dir=`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$TIDY_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        TIDY_SHARED_LIBADD="-L$ai_p $TIDY_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && TIDY_SHARED_LIBADD="$ld_runpath_switch$ai_p $TIDY_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$TIDY_LIBDIR"; then

  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then

  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$TIDY_LIBDIR
  else

    ep_dir=`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$TIDY_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case tidy in
  c|c_r|pthread*) ;;
  *)
      LIBS="-ltidy $LIBS"
   ;;
  esac




  fi



  if test "$TIDY_INCDIR" != "/usr/include"; then

  if test -z "$TIDY_INCDIR" || echo "$TIDY_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$TIDY_INCDIR
  else

    ep_dir=`echo $TIDY_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$TIDY_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tidyOptGetDoc in -ltidy" >&5
$as_echo_n "checking for tidyOptGetDoc in -ltidy... " >&6; }
if ${ac_cv_lib_tidy_tidyOptGetDoc+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ltidy  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char tidyOptGetDoc ();
int
main ()
{
return tidyOptGetDoc ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_tidy_tidyOptGetDoc=yes
else
  ac_cv_lib_tidy_tidyOptGetDoc=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_tidy_tidyOptGetDoc" >&5
$as_echo "$ac_cv_lib_tidy_tidyOptGetDoc" >&6; }
if test "x$ac_cv_lib_tidy_tidyOptGetDoc" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared


$as_echo "#define HAVE_TIDYOPTGETDOC 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_tidy_tidyOptGetDoc


fi




  ext_builddir=ext/tidy
  ext_srcdir=$abs_srcdir/ext/tidy

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_TIDY_SHARED=no


  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC tidy"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_TIDY_SHARED=yes

  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_tidy="$shared_objects_tidy $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptidy.so '$ext_builddir'/phptidy.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(TIDY_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptidy.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptidy.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phptidy.$suffix: $ext_builddir/phptidy.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phptidy.$suffix \$(phplibdir)

$ext_builddir/phptidy.$suffix: \$(shared_objects_tidy) \$(PHPTIDY_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tidy.so '$ext_builddir'/tidy.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(Y_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tidy.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tidy.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/tidy.$suffix: $ext_builddir/tidy.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/tidy.$suffix \$(phplibdir)

$ext_builddir/tidy.$suffix: \$(shared_objects_tidy) \$(TIDY_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_TIDY 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_TIDY_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC tidy"
        ;;
      *)


  case ext/tidy in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tidy.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=tidy

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST TIDY_SHARED_LIBADD"


$as_echo "#define HAVE_TIDY 1" >>confdefs.h

fi




php_enable_tokenizer=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable tokenizer support" >&5
$as_echo_n "checking whether to enable tokenizer support... " >&6; }
# Check whether --enable-tokenizer was given.
if test "${enable_tokenizer+set}" = set; then :
  enableval=$enable_tokenizer; PHP_TOKENIZER=$enableval
else

  PHP_TOKENIZER=yes
  test "$PHP_ENABLE_ALL" && PHP_TOKENIZER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_TOKENIZER in
shared,*)
  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_TOKENIZER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_TOKENIZER" != "no"; then

  ext_builddir=ext/tokenizer
  ext_srcdir=$abs_srcdir/ext/tokenizer

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_TOKENIZER_SHARED=no


  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC tokenizer"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_TOKENIZER_SHARED=yes

  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptokenizer.so '$ext_builddir'/phptokenizer.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(TOKENIZER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptokenizer.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptokenizer.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phptokenizer.$suffix: $ext_builddir/phptokenizer.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phptokenizer.$suffix \$(phplibdir)

$ext_builddir/phptokenizer.$suffix: \$(shared_objects_tokenizer) \$(PHPTOKENIZER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tokenizer.so '$ext_builddir'/tokenizer.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(ENIZER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tokenizer.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/tokenizer.$suffix: $ext_builddir/tokenizer.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.$suffix \$(phplibdir)

$ext_builddir/tokenizer.$suffix: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_TOKENIZER 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_TOKENIZER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC tokenizer"
        ;;
      *)


  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c tokenizer_data.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=tokenizer

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_wddx=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable WDDX support" >&5
$as_echo_n "checking whether to enable WDDX support... " >&6; }
# Check whether --enable-wddx was given.
if test "${enable_wddx+set}" = set; then :
  enableval=$enable_wddx; PHP_WDDX=$enableval
else

  PHP_WDDX=no
  test "$PHP_ENABLE_ALL" && PHP_WDDX=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_WDDX in
shared,*)
  PHP_WDDX=`echo "$PHP_WDDX"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_WDDX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi


php_with_libexpat_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libexpat dir for WDDX" >&5
$as_echo_n "checking libexpat dir for WDDX... " >&6; }

# Check whether --with-libexpat-dir was given.
if test "${with_libexpat_dir+set}" = set; then :
  withval=$with_libexpat_dir; PHP_LIBEXPAT_DIR=$withval
else

  PHP_LIBEXPAT_DIR=no


fi


ext_output=$PHP_LIBEXPAT_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_WDDX" != "no"; then

        if test "$PHP_LIBEXPAT_DIR" = "no"; then
    if test "$PHP_LIBXML" = "no"; then
      as_fn_error $? "WDDX extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
    fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $WDDX_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi

      if test "$PHP_XML" = "no"; then


  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in compat.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    BUILD_DIR="$BUILD_DIR ext/xml"


      fi

    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
      as_fn_error $? "xml2-config not found. Use --with-libxml-dir=<DIR>" "$LINENO" 5

  fi

  fi

        if test "$PHP_LIBEXPAT_DIR" != "no"; then
    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
        EXPAT_DIR=$i
        break
      fi
    done

    if test -z "$EXPAT_DIR"; then
      as_fn_error $? "not found. Please reinstall the expat distribution." "$LINENO" 5
    fi


  if test "$EXPAT_DIR/include" != "/usr/include"; then

  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/include
  else

    ep_dir=`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$EXPAT_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    WDDX_SHARED_LIBADD="-lexpat $WDDX_SHARED_LIBADD"
    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then

  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$EXPAT_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then

  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$EXPAT_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case expat in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lexpat $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_LIBEXPAT 1" >>confdefs.h

  fi


$as_echo "#define HAVE_WDDX 1" >>confdefs.h


  ext_builddir=ext/wddx
  ext_srcdir=$abs_srcdir/ext/wddx

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_WDDX_SHARED=no


  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC wddx"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_WDDX_SHARED=yes

  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpwddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpwddx.so '$ext_builddir'/phpwddx.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(WDDX_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpwddx.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpwddx.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpwddx.$suffix: $ext_builddir/phpwddx.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpwddx.$suffix \$(phplibdir)

$ext_builddir/phpwddx.$suffix: \$(shared_objects_wddx) \$(PHPWDDX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/wddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/wddx.so '$ext_builddir'/wddx.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(X_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/wddx.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/wddx.$suffix: $ext_builddir/wddx.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.$suffix \$(phplibdir)

$ext_builddir/wddx.$suffix: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_WDDX 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_WDDX_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC wddx"
        ;;
      *)


  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=wddx

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  am_i_shared=$PHP_WDDX_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension wddx to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build wddx shared or build libxml statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension wddx, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" "$LINENO" 5
  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"

fi



php_enable_xml=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable XML support" >&5
$as_echo_n "checking whether to enable XML support... " >&6; }
# Check whether --enable-xml was given.
if test "${enable_xml+set}" = set; then :
  enableval=$enable_xml; PHP_XML=$enableval
else

  PHP_XML=yes
  test "$PHP_ENABLE_ALL" && PHP_XML=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XML in
shared,*)
  PHP_XML=`echo "$PHP_XML"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi


php_with_libexpat_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libexpat install dir" >&5
$as_echo_n "checking libexpat install dir... " >&6; }

# Check whether --with-libexpat-dir was given.
if test "${with_libexpat_dir+set}" = set; then :
  withval=$with_libexpat_dir; PHP_LIBEXPAT_DIR=$withval
else

  PHP_LIBEXPAT_DIR=no


fi


ext_output=$PHP_LIBEXPAT_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_XML" != "no"; then

        if test "$PHP_LIBEXPAT_DIR" = "no"; then

    if test "$PHP_LIBXML" = "no"; then
      as_fn_error $? "XML extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
    fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $XML_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi

      xml_extra_sources="compat.c"

  am_i_shared=$PHP_XML_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension xml to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build xml shared or build libxml statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension xml, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" "$LINENO" 5
  fi


    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
      as_fn_error $? "xml2-config not found. Use --with-libxml-dir=<DIR>" "$LINENO" 5

  fi

  fi

        if test "$PHP_LIBEXPAT_DIR" != "no"; then
    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
        EXPAT_DIR=$i
        break
      fi
    done

    if test -z "$EXPAT_DIR"; then
      as_fn_error $? "not found. Please reinstall the expat distribution." "$LINENO" 5
    fi


  if test "$EXPAT_DIR/include" != "/usr/include"; then

  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/include
  else

    ep_dir=`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$EXPAT_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then

  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$EXPAT_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then

  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$EXPAT_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case expat in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lexpat $LIBS"
   ;;
  esac




  fi



$as_echo "#define HAVE_LIBEXPAT 1" >>confdefs.h

  fi


  ext_builddir=ext/xml
  ext_srcdir=$abs_srcdir/ext/xml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XML_SHARED=no


  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XML_SHARED=yes

  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxml.so '$ext_builddir'/phpxml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(XML_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxml.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxml.$suffix: $ext_builddir/phpxml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxml.$suffix \$(phplibdir)

$ext_builddir/phpxml.$suffix: \$(shared_objects_xml) \$(PHPXML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xml.so '$ext_builddir'/xml.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xml.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xml.$suffix: $ext_builddir/xml.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.$suffix \$(phplibdir)

$ext_builddir/xml.$suffix: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_XML 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XML_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xml"
        ;;
      *)


  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c $xml_extra_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xml

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"



    for header_file in ext/xml/; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done



$as_echo "#define HAVE_XML 1" >>confdefs.h

fi



php_enable_xmlreader=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable XMLReader support" >&5
$as_echo_n "checking whether to enable XMLReader support... " >&6; }
# Check whether --enable-xmlreader was given.
if test "${enable_xmlreader+set}" = set; then :
  enableval=$enable_xmlreader; PHP_XMLREADER=$enableval
else

  PHP_XMLREADER=yes
  test "$PHP_ENABLE_ALL" && PHP_XMLREADER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLREADER in
shared,*)
  PHP_XMLREADER=`echo "$PHP_XMLREADER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XMLREADER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_XMLREADER" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    as_fn_error $? "XMLReader extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        XMLREADER_SHARED_LIBADD="-L$ai_p $XMLREADER_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLREADER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLREADER_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $XMLREADER_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi


$as_echo "#define HAVE_XMLREADER 1" >>confdefs.h


  ext_builddir=ext/xmlreader
  ext_srcdir=$abs_srcdir/ext/xmlreader

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLREADER_SHARED=no


  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlreader"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLREADER_SHARED=yes

  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_xmlreader="$shared_objects_xmlreader $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlreader.so '$ext_builddir'/phpxmlreader.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(XMLREADER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlreader.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlreader.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlreader.$suffix: $ext_builddir/phpxmlreader.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlreader.$suffix \$(phplibdir)

$ext_builddir/phpxmlreader.$suffix: \$(shared_objects_xmlreader) \$(PHPXMLREADER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlreader.so '$ext_builddir'/xmlreader.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(READER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlreader.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlreader.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlreader.$suffix: $ext_builddir/xmlreader.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlreader.$suffix \$(phplibdir)

$ext_builddir/xmlreader.$suffix: \$(shared_objects_xmlreader) \$(XMLREADER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_XMLREADER 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLREADER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlreader"
        ;;
      *)


  case ext/xmlreader in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlreader.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlreader

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  am_i_shared=$PHP_XMLREADER_SHARED
  is_it_shared=$PHP_DOM_SHARED
  is_it_enabled=$PHP_DOM
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension xmlreader to build statically, but it
depends on extension dom, which you've configured to build shared.
You either need to build xmlreader shared or build dom statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
    as_fn_error $? "
You've configured extension xmlreader, which depends on extension dom,
but you've either not enabled dom, or have disabled it.
" "$LINENO" 5
  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLREADER_SHARED_LIBADD"


    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
    as_fn_error $? "xml2-config not found. Please check your libxml2 installation." "$LINENO" 5

  fi

fi


# Local macros for automake & autoconf













php_with_xmlrpc=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for XMLRPC-EPI support" >&5
$as_echo_n "checking for XMLRPC-EPI support... " >&6; }

# Check whether --with-xmlrpc was given.
if test "${with_xmlrpc+set}" = set; then :
  withval=$with_xmlrpc; PHP_XMLRPC=$withval
else

  PHP_XMLRPC=no
  test "$PHP_ENABLE_ALL" && PHP_XMLRPC=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLRPC in
shared,*)
  PHP_XMLRPC=`echo "$PHP_XMLRPC"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XMLRPC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi


php_with_libexpat_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libexpat dir for XMLRPC-EPI" >&5
$as_echo_n "checking libexpat dir for XMLRPC-EPI... " >&6; }

# Check whether --with-libexpat-dir was given.
if test "${with_libexpat_dir+set}" = set; then :
  withval=$with_libexpat_dir; PHP_LIBEXPAT_DIR=$withval
else

  PHP_LIBEXPAT_DIR=no


fi


ext_output=$PHP_LIBEXPAT_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_with_iconv_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking iconv dir for XMLRPC-EPI" >&5
$as_echo_n "checking iconv dir for XMLRPC-EPI... " >&6; }

# Check whether --with-iconv-dir was given.
if test "${with_iconv_dir+set}" = set; then :
  withval=$with_iconv_dir; PHP_ICONV_DIR=$withval
else

  PHP_ICONV_DIR=no


fi


ext_output=$PHP_ICONV_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_XMLRPC" != "no"; then


  am_i_shared=$PHP_XMLRPC_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension xmlrpc to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build xmlrpc shared or build libxml statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension xmlrpc, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" "$LINENO" 5
  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"


$as_echo "#define HAVE_XMLRPC 1" >>confdefs.h


        if test "$PHP_LIBEXPAT_DIR" = "no"; then

    if test "$PHP_LIBXML" = "no"; then
      as_fn_error $? "XML-RPC extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
    fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $XMLRPC_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi

      if test "$PHP_XML" = "no"; then


  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in compat.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    BUILD_DIR="$BUILD_DIR ext/xml"


      fi

    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
      as_fn_error $? "xml2-config not found. Use --with-libxml-dir=<DIR>" "$LINENO" 5

  fi

  else
    testval=no
    for i in $PHP_LIBEXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
      if test -f $i/$PHP_LIBDIR/libexpat.a || test -f $i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME; then

$as_echo "#define HAVE_LIBEXPAT 1" >>confdefs.h



  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
    if test -n "$i/$PHP_LIBDIR"; then

  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$i/$PHP_LIBDIR
  else

    ep_dir=`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$i/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$i/$PHP_LIBDIR"; then

  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$i/$PHP_LIBDIR
  else

    ep_dir=`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$i/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case expat in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lexpat $LIBS"
   ;;
  esac




  fi



  if test "$i/include" != "/usr/include"; then

  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
    ai_p=$i/include
  else

    ep_dir=`echo $i/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$i/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

        testval=yes
        break
      fi
    done

    if test "$testval" = "no"; then
      as_fn_error $? "XML-RPC support requires libexpat. Use --with-libexpat-dir=<DIR> (deprecated!)" "$LINENO" 5
    fi
  fi

    if test "$PHP_ICONV_SHARED" = "yes" || test "$PHP_ICONV" = "no"; then

    if test "$PHP_ICONV_DIR" != "no"; then
      PHP_ICONV=$PHP_ICONV_DIR
    fi

    if test -z "$PHP_ICONV" || test "$PHP_ICONV" = "no"; then
      PHP_ICONV=yes
    fi


  found_iconv=no
  unset ICONV_DIR

  # Create the directories for a VPATH build:
  $php_shtool mkdir -p ext/iconv

  echo > ext/iconv/php_have_bsd_iconv.h
  echo > ext/iconv/php_have_ibm_iconv.h
  echo > ext/iconv/php_have_glibc_iconv.h
  echo > ext/iconv/php_have_libiconv.h
  echo > ext/iconv/php_have_iconv.h
  echo > ext/iconv/php_php_iconv_impl.h
  echo > ext/iconv/php_iconv_aliased_libiconv.h
  echo > ext/iconv/php_php_iconv_h_path.h
  echo > ext/iconv/php_iconv_supports_errno.h


  if test "$PHP_ICONV" = "yes"; then
            LIBS_save="$LIBS"
    LIBS=
    ac_fn_c_check_func "$LINENO" "iconv" "ac_cv_func_iconv"
if test "x$ac_cv_func_iconv" = xyes; then :

      found_iconv=yes

else

      ac_fn_c_check_func "$LINENO" "libiconv" "ac_cv_func_libiconv"
if test "x$ac_cv_func_libiconv" = xyes; then :


  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h


$as_echo "#define HAVE_LIBICONV 1" >>confdefs.h

        found_iconv=yes

fi


fi

    LIBS="$LIBS_save"
  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then

$as_echo "#define HAVE_GICONV_H 1" >>confdefs.h

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      as_fn_error $? "Please specify the install prefix of iconv with --with-iconv=<DIR>" "$LINENO" 5
    fi

    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
        -L$ICONV_DIR/$PHP_LIBDIR
      "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$iconv_lib_name''_libiconv" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for libiconv in -l$iconv_lib_name" >&5
$as_echo_n "checking for libiconv in -l$iconv_lib_name... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$iconv_lib_name  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char libiconv ();
int
main ()
{
return libiconv ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

        found_iconv=yes

  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h


$as_echo "#define HAVE_LIBICONV 1" >>confdefs.h


  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h


$as_echo "#define ICONV_ALIASED_LIBICONV 1" >>confdefs.h



else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_libiconv


  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
          -L$ICONV_DIR/$PHP_LIBDIR
        "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$iconv_lib_name''_iconv" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for iconv in -l$iconv_lib_name" >&5
$as_echo_n "checking for iconv in -l$iconv_lib_name... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$iconv_lib_name  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char iconv ();
int
main ()
{
return iconv ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

          found_iconv=yes


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$iconv_lib_name_iconv


fi



fi

    fi
  fi

  if test "$found_iconv" = "yes"; then

  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h


$as_echo "#define HAVE_ICONV 1" >>confdefs.h

    if test -n "$ICONV_DIR"; then


  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then

  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ICONV_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then

  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ICONV_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *)
      LIBS="-l$iconv_lib_name $LIBS"
   ;;
  esac




  fi



  if test "$ICONV_DIR/include" != "/usr/include"; then

  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else

    ep_dir=`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ICONV_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    fi

else
      as_fn_error $? "iconv not found, in order to build xmlrpc you need the iconv library" "$LINENO" 5

  fi

  fi
fi

if test "$PHP_XMLRPC" = "yes"; then
  if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
set dummy ${ac_tool_prefix}ranlib; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_RANLIB+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
RANLIB=$ac_cv_prog_RANLIB
if test -n "$RANLIB"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
$as_echo "$RANLIB" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


fi
if test -z "$ac_cv_prog_RANLIB"; then
  ac_ct_RANLIB=$RANLIB
  # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_RANLIB"; then
  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_RANLIB="ranlib"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
if test -n "$ac_ct_RANLIB"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
$as_echo "$ac_ct_RANLIB" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  if test "x$ac_ct_RANLIB" = x; then
    RANLIB=":"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    RANLIB=$ac_ct_RANLIB
  fi
else
  RANLIB="$ac_cv_prog_RANLIB"
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
$as_echo_n "checking for inline... " >&6; }
if ${ac_cv_c_inline+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifndef __cplusplus
typedef int foo_t;
static $ac_kw foo_t static_foo () {return 0; }
$ac_kw foo_t foo () {return 0; }
#endif

_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_c_inline=$ac_kw
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  test "$ac_cv_c_inline" != no && break
done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_inline" >&5
$as_echo "$ac_cv_c_inline" >&6; }

case $ac_cv_c_inline in
  inline | yes) ;;
  *)
    case $ac_cv_c_inline in
      no) ac_val=;;
      *) ac_val=$ac_cv_c_inline;;
    esac
    cat >>confdefs.h <<_ACEOF
#ifndef __cplusplus
#define inline $ac_val
#endif
_ACEOF
    ;;
esac








$as_echo "#define UNDEF_THREADS_HACK /**/" >>confdefs.h



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
$as_echo_n "checking for ANSI C header files... " >&6; }
if ${ac_cv_header_stdc+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_header_stdc=yes
else
  ac_cv_header_stdc=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <string.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "memchr" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdlib.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "free" >/dev/null 2>&1; then :

else
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
  if test "$cross_compiling" = yes; then :
  :
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ctype.h>
#include <stdlib.h>
#if ((' ' & 0x0FF) == 0x020)
# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#else
# define ISLOWER(c) \
		   (('a' <= (c) && (c) <= 'i') \
		     || ('j' <= (c) && (c) <= 'r') \
		     || ('s' <= (c) && (c) <= 'z'))
# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
#endif

#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int
main ()
{
  int i;
  for (i = 0; i < 256; i++)
    if (XOR (islower (i), ISLOWER (i))
	|| toupper (i) != TOUPPER (i))
      return 2;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

else
  ac_cv_header_stdc=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
$as_echo "$ac_cv_header_stdc" >&6; }
if test $ac_cv_header_stdc = yes; then

$as_echo "#define STDC_HEADERS 1" >>confdefs.h

fi

for ac_header in xmlparse.h xmltok.h stdlib.h strings.h string.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done






# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of char" >&5
$as_echo_n "checking size of char... " >&6; }
if ${ac_cv_sizeof_char+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (char))" "ac_cv_sizeof_char"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_char" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (char)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_char=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_char" >&5
$as_echo "$ac_cv_sizeof_char" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_CHAR $ac_cv_sizeof_char
_ACEOF



# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
$as_echo_n "checking size of int... " >&6; }
if ${ac_cv_sizeof_int+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_int" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (int)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_int=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_int" >&5
$as_echo "$ac_cv_sizeof_int" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_INT $ac_cv_sizeof_int
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
$as_echo_n "checking size of long... " >&6; }
if ${ac_cv_sizeof_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long" >&5
$as_echo "$ac_cv_sizeof_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG $ac_cv_sizeof_long
_ACEOF


# The cast to long int works around a bug in the HP C Compiler
# version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
# declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
# This bug is HP SR number 8606223364.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long" >&5
$as_echo_n "checking size of long long... " >&6; }
if ${ac_cv_sizeof_long_long+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long))" "ac_cv_sizeof_long_long"        "$ac_includes_default"; then :

else
  if test "$ac_cv_type_long_long" = yes; then
     { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error 77 "cannot compute sizeof (long long)
See \`config.log' for more details" "$LINENO" 5; }
   else
     ac_cv_sizeof_long_long=0
   fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sizeof_long_long" >&5
$as_echo "$ac_cv_sizeof_long_long" >&6; }



cat >>confdefs.h <<_ACEOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
_ACEOF


ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
if test "x$ac_cv_type_size_t" = xyes; then :

else

cat >>confdefs.h <<_ACEOF
#define size_t unsigned int
_ACEOF

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether time.h and sys/time.h may both be included" >&5
$as_echo_n "checking whether time.h and sys/time.h may both be included... " >&6; }
if ${ac_cv_header_time+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>

int
main ()
{
if ((struct tm *) 0)
return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_header_time=yes
else
  ac_cv_header_time=no
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_time" >&5
$as_echo "$ac_cv_header_time" >&6; }
if test $ac_cv_header_time = yes; then

$as_echo "#define TIME_WITH_SYS_TIME 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for uid_t in sys/types.h" >&5
$as_echo_n "checking for uid_t in sys/types.h... " >&6; }
if ${ac_cv_type_uid_t+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "uid_t" >/dev/null 2>&1; then :
  ac_cv_type_uid_t=yes
else
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_uid_t" >&5
$as_echo "$ac_cv_type_uid_t" >&6; }
if test $ac_cv_type_uid_t = no; then

$as_echo "#define uid_t int" >>confdefs.h


$as_echo "#define gid_t int" >>confdefs.h

fi






# Standard XMLRPC list
for ac_func in \
 strtoul strtoull snprintf \
 strstr strpbrk strerror\
 memcpy memmove
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done





  ext_builddir=ext/xmlrpc
  ext_srcdir=$abs_srcdir/ext/xmlrpc

  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLRPC_SHARED=no


  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlrpc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLRPC_SHARED=yes

  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(XMLRPC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)

$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(RPC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)

$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_XMLRPC 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLRPC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlrpc"
        ;;
      *)


  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlrpc

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"


  XMLRPC_MODULE_TYPE=builtin

elif test "$PHP_XMLRPC" != "no"; then

  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
    XMLRPC_DIR=$PHP_XMLRPC/include
  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for XMLRPC-EPI in default path" >&5
$as_echo_n "checking for XMLRPC-EPI in default path... " >&6; }
    for i in /usr/local /usr; do
      if test -r $i/include/xmlrpc.h; then
        XMLRPC_DIR=$i/include
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $i" >&5
$as_echo "found in $i" >&6; }
        break
      fi
    done
  fi

  if test -z "$XMLRPC_DIR"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
    as_fn_error $? "Please reinstall the XMLRPC-EPI distribution" "$LINENO" 5
  fi


  if test "$XMLRPC_DIR" != "/usr/include"; then

  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR
  else

    ep_dir=`echo $XMLRPC_DIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$XMLRPC_DIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
    if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then

  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$XMLRPC_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then

  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$XMLRPC_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case xmlrpc in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lxmlrpc $LIBS"
   ;;
  esac




  fi



  ext_builddir=ext/xmlrpc
  ext_srcdir=$abs_srcdir/ext/xmlrpc

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLRPC_SHARED=no


  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlrpc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLRPC_SHARED=yes

  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(XMLRPC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)

$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(RPC_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)

$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_XMLRPC 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLRPC_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlrpc"
        ;;
      *)


  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlrpc

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi

  XMLRPC_MODULE_TYPE=external
fi



php_enable_xmlwriter=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable XMLWriter support" >&5
$as_echo_n "checking whether to enable XMLWriter support... " >&6; }
# Check whether --enable-xmlwriter was given.
if test "${enable_xmlwriter+set}" = set; then :
  enableval=$enable_xmlwriter; PHP_XMLWRITER=$enableval
else

  PHP_XMLWRITER=yes
  test "$PHP_ENABLE_ALL" && PHP_XMLWRITER=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLWRITER in
shared,*)
  PHP_XMLWRITER=`echo "$PHP_XMLWRITER"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XMLWRITER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_LIBXML_DIR"; then

php_with_libxml_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking libxml2 install dir" >&5
$as_echo_n "checking libxml2 install dir... " >&6; }

# Check whether --with-libxml-dir was given.
if test "${with_libxml_dir+set}" = set; then :
  withval=$with_libxml_dir; PHP_LIBXML_DIR=$withval
else

  PHP_LIBXML_DIR=no


fi


ext_output=$PHP_LIBXML_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_XMLWRITER" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    as_fn_error $? "XMLWriter extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for xml2-config path" >&5
$as_echo_n "checking for xml2-config path... " >&6; }
if ${ac_cv_php_xml2_config_path+:} false; then :
  $as_echo_n "(cached) " >&6
else

  for i in $PHP_LIBXML_DIR /usr/local /usr; do
    if test -x "$i/bin/xml2-config"; then
      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
      break
    fi
  done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_php_xml2_config_path" >&5
$as_echo "$ac_cv_php_xml2_config_path" >&6; }

  if test -x "$ac_cv_php_xml2_config_path"; then
    XML2_CONFIG="$ac_cv_php_xml2_config_path"
    libxml_full_version=`$XML2_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxml_full_version
    IFS=$ac_IFS
    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXML_VERSION" -ge "2006011"; then
      LIBXML_LIBS=`$XML2_CONFIG --libs`
      LIBXML_INCS=`$XML2_CONFIG --cflags`

  for ac_i in $LIBXML_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        XMLWRITER_SHARED_LIBADD="-L$ai_p $XMLWRITER_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XMLWRITER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLWRITER_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $LIBXML_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


            { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether libxml build works" >&5
$as_echo_n "checking whether libxml build works... " >&6; }
if ${php_cv_libxml_build_works+:} false; then :
  $as_echo_n "(cached) " >&6
else


  old_LIBS=$LIBS
  LIBS="
          $XMLWRITER_SHARED_LIBADD
         $LIBS"
  if test "$cross_compiling" = yes; then :

    LIBS=$old_LIBS

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */


    char xmlInitParser();
    int main() {
      xmlInitParser();
      return 0;
    }

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    LIBS=$old_LIBS

          php_cv_libxml_build_works=yes


else

    LIBS=$old_LIBS

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
          as_fn_error $? "build test failed.  Please check the config.log for details." "$LINENO" 5


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_libxml_build_works" >&5
$as_echo "$php_cv_libxml_build_works" >&6; }
      if test "$php_cv_libxml_build_works" = "yes"; then

$as_echo "#define HAVE_LIBXML 1" >>confdefs.h

      fi


$as_echo "#define HAVE_XMLWRITER 1" >>confdefs.h


  ext_builddir=ext/xmlwriter
  ext_srcdir=$abs_srcdir/ext/xmlwriter

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XMLWRITER_SHARED=no


  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlwriter"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XMLWRITER_SHARED=yes

  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_xmlwriter="$shared_objects_xmlwriter $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlwriter.so '$ext_builddir'/phpxmlwriter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(XMLWRITER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlwriter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlwriter.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxmlwriter.$suffix: $ext_builddir/phpxmlwriter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlwriter.$suffix \$(phplibdir)

$ext_builddir/phpxmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(PHPXMLWRITER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlwriter.so '$ext_builddir'/xmlwriter.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(WRITER_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlwriter.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlwriter.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlwriter.$suffix: $ext_builddir/xmlwriter.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlwriter.$suffix \$(phplibdir)

$ext_builddir/xmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(XMLWRITER_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_XMLWRITER 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XMLWRITER_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xmlwriter"
        ;;
      *)


  case ext/xmlwriter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xmlwriter.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xmlwriter

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLWRITER_SHARED_LIBADD"


    else
      as_fn_error $? "libxml2 version 2.6.11 or greater required." "$LINENO" 5
    fi
else
    as_fn_error $? "xml2-config not found. Please check your libxml2 installation." "$LINENO" 5

  fi

fi



php_with_xsl=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for XSL support" >&5
$as_echo_n "checking for XSL support... " >&6; }

# Check whether --with-xsl was given.
if test "${with_xsl+set}" = set; then :
  withval=$with_xsl; PHP_XSL=$withval
else

  PHP_XSL=no
  test "$PHP_ENABLE_ALL" && PHP_XSL=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XSL in
shared,*)
  PHP_XSL=`echo "$PHP_XSL"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_XSL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_XSL" != "no"; then

  if test "$PHP_LIBXML" = "no"; then
    as_fn_error $? "XSL extension requires LIBXML extension, add --enable-libxml" "$LINENO" 5
  fi

  if test "$PHP_DOM" = "no"; then
    as_fn_error $? "XSL extension requires DOM extension, add --enable-dom" "$LINENO" 5
  fi

  for i in $PHP_XSL /usr/local /usr; do
    if test -x "$i/bin/xslt-config"; then
      XSLT_CONFIG=$i/bin/xslt-config
      break
    fi
  done

  if test -z "$XSLT_CONFIG"; then
    as_fn_error $? "xslt-config not found. Please reinstall the libxslt >= 1.1.0 distribution" "$LINENO" 5
  else
    libxslt_full_version=`$XSLT_CONFIG --version`
    ac_IFS=$IFS
    IFS="."
    set $libxslt_full_version
    IFS=$ac_IFS
    LIBXSLT_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
    if test "$LIBXSLT_VERSION" -ge "1001000"; then
      XSL_LIBS=`$XSLT_CONFIG --libs`
      XSL_INCS=`$XSLT_CONFIG --cflags`

  for ac_i in $XSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done


  for ac_i in $XSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done


      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXSLT support" >&5
$as_echo_n "checking for EXSLT support... " >&6; }
      for i in $PHP_XSL /usr/local /usr; do
        if test -r "$i/include/libexslt/exslt.h"; then
          PHP_XSL_EXSL_DIR=$i
          break
        fi
      done
      if test -z "$PHP_XSL_EXSL_DIR"; then
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
$as_echo "not found" >&6; }
      else
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found" >&5
$as_echo "found" >&6; }


  if test "$ext_shared" = "yes"; then
    XSL_SHARED_LIBADD="-lexslt $XSL_SHARED_LIBADD"
    if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then

  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then

  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case exslt in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lexslt $LIBS"
   ;;
  esac




  fi



  if test "$PHP_XSL_EXSL_DIR/include" != "/usr/include"; then

  if test -z "$PHP_XSL_EXSL_DIR/include" || echo "$PHP_XSL_EXSL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_XSL_EXSL_DIR/include
  else

    ep_dir=`echo $PHP_XSL_EXSL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_XSL_EXSL_DIR/include"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi


$as_echo "#define HAVE_XSL_EXSLT 1" >>confdefs.h

      fi
    else
      as_fn_error $? "libxslt version 1.1.0 or greater required." "$LINENO" 5
    fi


  fi


$as_echo "#define HAVE_XSL 1" >>confdefs.h


  ext_builddir=ext/xsl
  ext_srcdir=$abs_srcdir/ext/xsl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_XSL_SHARED=no


  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xsl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_XSL_SHARED=yes

  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_xsl="$shared_objects_xsl $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxsl.so '$ext_builddir'/phpxsl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(XSL_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxsl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxsl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpxsl.$suffix: $ext_builddir/phpxsl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxsl.$suffix \$(phplibdir)

$ext_builddir/phpxsl.$suffix: \$(shared_objects_xsl) \$(PHPXSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xsl.so '$ext_builddir'/xsl.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xsl.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xsl.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xsl.$suffix: $ext_builddir/xsl.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/xsl.$suffix \$(phplibdir)

$ext_builddir/xsl.$suffix: \$(shared_objects_xsl) \$(XSL_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_XSL 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_XSL_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC xsl"
        ;;
      *)


  case ext/xsl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_xsl.c xsltprocessor.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=xsl

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST XSL_SHARED_LIBADD"


  am_i_shared=$PHP_XSL_SHARED
  is_it_shared=$PHP_LIBXML_SHARED
  is_it_enabled=$PHP_LIBXML
  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
    as_fn_error $? "
You've configured extension xsl to build statically, but it
depends on extension libxml, which you've configured to build shared.
You either need to build xsl shared or build libxml statically for the
build to be successful.
" "$LINENO" 5
  fi
  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
    as_fn_error $? "
You've configured extension xsl, which depends on extension libxml,
but you've either not enabled libxml, or have disabled it.
" "$LINENO" 5
  fi

fi



php_enable_zip=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for zip archive read/writesupport" >&5
$as_echo_n "checking for zip archive read/writesupport... " >&6; }
# Check whether --enable-zip was given.
if test "${enable_zip+set}" = set; then :
  enableval=$enable_zip; PHP_ZIP=$enableval
else

  PHP_ZIP=no
  test "$PHP_ENABLE_ALL" && PHP_ZIP=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ZIP in
shared,*)
  PHP_ZIP=`echo "$PHP_ZIP"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_ZIP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_ZLIB_DIR"; then

php_with_zlib_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libz" >&5
$as_echo_n "checking for the location of libz... " >&6; }

# Check whether --with-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then :
  withval=$with_zlib_dir; PHP_ZLIB_DIR=$withval
else

  PHP_ZLIB_DIR=no


fi


ext_output=$PHP_ZLIB_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi


php_with_pcre_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking pcre install prefix" >&5
$as_echo_n "checking pcre install prefix... " >&6; }

# Check whether --with-pcre-dir was given.
if test "${with_pcre_dir+set}" = set; then :
  withval=$with_pcre_dir; PHP_PCRE_DIR=$withval
else

  PHP_PCRE_DIR=no


fi


ext_output=$PHP_PCRE_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_ZIP" != "no"; then

  if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
    if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
    elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
    else
      as_fn_error $? "Can not find zlib headers under \"$PHP_ZLIB_DIR\"" "$LINENO" 5
    fi
  else
    for i in /usr/local /usr; do
      if test -f "$i/include/zlib/zlib.h"; then
        PHP_ZLIB_DIR="$i"
        PHP_ZLIB_INCDIR="$i/include/zlib"
      elif test -f "$i/include/zlib.h"; then
        PHP_ZLIB_DIR="$i"
        PHP_ZLIB_INCDIR="$i/include"
      fi
    done
  fi

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of zlib" >&5
$as_echo_n "checking for the location of zlib... " >&6; }
  if test "$PHP_ZLIB_DIR" = "no"; then
    as_fn_error $? "zip support requires ZLIB. Use --with-zlib-dir=<DIR> to specify prefix where ZLIB include and library are located" "$LINENO" 5
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_ZLIB_DIR" >&5
$as_echo "$PHP_ZLIB_DIR" >&6; }


  if test "$ext_shared" = "yes"; then
    ZIP_SHARED_LIBADD="-lz $ZIP_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then

  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR/$PHP_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        ZIP_SHARED_LIBADD="-L$ai_p $ZIP_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZIP_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    fi
  else


  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then

  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then

  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
  else

    ep_dir=`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_DIR/$PHP_LIBDIR"`
  fi





  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi



  fi

  fi


  case z in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lz $LIBS"
   ;;
  esac




  fi



  if test "$PHP_ZLIB_INCDIR" != "/usr/include"; then

  if test -z "$PHP_ZLIB_INCDIR" || echo "$PHP_ZLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_INCDIR
  else

    ep_dir=`echo $PHP_ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$PHP_ZLIB_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

  fi

    old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=$INCLUDES
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <main/php_config.h>
#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

    PHP_PCRE_REGEX=yes

else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <main/php_config.h>
#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      PHP_PCRE_REGEX=pecl

else

      PHP_PCRE_REGEX=no

fi
rm -f conftest*


fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS

  PHP_ZIP_SOURCES="$PHP_ZIP_SOURCES lib/zip_add.c lib/zip_error.c lib/zip_fclose.c \
                         lib/zip_fread.c lib/zip_open.c lib/zip_source_filep.c  \
                         lib/zip_strerror.c lib/zip_close.c lib/zip_error_get.c \
                         lib/zip_file_error_get.c lib/zip_free.c lib/zip_rename.c \
                         lib/zip_source_free.c lib/zip_unchange_all.c lib/zip_delete.c \
                         lib/zip_error_get_sys_type.c lib/zip_file_get_offset.c \
                         lib/zip_get_name.c lib/zip_replace.c lib/zip_source_function.c \
                         lib/zip_unchange.c lib/zip_dirent.c lib/zip_error_strerror.c \
                         lib/zip_filerange_crc.c lib/zip_file_strerror.c lib/zip_get_num_files.c \
                         lib/zip_get_archive_flag.c lib/zip_set_archive_flag.c \
                         lib/zip_set_name.c lib/zip_source_zip.c lib/zip_unchange_data.c \
                         lib/zip_entry_free.c lib/zip_error_to_str.c lib/zip_fopen.c \
                         lib/zip_name_locate.c lib/zip_source_buffer.c lib/zip_stat.c \
                         lib/zip_entry_new.c lib/zip_err_str.c lib/zip_fopen_index.c \
                         lib/zip_get_archive_comment.c lib/zip_get_file_comment.c \
                         lib/zip_new.c lib/zip_source_file.c lib/zip_stat_index.c \
                         lib/zip_set_archive_comment.c lib/zip_set_file_comment.c \
                         lib/zip_unchange_archive.c lib/zip_memdup.c lib/zip_stat_init.c lib/zip_add_dir.c \
                         lib/zip_error_clear.c lib/zip_file_error_clear.c \
						 lib/zip_fdopen.c lib/zip_fopen_encrypted.c lib/zip_fopen_index_encrypted.c \
						 lib/zip_get_compression_implementation.c lib/zip_get_encryption_implementation.c \
						 lib/zip_get_file_extra.c lib/zip_get_num_entries.c lib/zip_set_default_password.c \
						 lib/zip_set_file_extra.c lib/zip_source_close.c lib/zip_source_crc.c \
						 lib/zip_source_deflate.c lib/zip_source_error.c lib/zip_source_layered.c \
						 lib/zip_source_open.c lib/zip_source_pkware.c lib/zip_source_pop.c \
						 lib/zip_source_read.c lib/zip_source_stat.c"


$as_echo "#define HAVE_ZIP 1" >>confdefs.h


  ext_builddir=ext/zip
  ext_srcdir=$abs_srcdir/ext/zip

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_ZIP_SHARED=no


  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC zip"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_ZIP_SHARED=yes

  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzip.so '$ext_builddir'/phpzip.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(ZIP_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzip.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzip.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpzip.$suffix: $ext_builddir/phpzip.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzip.$suffix \$(phplibdir)

$ext_builddir/phpzip.$suffix: \$(shared_objects_zip) \$(PHPZIP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zip.so '$ext_builddir'/zip.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zip.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/zip.$suffix: $ext_builddir/zip.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.$suffix \$(phplibdir)

$ext_builddir/zip.$suffix: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_ZIP 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_ZIP_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC zip"
        ;;
      *)


  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=zip

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    $php_shtool mkdir -p $ext_builddir/lib



  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"



  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi



php_enable_mysqlnd=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable mysqlnd" >&5
$as_echo_n "checking whether to enable mysqlnd... " >&6; }
# Check whether --enable-mysqlnd was given.
if test "${enable_mysqlnd+set}" = set; then :
  enableval=$enable_mysqlnd; PHP_MYSQLND=$enableval
else

  PHP_MYSQLND=no
  test "$PHP_ENABLE_ALL" && PHP_MYSQLND=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQLND in
shared,*)
  PHP_MYSQLND=`echo "$PHP_MYSQLND"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_MYSQLND=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }





php_enable_mysqlnd_compression_support=yes

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to disable compressed protocol support in mysqlnd" >&5
$as_echo_n "checking whether to disable compressed protocol support in mysqlnd... " >&6; }
# Check whether --enable-mysqlnd_compression_support was given.
if test "${enable_mysqlnd_compression_support+set}" = set; then :
  enableval=$enable_mysqlnd_compression_support; PHP_MYSQLND_COMPRESSION_SUPPORT=$enableval
else

  PHP_MYSQLND_COMPRESSION_SUPPORT=yes


fi


ext_output=$PHP_MYSQLND_COMPRESSION_SUPPORT
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test -z "$PHP_ZLIB_DIR"; then

php_with_zlib_dir=no

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for the location of libz" >&5
$as_echo_n "checking for the location of libz... " >&6; }

# Check whether --with-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then :
  withval=$with_zlib_dir; PHP_ZLIB_DIR=$withval
else

  PHP_ZLIB_DIR=no


fi


ext_output=$PHP_ZLIB_DIR
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }



fi

if test "$PHP_MYSQLND" != "no" || test "$PHP_MYSQLND_ENABLED" = "yes"; then
  mysqlnd_ps_sources="mysqlnd_ps.c mysqlnd_ps_codec.c"
  mysqlnd_base_sources="mysqlnd.c mysqlnd_alloc.c mysqlnd_bt.c mysqlnd_charset.c mysqlnd_wireprotocol.c \
                   mysqlnd_loaddata.c mysqlnd_reverse_api.c mysqlnd_net.c \
                   mysqlnd_statistics.c mysqlnd_driver.c mysqlnd_ext_plugin.c mysqlnd_auth.c \
				   mysqlnd_result.c mysqlnd_result_meta.c mysqlnd_debug.c\
				   mysqlnd_block_alloc.c mysqlnd_plugin.c php_mysqlnd.c"


  if test "$PHP_MYSQLND_COMPRESSION_SUPPORT" != "no"; then

$as_echo "#define MYSQLND_COMPRESSION_WANTED 1" >>confdefs.h

  fi


$as_echo "#define MYSQLND_SSL_SUPPORTED 1" >>confdefs.h


  test -z "$PHP_OPENSSL" && PHP_OPENSSL=no

  if test "$PHP_OPENSSL" != "no" || test "$PHP_OPENSSL_DIR" != "no"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DSA_get_default_method in -lssl" >&5
$as_echo_n "checking for DSA_get_default_method in -lssl... " >&6; }
if ${ac_cv_lib_ssl_DSA_get_default_method+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lssl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char DSA_get_default_method ();
int
main ()
{
return DSA_get_default_method ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ssl_DSA_get_default_method=yes
else
  ac_cv_lib_ssl_DSA_get_default_method=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_DSA_get_default_method" >&5
$as_echo "$ac_cv_lib_ssl_DSA_get_default_method" >&6; }
if test "x$ac_cv_lib_ssl_DSA_get_default_method" = xyes; then :

$as_echo "#define HAVE_DSA_DEFAULT_METHOD 1" >>confdefs.h

fi

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for X509_free in -lcrypto" >&5
$as_echo_n "checking for X509_free in -lcrypto... " >&6; }
if ${ac_cv_lib_crypto_X509_free+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypto  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char X509_free ();
int
main ()
{
return X509_free ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypto_X509_free=yes
else
  ac_cv_lib_crypto_X509_free=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_X509_free" >&5
$as_echo "$ac_cv_lib_crypto_X509_free" >&6; }
if test "x$ac_cv_lib_crypto_X509_free" = xyes; then :

$as_echo "#define HAVE_DSA_DEFAULT_METHOD 1" >>confdefs.h

fi



  found_openssl=no
  unset OPENSSL_INCDIR
  unset OPENSSL_LIBDIR

    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no

    if test "$PHP_OPENSSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_OPENSSL
  elif test "$PHP_IMAP_SSL" != "no"; then
    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
  fi

    if test -z "$PKG_CONFIG"; then
    # Extract the first word of "pkg-config", so it can be a program name with args.
set dummy pkg-config; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_path_PKG_CONFIG+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $PKG_CONFIG in
  [\\/]* | ?:[\\/]*)
  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
  ;;
  *)
  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
  ;;
esac
fi
PKG_CONFIG=$ac_cv_path_PKG_CONFIG
if test -n "$PKG_CONFIG"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
$as_echo "$PKG_CONFIG" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


  fi

    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
      found_openssl=yes
      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
    else
      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5
    fi

    if test -n "$OPENSSL_LIBS"; then

  for ac_i in $OPENSSL_LIBS; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="$MYSQLND_SHARED_LIBADD -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="$MYSQLND_SHARED_LIBADD -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="-L$ai_p $MYSQLND_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQLND_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQLND_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

    fi
    if test -n "$OPENSSL_INCS"; then

  for ac_i in $OPENSSL_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/include"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi

    ;;
    esac
  done

    fi
  fi

    if test "$found_openssl" = "no"; then

    if test "$PHP_OPENSSL_DIR" = "yes"; then
      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
    fi

    for i in $PHP_OPENSSL_DIR; do
      if test -r $i/include/openssl/evp.h; then
        OPENSSL_INCDIR=$i/include
      fi
      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
      fi
      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
    done

    if test -z "$OPENSSL_INCDIR"; then
      as_fn_error $? "Cannot find OpenSSL's <evp.h>" "$LINENO" 5
    fi

    if test -z "$OPENSSL_LIBDIR"; then
      as_fn_error $? "Cannot find OpenSSL's libraries" "$LINENO" 5
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$OPENSSL_INCDIR
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OpenSSL version" >&5
$as_echo_n "checking for OpenSSL version... " >&6; }
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "yes" >/dev/null 2>&1; then :

      { $as_echo "$as_me:${as_lineno-$LINENO}: result: >= 0.9.6" >&5
$as_echo ">= 0.9.6" >&6; }

else

      as_fn_error $? "OpenSSL version 0.9.6 or greater required." "$LINENO" 5

fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS


  if test "$OPENSSL_INCDIR" != "/usr/include"; then

  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else

    ep_dir=`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_INCDIR"`
  fi



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"

      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi

  fi

  fi



  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRYPTO_free in -lcrypto" >&5
$as_echo_n "checking for CRYPTO_free in -lcrypto... " >&6; }
if ${ac_cv_lib_crypto_CRYPTO_free+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lcrypto  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char CRYPTO_free ();
int
main ()
{
return CRYPTO_free ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_crypto_CRYPTO_free=yes
else
  ac_cv_lib_crypto_CRYPTO_free=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_CRYPTO_free" >&5
$as_echo "$ac_cv_lib_crypto_CRYPTO_free" >&6; }
if test "x$ac_cv_lib_crypto_CRYPTO_free" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared



  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="-lcrypto $MYSQLND_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_crypto_CRYPTO_free

      as_fn_error $? "libcrypto not found!" "$LINENO" 5


fi


    old_LIBS=$LIBS
    LIBS="$LIBS -lcrypto"

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff="
      -L$OPENSSL_LIBDIR
    "

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SSL_CTX_set_ssl_version in -lssl" >&5
$as_echo_n "checking for SSL_CTX_set_ssl_version in -lssl... " >&6; }
if ${ac_cv_lib_ssl_SSL_CTX_set_ssl_version+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lssl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char SSL_CTX_set_ssl_version ();
int
main ()
{
return SSL_CTX_set_ssl_version ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=yes
else
  ac_cv_lib_ssl_SSL_CTX_set_ssl_version=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&5
$as_echo "$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" >&6; }
if test "x$ac_cv_lib_ssl_SSL_CTX_set_ssl_version" = xyes; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      found_openssl=yes


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version

      as_fn_error $? "libssl not found!" "$LINENO" 5


fi

    LIBS=$old_LIBS


  case ssl in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="-lssl $MYSQLND_SHARED_LIBADD"
    else


  case ssl in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lssl $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  case crypto in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="-lcrypto $MYSQLND_SHARED_LIBADD"
    else


  case crypto in
  c|c_r|pthread*) ;;
  *)
      LIBS="-lcrypto $LIBS"
   ;;
  esac


    fi
   ;;
  esac




  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then

  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else

    ep_dir=`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$OPENSSL_LIBDIR"`
  fi


      if test "$ext_shared" = "yes"; then
        MYSQLND_SHARED_LIBADD="-L$ai_p $MYSQLND_SHARED_LIBADD"
        test -n "$ld_runpath_switch" && MYSQLND_SHARED_LIBADD="$ld_runpath_switch$ai_p $MYSQLND_SHARED_LIBADD"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

  fi

  if test "$found_openssl" = "yes"; then
    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR



$as_echo "#define MYSQLND_HAVE_SSL 1" >>confdefs.h


  fi

  fi

  mysqlnd_sources="$mysqlnd_base_sources $mysqlnd_ps_sources"

  ext_builddir=ext/mysqlnd
  ext_srcdir=$abs_srcdir/ext/mysqlnd

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
    PHP_MYSQLND_SHARED=no


  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysqlnd"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysqlnd"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      PHP_MYSQLND_SHARED=yes

  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      shared_objects_mysqlnd="$shared_objects_mysqlnd $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      case $host_alias in
        *netware*)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpmysqlnd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(PHPMYSQLND_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpmysqlnd.so '$ext_builddir'/phpmysqlnd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) -L$(top_builddir)/netware -lphp5lib $(MYSQLND_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(PHPMYSQLND_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpmysqlnd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpmysqlnd.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqlnd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/phpmysqlnd.$suffix: $ext_builddir/phpmysqlnd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/phpmysqlnd.$suffix \$(phplibdir)

$ext_builddir/phpmysqlnd.$suffix: \$(shared_objects_mysqlnd) \$(PHPMYSQLND_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
        *)

  install_modules="install-modules"

  case $host_alias in
    *aix*)
      suffix=so
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/mysqlnd.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(MYSQLND_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/mysqlnd.so '$ext_builddir'/mysqlnd.so'
      ;;
    *netware*)
      suffix=nlm
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) -L$(top_builddir)/netware -lphp5lib $(QLND_SHARED_LIBADD)'
      ;;
    *)
      suffix=la
      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_mysqlnd) $(MYSQLND_SHARED_LIBADD)'
      ;;
  esac

  if test "x" = "xyes"; then
    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/mysqlnd.$suffix"
  else
    PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysqlnd.$suffix"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysqlnd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysqlnd.$suffix: $ext_builddir/mysqlnd.$suffix
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysqlnd.$suffix \$(phplibdir)

$ext_builddir/mysqlnd.$suffix: \$(shared_objects_mysqlnd) \$(MYSQLND_SHARED_DEPENDENCIES)
	$link_cmd

EOF

          ;;
      esac

cat >>confdefs.h <<_ACEOF
#define COMPILE_DL_MYSQLND 1
_ACEOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    PHP_MYSQLND_SHARED=no
    case "$PHP_SAPI" in
      cgi|embed)


  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        EXT_STATIC="$EXT_STATIC mysqlnd"
        ;;
      *)


  case ext/mysqlnd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysqlnd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysqlnd/"; ac_bdir="ext/mysqlnd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $mysqlnd_sources; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


        ;;
    esac
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysqlnd"
  fi


    BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$ext_builddir" = "."; then
    PHP_PECL_EXTENSION=mysqlnd

  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"

  fi



    $php_shtool mkdir -p ext/mysqlnd




    for header_file in ext/mysqlnd/; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done


fi

if test "$PHP_MYSQLND" != "no" || test "$PHP_MYSQLND_ENABLED" = "yes" || test "$PHP_MYSQLI" != "no"; then


    $php_shtool mkdir -p ext/mysqlnd




  for php_typename in int8 uint8 int16 uint16 int32 uint32 uchar ulong int8_t uint8_t int16_t uint16_t int32_t uint32_t int64_t uint64_t; do
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $php_typename exists" >&5
$as_echo_n "checking whether $php_typename exists... " >&6; }

  php_cache_value=php_cv_sizeof_$php_typename
  if eval \${php_cv_sizeof_$php_typename+:} false; then :
  $as_echo_n "(cached) " >&6
else

    old_LIBS=$LIBS
    LIBS=
    old_LDFLAGS=$LDFLAGS
    LDFLAGS=
    if test "$cross_compiling" = yes; then :

    eval $php_cache_value=0

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <stdio.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_INTTYPES_H
#include <inttypes.h>
#endif
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif
#ifdef HAVE_STDINT_H
#include <stdint.h>
#endif


int main()
{
	FILE *fp = fopen("conftestval", "w");
	if (!fp) return(1);
	fprintf(fp, "%d\n", sizeof($php_typename));
	return(0);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

    eval $php_cache_value=`cat conftestval`

else

    eval $php_cache_value=0

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  LDFLAGS=$old_LDFLAGS
  LIBS=$old_LIBS

fi

  if eval test "\$$php_cache_value" != "0"; then


  php_def_have_what=HAVE_`echo $php_typename | tr 'abcdefghijklmnopqrstuvwxyz-' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ_' `
  echo "#define $php_def_have_what 1" >> ext/mysqlnd/php_mysqlnd_config.h


      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

  fi

  done

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether whether compiler supports Decimal32/64/128 types" >&5
$as_echo_n "checking whether whether compiler supports Decimal32/64/128 types... " >&6; }
if ${ac_cv_decimal_fp_supported+:} false; then :
  $as_echo_n "(cached) " >&6
else

if test "$cross_compiling" = yes; then :

  ac_cv_decimal_fp_supported=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <stdio.h>

int main(int argc, char **argv) {
	typedef float dec32 __attribute__((mode(SD)));
	dec32 k = 99.49f;
	double d2 = (double)k;
	return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  ac_cv_decimal_fp_supported=yes

else

  ac_cv_decimal_fp_supported=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_decimal_fp_supported" >&5
$as_echo "$ac_cv_decimal_fp_supported" >&6; }
if test "$ac_cv_decimal_fp_supported" = "yes"; then

$as_echo "#define HAVE_DECIMAL_FP_SUPPORT 1" >>confdefs.h

fi


if test "$PHP_RECODE" != "no"; then
  test "$PHP_IMAP"  != "no" && recode_conflict="$recode_conflict imap"

  if test -n "$MYSQL_LIBNAME"; then

  save_old_LDFLAGS=$LDFLAGS
  ac_stuff=""

  save_ext_shared=$ext_shared
  ext_shared=yes

  for ac_i in $ac_stuff; do
    case $ac_i in
    -pthread)
      if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -pthread"
      else


  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "EXTRA_LDFLAGS$unique=set"
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
  fi

      fi
    ;;
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
    if test "$ext_shared" = "yes"; then
        LDFLAGS="$LDFLAGS -l$ac_ii"
    else


  case $ac_ii in
  c|c_r|pthread*) ;;
  *)
      LIBS="$LIBS -l$ac_ii"
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`

  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then

  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else

    ep_dir=`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`

    ep_realdir=`(cd "$ep_dir" && pwd)`
    ai_p="$ep_realdir"/`basename "$ac_ii"`
  fi


      if test "$ext_shared" = "yes"; then
        LDFLAGS="-L$ai_p $LDFLAGS"
        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
      else



  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"

    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"

  fi


      fi

  fi

    ;;
    esac
  done

  as_ac_Lib=`$as_echo "ac_cv_lib_$MYSQL_LIBNAME''_hash_insert" | $as_tr_sh`
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for hash_insert in -l$MYSQL_LIBNAME" >&5
$as_echo_n "checking for hash_insert in -l$MYSQL_LIBNAME... " >&6; }
if eval \${$as_ac_Lib+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-l$MYSQL_LIBNAME  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char hash_insert ();
int
main ()
{
return hash_insert ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  eval "$as_ac_Lib=yes"
else
  eval "$as_ac_Lib=no"
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
eval ac_res=\$$as_ac_Lib
	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
$as_echo "$ac_res" >&6; }
if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared

      recode_conflict="$recode_conflict mysql"


else

    LDFLAGS=$save_old_LDFLAGS
    ext_shared=$save_ext_shared
    unset ac_cv_lib_$MYSQL_LIBNAME_hash_insert


fi

  fi

  if test -n "$recode_conflict"; then
    as_fn_error $? "recode extension can not be configured together with:$recode_conflict" "$LINENO" 5
  fi
fi




enable_shared=yes
enable_static=yes

case $php_sapi_module in
  shared)
    enable_static=no
    case $with_pic in
      yes)
        standard_libtool_flag='-prefer-pic'
        ;;
      no)
        standard_libtool_flag='-prefer-non-pic'
        ;;
    esac
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -avoid-version -module"
    ;;
  *)
    standard_libtool_flag='-prefer-non-pic -static'
    if test -z "$PHP_MODULES" && test -z "$PHP_ZEND_EX"; then
      enable_shared=no
    fi
    ;;
esac

EXTRA_LIBS="$EXTRA_LIBS $DLIBS $LIBS"

if test "$ac_cv_lib_crypt_crypt" = "yes"; then
  EXTRA_LIBS="-lcrypt $EXTRA_LIBS -lcrypt"
fi

unset LIBS LDFLAGS



# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Configuring PEAR${T_ME}" >&5
$as_echo "${T_MD}Configuring PEAR${T_ME}" >&6; }


# compatibility
if test -z "$with_pear" && test "$enable_pear" = "no"; then
  with_pear=no
fi

# If CLI is disabled -> disable PEAR
if test "$PHP_CLI" = "no"; then
  with_pear=no
fi


php_with_pear=DEFAULT

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to install PEAR" >&5
$as_echo_n "checking whether to install PEAR... " >&6; }

# Check whether --with-pear was given.
if test "${with_pear+set}" = set; then :
  withval=$with_pear; PHP_PEAR=$withval
else

  PHP_PEAR=DEFAULT
  test "$PHP_ENABLE_ALL" && PHP_PEAR=$PHP_ENABLE_ALL

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PEAR in
shared,*)
  PHP_PEAR=`echo "$PHP_PEAR"|$SED 's/^shared,//'`
  ;;
shared)
  PHP_PEAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ext_output" >&5
$as_echo "$ext_output" >&6; }




if test "$PHP_PEAR" != "no"; then

        if test "$PHP_XML" = "no"; then
    pear_error_msg="$pear_error_msg
                    PEAR requires XML to be enabled.     Add --enable-xml to the configure line. (or --without-pear)"
  fi


  if test "$pear_error_msg"; then
    as_fn_error $? "$pear_error_msg" "$LINENO" 5
  fi

  install_pear="install-pear"
  PEAR_INSTALLDIR=$PHP_PEAR

  if test "$PHP_PEAR" = "DEFAULT" || test "$PHP_PEAR" = "yes"; then
    case $PHP_LAYOUT in
      GNU) PEAR_INSTALLDIR=$datadir/pear;;
      *)   PEAR_INSTALLDIR=$libdir/php;;
    esac
  fi


  src=$abs_srcdir/pear/Makefile.frag
  ac_srcdir=$abs_srcdir/pear
  ac_builddir=pear
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi




# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Configuring Zend${T_ME}" >&5
$as_echo "${T_MD}Configuring Zend${T_ME}" >&6; }










  # we only support certain bison versions
  bison_version_list="2.4 2.4.1 2.4.2 2.4.3 2.5 2.5.1 2.6 2.6.1 2.6.2 2.6.3 2.6.4 2.6.5 2.7"

  # for standalone build of Zend Engine
  test -z "$SED" && SED=sed

  bison_version=none
  if test "$YACC"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bison version" >&5
$as_echo_n "checking for bison version... " >&6; }
if ${php_cv_bison_version+:} false; then :
  $as_echo_n "(cached) " >&6
else

      bison_version_vars=`$YACC --version 2> /dev/null | grep 'GNU Bison' | cut -d ' ' -f 4 | $SED -e 's/\./ /g' | tr -d a-z`
      php_cv_bison_version=invalid
      if test -n "$bison_version_vars"; then
        set $bison_version_vars
        bison_version="${1}.${2}"
        for bison_check_version in $bison_version_list; do
          if test "$bison_version" = "$bison_check_version"; then
            php_cv_bison_version="$bison_check_version (ok)"
            break
          fi
        done
      fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $php_cv_bison_version" >&5
$as_echo "$php_cv_bison_version" >&6; }
  fi
  case $php_cv_bison_version in
    ""|invalid)
      bison_msg="bison versions supported for regeneration of the Zend/PHP parsers: $bison_version_list (found: $bison_version)."
      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $bison_msg" >&5
$as_echo "$as_me: WARNING: $bison_msg" >&2;}
      YACC="exit 0;"
      ;;
  esac


if test "$CC" = "gcc" -a "$ac_cv_prog_cc_g" = "yes" -a \
   "`uname -sv`" = "AIX 4"; then
	CFLAGS=`echo $CFLAGS | sed -e 's/-g//'`
fi

if test "$ac_cv_c_compiler_gnu" = "yes" -a "`uname -s`" = "Rhapsody"; then
        CPPFLAGS="$CPPFLAGS -traditional-cpp"
fi

for ac_header in inttypes.h \
stdint.h \
limits.h \
malloc.h \
string.h \
unistd.h \
stdarg.h \
sys/types.h \
sys/time.h \
signal.h \
unix.h \
stdlib.h \
dlfcn.h
do :
  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
_ACEOF

fi

done


ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
if test "x$ac_cv_type_size_t" = xyes; then :

else

cat >>confdefs.h <<_ACEOF
#define size_t unsigned int
_ACEOF

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
$as_echo_n "checking return type of signal handlers... " >&6; }
if ${ac_cv_type_signal+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <sys/types.h>
#include <signal.h>

int
main ()
{
return *(signal (0, 0)) (0) == 1;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_type_signal=int
else
  ac_cv_type_signal=void
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_signal" >&5
$as_echo "$ac_cv_type_signal" >&6; }

cat >>confdefs.h <<_ACEOF
#define RETSIGTYPE $ac_cv_type_signal
_ACEOF







ac_fn_c_check_type "$LINENO" "uint" "ac_cv_type_uint" "$ac_includes_default"
if test "x$ac_cv_type_uint" = xyes; then :

else

cat >>confdefs.h <<_ACEOF
#define uint unsigned int
_ACEOF

fi

ac_fn_c_check_type "$LINENO" "ulong" "ac_cv_type_ulong" "$ac_includes_default"
if test "x$ac_cv_type_ulong" = xyes; then :

else

cat >>confdefs.h <<_ACEOF
#define ulong unsigned long
_ACEOF

fi



{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for int32_t" >&5
$as_echo_n "checking for int32_t... " >&6; }
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif
#if HAVE_INTTYPES_H
#include <inttypes.h>
#elif HAVE_STDINT_H
#include <stdint.h>
#endif
int
main ()
{
if ((int32_t *) 0)
  return 0;
if (sizeof (int32_t))
  return 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


cat >>confdefs.h <<_ACEOF
#define HAVE_INT32_T 1
_ACEOF

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for uint32_t" >&5
$as_echo_n "checking for uint32_t... " >&6; }
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#if HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif
#if HAVE_INTTYPES_H
#include <inttypes.h>
#elif HAVE_STDINT_H
#include <stdint.h>
#endif
int
main ()
{
if ((uint32_t *) 0)
  return 0;
if (sizeof (uint32_t))
  return 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :


cat >>confdefs.h <<_ACEOF
#define HAVE_UINT32_T 1
_ACEOF

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext

for ac_func in vprintf
do :
  ac_fn_c_check_func "$LINENO" "vprintf" "ac_cv_func_vprintf"
if test "x$ac_cv_func_vprintf" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_VPRINTF 1
_ACEOF

ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
if test "x$ac_cv_func__doprnt" = xyes; then :

$as_echo "#define HAVE_DOPRNT 1" >>confdefs.h

fi

fi
done


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working memcmp" >&5
$as_echo_n "checking for working memcmp... " >&6; }
if ${ac_cv_func_memcmp_working+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "$cross_compiling" = yes; then :
  ac_cv_func_memcmp_working=no
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$ac_includes_default
int
main ()
{

  /* Some versions of memcmp are not 8-bit clean.  */
  char c0 = '\100', c1 = '\200', c2 = '\201';
  if (memcmp(&c0, &c2, 1) >= 0 || memcmp(&c1, &c2, 1) >= 0)
    return 1;

  /* The Next x86 OpenStep bug shows up only when comparing 16 bytes
     or more and with at least one buffer not starting on a 4-byte boundary.
     William Lewis provided this test program.   */
  {
    char foo[21];
    char bar[21];
    int i;
    for (i = 0; i < 4; i++)
      {
	char *a = foo + i;
	char *b = bar + i;
	strcpy (a, "--------01111111");
	strcpy (b, "--------10000000");
	if (memcmp (a, b, 16) >= 0)
	  return 1;
      }
    return 0;
  }

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_func_memcmp_working=yes
else
  ac_cv_func_memcmp_working=no
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_memcmp_working" >&5
$as_echo "$ac_cv_func_memcmp_working" >&6; }
test $ac_cv_func_memcmp_working = no && case " $LIBOBJS " in
  *" memcmp.$ac_objext "* ) ;;
  *) LIBOBJS="$LIBOBJS memcmp.$ac_objext"
 ;;
esac


# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
$as_echo_n "checking for working alloca.h... " >&6; }
if ${ac_cv_working_alloca_h+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <alloca.h>
int
main ()
{
char *p = (char *) alloca (2 * sizeof (int));
			  if (p) return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_working_alloca_h=yes
else
  ac_cv_working_alloca_h=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
$as_echo "$ac_cv_working_alloca_h" >&6; }
if test $ac_cv_working_alloca_h = yes; then

$as_echo "#define HAVE_ALLOCA_H 1" >>confdefs.h

fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
$as_echo_n "checking for alloca... " >&6; }
if ${ac_cv_func_alloca_works+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  ifdef HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
void *alloca (size_t);
#    endif
#   endif
#  endif
# endif
#endif

int
main ()
{
char *p = (char *) alloca (1);
				    if (p) return 0;
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_func_alloca_works=yes
else
  ac_cv_func_alloca_works=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
$as_echo "$ac_cv_func_alloca_works" >&6; }

if test $ac_cv_func_alloca_works = yes; then

$as_echo "#define HAVE_ALLOCA 1" >>confdefs.h

else
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
# that cause trouble.  Some versions do not even contain alloca or
# contain a buggy version.  If you still want to use their alloca,
# use ar to extract alloca.o from them instead of compiling alloca.c.

ALLOCA=\${LIBOBJDIR}alloca.$ac_objext

$as_echo "#define C_ALLOCA 1" >>confdefs.h


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
$as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
if ${ac_cv_os_cray+:} false; then :
  $as_echo_n "(cached) " >&6
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#if defined CRAY && ! defined CRAY2
webecray
#else
wenotbecray
#endif

_ACEOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  $EGREP "webecray" >/dev/null 2>&1; then :
  ac_cv_os_cray=yes
else
  ac_cv_os_cray=no
fi
rm -f conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_os_cray" >&5
$as_echo "$ac_cv_os_cray" >&6; }
if test $ac_cv_os_cray = yes; then
  for ac_func in _getb67 GETB67 getb67; do
    as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :

cat >>confdefs.h <<_ACEOF
#define CRAY_STACKSEG_END $ac_func
_ACEOF

    break
fi

  done
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
$as_echo_n "checking stack direction for C alloca... " >&6; }
if ${ac_cv_c_stack_direction+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test "$cross_compiling" = yes; then :
  ac_cv_c_stack_direction=0
else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
$ac_includes_default
int
find_stack_direction (int *addr, int depth)
{
  int dir, dummy = 0;
  if (! addr)
    addr = &dummy;
  *addr = addr < &dummy ? 1 : addr == &dummy ? 0 : -1;
  dir = depth ? find_stack_direction (addr, depth - 1) : 0;
  return dir + dummy;
}

int
main (int argc, char **argv)
{
  return find_stack_direction (0, argc + !argv + 20) < 0;
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :
  ac_cv_c_stack_direction=1
else
  ac_cv_c_stack_direction=-1
fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
$as_echo "$ac_cv_c_stack_direction" >&6; }
cat >>confdefs.h <<_ACEOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
_ACEOF


fi

for ac_func in memcpy strdup getpid kill strtod strtol finite fpclass sigsetjmp
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether sprintf is broken" >&5
$as_echo_n "checking whether sprintf is broken... " >&6; }
if ${ac_cv_broken_sprintf+:} false; then :
  $as_echo_n "(cached) " >&6
else

    if test "$cross_compiling" = yes; then :

      ac_cv_broken_sprintf=no

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

      ac_cv_broken_sprintf=no

else

      ac_cv_broken_sprintf=yes

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_broken_sprintf" >&5
$as_echo "$ac_cv_broken_sprintf" >&6; }
  if test "$ac_cv_broken_sprintf" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi

cat >>confdefs.h <<_ACEOF
#define ZEND_BROKEN_SPRINTF $ac_result
_ACEOF



for ac_func in finite isfinite isinf isnan
do :
  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
  cat >>confdefs.h <<_ACEOF
#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
_ACEOF

fi
done



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether fp_except is defined" >&5
$as_echo_n "checking whether fp_except is defined... " >&6; }
if ${ac_cv_type_fp_except+:} false; then :
  $as_echo_n "(cached) " >&6
else

    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <floatingpoint.h>

int
main ()
{

fp_except x = (fp_except) 0;

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :

     ac_cv_type_fp_except=yes

else

     ac_cv_type_fp_except=no

fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_fp_except" >&5
$as_echo "$ac_cv_type_fp_except" >&6; }
  if test "$ac_cv_type_fp_except" = "yes"; then

$as_echo "#define HAVE_FP_EXCEPT 1" >>confdefs.h

  fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for usable _FPU_SETCW" >&5
$as_echo_n "checking for usable _FPU_SETCW... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

    #include <fpu_control.h>

int
main ()
{

    fpu_control_t fpu_oldcw, fpu_cw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    _FPU_GETCW(fpu_oldcw);
    fpu_cw = (fpu_oldcw & ~_FPU_EXTENDED & ~_FPU_SINGLE) | _FPU_DOUBLE;
    _FPU_SETCW(fpu_cw);
    result = a / b;
    _FPU_SETCW(fpu_oldcw);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cfp_have__fpu_setcw=yes
else
  ac_cfp_have__fpu_setcw=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  if test "$ac_cfp_have__fpu_setcw" = "yes" ; then

$as_echo "#define HAVE__FPU_SETCW 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for usable fpsetprec" >&5
$as_echo_n "checking for usable fpsetprec... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

    #include <machine/ieeefp.h>

int
main ()
{

    fp_prec_t fpu_oldprec;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    fpu_oldprec = fpgetprec();
    fpsetprec(FP_PD);
    result = a / b;
    fpsetprec(fpu_oldprec);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cfp_have_fpsetprec=yes
else
  ac_cfp_have_fpsetprec=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  if test "$ac_cfp_have_fpsetprec" = "yes" ; then

$as_echo "#define HAVE_FPSETPREC 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for usable _controlfp" >&5
$as_echo_n "checking for usable _controlfp... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

    #include <float.h>

int
main ()
{

    unsigned int fpu_oldcw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    fpu_oldcw = _controlfp(0, 0);
    _controlfp(_PC_53, _MCW_PC);
    result = a / b;
    _controlfp(fpu_oldcw, _MCW_PC);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cfp_have__controlfp=yes
else
  ac_cfp_have__controlfp=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  if test "$ac_cfp_have__controlfp" = "yes" ; then

$as_echo "#define HAVE__CONTROLFP 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for usable _controlfp_s" >&5
$as_echo_n "checking for usable _controlfp_s... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

   #include <float.h>

int
main ()
{

    unsigned int fpu_oldcw, fpu_cw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    _controlfp_s(&fpu_cw, 0, 0);
    fpu_oldcw = fpu_cw;
    _controlfp_s(&fpu_cw, _PC_53, _MCW_PC);
    result = a / b;
    _controlfp_s(&fpu_cw, fpu_oldcw, _MCW_PC);

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cfp_have__controlfp_s=yes
else
  ac_cfp_have__controlfp_s=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  if test "$ac_cfp_have__controlfp_s" = "yes" ; then

$as_echo "#define HAVE__CONTROLFP_S 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether FPU control word can be manipulated by inline assembler" >&5
$as_echo_n "checking whether FPU control word can be manipulated by inline assembler... " >&6; }
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

    /* nothing */

int
main ()
{

    unsigned int oldcw, cw;
    volatile double result;
    double a = 2877.0;
    volatile double b = 1000000.0;

    __asm__ __volatile__ ("fnstcw %0" : "=m" (*&oldcw));
    cw = (oldcw & ~0x0 & ~0x300) | 0x200;
    __asm__ __volatile__ ("fldcw %0" : : "m" (*&cw));

    result = a / b;

    __asm__ __volatile__ ("fldcw %0" : : "m" (*&oldcw));

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cfp_have_fpu_inline_asm_x86=yes
else
  ac_cfp_have_fpu_inline_asm_x86=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
  if test "$ac_cfp_have_fpu_inline_asm_x86" = "yes" ; then

$as_echo "#define HAVE_FPU_INLINE_ASM_X86 1" >>confdefs.h

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
  fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether double cast to long preserves least significant bits" >&5
$as_echo_n "checking whether double cast to long preserves least significant bits... " >&6; }

if test "$cross_compiling" = yes; then :

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <limits.h>

int main()
{
	if (sizeof(long) == 4) {
		double d = (double) LONG_MIN * LONG_MIN + 2e9;

		if ((long) d == 2e9 && (long) -d == -2e9) {
			exit(0);
		}
	} else if (sizeof(long) == 8) {
		double correct = 18e18 - ((double) LONG_MIN * -2); /* Subtract ULONG_MAX + 1 */

		if ((long) 18e18 == correct) { /* On 64-bit, only check between LONG_MAX and ULONG_MAX */
			exit(0);
		}
	}
	exit(1);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :


$as_echo "#define ZEND_DVAL_TO_LVAL_CAST_OK 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi



for ac_header in dlfcn.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default"
if test "x$ac_cv_header_dlfcn_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_DLFCN_H 1
_ACEOF

fi

done


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether dlsym() requires a leading underscore in symbol names" >&5
$as_echo_n "checking whether dlsym() requires a leading underscore in symbol names... " >&6; }
if test "$cross_compiling" = yes; then :

else
  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 103415 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }
  else
    puts (dlerror ());

    exit (status);
}
EOF
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) >&5 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore)
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
 ;;
      x$lt_dlneed_uscore)
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define DLSYM_NEEDS_UNDERSCORE 1" >>confdefs.h

 ;;
      x$lt_dlunknown|x*)
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
 ;;
    esac
  else :
    # compilation failed

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

  fi
fi
rm -fr conftest*





# Check whether --with-zend-vm was given.
if test "${with_zend_vm+set}" = set; then :
  withval=$with_zend_vm;
  PHP_ZEND_VM=$withval

else

  PHP_ZEND_VM=CALL

fi


# Check whether --enable-maintainer-zts was given.
if test "${enable_maintainer_zts+set}" = set; then :
  enableval=$enable_maintainer_zts;
  ZEND_MAINTAINER_ZTS=$enableval

else

  ZEND_MAINTAINER_ZTS=no

fi


# Check whether --enable-inline-optimization was given.
if test "${enable_inline_optimization+set}" = set; then :
  enableval=$enable_inline_optimization;
  ZEND_INLINE_OPTIMIZATION=$enableval

else

  ZEND_INLINE_OPTIMIZATION=yes

fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking virtual machine dispatch method" >&5
$as_echo_n "checking virtual machine dispatch method... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $PHP_ZEND_VM" >&5
$as_echo "$PHP_ZEND_VM" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable thread-safety" >&5
$as_echo_n "checking whether to enable thread-safety... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ZEND_MAINTAINER_ZTS" >&5
$as_echo "$ZEND_MAINTAINER_ZTS" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable inline optimization for GCC" >&5
$as_echo_n "checking whether to enable inline optimization for GCC... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ZEND_INLINE_OPTIMIZATION" >&5
$as_echo "$ZEND_INLINE_OPTIMIZATION" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable Zend debugging" >&5
$as_echo_n "checking whether to enable Zend debugging... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ZEND_DEBUG" >&5
$as_echo "$ZEND_DEBUG" >&6; }

case $PHP_ZEND_VM in
  SWITCH)

$as_echo "#define ZEND_VM_KIND ZEND_VM_KIND_SWITCH" >>confdefs.h

    ;;
  GOTO)

$as_echo "#define ZEND_VM_KIND ZEND_VM_KIND_GOTO" >>confdefs.h

    ;;
  *)
    PHP_ZEND_VM=CALL

$as_echo "#define ZEND_VM_KIND ZEND_VM_KIND_CALL" >>confdefs.h

    ;;
esac

if test "$ZEND_DEBUG" = "yes"; then

$as_echo "#define ZEND_DEBUG 1" >>confdefs.h

  echo " $CFLAGS" | grep ' -g' >/dev/null || DEBUG_CFLAGS="-g"
  if test "$CFLAGS" = "-g -O2"; then
  	CFLAGS=-g
  fi
  test -n "$GCC" && DEBUG_CFLAGS="$DEBUG_CFLAGS -Wall"
  test -n "$GCC" && test "$USE_MAINTAINER_MODE" = "yes" && \
    DEBUG_CFLAGS="$DEBUG_CFLAGS -Wmissing-prototypes -Wstrict-prototypes -Wmissing-declarations"
else

$as_echo "#define ZEND_DEBUG 0" >>confdefs.h

fi

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"

if test "$ZEND_MAINTAINER_ZTS" = "yes"; then

$as_echo "#define ZTS 1" >>confdefs.h

  CFLAGS="$CFLAGS -DZTS"



fi


if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  INLINE_CFLAGS=`echo $ac_n "$CFLAGS $ac_c" | sed s/-O[0-9s]*//`
else
  INLINE_CFLAGS="$CFLAGS"
fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
$as_echo_n "checking for inline... " >&6; }
if ${ac_cv_c_inline+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifndef __cplusplus
typedef int foo_t;
static $ac_kw foo_t static_foo () {return 0; }
$ac_kw foo_t foo () {return 0; }
#endif

_ACEOF
if ac_fn_c_try_compile "$LINENO"; then :
  ac_cv_c_inline=$ac_kw
fi
rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  test "$ac_cv_c_inline" != no && break
done

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_inline" >&5
$as_echo "$ac_cv_c_inline" >&6; }

case $ac_cv_c_inline in
  inline | yes) ;;
  *)
    case $ac_cv_c_inline in
      no) ac_val=;;
      *) ac_val=$ac_cv_c_inline;;
    esac
    cat >>confdefs.h <<_ACEOF
#ifndef __cplusplus
#define inline $ac_val
#endif
_ACEOF
    ;;
esac




{ $as_echo "$as_me:${as_lineno-$LINENO}: checking target system is Darwin" >&5
$as_echo_n "checking target system is Darwin... " >&6; }
if echo "$target" | grep "darwin" > /dev/null; then

$as_echo "#define DARWIN 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for MM alignment and log values" >&5
$as_echo_n "checking for MM alignment and log values... " >&6; }

if test "$cross_compiling" = yes; then :

    LIBZEND_MM_ALIGN=8

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <stdio.h>

typedef union _mm_align_test {
  void *ptr;
  double dbl;
  long lng;
} mm_align_test;

#if (defined (__GNUC__) && __GNUC__ >= 2)
#define ZEND_MM_ALIGNMENT (__alignof__ (mm_align_test))
#else
#define ZEND_MM_ALIGNMENT (sizeof(mm_align_test))
#endif

int main()
{
  int i = ZEND_MM_ALIGNMENT;
  int zeros = 0;
  FILE *fp;

  while (i & ~0x1) {
    zeros++;
    i = i >> 1;
  }

  fp = fopen("conftest.zend", "w");
  fprintf(fp, "%d %d\n", ZEND_MM_ALIGNMENT, zeros);
  fclose(fp);

  exit(0);
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  LIBZEND_MM_ALIGN=`cat conftest.zend | cut -d ' ' -f 1`
  LIBZEND_MM_ALIGN_LOG2=`cat conftest.zend | cut -d ' ' -f 2`

cat >>confdefs.h <<_ACEOF
#define ZEND_MM_ALIGNMENT $LIBZEND_MM_ALIGN
_ACEOF


cat >>confdefs.h <<_ACEOF
#define ZEND_MM_ALIGNMENT_LOG2 $LIBZEND_MM_ALIGN_LOG2
_ACEOF


fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: result: done" >&5
$as_echo "done" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for memory allocation using mmap(MAP_ANON)" >&5
$as_echo_n "checking for memory allocation using mmap(MAP_ANON)... " >&6; }

if test "$cross_compiling" = yes; then :

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <stdlib.h>
#include <stdio.h>
#ifndef MAP_ANON
# ifdef MAP_ANONYMOUS
#  define MAP_ANON MAP_ANONYMOUS
# endif
#endif
#ifndef MREMAP_MAYMOVE
# define MREMAP_MAYMOVE 0
#endif
#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

#define SEG_SIZE (256*1024)

int main()
{
	void *seg = mmap(NULL, SEG_SIZE, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANON, -1, 0);
	if (seg == MAP_FAILED) {
		return 1;
	}
	if (munmap(seg, SEG_SIZE) != 0) {
		return 2;
	}
	return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :


$as_echo "#define HAVE_MEM_MMAP_ANON 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for memory allocation using mmap(\"/dev/zero\")" >&5
$as_echo_n "checking for memory allocation using mmap(\"/dev/zero\")... " >&6; }

if test "$cross_compiling" = yes; then :

    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <stdlib.h>
#include <stdio.h>
#ifndef MAP_ANON
# ifdef MAP_ANONYMOUS
#  define MAP_ANON MAP_ANONYMOUS
# endif
#endif
#ifndef MREMAP_MAYMOVE
# define MREMAP_MAYMOVE 0
#endif
#ifndef MAP_FAILED
# define MAP_FAILED ((void*)-1)
#endif

#define SEG_SIZE (256*1024)

int main()
{
	int fd;
	void *seg;

	fd = open("/dev/zero", O_RDWR, S_IRUSR | S_IWUSR);
	if (fd < 0) {
		return 1;
	}
	seg = mmap(NULL, SEG_SIZE, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);
	if (seg == MAP_FAILED) {
		return 2;
	}
	if (munmap(seg, SEG_SIZE) != 0) {
		return 3;
	}
	if (close(fd) != 0) {
		return 4;
	}
	return 0;
}

_ACEOF
if ac_fn_c_try_run "$LINENO"; then :


$as_echo "#define HAVE_MEM_MMAP_ZERO 1" >>confdefs.h

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

else

  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi


for ac_func in mremap
do :
  ac_fn_c_check_func "$LINENO" "mremap" "ac_cv_func_mremap"
if test "x$ac_cv_func_mremap" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_MREMAP 1
_ACEOF

fi
done



# Check whether --enable-zend-signals was given.
if test "${enable_zend_signals+set}" = set; then :
  enableval=$enable_zend_signals;
  ZEND_SIGNALS=$enableval

else

  ZEND_SIGNALS=no

fi


ac_fn_c_check_func "$LINENO" "sigaction" "ac_cv_func_sigaction"
if test "x$ac_cv_func_sigaction" = xyes; then :


$as_echo "#define HAVE_SIGACTION 1" >>confdefs.h


else

	ZEND_SIGNALS=no

fi

if test "$ZEND_SIGNALS" = "yes"; then

$as_echo "#define ZEND_SIGNALS 1" >>confdefs.h

	CFLAGS="$CFLAGS -DZEND_SIGNALS"
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable zend signal handling" >&5
$as_echo_n "checking whether to enable zend signal handling... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ZEND_SIGNALS" >&5
$as_echo "$ZEND_SIGNALS" >&6; }



if test "$ZEND_MAINTAINER_ZTS" = "yes"; then

$as_echo "#define ZTS 1" >>confdefs.h

  PHP_THREAD_SAFETY=yes
else
  PHP_THREAD_SAFETY=no
fi

INCLUDES="$INCLUDES -I\$(top_builddir)/TSRM"
INCLUDES="$INCLUDES -I\$(top_builddir)/Zend"

if test "$abs_srcdir" != "$abs_builddir"; then
  INCLUDES="$INCLUDES -I\$(top_srcdir)/main -I\$(top_srcdir)/Zend"
  INCLUDES="$INCLUDES -I\$(top_srcdir)/TSRM -I\$(top_builddir)/"
fi

ZEND_EXTRA_LIBS="$LIBS"
unset LIBS LDFLAGS


# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Configuring TSRM${T_ME}" >&5
$as_echo "${T_MD}Configuring TSRM${T_ME}" >&6; }




for ac_header in stdarg.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "stdarg.h" "ac_cv_header_stdarg_h" "$ac_includes_default"
if test "x$ac_cv_header_stdarg_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_STDARG_H 1
_ACEOF

fi

done


for ac_func in sigprocmask
do :
  ac_fn_c_check_func "$LINENO" "sigprocmask" "ac_cv_func_sigprocmask"
if test "x$ac_cv_func_sigprocmask" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_SIGPROCMASK 1
_ACEOF

fi
done



if test "$PHP_THREAD_SAFETY" = "yes"; then




# Check whether --with-tsrm-pth was given.
if test "${with_tsrm_pth+set}" = set; then :
  withval=$with_tsrm_pth;
  TSRM_PTH=$withval

else

  TSRM_PTH=no

fi



# Check whether --with-tsrm-st was given.
if test "${with_tsrm_st+set}" = set; then :
  withval=$with_tsrm_st;
  TSRM_ST=$withval

else

  TSRM_ST=no

fi



# Check whether --with-tsrm-pthreads was given.
if test "${with_tsrm_pthreads+set}" = set; then :
  withval=$with_tsrm_pthreads;
  TSRM_PTHREADS=$withval

else

  TSRM_PTHREADS=yes

fi


test "$TSRM_PTH" = "yes" && TSRM_PTH=pth-config

if test "$TSRM_PTH" != "no"; then


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU Pth" >&5
$as_echo_n "checking for GNU Pth... " >&6; }
PTH_PREFIX="`$TSRM_PTH --prefix`"
if test -z "$PTH_PREFIX"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: Please check your Pth installation" >&5
$as_echo "Please check your Pth installation" >&6; }
fi

CPPFLAGS="$CPPFLAGS `$TSRM_PTH --cflags`"
LDFLAGS="$LDFLAGS `$TSRM_PTH --ldflags`"
LIBS="$LIBS `$TSRM_PTH --libs`"


$as_echo "#define GNUPTH 1" >>confdefs.h

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes - installed in $PTH_PREFIX" >&5
$as_echo "yes - installed in $PTH_PREFIX" >&6; }


elif test "$TSRM_ST" != "no"; then

  if test -r "$TSRM_ST/include/st.h"; then
    CPPFLAGS="$CPPFLAGS -I$TSRM_ST/include"
    LDFLAGS="$LDFLAGS -L$TSRM_ST/lib"
  elif test -r "$TSRM_ST/st.h"; then
    CPPFLAGS="$CPPFLAGS -I$TSRM_ST"
    LDFLAGS="$LDFLAGS -L$TSRM_ST"
  fi
  for ac_header in st.h
do :
  ac_fn_c_check_header_mongrel "$LINENO" "st.h" "ac_cv_header_st_h" "$ac_includes_default"
if test "x$ac_cv_header_st_h" = xyes; then :
  cat >>confdefs.h <<_ACEOF
#define HAVE_ST_H 1
_ACEOF

else

    as_fn_error $? "Sorry, I was unable to locate the State Threads header file.  Please specify the prefix using --with-tsrm-st=/prefix" "$LINENO" 5

fi

done

  LIBS="$LIBS -lst"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SGI's State Threads" >&5
$as_echo_n "checking for SGI's State Threads... " >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }

$as_echo "#define TSRM_ST 1" >>confdefs.h


elif test "$TSRM_PTHREADS" != "no"; then




if test "$beos_threads" = "1"; then
  pthreads_working="yes"
  ac_cv_pthreads_cflags=""
else
  save_CFLAGS=$CFLAGS
  save_LIBS=$LIBS

if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi


if test "$cross_compiling" = yes; then :

    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  pthreads_working=yes

else

  pthreads_working=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

  LIBS=$save_LIBS
  CFLAGS=$save_CFLAGS

  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthreads_cflags" >&5
$as_echo_n "checking for pthreads_cflags... " >&6; }
if ${ac_cv_pthreads_cflags+:} false; then :
  $as_echo_n "(cached) " >&6
else

  ac_cv_pthreads_cflags=
  if test "$pthreads_working" != "yes"; then
    for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do
      ac_save=$CFLAGS
      CFLAGS="$CFLAGS $flag"

if test "$cross_compiling" = yes; then :

    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  pthreads_working=yes

else

  pthreads_working=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

      CFLAGS=$ac_save
      if test "$pthreads_working" = "yes"; then
        ac_cv_pthreads_cflags=$flag
        break
      fi
    done
  fi
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_pthreads_cflags" >&5
$as_echo "$ac_cv_pthreads_cflags" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthreads_lib" >&5
$as_echo_n "checking for pthreads_lib... " >&6; }
if ${ac_cv_pthreads_lib+:} false; then :
  $as_echo_n "(cached) " >&6
else

ac_cv_pthreads_lib=
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save=$LIBS
    LIBS="$LIBS -l$lib"

if test "$cross_compiling" = yes; then :

    pthreads_working=no
  case $host_alias in
  *netware*)
    pthreads_working=yes
  esac


else
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
}
_ACEOF
if ac_fn_c_try_run "$LINENO"; then :

  pthreads_working=yes

else

  pthreads_working=no

fi
rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
  conftest.$ac_objext conftest.beam conftest.$ac_ext
fi

    LIBS=$ac_save
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib=$lib
      break
    fi
  done
fi

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_pthreads_lib" >&5
$as_echo "$ac_cv_pthreads_lib" >&6; }

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX-Threads found"
else
  threads_result="POSIX-Threads not found"
fi


if test "$beos_threads" = "1"; then

$as_echo "#define BETHREADS 1" >>confdefs.h

else
  if test "$pthreads_working" != "yes"; then
    as_fn_error $? "Your system seems to lack POSIX threads." "$LINENO" 5
  fi


$as_echo "#define PTHREADS 1" >>confdefs.h


  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for POSIX threads" >&5
$as_echo_n "checking for POSIX threads... " >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
fi

fi


fi

EXTRA_LDFLAGS="$EXTRA_LDFLAGS $LDFLAGS"
EXTRA_LDFLAGS_PROGRAM="$EXTRA_LDFLAGS_PROGRAM $LDFLAGS"
EXTRA_LIBS="$EXTRA_LIBS $LIBS"
unset LIBS LDFLAGS

test "$prefix" = "NONE" && prefix=/usr/local
test "$exec_prefix" = "NONE" && exec_prefix='${prefix}'
test "$program_prefix" = "NONE" && program_prefix=
test "$program_suffix" = "NONE" && program_suffix=

case $libdir in
  '${exec_prefix}/lib')
    libdir=$libdir/php
    ;;
esac
case $datadir in
  '${prefix}/share')
    datadir=$datadir/php
    ;;
esac

phplibdir=`pwd`/modules
$php_shtool mkdir -p $phplibdir
phptempdir=`pwd`/libs

old_exec_prefix=$exec_prefix
old_libdir=$libdir
old_datadir=$datadir
exec_prefix=`eval echo $exec_prefix`
libdir=`eval echo $libdir`
datadir=`eval echo $datadir`


ZEND_MODULE_API_NO=`$EGREP '#define ZEND_MODULE_API_NO ' $srcdir/Zend/zend_modules.h|$SED 's/#define ZEND_MODULE_API_NO //'`

if test -z "$EXTENSION_DIR"; then
  extbasedir=$ZEND_MODULE_API_NO
  if test "$oldstyleextdir" = "yes"; then
    if test "$PHP_DEBUG" = "1"; then
      part1=debug
    else
      part1=no-debug
    fi
    if test "$enable_maintainer_zts" = "yes"; then
      part2=zts
    else
      part2=non-zts
    fi
    extbasedir=$part1-$part2-$extbasedir
    EXTENSION_DIR=$libdir/extensions/$extbasedir
  else
    if test "$enable_maintainer_zts" = "yes"; then
      extbasedir=$extbasedir-zts
    fi

    if test "$PHP_DEBUG" = "1"; then
      extbasedir=$extbasedir-debug
    fi
    EXTENSION_DIR=$libdir/$extbasedir
  fi
fi

case $PHP_LAYOUT in
  GNU)
    datarootdir=$prefix/share
    ;;
  *)
    datarootdir=$prefix/php
    ;;
esac

EXPANDED_PEAR_INSTALLDIR=`eval echo $PEAR_INSTALLDIR`
EXPANDED_EXTENSION_DIR=`eval echo $EXTENSION_DIR`
EXPANDED_LOCALSTATEDIR=`eval echo $localstatedir`
EXPANDED_BINDIR=`eval echo $bindir`
EXPANDED_SBINDIR=`eval echo $sbindir`
EXPANDED_MANDIR=`eval echo $mandir`
EXPANDED_LIBDIR=$libdir
EXPANDED_SYSCONFDIR=`eval echo $sysconfdir`
EXPANDED_DATADIR=$datadir
EXPANDED_PHP_CONFIG_FILE_PATH=`eval echo "$PHP_CONFIG_FILE_PATH"`
EXPANDED_PHP_CONFIG_FILE_SCAN_DIR=`eval echo "$PHP_CONFIG_FILE_SCAN_DIR"`
INCLUDE_PATH=.:$EXPANDED_PEAR_INSTALLDIR

exec_prefix=$old_exec_prefix
libdir=$old_libdir
datadir=$old_datadir














if test -n "$php_ldflags_add_usr_lib"; then
  PHP_RPATHS="$PHP_RPATHS /usr/lib"
fi


  OLD_RPATHS=$PHP_RPATHS
  unset PHP_RPATHS

  for i in $OLD_RPATHS; do
    PHP_LDFLAGS="$PHP_LDFLAGS -L$i"
    PHP_RPATHS="$PHP_RPATHS -R $i"
    NATIVE_RPATHS="$NATIVE_RPATHS $ld_runpath_switch$i"
  done

  if test "$PHP_RPATH" = "no"; then
    unset PHP_RPATHS
    unset NATIVE_RPATHS
  fi


if test -z "$php_ldflags_add_usr_lib"; then

  unset ac_new_flags
  for i in $PHP_LDFLAGS; do
    case $i in
    -L/usr/$PHP_LIBDIR|-L/usr/$PHP_LIBDIR/) ;;
    *) ac_new_flags="$ac_new_flags $i" ;;
    esac
  done
  PHP_LDFLAGS=$ac_new_flags


  unset ac_new_flags
  for i in $LDFLAGS; do
    case $i in
    -L/usr/$PHP_LIBDIR|-L/usr/$PHP_LIBDIR/) ;;
    *) ac_new_flags="$ac_new_flags $i" ;;
    esac
  done
  LDFLAGS=$ac_new_flags

fi

EXTRA_LDFLAGS="$EXTRA_LDFLAGS $PHP_LDFLAGS"
EXTRA_LDFLAGS_PROGRAM="$EXTRA_LDFLAGS_PROGRAM $PHP_LDFLAGS"

PHP_BUILD_DATE=`date '+%Y-%m-%d'`

cat >>confdefs.h <<_ACEOF
#define PHP_BUILD_DATE "$PHP_BUILD_DATE"
_ACEOF


case $host_alias in
*netware*)
  PHP_OS="NetWare"
  PHP_UNAME="NetWare"

cat >>confdefs.h <<_ACEOF
#define PHP_OS "$PHP_OS"
_ACEOF


cat >>confdefs.h <<_ACEOF
#define PHP_UNAME "$PHP_UNAME"
_ACEOF

  ;;
*)
  PHP_UNAME=`uname -a | xargs`

cat >>confdefs.h <<_ACEOF
#define PHP_UNAME "$PHP_UNAME"
_ACEOF

  PHP_OS=`uname | xargs`

cat >>confdefs.h <<_ACEOF
#define PHP_OS "$PHP_OS"
_ACEOF

  ;;
esac



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_INSTALLED_SAPIS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_EXECUTABLE"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI_OBJS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_BINARY_OBJS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_GLOBAL_OBJS"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_BINARIES"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MODULES"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_ZEND_EX"



  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_LIBS"




  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_builddir"





  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_srcdir"





  PHP_VAR_SUBST="$PHP_VAR_SUBST php_abs_top_builddir"





  PHP_VAR_SUBST="$PHP_VAR_SUBST php_abs_top_srcdir"





  PHP_VAR_SUBST="$PHP_VAR_SUBST bindir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST sbindir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST exec_prefix"



  PHP_VAR_SUBST="$PHP_VAR_SUBST program_prefix"





  PHP_VAR_SUBST="$PHP_VAR_SUBST program_suffix"




  PHP_VAR_SUBST="$PHP_VAR_SUBST includedir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST libdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST mandir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST phplibdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST phptempdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST prefix"


  PHP_VAR_SUBST="$PHP_VAR_SUBST localstatedir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST datadir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST datarootdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST sysconfdir"



  PHP_VAR_SUBST="$PHP_VAR_SUBST EXEEXT"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CC"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS_CLEAN"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPPFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXX"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS_CLEAN"



  PHP_VAR_SUBST="$PHP_VAR_SUBST DEBUG_CFLAGS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTENSION_DIR"





  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LDFLAGS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LDFLAGS_PROGRAM"





  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LIBS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST ZEND_EXTRA_LIBS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDES"





  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_INCLUDES"





  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDE_PATH"





  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_IT"




  PHP_VAR_SUBST="$PHP_VAR_SUBST LFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LIBTOOL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LN_S"



  PHP_VAR_SUBST="$PHP_VAR_SUBST NATIVE_RPATHS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST PEAR_INSTALLDIR"




  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_BUILD_DATE"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LDFLAGS"





  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LIBS"




  PHP_VAR_SUBST="$PHP_VAR_SUBST OVERALL_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_RPATHS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_VERSION"





  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_VERSION_ID"




  PHP_VAR_SUBST="$PHP_VAR_SUBST SHELL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHARED_LIBTOOL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST WARNING_LEVEL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FRAMEWORKS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FRAMEWORKPATH"


  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_HEADERS"


old_CC=$CC

if test "$PHP_THREAD_SAFETY" = "yes" && test -n "$ac_cv_pthreads_cflags"; then
  CXXFLAGS="$CXXFLAGS $ac_cv_pthreads_cflags"
  INLINE_CFLAGS="$INLINE_CFLAGS $ac_cv_pthreads_cflags"
  cat >meta_ccld<<EOF
#! /bin/sh
exec $CC $ac_cv_pthreads_cflags \$@
EOF
  CC="$abs_builddir/meta_ccld"
  chmod +x meta_ccld
fi

if test "$PHP_THREAD_SAFETY" = "yes" && test "$PHP_MYSQL" = "yes"; then
  CPPFLAGS="$CPPFLAGS -DTHREAD=1"
fi

ZEND_EXT_TYPE="zend_extension"

  PHP_VAR_SUBST="$PHP_VAR_SUBST ZEND_EXT_TYPE"




# Check whether --enable- was given.
if test "${enable_+set}" = set; then :
  enableval=$enable_;
fi



  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Configuring libtool${T_ME}" >&5
$as_echo "${T_MD}Configuring libtool${T_ME}" >&6; }


LDFLAGS="$LDFLAGS $PHP_AIX_LDFLAGS"

case $host_alias in
*darwin9*|*darwin10*)
  ac_cv_exeext=
  ;;
esac


# Check whether --enable-shared was given.
if test "${enable_shared+set}" = set; then :
  enableval=$enable_shared;     p=${PACKAGE-default}
    case $enableval in
    yes) enable_shared=yes ;;
    no) enable_shared=no ;;
    *)
      enable_shared=no
      # Look at the argument we got.  We use all the common list separators.
      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
      for pkg in $enableval; do
	IFS="$lt_save_ifs"
	if test "X$pkg" = "X$p"; then
	  enable_shared=yes
	fi
      done
      IFS="$lt_save_ifs"
      ;;
    esac
else
  enable_shared=yes
fi


# Check whether --enable-static was given.
if test "${enable_static+set}" = set; then :
  enableval=$enable_static;     p=${PACKAGE-default}
    case $enableval in
    yes) enable_static=yes ;;
    no) enable_static=no ;;
    *)
     enable_static=no
      # Look at the argument we got.  We use all the common list separators.
      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
      for pkg in $enableval; do
	IFS="$lt_save_ifs"
	if test "X$pkg" = "X$p"; then
	  enable_static=yes
	fi
      done
      IFS="$lt_save_ifs"
      ;;
    esac
else
  enable_static=yes
fi


# Check whether --enable-fast-install was given.
if test "${enable_fast_install+set}" = set; then :
  enableval=$enable_fast_install;     p=${PACKAGE-default}
    case $enableval in
    yes) enable_fast_install=yes ;;
    no) enable_fast_install=no ;;
    *)
      enable_fast_install=no
      # Look at the argument we got.  We use all the common list separators.
      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
      for pkg in $enableval; do
	IFS="$lt_save_ifs"
	if test "X$pkg" = "X$p"; then
	  enable_fast_install=yes
	fi
      done
      IFS="$lt_save_ifs"
      ;;
    esac
else
  enable_fast_install=yes
fi



# Check whether --with-gnu-ld was given.
if test "${with_gnu_ld+set}" = set; then :
  withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
else
  with_gnu_ld=no
fi

ac_prog=ld
if test "$GCC" = yes; then
  # Check if gcc -print-prog-name=ld gives a path.
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by $CC" >&5
$as_echo_n "checking for ld used by $CC... " >&6; }
  case $host in
  *-*-mingw*)
    # gcc leaves a trailing carriage return which upsets mingw
    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
  *)
    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;
  esac
  case $ac_prog in
    # Accept absolute paths.
    [\\/]* | ?:[\\/]*)
      re_direlt='/[^/][^/]*/\.\./'
      # Canonicalize the pathname of ld
      ac_prog=`echo $ac_prog| $SED 's%\\\\%/%g'`
      while echo $ac_prog | grep "$re_direlt" > /dev/null 2>&1; do
	ac_prog=`echo $ac_prog| $SED "s%$re_direlt%/%"`
      done
      test -z "$LD" && LD="$ac_prog"
      ;;
  "")
    # If it fails, then pretend we aren't using GCC.
    ac_prog=ld
    ;;
  *)
    # If it is relative, then search for the first ld in PATH.
    with_gnu_ld=unknown
    ;;
  esac
elif test "$with_gnu_ld" = yes; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
$as_echo_n "checking for GNU ld... " >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
$as_echo_n "checking for non-GNU ld... " >&6; }
fi
if ${lt_cv_path_LD+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -z "$LD"; then
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for ac_dir in $PATH; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
      lt_cv_path_LD="$ac_dir/$ac_prog"
      # Check to see if the program is GNU ld.  I'd rather use --version,
      # but apparently some variants of GNU ld only accept -v.
      # Break only if it was the GNU/non-GNU ld that we prefer.
      case `"$lt_cv_path_LD" -v 2>&1 </dev/null` in
      *GNU* | *'with BFD'*)
	test "$with_gnu_ld" != no && break
	;;
      *)
	test "$with_gnu_ld" != yes && break
	;;
      esac
    fi
  done
  IFS="$lt_save_ifs"
else
  lt_cv_path_LD="$LD" # Let the user override the test with a path.
fi
fi

LD="$lt_cv_path_LD"
if test -n "$LD"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
$as_echo "$LD" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi
test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
$as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
if ${lt_cv_prog_gnu_ld+:} false; then :
  $as_echo_n "(cached) " >&6
else
  # I'd rather use --version here, but apparently some GNU lds only accept -v.
case `$LD -v 2>&1 </dev/null` in
*GNU* | *'with BFD'*)
  lt_cv_prog_gnu_ld=yes
  ;;
*)
  lt_cv_prog_gnu_ld=no
  ;;
esac
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_gnu_ld" >&5
$as_echo "$lt_cv_prog_gnu_ld" >&6; }
with_gnu_ld=$lt_cv_prog_gnu_ld


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $LD option to reload object files" >&5
$as_echo_n "checking for $LD option to reload object files... " >&6; }
if ${lt_cv_ld_reload_flag+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_ld_reload_flag='-r'
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_reload_flag" >&5
$as_echo "$lt_cv_ld_reload_flag" >&6; }
reload_flag=$lt_cv_ld_reload_flag
case $reload_flag in
"" | " "*) ;;
*) reload_flag=" $reload_flag" ;;
esac
reload_cmds='$LD$reload_flag -o $output$reload_objs'
case $host_os in
  darwin*)
    if test "$GCC" = yes; then
      reload_cmds='$LTCC $LTCFLAGS -nostdlib ${wl}-r -o $output$reload_objs'
    else
      reload_cmds='$LD$reload_flag -o $output$reload_objs'
    fi
    ;;
esac

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for BSD-compatible nm" >&5
$as_echo_n "checking for BSD-compatible nm... " >&6; }
if ${lt_cv_path_NM+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$NM"; then
  # Let the user override the test.
  lt_cv_path_NM="$NM"
else
  lt_nm_to_check="${ac_tool_prefix}nm"
  if test -n "$ac_tool_prefix" && test "$build" = "$host"; then
    lt_nm_to_check="$lt_nm_to_check nm"
  fi
  for lt_tmp_nm in $lt_nm_to_check; do
    lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
    for ac_dir in $PATH /usr/ccs/bin/elf /usr/ccs/bin /usr/ucb /bin; do
      IFS="$lt_save_ifs"
      test -z "$ac_dir" && ac_dir=.
      tmp_nm="$ac_dir/$lt_tmp_nm"
      if test -f "$tmp_nm" || test -f "$tmp_nm$ac_exeext" ; then
	# Check to see if the nm accepts a BSD-compat flag.
	# Adding the `sed 1q' prevents false positives on HP-UX, which says:
	#   nm: unknown option "B" ignored
	# Tru64's nm complains that /dev/null is an invalid object file
	case `"$tmp_nm" -B /dev/null 2>&1 | sed '1q'` in
	*/dev/null* | *'Invalid file or object type'*)
	  lt_cv_path_NM="$tmp_nm -B"
	  break
	  ;;
	*)
	  case `"$tmp_nm" -p /dev/null 2>&1 | sed '1q'` in
	  */dev/null*)
	    lt_cv_path_NM="$tmp_nm -p"
	    break
	    ;;
	  *)
	    lt_cv_path_NM=${lt_cv_path_NM="$tmp_nm"} # keep the first match, but
	    continue # so that we can try to find one that supports BSD flags
	    ;;
	  esac
	  ;;
	esac
      fi
    done
    IFS="$lt_save_ifs"
  done
  test -z "$lt_cv_path_NM" && lt_cv_path_NM=nm
fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_path_NM" >&5
$as_echo "$lt_cv_path_NM" >&6; }
NM="$lt_cv_path_NM"

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to recognize dependent libraries" >&5
$as_echo_n "checking how to recognize dependent libraries... " >&6; }
if ${lt_cv_deplibs_check_method+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_file_magic_cmd='$MAGIC_CMD'
lt_cv_file_magic_test_file=
lt_cv_deplibs_check_method='unknown'
# Need to set the preceding variable on all platforms that support
# interlibrary dependencies.
# 'none' -- dependencies not supported.
# `unknown' -- same as none, but documents that we really don't know.
# 'pass_all' -- all dependencies passed with no checks.
# 'test_compile' -- check by making test program.
# 'file_magic [[regex]]' -- check by looking for files in library path
# which responds to the $file_magic_cmd with a given extended regex.
# If you have `file' or equivalent on your system and you're not sure
# whether `pass_all' will *always* work, you probably want this one.

case $host_os in
aix[4-9]*)
  lt_cv_deplibs_check_method=pass_all
  ;;

beos*)
  lt_cv_deplibs_check_method=pass_all
  ;;

bsdi[45]*)
  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib)'
  lt_cv_file_magic_cmd='/usr/bin/file -L'
  lt_cv_file_magic_test_file=/shlib/libc.so
  ;;

cygwin*)
  # func_win32_libid is a shell function defined in ltmain.sh
  lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
  lt_cv_file_magic_cmd='func_win32_libid'
  ;;

mingw* | pw32*)
  # Base MSYS/MinGW do not provide the 'file' command needed by
  # func_win32_libid shell function, so use a weaker test based on 'objdump',
  # unless we find 'file', for example because we are cross-compiling.
  if ( file / ) >/dev/null 2>&1; then
    lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
    lt_cv_file_magic_cmd='func_win32_libid'
  else
    lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
    lt_cv_file_magic_cmd='$OBJDUMP -f'
  fi
  ;;

darwin* | rhapsody*)
  lt_cv_deplibs_check_method=pass_all
  ;;

freebsd* | dragonfly*)
  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
    case $host_cpu in
    i*86 )
      # Not sure whether the presence of OpenBSD here was a mistake.
      # Let's accept both of them until this is cleared up.
      lt_cv_deplibs_check_method='file_magic (FreeBSD|OpenBSD|DragonFly)/i[3-9]86 (compact )?demand paged shared library'
      lt_cv_file_magic_cmd=/usr/bin/file
      lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
      ;;
    esac
  else
    lt_cv_deplibs_check_method=pass_all
  fi
  ;;

gnu*)
  lt_cv_deplibs_check_method=pass_all
  ;;

hpux10.20* | hpux11*)
  lt_cv_file_magic_cmd=/usr/bin/file
  case $host_cpu in
  ia64*)
    lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - IA64'
    lt_cv_file_magic_test_file=/usr/lib/hpux32/libc.so
    ;;
  hppa*64*)
    lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - PA-RISC [0-9].[0-9]'
    lt_cv_file_magic_test_file=/usr/lib/pa20_64/libc.sl
    ;;
  *)
    lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|PA-RISC[0-9].[0-9]) shared library'
    lt_cv_file_magic_test_file=/usr/lib/libc.sl
    ;;
  esac
  ;;

interix[3-9]*)
  # PIC code is broken on Interix 3.x, that's why |\.a not |_pic\.a here
  lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so|\.a)$'
  ;;

irix5* | irix6* | nonstopux*)
  case $LD in
  *-32|*"-32 ") libmagic=32-bit;;
  *-n32|*"-n32 ") libmagic=N32;;
  *-64|*"-64 ") libmagic=64-bit;;
  *) libmagic=never-match;;
  esac
  lt_cv_deplibs_check_method=pass_all
  ;;

# This must be Linux ELF.
linux* | k*bsd*-gnu)
  lt_cv_deplibs_check_method=pass_all
  ;;

netbsd*)
  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|_pic\.a)$'
  else
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so|_pic\.a)$'
  fi
  ;;

newos6*)
  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (executable|dynamic lib)'
  lt_cv_file_magic_cmd=/usr/bin/file
  lt_cv_file_magic_test_file=/usr/lib/libnls.so
  ;;

nto-qnx*)
  lt_cv_deplibs_check_method=unknown
  ;;

openbsd*)
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|\.so|_pic\.a)$'
  else
    lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so\.[0-9]+\.[0-9]+|_pic\.a)$'
  fi
  ;;

osf3* | osf4* | osf5*)
  lt_cv_deplibs_check_method=pass_all
  ;;

rdos*)
  lt_cv_deplibs_check_method=pass_all
  ;;

solaris*)
  lt_cv_deplibs_check_method=pass_all
  ;;

sysv4 | sysv4.3*)
  case $host_vendor in
  motorola)
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib) M[0-9][0-9]* Version [0-9]'
    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`
    ;;
  ncr)
    lt_cv_deplibs_check_method=pass_all
    ;;
  sequent)
    lt_cv_file_magic_cmd='/bin/file'
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )'
    ;;
  sni)
    lt_cv_file_magic_cmd='/bin/file'
    lt_cv_deplibs_check_method="file_magic ELF [0-9][0-9]*-bit [LM]SB dynamic lib"
    lt_cv_file_magic_test_file=/lib/libc.so
    ;;
  siemens)
    lt_cv_deplibs_check_method=pass_all
    ;;
  pc)
    lt_cv_deplibs_check_method=pass_all
    ;;
  esac
  ;;

sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
  lt_cv_deplibs_check_method=pass_all
  ;;
esac

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_deplibs_check_method" >&5
$as_echo "$lt_cv_deplibs_check_method" >&6; }
file_magic_cmd=$lt_cv_file_magic_cmd
deplibs_check_method=$lt_cv_deplibs_check_method
test -z "$deplibs_check_method" && deplibs_check_method=unknown




# If no C compiler was specified, use CC.
LTCC=${LTCC-"$CC"}

# If no C compiler flags were specified, use CFLAGS.
LTCFLAGS=${LTCFLAGS-"$CFLAGS"}

# Allow CC to be a program name with arguments.
compiler=$CC

#AC_ARG_ENABLE([libtool-lock],
#[  --disable-libtool-lock  avoid locking (might break parallel builds)])
#test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes

# Some flags need to be propagated to the compiler or linker for good
# libtool support.
case $host in
ia64-*-hpux*)
  # Find out which ABI we are using.
  echo 'int i;' > conftest.$ac_ext
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then
    case `/usr/bin/file conftest.$ac_objext` in
    *ELF-32*)
      HPUX_IA64_MODE="32"
      ;;
    *ELF-64*)
      HPUX_IA64_MODE="64"
      ;;
    esac
  fi
  rm -rf conftest*
  ;;
*-*-irix6*)
  # Find out which ABI we are using.
  echo '#line 105327 "configure"' > conftest.$ac_ext
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then
   if test "$lt_cv_prog_gnu_ld" = yes; then
    case `/usr/bin/file conftest.$ac_objext` in
    *32-bit*)
      LD="${LD-ld} -melf32bsmip"
      ;;
    *N32*)
      LD="${LD-ld} -melf32bmipn32"
      ;;
    *64-bit*)
      LD="${LD-ld} -melf64bmip"
      ;;
    esac
   else
    case `/usr/bin/file conftest.$ac_objext` in
    *32-bit*)
      LD="${LD-ld} -32"
      ;;
    *N32*)
      LD="${LD-ld} -n32"
      ;;
    *64-bit*)
      LD="${LD-ld} -64"
      ;;
    esac
   fi
  fi
  rm -rf conftest*
  ;;

x86_64-*kfreebsd*-gnu|x86_64-*linux*|powerpc*-*linux*| \
s390*-*linux*|sparc*-*linux*)
  # Find out which ABI we are using.
  echo 'int i;' > conftest.$ac_ext
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then
    case `/usr/bin/file conftest.o` in
    *32-bit*)
      case $host in
        x86_64-*kfreebsd*-gnu)
          LD="${LD-ld} -m elf_i386_fbsd"
          ;;
        x86_64-*linux*)
          LD="${LD-ld} -m elf_i386"
          ;;
        powerpc64le-*linux*)
          LD="${LD-ld} -m elf32lppclinux"
          ;;
        powerpc64-*linux*)
          LD="${LD-ld} -m elf32ppclinux"
          ;;
        s390x-*linux*)
          LD="${LD-ld} -m elf_s390"
          ;;
        sparc64-*linux*)
          LD="${LD-ld} -m elf32_sparc"
          ;;
      esac
      ;;
    *64-bit*)
      case $host in
        x86_64-*kfreebsd*-gnu)
          LD="${LD-ld} -m elf_x86_64_fbsd"
          ;;
        x86_64-*linux*)
          LD="${LD-ld} -m elf_x86_64"
          ;;
        powerpcle-*linux*)
          LD="${LD-ld} -m elf64lppc"
          ;;
        powerpc-*linux*)
          LD="${LD-ld} -m elf64ppc"
          ;;
        s390*-*linux*)
          LD="${LD-ld} -m elf64_s390"
          ;;
        sparc*-*linux*)
          LD="${LD-ld} -m elf64_sparc"
          ;;
      esac
      ;;
    esac
  fi
  rm -rf conftest*
  ;;

*-*-sco3.2v5*)
  # On SCO OpenServer 5, we need -belf to get full-featured binaries.
  SAVE_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -belf"
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler needs -belf" >&5
$as_echo_n "checking whether the C compiler needs -belf... " >&6; }
if ${lt_cv_cc_needs_belf+:} false; then :
  $as_echo_n "(cached) " >&6
else

     ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

int
main ()
{

  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  lt_cv_cc_needs_belf=yes
else
  lt_cv_cc_needs_belf=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
     ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_cc_needs_belf" >&5
$as_echo "$lt_cv_cc_needs_belf" >&6; }
  if test x"$lt_cv_cc_needs_belf" != x"yes"; then
    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
    CFLAGS="$SAVE_CFLAGS"
  fi
  ;;
sparc*-*solaris*)
  # Find out which ABI we are using.
  echo 'int i;' > conftest.$ac_ext
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then
    case `/usr/bin/file conftest.o` in
    *64-bit*)
      case $lt_cv_prog_gnu_ld in
      yes*) LD="${LD-ld} -m elf64_sparc" ;;
      *)
        if ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then
	  LD="${LD-ld} -64"
	fi
	;;
      esac
      ;;
    esac
  fi
  rm -rf conftest*
  ;;


esac

need_locks="$enable_libtool_lock"




if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
    ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
    (test "X$CXX" != "Xg++"))) ; then
  ac_ext=cpp
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C++ preprocessor" >&5
$as_echo_n "checking how to run the C++ preprocessor... " >&6; }
if test -z "$CXXCPP"; then
  if ${ac_cv_prog_CXXCPP+:} false; then :
  $as_echo_n "(cached) " >&6
else
      # Double quotes because CXXCPP needs to be expanded
    for CXXCPP in "$CXX -E" "/lib/cpp"
    do
      ac_preproc_ok=false
for ac_cxx_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :
  break
fi

    done
    ac_cv_prog_CXXCPP=$CXXCPP

fi
  CXXCPP=$ac_cv_prog_CXXCPP
else
  ac_cv_prog_CXXCPP=$CXXCPP
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CXXCPP" >&5
$as_echo "$CXXCPP" >&6; }
ac_preproc_ok=false
for ac_cxx_preproc_warn_flag in '' yes
do
  # Use a header file that comes with gcc, so configuring glibc
  # with a fresh cross-compiler works.
  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
  # <limits.h> exists even on freestanding compilers.
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp. "Syntax error" is here to catch this case.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#ifdef __STDC__
# include <limits.h>
#else
# include <assert.h>
#endif
		     Syntax error
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :

else
  # Broken: fails on valid input.
continue
fi
rm -f conftest.err conftest.i conftest.$ac_ext

  # OK, works on sane cases.  Now check whether nonexistent headers
  # can be detected and how.
  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */
#include <ac_nonexistent.h>
_ACEOF
if ac_fn_cxx_try_cpp "$LINENO"; then :
  # Broken: success on invalid input.
continue
else
  # Passes both tests.
ac_preproc_ok=:
break
fi
rm -f conftest.err conftest.i conftest.$ac_ext

done
# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
rm -f conftest.i conftest.err conftest.$ac_ext
if $ac_preproc_ok; then :

else
  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
as_fn_error $? "C++ preprocessor \"$CXXCPP\" fails sanity check
See \`config.log' for more details" "$LINENO" 5; }
fi

ac_ext=cpp
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_cxx_compiler_gnu

fi


# Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
# find the maximum length of command line arguments
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking the maximum length of command line arguments" >&5
$as_echo_n "checking the maximum length of command line arguments... " >&6; }
if ${lt_cv_sys_max_cmd_len+:} false; then :
  $as_echo_n "(cached) " >&6
else
    i=0
  teststring="ABCD"

  case $build_os in
  msdosdjgpp*)
    # On DJGPP, this test can blow up pretty badly due to problems in libc
    # (any single argument exceeding 2000 bytes causes a buffer overrun
    # during glob expansion).  Even if it were fixed, the result of this
    # check would be larger than it should be.
    lt_cv_sys_max_cmd_len=12288;    # 12K is about right
    ;;

  gnu*)
    # Under GNU Hurd, this test is not required because there is
    # no limit to the length of command line arguments.
    # Libtool will interpret -1 as no limit whatsoever
    lt_cv_sys_max_cmd_len=-1;
    ;;

  cygwin* | mingw*)
    # On Win9x/ME, this test blows up -- it succeeds, but takes
    # about 5 minutes as the teststring grows exponentially.
    # Worse, since 9x/ME are not pre-emptively multitasking,
    # you end up with a "frozen" computer, even though with patience
    # the test eventually succeeds (with a max line length of 256k).
    # Instead, let's just punt: use the minimum linelength reported by
    # all of the supported platforms: 8192 (on NT/2K/XP).
    lt_cv_sys_max_cmd_len=8192;
    ;;

  amigaos*)
    # On AmigaOS with pdksh, this test takes hours, literally.
    # So we just punt and use a minimum line length of 8192.
    lt_cv_sys_max_cmd_len=8192;
    ;;

  netbsd* | freebsd* | openbsd* | darwin* | dragonfly*)
    # This has been around since 386BSD, at least.  Likely further.
    if test -x /sbin/sysctl; then
      lt_cv_sys_max_cmd_len=`/sbin/sysctl -n kern.argmax`
    elif test -x /usr/sbin/sysctl; then
      lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
    else
      lt_cv_sys_max_cmd_len=65536	# usable default for all BSDs
    fi
    # And add a safety zone
    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
    ;;

  interix*)
    # We know the value 262144 and hardcode it with a safety zone (like BSD)
    lt_cv_sys_max_cmd_len=196608
    ;;

  osf*)
    # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure
    # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not
    # nice to cause kernel panics so lets avoid the loop below.
    # First set a reasonable default.
    lt_cv_sys_max_cmd_len=16384
    #
    if test -x /sbin/sysconfig; then
      case `/sbin/sysconfig -q proc exec_disable_arg_limit` in
        *1*) lt_cv_sys_max_cmd_len=-1 ;;
      esac
    fi
    ;;
  sco3.2v5*)
    lt_cv_sys_max_cmd_len=102400
    ;;
  sysv5* | sco5v6* | sysv4.2uw2*)
    kargmax=`grep ARG_MAX /etc/conf/cf.d/stune 2>/dev/null`
    if test -n "$kargmax"; then
      lt_cv_sys_max_cmd_len=`echo $kargmax | sed 's/.*[ 	]//'`
    else
      lt_cv_sys_max_cmd_len=32768
    fi
    ;;
  *)
    lt_cv_sys_max_cmd_len=`(getconf ARG_MAX) 2> /dev/null`
    if test -n "$lt_cv_sys_max_cmd_len"; then
      lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
      lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
    else
      SHELL=${SHELL-${CONFIG_SHELL-/bin/sh}}
      while (test "X"`$SHELL $0 --fallback-echo "X$teststring" 2>/dev/null` \
	       = "XX$teststring") >/dev/null 2>&1 &&
	      new_result=`expr "X$teststring" : ".*" 2>&1` &&
	      lt_cv_sys_max_cmd_len=$new_result &&
	      test $i != 17 # 1/2 MB should be enough
      do
        i=`expr $i + 1`
        teststring=$teststring$teststring
      done
      teststring=
      # Add a significant safety factor because C++ compilers can tack on massive
      # amounts of additional arguments before passing them to the linker.
      # It appears as though 1/2 is a usable value.
      lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 2`
    fi
    ;;
  esac

fi

if test -n $lt_cv_sys_max_cmd_len ; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_sys_max_cmd_len" >&5
$as_echo "$lt_cv_sys_max_cmd_len" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: none" >&5
$as_echo "none" >&6; }
fi





# Check for command to grab the raw symbol name followed by C symbol from nm.
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking command to parse $NM output from $compiler object" >&5
$as_echo_n "checking command to parse $NM output from $compiler object... " >&6; }
if ${lt_cv_sys_global_symbol_pipe+:} false; then :
  $as_echo_n "(cached) " >&6
else

# These are sane defaults that work on at least a few old systems.
# [They come from Ultrix.  What could be older than Ultrix?!! ;)]

# Character class describing NM global symbol codes.
symcode='[BCDEGRST]'

# Regexp to match symbols that can be accessed directly from C.
sympat='\([_A-Za-z][_A-Za-z0-9]*\)'

# Transform an extracted symbol line into a proper C declaration
lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^. .* \(.*\)$/extern int \1;/p'"

# Transform an extracted symbol line into symbol name and symbol address
lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"

# Define system-specific variables.
case $host_os in
aix*)
  symcode='[BCDT]'
  ;;
cygwin* | mingw* | pw32*)
  symcode='[ABCDGISTW]'
  ;;
hpux*) # Its linker distinguishes data from code symbols
  if test "$host_cpu" = ia64; then
    symcode='[ABCDEGRST]'
  fi
  lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^T .* \(.*\)$/extern int \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'"
  lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"
  ;;
linux* | k*bsd*-gnu)
  if test "$host_cpu" = ia64; then
    symcode='[ABCDGIRSTW]'
    lt_cv_sys_global_symbol_to_cdecl="sed -n -e 's/^T .* \(.*\)$/extern int \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'"
    lt_cv_sys_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"
  fi
  ;;
irix* | nonstopux*)
  symcode='[BCDEGRST]'
  ;;
osf*)
  symcode='[BCDEGQRST]'
  ;;
solaris*)
  symcode='[BDRT]'
  ;;
sco3.2v5*)
  symcode='[DT]'
  ;;
sysv4.2uw2*)
  symcode='[DT]'
  ;;
sysv5* | sco5v6* | unixware* | OpenUNIX*)
  symcode='[ABDT]'
  ;;
sysv4)
  symcode='[DFNSTU]'
  ;;
esac

# Handle CRLF in mingw tool chain
opt_cr=
case $build_os in
mingw*)
  opt_cr=`echo 'x\{0,1\}' | tr x '\015'` # option cr in regexp
  ;;
esac

# If we're using GNU nm, then use its standard symbol codes.
case `$NM -V 2>&1` in
*GNU* | *'with BFD'*)
  symcode='[ABCDGIRSTW]' ;;
esac

# Try without a prefix undercore, then with it.
for ac_symprfx in "" "_"; do

  # Transform symcode, sympat, and symprfx into a raw symbol and a C symbol.
  symxfrm="\\1 $ac_symprfx\\2 \\2"

  # Write the raw and C identifiers.
  lt_cv_sys_global_symbol_pipe="sed -n -e 's/^.*[ 	]\($symcode$symcode*\)[ 	][ 	]*$ac_symprfx$sympat$opt_cr$/$symxfrm/p'"

  # Check to see that the pipe works correctly.
  pipe_works=no

  rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#ifdef __cplusplus
extern "C" {
#endif
char nm_test_var;
void nm_test_func(){}
#ifdef __cplusplus
}
#endif
int main(){nm_test_var='a';nm_test_func();return(0);}
EOF

  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then
    # Now try to grab the symbols.
    nlist=conftest.nm
    if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\""; } >&5
  (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s "$nlist"; then
      # Try sorting and uniquifying the output.
      if sort "$nlist" | uniq > "$nlist"T; then
	mv -f "$nlist"T "$nlist"
      else
	rm -f "$nlist"T
      fi

      # Make sure that we snagged all the symbols we need.
      if grep ' nm_test_var$' "$nlist" >/dev/null; then
	if grep ' nm_test_func$' "$nlist" >/dev/null; then
	  cat <<EOF > conftest.$ac_ext
#ifdef __cplusplus
extern "C" {
#endif

EOF
	  # Now generate the symbol file.
	  eval "$lt_cv_sys_global_symbol_to_cdecl"' < "$nlist" | grep -v main >> conftest.$ac_ext'

	  cat <<EOF >> conftest.$ac_ext
#if defined (__STDC__) && __STDC__
# define lt_ptr_t void *
#else
# define lt_ptr_t char *
# define const
#endif

/* The mapping between symbol names and symbols. */
const struct {
  const char *name;
  lt_ptr_t address;
}
lt_preloaded_symbols[] =
{
EOF
	  $SED "s/^$symcode$symcode* \(.*\) \(.*\)$/  {\"\2\", (lt_ptr_t) \&\2},/" < "$nlist" | grep -v main >> conftest.$ac_ext
	  cat <<\EOF >> conftest.$ac_ext
  {0, (lt_ptr_t) 0}
};

#ifdef __cplusplus
}
#endif
EOF
	  # Now try linking the two files.
	  mv conftest.$ac_objext conftstm.$ac_objext
	  lt_save_LIBS="$LIBS"
	  lt_save_CFLAGS="$CFLAGS"
	  LIBS="conftstm.$ac_objext"
	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
	  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext}; then
	    pipe_works=yes
	  fi
	  LIBS="$lt_save_LIBS"
	  CFLAGS="$lt_save_CFLAGS"
	else
	  echo "cannot find nm_test_func in $nlist" >&5
	fi
      else
	echo "cannot find nm_test_var in $nlist" >&5
      fi
    else
      echo "cannot run $lt_cv_sys_global_symbol_pipe" >&5
    fi
  else
    echo "$progname: failed program was:" >&5
    cat conftest.$ac_ext >&5
  fi
  rm -rf conftest* conftst*

  # Do not use the global_symbol_pipe unless it works.
  if test "$pipe_works" = yes; then
    break
  else
    lt_cv_sys_global_symbol_pipe=
  fi
done

fi

if test -z "$lt_cv_sys_global_symbol_pipe"; then
  lt_cv_sys_global_symbol_to_cdecl=
fi
if test -z "$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: failed" >&5
$as_echo "failed" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
$as_echo "ok" >&6; }
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for objdir" >&5
$as_echo_n "checking for objdir... " >&6; }
if ${lt_cv_objdir+:} false; then :
  $as_echo_n "(cached) " >&6
else
  rm -f .libs 2>/dev/null
mkdir .libs 2>/dev/null
if test -d .libs; then
  lt_cv_objdir=.libs
else
  # MS-DOS does not allow filenames that begin with a dot.
  lt_cv_objdir=_libs
fi
rmdir .libs 2>/dev/null
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_objdir" >&5
$as_echo "$lt_cv_objdir" >&6; }
objdir=$lt_cv_objdir





case $host_os in
aix3*)
  # AIX sometimes has problems with the GCC collect2 program.  For some
  # reason, if we set the COLLECT_NAMES environment variable, the problems
  # vanish in a puff of smoke.
  if test "X${COLLECT_NAMES+set}" != Xset; then
    COLLECT_NAMES=
    export COLLECT_NAMES
  fi
  ;;
esac

# Sed substitution that helps us do robust quoting.  It backslashifies
# metacharacters that are still active within double-quoted strings.
Xsed='sed -e 1s/^X//'
sed_quote_subst='s/\([\\"\\`$\\\\]\)/\\\1/g'

# Same as above, but do not quote variable references.
double_quote_subst='s/\([\\"\\`\\\\]\)/\\\1/g'

# Sed substitution to delay expansion of an escaped shell variable in a
# double_quote_subst'ed string.
delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'

# Sed substitution to avoid accidental globbing in evaled expressions
no_glob_subst='s/\*/\\\*/g'

# Constants:
rm="rm -f"

# Global variables:
default_ofile=libtool
can_build_shared=yes

# All known linkers require a `.a' archive for static linking (except MSVC,
# which needs '.lib').
libext=a
ltmain="$ac_aux_dir/ltmain.sh"
ofile="$default_ofile"
with_gnu_ld="$lt_cv_prog_gnu_ld"

if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
set dummy ${ac_tool_prefix}ar; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_AR+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$AR"; then
  ac_cv_prog_AR="$AR" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_AR="${ac_tool_prefix}ar"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
AR=$ac_cv_prog_AR
if test -n "$AR"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
$as_echo "$AR" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


fi
if test -z "$ac_cv_prog_AR"; then
  ac_ct_AR=$AR
  # Extract the first word of "ar", so it can be a program name with args.
set dummy ar; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_AR+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_AR"; then
  ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_AR="ar"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_AR=$ac_cv_prog_ac_ct_AR
if test -n "$ac_ct_AR"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR" >&5
$as_echo "$ac_ct_AR" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  if test "x$ac_ct_AR" = x; then
    AR="false"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    AR=$ac_ct_AR
  fi
else
  AR="$ac_cv_prog_AR"
fi

if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
set dummy ${ac_tool_prefix}ranlib; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_RANLIB+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
RANLIB=$ac_cv_prog_RANLIB
if test -n "$RANLIB"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
$as_echo "$RANLIB" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


fi
if test -z "$ac_cv_prog_RANLIB"; then
  ac_ct_RANLIB=$RANLIB
  # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_RANLIB"; then
  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_RANLIB="ranlib"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
if test -n "$ac_ct_RANLIB"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
$as_echo "$ac_ct_RANLIB" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  if test "x$ac_ct_RANLIB" = x; then
    RANLIB=":"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    RANLIB=$ac_ct_RANLIB
  fi
else
  RANLIB="$ac_cv_prog_RANLIB"
fi

if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
set dummy ${ac_tool_prefix}strip; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_STRIP+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_STRIP="${ac_tool_prefix}strip"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
STRIP=$ac_cv_prog_STRIP
if test -n "$STRIP"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
$as_echo "$STRIP" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


fi
if test -z "$ac_cv_prog_STRIP"; then
  ac_ct_STRIP=$STRIP
  # Extract the first word of "strip", so it can be a program name with args.
set dummy strip; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_STRIP"; then
  ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_STRIP="strip"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
if test -n "$ac_ct_STRIP"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
$as_echo "$ac_ct_STRIP" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  if test "x$ac_ct_STRIP" = x; then
    STRIP=":"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    STRIP=$ac_ct_STRIP
  fi
else
  STRIP="$ac_cv_prog_STRIP"
fi


old_CC="$CC"
old_CFLAGS="$CFLAGS"

# Set sane defaults for various variables
test -z "$AR" && AR=ar
test -z "$AR_FLAGS" && AR_FLAGS=cru
test -z "$AS" && AS=as
test -z "$CC" && CC=cc
test -z "$LTCC" && LTCC=$CC
test -z "$LTCFLAGS" && LTCFLAGS=$CFLAGS
test -z "$DLLTOOL" && DLLTOOL=dlltool
test -z "$LD" && LD=ld
test -z "$LN_S" && LN_S="ln -s"
test -z "$MAGIC_CMD" && MAGIC_CMD=file
test -z "$NM" && NM=nm
test -z "$SED" && SED=sed
test -z "$OBJDUMP" && OBJDUMP=objdump
test -z "$RANLIB" && RANLIB=:
test -z "$STRIP" && STRIP=:
test -z "$ac_objext" && ac_objext=o

# Determine commands to create old-style static archives.
old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs'
old_postinstall_cmds='chmod 644 $oldlib'
old_postuninstall_cmds=

if test -n "$RANLIB"; then
  case $host_os in
  openbsd*)
    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$oldlib"
    ;;
  *)
    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$oldlib"
    ;;
  esac
  old_archive_cmds="$old_archive_cmds~\$RANLIB \$oldlib"
fi

for cc_temp in $compiler""; do
  case $cc_temp in
    compile | *[\\/]compile | ccache | *[\\/]ccache ) ;;
    distcc | *[\\/]distcc | purify | *[\\/]purify ) ;;
    \-*) ;;
    *) break;;
  esac
done
cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`


# Only perform the check for file, if the check method requires it
case $deplibs_check_method in
file_magic*)
  if test "$file_magic_cmd" = '$MAGIC_CMD'; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ${ac_tool_prefix}file" >&5
$as_echo_n "checking for ${ac_tool_prefix}file... " >&6; }
if ${lt_cv_path_MAGIC_CMD+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $MAGIC_CMD in
[\\/*] |  ?:[\\/]*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
  ;;
*)
  lt_save_MAGIC_CMD="$MAGIC_CMD"
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  ac_dummy="/usr/bin$PATH_SEPARATOR$PATH"
  for ac_dir in $ac_dummy; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/${ac_tool_prefix}file; then
      lt_cv_path_MAGIC_CMD="$ac_dir/${ac_tool_prefix}file"
      if test -n "$file_magic_test_file"; then
	case $deplibs_check_method in
	"file_magic "*)
	  file_magic_regex=`expr "$deplibs_check_method" : "file_magic \(.*\)"`
	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
	    $EGREP "$file_magic_regex" > /dev/null; then
	    :
	  else
	    cat <<EOF 1>&2

*** Warning: the command libtool uses to detect shared libraries,
*** $file_magic_cmd, produces output that libtool cannot recognize.
*** The result is that libtool may fail to recognize shared libraries
*** as such.  This will affect the creation of libtool libraries that
*** depend on shared libraries, but programs linked with such libtool
*** libraries will work regardless of this problem.  Nevertheless, you
*** may want to report the problem to your system manager and/or to
*** bug-libtool@gnu.org

EOF
	  fi ;;
	esac
      fi
      break
    fi
  done
  IFS="$lt_save_ifs"
  MAGIC_CMD="$lt_save_MAGIC_CMD"
  ;;
esac
fi

MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
if test -n "$MAGIC_CMD"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
$as_echo "$MAGIC_CMD" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

if test -z "$lt_cv_path_MAGIC_CMD"; then
  if test -n "$ac_tool_prefix"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for file" >&5
$as_echo_n "checking for file... " >&6; }
if ${lt_cv_path_MAGIC_CMD+:} false; then :
  $as_echo_n "(cached) " >&6
else
  case $MAGIC_CMD in
[\\/*] |  ?:[\\/]*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
  ;;
*)
  lt_save_MAGIC_CMD="$MAGIC_CMD"
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  ac_dummy="/usr/bin$PATH_SEPARATOR$PATH"
  for ac_dir in $ac_dummy; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/file; then
      lt_cv_path_MAGIC_CMD="$ac_dir/file"
      if test -n "$file_magic_test_file"; then
	case $deplibs_check_method in
	"file_magic "*)
	  file_magic_regex=`expr "$deplibs_check_method" : "file_magic \(.*\)"`
	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
	    $EGREP "$file_magic_regex" > /dev/null; then
	    :
	  else
	    cat <<EOF 1>&2

*** Warning: the command libtool uses to detect shared libraries,
*** $file_magic_cmd, produces output that libtool cannot recognize.
*** The result is that libtool may fail to recognize shared libraries
*** as such.  This will affect the creation of libtool libraries that
*** depend on shared libraries, but programs linked with such libtool
*** libraries will work regardless of this problem.  Nevertheless, you
*** may want to report the problem to your system manager and/or to
*** bug-libtool@gnu.org

EOF
	  fi ;;
	esac
      fi
      break
    fi
  done
  IFS="$lt_save_ifs"
  MAGIC_CMD="$lt_save_MAGIC_CMD"
  ;;
esac
fi

MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
if test -n "$MAGIC_CMD"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
$as_echo "$MAGIC_CMD" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  else
    MAGIC_CMD=:
  fi
fi

  fi
  ;;
esac


  case $host_os in
    rhapsody* | darwin*)
    if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_DSYMUTIL+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$DSYMUTIL"; then
  ac_cv_prog_DSYMUTIL="$DSYMUTIL" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
DSYMUTIL=$ac_cv_prog_DSYMUTIL
if test -n "$DSYMUTIL"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DSYMUTIL" >&5
$as_echo "$DSYMUTIL" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


fi
if test -z "$ac_cv_prog_DSYMUTIL"; then
  ac_ct_DSYMUTIL=$DSYMUTIL
  # Extract the first word of "dsymutil", so it can be a program name with args.
set dummy dsymutil; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_DSYMUTIL+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_DSYMUTIL"; then
  ac_cv_prog_ac_ct_DSYMUTIL="$ac_ct_DSYMUTIL" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_DSYMUTIL="dsymutil"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_DSYMUTIL=$ac_cv_prog_ac_ct_DSYMUTIL
if test -n "$ac_ct_DSYMUTIL"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DSYMUTIL" >&5
$as_echo "$ac_ct_DSYMUTIL" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  if test "x$ac_ct_DSYMUTIL" = x; then
    DSYMUTIL=":"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    DSYMUTIL=$ac_ct_DSYMUTIL
  fi
else
  DSYMUTIL="$ac_cv_prog_DSYMUTIL"
fi

    if test -n "$ac_tool_prefix"; then
  # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
set dummy ${ac_tool_prefix}nmedit; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_NMEDIT+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$NMEDIT"; then
  ac_cv_prog_NMEDIT="$NMEDIT" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
NMEDIT=$ac_cv_prog_NMEDIT
if test -n "$NMEDIT"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $NMEDIT" >&5
$as_echo "$NMEDIT" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi


fi
if test -z "$ac_cv_prog_NMEDIT"; then
  ac_ct_NMEDIT=$NMEDIT
  # Extract the first word of "nmedit", so it can be a program name with args.
set dummy nmedit; ac_word=$2
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
$as_echo_n "checking for $ac_word... " >&6; }
if ${ac_cv_prog_ac_ct_NMEDIT+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -n "$ac_ct_NMEDIT"; then
  ac_cv_prog_ac_ct_NMEDIT="$ac_ct_NMEDIT" # Let the user override the test.
else
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    for ac_exec_ext in '' $ac_executable_extensions; do
  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
    ac_cv_prog_ac_ct_NMEDIT="nmedit"
    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
    break 2
  fi
done
  done
IFS=$as_save_IFS

fi
fi
ac_ct_NMEDIT=$ac_cv_prog_ac_ct_NMEDIT
if test -n "$ac_ct_NMEDIT"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_NMEDIT" >&5
$as_echo "$ac_ct_NMEDIT" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi

  if test "x$ac_ct_NMEDIT" = x; then
    NMEDIT=":"
  else
    case $cross_compiling:$ac_tool_warned in
yes:)
{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
ac_tool_warned=yes ;;
esac
    NMEDIT=$ac_ct_NMEDIT
  fi
else
  NMEDIT="$ac_cv_prog_NMEDIT"
fi


    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -single_module linker flag" >&5
$as_echo_n "checking for -single_module linker flag... " >&6; }
if ${lt_cv_apple_cc_single_mod+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_apple_cc_single_mod=no
      if test -z "${LT_MULTI_MODULE}"; then
   # By default we will add the -single_module flag. You can override
   # by either setting the environment variable LT_MULTI_MODULE
   # non-empty at configure time, or by adding -multi_module to the
   # link flags.
   echo "int foo(void){return 1;}" > conftest.c
   $LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \
     -dynamiclib ${wl}-single_module conftest.c
   if test -f libconftest.dylib; then
     lt_cv_apple_cc_single_mod=yes
     rm -rf libconftest.dylib*
   fi
   rm conftest.c
      fi
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_apple_cc_single_mod" >&5
$as_echo "$lt_cv_apple_cc_single_mod" >&6; }
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag" >&5
$as_echo_n "checking for -exported_symbols_list linker flag... " >&6; }
if ${lt_cv_ld_exported_symbols_list+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_ld_exported_symbols_list=no
      save_LDFLAGS=$LDFLAGS
      echo "_main" > conftest.sym
      LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"

cat > conftest.$ac_ext <<EOF
#line 106725 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext}; then
 lt_cv_ld_exported_symbols_list=yes
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
lt_cv_ld_exported_symbols_list=no
  rm -rf conftest*
fi
rm -f conftest*
   LDFLAGS="$save_LDFLAGS"

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_exported_symbols_list" >&5
$as_echo "$lt_cv_ld_exported_symbols_list" >&6; }
    case $host_os in
    rhapsody* | darwin1.[0123])
      _lt_dar_allow_undefined='${wl}-undefined ${wl}suppress' ;;
    darwin1.*)
     _lt_dar_allow_undefined='${wl}-flat_namespace ${wl}-undefined ${wl}suppress' ;;
    darwin*)
      # if running on 10.5 or later, the deployment target defaults
      # to the OS version, if on x86, and 10.4, the deployment
      # target defaults to 10.4. Don't you love it?
      case ${MACOSX_DEPLOYMENT_TARGET-10.0},$host in
   10.0,*86*-darwin8*|10.0,*-darwin[91]*)
     _lt_dar_allow_undefined='${wl}-undefined ${wl}dynamic_lookup' ;;
   10.[012]*)
     _lt_dar_allow_undefined='${wl}-flat_namespace ${wl}-undefined ${wl}suppress' ;;
   10.*)
     _lt_dar_allow_undefined='${wl}-undefined ${wl}dynamic_lookup' ;;
      esac
    ;;
  esac
    if test "$lt_cv_apple_cc_single_mod" = "yes"; then
      _lt_dar_single_mod='$single_module'
    fi
    if test "$lt_cv_ld_exported_symbols_list" = "yes"; then
      _lt_dar_export_syms=' ${wl}-exported_symbols_list,$output_objdir/${libname}-symbols.expsym'
    else
      _lt_dar_export_syms="~$NMEDIT -s \$output_objdir/\${libname}-symbols.expsym \${lib}"
    fi
    if test "$DSYMUTIL" != ":"; then
      _lt_dsymutil="~$DSYMUTIL \$lib || :"
    else
      _lt_dsymutil=
    fi
    ;;
  esac


enable_dlopen=no
enable_win32_dll=no

# Check whether --enable-libtool-lock was given.
if test "${enable_libtool_lock+set}" = set; then :
  enableval=$enable_libtool_lock;
fi

test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes


# Check whether --with-pic was given.
if test "${with_pic+set}" = set; then :
  withval=$with_pic; pic_mode="$withval"
else
  pic_mode=default
fi

test -z "$pic_mode" && pic_mode=default

# Use C for the default configuration in the libtool script
tagname=
lt_save_CC="$CC"

ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu


# Source file extension for C test sources.
ac_ext=c

# Object file extension for compiled C test sources.
objext=o
objext=$objext

# Code to be used in simple compile tests
lt_simple_compile_test_code="int some_variable = 0;"

# Code to be used in simple link tests
lt_simple_link_test_code='int main(){return(0);}'


# If no C compiler was specified, use CC.
LTCC=${LTCC-"$CC"}

# If no C compiler flags were specified, use CFLAGS.
LTCFLAGS=${LTCFLAGS-"$CFLAGS"}

# Allow CC to be a program name with arguments.
compiler=$CC


# save warnings/boilerplate of simple test code
ac_outfile=conftest.$ac_objext
echo "$lt_simple_compile_test_code" >conftest.$ac_ext
eval "$ac_compile" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_compiler_boilerplate=`cat conftest.err`
$rm conftest*

ac_outfile=conftest.$ac_objext
echo "$lt_simple_link_test_code" >conftest.$ac_ext
eval "$ac_link" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_linker_boilerplate=`cat conftest.err`
$rm -r conftest*


## CAVEAT EMPTOR:
## There is no encapsulation within the following macros, do not change
## the running order or otherwise move them around unless you know exactly
## what you are doing...

lt_prog_compiler_no_builtin_flag=

if test "$GCC" = yes; then
  lt_prog_compiler_no_builtin_flag=' -fno-builtin'


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
$as_echo_n "checking if $compiler supports -fno-rtti -fno-exceptions... " >&6; }
if ${lt_cv_prog_compiler_rtti_exceptions+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_rtti_exceptions=no
  ac_outfile=conftest.$ac_objext
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext
   lt_compiler_flag="-fno-rtti -fno-exceptions"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   # The option is referenced via a variable to avoid confusing sed.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:106883: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>conftest.err)
   ac_status=$?
   cat conftest.err >&5
   echo "configure:106887: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s "$ac_outfile"; then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings other than the usual output.
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
     $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_rtti_exceptions=yes
     fi
   fi
   $rm conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
$as_echo "$lt_cv_prog_compiler_rtti_exceptions" >&6; }

if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
    lt_prog_compiler_no_builtin_flag="$lt_prog_compiler_no_builtin_flag -fno-rtti -fno-exceptions"
else
    :
fi

fi

lt_prog_compiler_wl=
lt_prog_compiler_pic=
lt_prog_compiler_static=

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
$as_echo_n "checking for $compiler option to produce PIC... " >&6; }

  if test "$GCC" = yes; then
    lt_prog_compiler_wl='-Wl,'
    lt_prog_compiler_static='-static'

    case $host_os in
      aix*)
      # All AIX code is PIC.
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_prog_compiler_static='-Bstatic'
      fi
      ;;

    amigaos*)
      # FIXME: we need at least 68020 code to build shared libraries, but
      # adding the `-m68020' flag to GCC prevents building anything better,
      # like `-m68040'.
      lt_prog_compiler_pic='-m68020 -resident32 -malways-restore-a4'
      ;;

    beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
      # PIC is the default for these OSes.
      ;;

    mingw* | cygwin* | pw32* | os2*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
      # Although the cygwin gcc ignores -fPIC, still need this for old-style
      # (--disable-auto-import) libraries
	  lt_prog_compiler_pic='-DDLL_EXPORT'
      ;;

    darwin* | rhapsody*)
      # PIC is the default on this platform
      # Common symbols not allowed in MH_DYLIB files
      lt_prog_compiler_pic='-fno-common'
      ;;

    interix[3-9]*)
      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
      # Instead, we relocate shared libraries at runtime.
      ;;

    msdosdjgpp*)
      # Just because we use GCC doesn't mean we suddenly get shared libraries
      # on systems that don't support them.
      lt_prog_compiler_can_build_shared=no
      enable_shared=no
      ;;

    sysv4*MP*)
      if test -d /usr/nec; then
	lt_prog_compiler_pic=-Kconform_pic
      fi
      ;;

    hpux*)
      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
      # not for PA HP-UX.
      case $host_cpu in
      hppa*64*|ia64*)
	# +Z the default
	;;
      *)
	lt_prog_compiler_pic='-fPIC'
	;;
      esac
      ;;

    *)
      lt_prog_compiler_pic='-fPIC'
      ;;
    esac
  else
    # PORTME Check for flag to pass linker flags through the system compiler.
    case $host_os in
    aix*)
      lt_prog_compiler_wl='-Wl,'
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_prog_compiler_static='-Bstatic'
      else
	lt_prog_compiler_static='-bnso -bI:/lib/syscalls.exp'
      fi
      ;;
      darwin*)
        # PIC is the default on this platform
        # Common symbols not allowed in MH_DYLIB files
       case $cc_basename in
         xlc*)
         lt_prog_compiler_pic='-qnocommon'
         lt_prog_compiler_wl='-Wl,'
         ;;
       esac
       ;;

    mingw* | cygwin* | pw32* | os2*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
	  lt_prog_compiler_pic='-DDLL_EXPORT'
      ;;

    hpux9* | hpux10* | hpux11*)
      lt_prog_compiler_wl='-Wl,'
      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
      # not for PA HP-UX.
      case $host_cpu in
      hppa*64*|ia64*)
	# +Z the default
	;;
      *)
	lt_prog_compiler_pic='+Z'
	;;
      esac
      # Is there a better lt_prog_compiler_static that works with the bundled CC?
      lt_prog_compiler_static='${wl}-a ${wl}archive'
      ;;

    irix5* | irix6* | nonstopux*)
      lt_prog_compiler_wl='-Wl,'
      # PIC (with -KPIC) is the default.
      lt_prog_compiler_static='-non_shared'
      ;;

    newsos6)
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    linux* | k*bsd*-gnu)
      case $cc_basename in
      # old Intel for x86_64 which still supported -KPIC.
      ecc*)
        lt_prog_compiler_wl='-Wl,'
        lt_prog_compiler_pic='-KPIC'
        lt_prog_compiler_static='-static'
        ;;
      # icc used to be incompatible with GCC.
      # ICC 10 doesn't accept -KPIC any more.
      icc*)
        lt_prog_compiler_wl='-Wl,'
        lt_prog_compiler_pic='-fPIC'
        lt_prog_compiler_static='-static'
        ;;
      pgcc* | pgf77* | pgf90* | pgf95*)
        # Portland Group compilers (*not* the Pentium gcc compiler,
	# which looks to be a dead project)
	lt_prog_compiler_wl='-Wl,'
	lt_prog_compiler_pic='-fpic'
	lt_prog_compiler_static='-Bstatic'
        ;;
      ccc*)
        lt_prog_compiler_wl='-Wl,'
        # All Alpha code is PIC.
        lt_prog_compiler_static='-non_shared'
        ;;
      *)
        case `$CC -V 2>&1 | sed 5q` in
	*Sun\ C*)
	  # Sun C 5.9
	  lt_prog_compiler_pic='-KPIC'
	  lt_prog_compiler_static='-Bstatic'
	  lt_prog_compiler_wl='-Wl,'
	  ;;
	*Sun\ F*)
	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
	  lt_prog_compiler_pic='-KPIC'
	  lt_prog_compiler_static='-Bstatic'
	  lt_prog_compiler_wl=''
	  ;;
	esac
	;;
      esac
      ;;

    osf3* | osf4* | osf5*)
      lt_prog_compiler_wl='-Wl,'
      # All OSF/1 code is PIC.
      lt_prog_compiler_static='-non_shared'
      ;;

    rdos*)
      lt_prog_compiler_static='-non_shared'
      ;;

    solaris*)
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      case $cc_basename in
      f77* | f90* | f95*)
	lt_prog_compiler_wl='-Qoption ld ';;
      *)
	lt_prog_compiler_wl='-Wl,';;
      esac
      ;;

    sunos4*)
      lt_prog_compiler_wl='-Qoption ld '
      lt_prog_compiler_pic='-PIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    sysv4 | sysv4.2uw2* | sysv4.3*)
      lt_prog_compiler_wl='-Wl,'
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    sysv4*MP*)
      if test -d /usr/nec ;then
	lt_prog_compiler_pic='-Kconform_pic'
	lt_prog_compiler_static='-Bstatic'
      fi
      ;;

    sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
      lt_prog_compiler_wl='-Wl,'
      lt_prog_compiler_pic='-KPIC'
      lt_prog_compiler_static='-Bstatic'
      ;;

    unicos*)
      lt_prog_compiler_wl='-Wl,'
      lt_prog_compiler_can_build_shared=no
      ;;

    uts4*)
      lt_prog_compiler_pic='-pic'
      lt_prog_compiler_static='-Bstatic'
      ;;

    *)
      lt_prog_compiler_can_build_shared=no
      ;;
    esac
  fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic" >&5
$as_echo "$lt_prog_compiler_pic" >&6; }

#
# Check to make sure the PIC flag actually works.
#
if test -n "$lt_prog_compiler_pic"; then

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
$as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic works... " >&6; }
if ${lt_cv_prog_compiler_pic_works+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_pic_works=no
  ac_outfile=conftest.$ac_objext
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext
   lt_compiler_flag="$lt_prog_compiler_pic -DPIC"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   # The option is referenced via a variable to avoid confusing sed.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:107181: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>conftest.err)
   ac_status=$?
   cat conftest.err >&5
   echo "configure:107185: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s "$ac_outfile"; then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings other than the usual output.
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
     $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_pic_works=yes
     fi
   fi
   $rm conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works" >&5
$as_echo "$lt_cv_prog_compiler_pic_works" >&6; }

if test x"$lt_cv_prog_compiler_pic_works" = xyes; then
    case $lt_prog_compiler_pic in
     "" | " "*) ;;
     *) lt_prog_compiler_pic=" $lt_prog_compiler_pic" ;;
     esac
else
    lt_prog_compiler_pic=
     lt_prog_compiler_can_build_shared=no
fi

fi
case $host_os in
  # For platforms which do not support PIC, -DPIC is meaningless:
  *djgpp*)
    lt_prog_compiler_pic=
    ;;
  *)
    lt_prog_compiler_pic="$lt_prog_compiler_pic -DPIC"
    ;;
esac

#
# Check to make sure the static flag actually works.
#
wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
$as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
if ${lt_cv_prog_compiler_static_works+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_static_works=no
   save_LDFLAGS="$LDFLAGS"
   LDFLAGS="$LDFLAGS $lt_tmp_static_flag"
   echo "$lt_simple_link_test_code" > conftest.$ac_ext
   if (eval $ac_link 2>conftest.err) && test -s conftest$ac_exeext; then
     # The linker can only warn and ignore the option if not recognized
     # So say no if there are warnings
     if test -s conftest.err; then
       # Append any errors to the config.log.
       cat conftest.err 1>&5
       $echo "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
       $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
       if diff conftest.exp conftest.er2 >/dev/null; then
         lt_cv_prog_compiler_static_works=yes
       fi
     else
       lt_cv_prog_compiler_static_works=yes
     fi
   fi
   $rm -r conftest*
   LDFLAGS="$save_LDFLAGS"

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works" >&5
$as_echo "$lt_cv_prog_compiler_static_works" >&6; }

if test x"$lt_cv_prog_compiler_static_works" = xyes; then
    :
else
    lt_prog_compiler_static=
fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
$as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
if ${lt_cv_prog_compiler_c_o+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_c_o=no
   $rm -r conftest 2>/dev/null
   mkdir conftest
   cd conftest
   mkdir out
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext

   lt_compiler_flag="-o out/conftest2.$ac_objext"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:107285: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>out/conftest.err)
   ac_status=$?
   cat out/conftest.err >&5
   echo "configure:107289: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s out/conftest2.$ac_objext
   then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
     $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_c_o=yes
     fi
   fi
   chmod u+w . 2>&5
   $rm conftest*
   # SGI C++ compiler will create directory out/ii_files/ for
   # template instantiation
   test -d out/ii_files && $rm out/ii_files/* && rmdir out/ii_files
   $rm out/* && rmdir out
   cd ..
   rmdir conftest
   $rm conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o" >&5
$as_echo "$lt_cv_prog_compiler_c_o" >&6; }


hard_links="nottested"
if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
  # do not overwrite the value of need_locks provided by the user
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
$as_echo_n "checking if we can lock with hard links... " >&6; }
  hard_links=yes
  $rm conftest*
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  touch conftest.a
  ln conftest.a conftest.b 2>&5 || hard_links=no
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
$as_echo "$hard_links" >&6; }
  if test "$hard_links" = no; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
$as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
    need_locks=warn
  fi
else
  need_locks=no
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
$as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }

  runpath_var=
  allow_undefined_flag=
  enable_shared_with_static_runtimes=no
  archive_cmds=
  archive_expsym_cmds=
  old_archive_From_new_cmds=
  old_archive_from_expsyms_cmds=
  export_dynamic_flag_spec=
  whole_archive_flag_spec=
  thread_safe_flag_spec=
  hardcode_libdir_flag_spec=
  hardcode_libdir_flag_spec_ld=
  hardcode_libdir_separator=
  hardcode_direct=no
  hardcode_minus_L=no
  hardcode_shlibpath_var=unsupported
  link_all_deplibs=unknown
  hardcode_automatic=no
  module_cmds=
  module_expsym_cmds=
  always_export_symbols=no
  export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
  # include_expsyms should be a list of space-separated symbols to be *always*
  # included in the symbol list
  include_expsyms=
  # exclude_expsyms can be an extended regexp of symbols to exclude
  # it will be wrapped by ` (' and `)$', so one must not match beginning or
  # end of line.  Example: `a|bc|.*d.*' will exclude the symbols `a' and `bc',
  # as well as any symbol that contains `d'.
  exclude_expsyms='_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*'
  # Although _GLOBAL_OFFSET_TABLE_ is a valid symbol C name, most a.out
  # platforms (ab)use it in PIC code, but their linkers get confused if
  # the symbol is explicitly referenced.  Since portable code cannot
  # rely on this symbol name, it's probably fine to never include it in
  # preloaded symbol tables.
  # Exclude shared library initialization/finalization symbols.
  extract_expsyms_cmds=
  # Just being paranoid about ensuring that cc_basename is set.
  for cc_temp in $compiler""; do
  case $cc_temp in
    compile | *[\\/]compile | ccache | *[\\/]ccache ) ;;
    distcc | *[\\/]distcc | purify | *[\\/]purify ) ;;
    \-*) ;;
    *) break;;
  esac
done
cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`

  case $host_os in
  cygwin* | mingw* | pw32*)
    # FIXME: the MSVC++ port hasn't been tested in a loooong time
    # When not using gcc, we currently assume that we are using
    # Microsoft Visual C++.
    if test "$GCC" != yes; then
      with_gnu_ld=no
    fi
    ;;
  interix*)
    # we just hope/assume this is gcc and not c89 (= MSVC++)
    with_gnu_ld=yes
    ;;
  openbsd*)
    with_gnu_ld=no
    ;;
  esac

  ld_shlibs=yes
  if test "$with_gnu_ld" = yes; then
    # If archive_cmds runs LD, not CC, wlarc should be empty
    wlarc='${wl}'

    # Set some defaults for GNU ld with shared library support. These
    # are reset later if shared libraries are not supported. Putting them
    # here allows them to be overridden if necessary.
    runpath_var=LD_RUN_PATH
    hardcode_libdir_flag_spec='${wl}--rpath ${wl}$libdir'
    export_dynamic_flag_spec='${wl}--export-dynamic'
    # ancient GNU ld didn't support --whole-archive et. al.
    if $LD --help 2>&1 | grep 'no-whole-archive' > /dev/null; then
	whole_archive_flag_spec="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
      else
  	whole_archive_flag_spec=
    fi
    supports_anon_versioning=no
    case `$LD -v 2>/dev/null` in
      *\ [01].* | *\ 2.[0-9].* | *\ 2.10.*) ;; # catch versions < 2.11
      *\ 2.11.93.0.2\ *) supports_anon_versioning=yes ;; # RH7.3 ...
      *\ 2.11.92.0.12\ *) supports_anon_versioning=yes ;; # Mandrake 8.2 ...
      *\ 2.11.*) ;; # other 2.11 versions
      *) supports_anon_versioning=yes ;;
    esac

    # See if GNU ld supports shared libraries.
    case $host_os in
    aix[3-9]*)
      # On AIX/PPC, the GNU linker is very broken
      if test "$host_cpu" != ia64; then
	ld_shlibs=no
	cat <<EOF 1>&2

*** Warning: the GNU linker, at least up to release 2.9.1, is reported
*** to be unable to reliably create shared libraries on AIX.
*** Therefore, libtool is disabling shared libraries support.  If you
*** really care for shared libraries, you may want to modify your PATH
*** so that a non-GNU linker is found, and then restart.

EOF
      fi
      ;;

    amigaos*)
      archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$echo "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$echo "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$echo "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_minus_L=yes

      # Samuel A. Falvo II <kc5tja@dolphin.openprojects.net> reports
      # that the semantics of dynamic libraries on AmigaOS, at least up
      # to version 4, is to share data among multiple programs linked
      # with the same dynamic library.  Since this doesn't match the
      # behavior of shared libraries on other platforms, we can't use
      # them.
      ld_shlibs=no
      ;;

    beos*)
      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	allow_undefined_flag=unsupported
	# Joseph Beckenbach <jrb3@best.com> says some releases of gcc
	# support --undefined.  This deserves some investigation.  FIXME
	archive_cmds='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
      else
	ld_shlibs=no
      fi
      ;;

    cygwin* | mingw* | pw32*)
      # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, ) is actually meaningless,
      # as there is no search path for DLLs.
      hardcode_libdir_flag_spec='-L$libdir'
      allow_undefined_flag=unsupported
      always_export_symbols=no
      enable_shared_with_static_runtimes=yes
      export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1 DATA/'\'' -e '\''/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'

      if $LD --help 2>&1 | grep 'auto-import' > /dev/null; then
        archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
	# If the export-symbols file already is a .def file (1st line
	# is EXPORTS), use it as is; otherwise, prepend...
	archive_expsym_cmds='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
	  cp $export_symbols $output_objdir/$soname.def;
	else
	  echo EXPORTS > $output_objdir/$soname.def;
	  cat $export_symbols >> $output_objdir/$soname.def;
	fi~
	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
      else
	ld_shlibs=no
      fi
      ;;

    interix[3-9]*)
      hardcode_direct=no
      hardcode_shlibpath_var=no
      hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
      export_dynamic_flag_spec='${wl}-E'
      # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
      # Instead, shared libraries are loaded at an image base (0x10000000 by
      # default) and relocated if they conflict, which is a slow very memory
      # consuming and fragmenting process.  To avoid this, we pick a random,
      # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
      # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
      archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
      archive_expsym_cmds='sed "s,^,_," $export_symbols >$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
      ;;

    gnu* | linux* | k*bsd*-gnu)
      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	tmp_addflag=
	case $cc_basename,$host_cpu in
	pgcc*)				# Portland Group C compiler
	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
	  tmp_addflag=' $pic_flag'
	  ;;
	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
	  tmp_addflag=' $pic_flag -Mnomain' ;;
	ecc*,ia64* | icc*,ia64*)		# Intel C compiler on ia64
	  tmp_addflag=' -i_dynamic' ;;
	efc*,ia64* | ifort*,ia64*)	# Intel Fortran compiler on ia64
	  tmp_addflag=' -i_dynamic -nofor_main' ;;
	ifc* | ifort*)			# Intel Fortran compiler
	  tmp_addflag=' -nofor_main' ;;
	esac
	case `$CC -V 2>&1 | sed 5q` in
	*Sun\ C*)			# Sun C 5.9
	  whole_archive_flag_spec='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
	  tmp_sharedflag='-G' ;;
	*Sun\ F*)			# Sun Fortran 8.3
	  tmp_sharedflag='-G' ;;
	*)
	  tmp_sharedflag='-shared' ;;
	esac
	archive_cmds='$CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'

	if test $supports_anon_versioning = yes; then
	  archive_expsym_cmds='$echo "{ global:" > $output_objdir/$libname.ver~
  cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
  $echo "local: *; };" >> $output_objdir/$libname.ver~
	  $CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-version-script ${wl}$output_objdir/$libname.ver -o $lib'
	fi
      else
	ld_shlibs=no
      fi
      ;;

    netbsd*)
      if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
	archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
	wlarc=
      else
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
      fi
      ;;

    solaris*)
      if $LD -v 2>&1 | grep 'BFD 2\.8' > /dev/null; then
	ld_shlibs=no
	cat <<EOF 1>&2

*** Warning: The releases 2.8.* of the GNU linker cannot reliably
*** create shared libraries on Solaris systems.  Therefore, libtool
*** is disabling shared libraries support.  We urge you to upgrade GNU
*** binutils to release 2.9.1 or newer.  Another option is to modify
*** your PATH or compiler configuration so that the native linker is
*** used, and then restart.

EOF
      elif $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
      else
	ld_shlibs=no
      fi
      ;;

    sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
      case `$LD -v 2>&1` in
        *\ [01].* | *\ 2.[0-9].* | *\ 2.1[0-5].*)
	ld_shlibs=no
	cat <<_LT_EOF 1>&2

*** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
*** reliably create shared libraries on SCO systems.  Therefore, libtool
*** is disabling shared libraries support.  We urge you to upgrade GNU
*** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
*** your PATH or compiler configuration so that the native linker is
*** used, and then restart.

_LT_EOF
	;;
	*)
	  if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	    hardcode_libdir_flag_spec='`test -z "$SCOABSPATH" && echo ${wl}-rpath,$libdir`'
	    archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib'
	    archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname,-retain-symbols-file,$export_symbols -o $lib'
	  else
	    ld_shlibs=no
	  fi
	;;
      esac
      ;;

    sunos4*)
      archive_cmds='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
      wlarc=
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    *)
      if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
      else
	ld_shlibs=no
      fi
      ;;
    esac

    if test "$ld_shlibs" = no; then
      runpath_var=
      hardcode_libdir_flag_spec=
      export_dynamic_flag_spec=
      whole_archive_flag_spec=
    fi
  else
    # PORTME fill in a description of your system's linker (not GNU ld)
    case $host_os in
    aix3*)
      allow_undefined_flag=unsupported
      always_export_symbols=yes
      archive_expsym_cmds='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'
      # Note: this linker hardcodes the directories in LIBPATH if there
      # are no directories specified by -L.
      hardcode_minus_L=yes
      if test "$GCC" = yes && test -z "$lt_prog_compiler_static"; then
	# Neither direct hardcoding nor static linking is supported with a
	# broken collect2.
	hardcode_direct=unsupported
      fi
      ;;

    aix[4-9]*)
      if test "$host_cpu" = ia64; then
	# On IA64, the linker does run time linking by default, so we don't
	# have to do anything special.
	aix_use_runtimelinking=no
	exp_sym_flag='-Bexport'
	no_entry_flag=""
      else
	# If we're using GNU nm, then we don't want the "-C" option.
	# -C means demangle to AIX nm, but means don't demangle with GNU nm
	if $NM -V 2>&1 | grep 'GNU' > /dev/null; then
	  export_symbols_cmds='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
	else
	  export_symbols_cmds='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
	fi
	aix_use_runtimelinking=no

	# Test if we are trying to use run time linking or normal
	# AIX style linking. If -brtl is somewhere in LDFLAGS, we
	# need to do runtime linking.
	case $host_os in aix4.[23]|aix4.[23].*|aix[5-9]*)
	  for ld_flag in $LDFLAGS; do
  	  if (test $ld_flag = "-brtl" || test $ld_flag = "-Wl,-brtl"); then
  	    aix_use_runtimelinking=yes
  	    break
  	  fi
	  done
	  ;;
	esac

	exp_sym_flag='-bexport'
	no_entry_flag='-bnoentry'
      fi

      # When large executables or shared objects are built, AIX ld can
      # have problems creating the table of contents.  If linking a library
      # or program results in "error TOC overflow" add -mminimal-toc to
      # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
      # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.

      archive_cmds=''
      hardcode_direct=yes
      hardcode_libdir_separator=':'
      link_all_deplibs=yes

      if test "$GCC" = yes; then
	case $host_os in aix4.[012]|aix4.[012].*)
	# We only want to do this on AIX 4.2 and lower, the check
	# below for broken collect2 doesn't work under 4.3+
	  collect2name=`${CC} -print-prog-name=collect2`
	  if test -f "$collect2name" && \
  	   strings "$collect2name" | grep resolve_lib_name >/dev/null
	  then
  	  # We have reworked collect2
  	  :
	  else
  	  # We have old collect2
  	  hardcode_direct=unsupported
  	  # It fails to find uninstalled libraries when the uninstalled
  	  # path is not listed in the libpath.  Setting hardcode_minus_L
  	  # to unsupported forces relinking
  	  hardcode_minus_L=yes
  	  hardcode_libdir_flag_spec='-L$libdir'
  	  hardcode_libdir_separator=
	  fi
	  ;;
	esac
	shared_flag='-shared'
	if test "$aix_use_runtimelinking" = yes; then
	  shared_flag="$shared_flag "'${wl}-G'
	fi
      else
	# not using gcc
	if test "$host_cpu" = ia64; then
  	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
  	# chokes on -Wl,-G. The following line is correct:
	  shared_flag='-G'
	else
	  if test "$aix_use_runtimelinking" = yes; then
	    shared_flag='${wl}-G'
	  else
	    shared_flag='${wl}-bM:SRE'
	  fi
	fi
      fi

      # It seems that -bexpall does not export symbols beginning with
      # underscore (_), so it is better to generate a list of symbols to export.
      always_export_symbols=yes
      if test "$aix_use_runtimelinking" = yes; then
	# Warning - without using the other runtime loading flags (-brtl),
	# -berok will link without error, but may produce a broken library.
	allow_undefined_flag='-berok'
       # Determine the default libpath from the value encoded in an empty executable.

cat > conftest.$ac_ext <<EOF
#line 107749 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext}; then

lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

       hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
	archive_expsym_cmds="\$CC"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then echo "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
       else
	if test "$host_cpu" = ia64; then
	  hardcode_libdir_flag_spec='${wl}-R $libdir:/usr/lib:/lib'
	  allow_undefined_flag="-z nodefs"
	  archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
	else
	 # Determine the default libpath from the value encoded in an empty executable.

cat > conftest.$ac_ext <<EOF
#line 107791 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext}; then

lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

	 hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
	  # Warning - without using the other run time loading flags,
	  # -berok will link without error, but may produce a broken library.
	  no_undefined_flag=' ${wl}-bernotok'
	  allow_undefined_flag=' ${wl}-berok'
	  # Exported symbols can be pulled into shared objects from archives
	  whole_archive_flag_spec='$convenience'
	  archive_cmds_need_lc=yes
	  # This is similar to how AIX traditionally builds its shared libraries.
	  archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
	fi
      fi
      ;;

    amigaos*)
      archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$echo "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$echo "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$echo "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_minus_L=yes
      # see comment about different semantics on the GNU ld section
      ld_shlibs=no
      ;;

    bsdi[45]*)
      export_dynamic_flag_spec=-rdynamic
      ;;

    cygwin* | mingw* | pw32*)
      # When not using gcc, we currently assume that we are using
      # Microsoft Visual C++.
      # hardcode_libdir_flag_spec is actually meaningless, as there is
      # no search path for DLLs.
      hardcode_libdir_flag_spec=' '
      allow_undefined_flag=unsupported
      # Tell ltmain to make .lib files, not .a files.
      libext=lib
      # Tell ltmain to make .dll files, not .so files.
      shrext_cmds=".dll"
      # FIXME: Setting linknames here is a bad hack.
      archive_cmds='$CC -o $lib $libobjs $compiler_flags `echo "$deplibs" | $SED -e '\''s/ -lc$//'\''` -link -dll~linknames='
      # The linker will automatically build a .lib file if we build a DLL.
      old_archive_From_new_cmds='true'
      # FIXME: Should let the user specify the lib program.
      old_archive_cmds='lib -OUT:$oldlib$oldobjs$old_deplibs'
      fix_srcfile_path='`cygpath -w "$srcfile"`'
      enable_shared_with_static_runtimes=yes
      ;;

    darwin* | rhapsody*)
      case $host_os in
        rhapsody* | darwin1.[012])
         allow_undefined_flag='${wl}-undefined ${wl}suppress'
         ;;
       *) # Darwin 1.3 on
         if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
           allow_undefined_flag='${wl}-flat_namespace ${wl}-undefined ${wl}suppress'
         else
           case ${MACOSX_DEPLOYMENT_TARGET} in
             10.[012])
               allow_undefined_flag='${wl}-flat_namespace ${wl}-undefined ${wl}suppress'
               ;;
             10.*)
               allow_undefined_flag='${wl}-undefined ${wl}dynamic_lookup'
               ;;
           esac
         fi
         ;;
      esac
      archive_cmds_need_lc=no
      hardcode_direct=no
      hardcode_automatic=yes
      hardcode_shlibpath_var=unsupported
      whole_archive_flag_spec=''
      link_all_deplibs=yes
    if test "$GCC" = yes ; then
    	output_verbose_link_cmd='echo'
        archive_cmds="\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring $_lt_dar_single_mod${_lt_dsymutil}"
        module_cmds="\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dsymutil}"
        archive_expsym_cmds="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring ${_lt_dar_single_mod}${_lt_dar_export_syms}${_lt_dsymutil}"
        module_expsym_cmds="sed -e 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dar_export_syms}${_lt_dsymutil}"
    else
      case $cc_basename in
        xlc*)
         output_verbose_link_cmd='echo'
         archive_cmds='$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $xlcverstring'
         module_cmds='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
         archive_expsym_cmds='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $xlcverstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          module_expsym_cmds='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          ;;
       *)
         ld_shlibs=no
          ;;
      esac
    fi
      ;;

    dgux*)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_shlibpath_var=no
      ;;

    # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
    # support.  Future versions do this automatically, but an explicit c++rt0.o
    # does not break anything, and helps significantly (at the cost of a little
    # extra space).
    freebsd2.2*)
      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    # Unfortunately, older versions of FreeBSD 2 do not have this feature.
    freebsd2*)
      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
      hardcode_direct=yes
      hardcode_minus_L=yes
      hardcode_shlibpath_var=no
      ;;

    # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
    freebsd* | dragonfly*)
      archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    hpux9*)
      if test "$GCC" = yes; then
	archive_cmds='$rm $output_objdir/$soname~$CC -shared -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $libobjs $deplibs $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      else
	archive_cmds='$rm $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      fi
      hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
      hardcode_libdir_separator=:
      hardcode_direct=yes

      # hardcode_minus_L: Not really in the search PATH,
      # but as the default location of the library.
      hardcode_minus_L=yes
      export_dynamic_flag_spec='${wl}-E'
      ;;

    hpux10*)
      if test "$GCC" = yes -a "$with_gnu_ld" = no; then
	archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
      fi
      if test "$with_gnu_ld" = no; then
	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
	hardcode_libdir_separator=:

	hardcode_direct=yes
	export_dynamic_flag_spec='${wl}-E'

	# hardcode_minus_L: Not really in the search PATH,
	# but as the default location of the library.
	hardcode_minus_L=yes
      fi
      ;;

    hpux11*)
      if test "$GCC" = yes -a "$with_gnu_ld" = no; then
	case $host_cpu in
	hppa*64*)
	  archive_cmds='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	ia64*)
	  archive_cmds='$CC -shared ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	*)
	  archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	esac
      else
	case $host_cpu in
	hppa*64*)
	  archive_cmds='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	ia64*)
	  archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	*)
	  archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
	  ;;
	esac
      fi
      if test "$with_gnu_ld" = no; then
	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
	hardcode_libdir_separator=:

	case $host_cpu in
	hppa*64*|ia64*)
	  hardcode_libdir_flag_spec_ld='+b $libdir'
	  hardcode_direct=no
	  hardcode_shlibpath_var=no
	  ;;
	*)
	  hardcode_direct=yes
	  export_dynamic_flag_spec='${wl}-E'

	  # hardcode_minus_L: Not really in the search PATH,
	  # but as the default location of the library.
	  hardcode_minus_L=yes
	  ;;
	esac
      fi
      ;;

    irix5* | irix6* | nonstopux*)
      if test "$GCC" = yes; then
	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
      else
	archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
	hardcode_libdir_flag_spec_ld='-rpath $libdir'
      fi
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      hardcode_libdir_separator=:
      link_all_deplibs=yes
      ;;

    netbsd*)
      if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
	archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
      else
	archive_cmds='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF
      fi
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_direct=yes
      hardcode_shlibpath_var=no
      ;;

    newsos6)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_direct=yes
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      hardcode_libdir_separator=:
      hardcode_shlibpath_var=no
      ;;

    openbsd*)
      if test -f /usr/libexec/ld.so; then
	hardcode_direct=yes
	hardcode_shlibpath_var=no
	if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
	  archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
	  archive_expsym_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-retain-symbols-file,$export_symbols'
	  hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
	  export_dynamic_flag_spec='${wl}-E'
	else
	  case $host_os in
	   openbsd[01].* | openbsd2.[0-7] | openbsd2.[0-7].*)
	     archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
	     hardcode_libdir_flag_spec='-R$libdir'
	     ;;
	   *)
	     archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
	     hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
	     ;;
	  esac
        fi
      else
	ld_shlibs=no
      fi
      ;;

    os2*)
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_minus_L=yes
      allow_undefined_flag=unsupported
      archive_cmds='$echo "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$echo "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$echo DATA >> $output_objdir/$libname.def~$echo " SINGLE NONSHARED" >> $output_objdir/$libname.def~$echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
      old_archive_From_new_cmds='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'
      ;;

    osf3*)
      if test "$GCC" = yes; then
	allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\*'
	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
      else
	allow_undefined_flag=' -expect_unresolved \*'
	archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
      fi
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      hardcode_libdir_separator=:
      ;;

    osf4* | osf5*)	# as osf3* with the addition of -msym flag
      if test "$GCC" = yes; then
	allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\*'
	archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
	hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
      else
	allow_undefined_flag=' -expect_unresolved \*'
	archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -msym -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
	archive_expsym_cmds='for i in `cat $export_symbols`; do printf "%s %s\\n" -exported_symbol "\$i" >> $lib.exp; done; echo "-hidden">> $lib.exp~
	$LD -shared${allow_undefined_flag} -input $lib.exp $linker_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib~$rm $lib.exp'

	# Both c and cxx compiler support -rpath directly
	hardcode_libdir_flag_spec='-rpath $libdir'
      fi
      hardcode_libdir_separator=:
      ;;

    solaris*)
      no_undefined_flag=' -z text'
      if test "$GCC" = yes; then
	wlarc='${wl}'
	archive_cmds='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
	  $CC -shared ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags~$rm $lib.exp'
      else
	wlarc=''
	archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
	archive_expsym_cmds='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
  	$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
      fi
      hardcode_libdir_flag_spec='-R$libdir'
      hardcode_shlibpath_var=no
      case $host_os in
      solaris2.[0-5] | solaris2.[0-5].*) ;;
      *)
	# The compiler driver will combine and reorder linker options,
	# but understands `-z linker_flag'.  GCC discards it without `$wl',
	# but is careful enough not to reorder.
 	# Supported since Solaris 2.6 (maybe 2.5.1?)
	if test "$GCC" = yes; then
	  whole_archive_flag_spec='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
	else
	  whole_archive_flag_spec='-z allextract$convenience -z defaultextract'
	fi
	;;
      esac
      link_all_deplibs=yes
      ;;

    sunos4*)
      if test "x$host_vendor" = xsequent; then
	# Use $CC to link under sequent, because it throws in some extra .o
	# files that make .init and .fini sections work.
	archive_cmds='$CC -G ${wl}-h $soname -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'
      fi
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_direct=yes
      hardcode_minus_L=yes
      hardcode_shlibpath_var=no
      ;;

    sysv4)
      case $host_vendor in
	sni)
	  archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
	  hardcode_direct=yes # is this really true???
	;;
	siemens)
	  ## LD is ld it makes a PLAMLIB
	  ## CC just makes a GrossModule.
	  archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'
	  reload_cmds='$CC -r -o $output$reload_objs'
	  hardcode_direct=no
        ;;
	motorola)
	  archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
	  hardcode_direct=no #Motorola manual says yes, but my tests say they lie
	;;
      esac
      runpath_var='LD_RUN_PATH'
      hardcode_shlibpath_var=no
      ;;

    sysv4.3*)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_shlibpath_var=no
      export_dynamic_flag_spec='-Bexport'
      ;;

    sysv4*MP*)
      if test -d /usr/nec; then
	archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
	hardcode_shlibpath_var=no
	runpath_var=LD_RUN_PATH
	hardcode_runpath_var=yes
	ld_shlibs=yes
      fi
      ;;

    sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7* | sco3.2v5.0.[024]*)
      no_undefined_flag='${wl}-z,text'
      archive_cmds_need_lc=no
      hardcode_shlibpath_var=no
      runpath_var='LD_RUN_PATH'

      if test "$GCC" = yes; then
	archive_cmds='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
      fi
      ;;

    sysv5* | sco3.2v5* | sco5v6*)
      # Note: We can NOT use -z defs as we might desire, because we do not
      # link with -lc, and that would cause any symbols used from libc to
      # always be unresolved, which means just about no library would
      # ever link correctly.  If we're not using GNU ld we use -z text
      # though, which does catch some bad symbols but isn't as heavy-handed
      # as -z defs.
      no_undefined_flag='${wl}-z,text'
      allow_undefined_flag='${wl}-z,nodefs'
      archive_cmds_need_lc=no
      hardcode_shlibpath_var=no
      hardcode_libdir_flag_spec='`test -z "$SCOABSPATH" && echo ${wl}-R,$libdir`'
      hardcode_libdir_separator=':'
      link_all_deplibs=yes
      export_dynamic_flag_spec='${wl}-Bexport'
      runpath_var='LD_RUN_PATH'

      if test "$GCC" = yes; then
	archive_cmds='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
      else
	archive_cmds='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
      fi
      ;;

    uts4*)
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_libdir_flag_spec='-L$libdir'
      hardcode_shlibpath_var=no
      ;;

    *)
      ld_shlibs=no
      ;;
    esac
  fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs" >&5
$as_echo "$ld_shlibs" >&6; }
test "$ld_shlibs" = no && can_build_shared=no

#
# Do we need to explicitly link libc?
#
case "x$archive_cmds_need_lc" in
x|xyes)
  # Assume -lc should be added
  archive_cmds_need_lc=yes

  if test "$enable_shared" = yes && test "$GCC" = yes; then
    case $archive_cmds in
    *'~'*)
      # FIXME: we may have to deal with multi-command sequences.
      ;;
    '$CC '*)
      # Test whether the compiler implicitly links with -lc since on some
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
$as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
      $rm conftest*
      echo "$lt_simple_compile_test_code" > conftest.$ac_ext

      if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } 2>conftest.err; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
        deplibs=
        wl=$lt_prog_compiler_wl
	pic_flag=$lt_prog_compiler_pic
        compiler_flags=-v
        linker_flags=-v
        verstring=
        output_objdir=.
        libname=conftest
        lt_save_allow_undefined_flag=$allow_undefined_flag
        allow_undefined_flag=
        if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\""; } >&5
  (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }
        then
	  archive_cmds_need_lc=no
        else
	  archive_cmds_need_lc=yes
        fi
        allow_undefined_flag=$lt_save_allow_undefined_flag
      else
        cat conftest.err 1>&5
      fi
      $rm conftest*
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc" >&5
$as_echo "$archive_cmds_need_lc" >&6; }
      ;;
    esac
  fi
  ;;
esac

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
$as_echo_n "checking dynamic linker characteristics... " >&6; }
library_names_spec=
libname_spec='lib$name'
soname_spec=
shrext_cmds=".so"
postinstall_cmds=
postuninstall_cmds=
finish_cmds=
finish_eval=
shlibpath_var=
shlibpath_overrides_runpath=unknown
version_type=none
dynamic_linker="$host_os ld.so"
sys_lib_dlsearch_path_spec="/lib /usr/lib"

if test "$GCC" = yes; then
  case $host_os in
    darwin*) lt_awk_arg="/^libraries:/,/LR/" ;;
    *) lt_awk_arg="/^libraries:/" ;;
  esac
  lt_search_path_spec=`$CC -print-search-dirs | awk $lt_awk_arg | $SED -e "s/^libraries://" -e "s,=/,/,g"`
  if echo "$lt_search_path_spec" | grep ';' >/dev/null ; then
    # if the path contains ";" then we assume it to be the separator
    # otherwise default to the standard path separator (i.e. ":") - it is
    # assumed that no part of a normal pathname contains ";" but that should
    # okay in the real world where ";" in dirpaths is itself problematic.
    lt_search_path_spec=`echo "$lt_search_path_spec" | $SED -e 's/;/ /g'`
  else
    lt_search_path_spec=`echo "$lt_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
  fi
  # Ok, now we have the path, separated by spaces, we can step through it
  # and add multilib dir if necessary.
  lt_tmp_lt_search_path_spec=
  lt_multi_os_dir=`$CC $CPPFLAGS $CFLAGS $LDFLAGS -print-multi-os-directory 2>/dev/null`
  for lt_sys_path in $lt_search_path_spec; do
    if test -d "$lt_sys_path/$lt_multi_os_dir"; then
      lt_tmp_lt_search_path_spec="$lt_tmp_lt_search_path_spec $lt_sys_path/$lt_multi_os_dir"
    else
      test -d "$lt_sys_path" && \
	lt_tmp_lt_search_path_spec="$lt_tmp_lt_search_path_spec $lt_sys_path"
    fi
  done
  lt_search_path_spec=`echo $lt_tmp_lt_search_path_spec | awk '
BEGIN {RS=" "; FS="/|\n";} {
  lt_foo="";
  lt_count=0;
  for (lt_i = NF; lt_i > 0; lt_i--) {
    if ($lt_i != "" && $lt_i != ".") {
      if ($lt_i == "..") {
        lt_count++;
      } else {
        if (lt_count == 0) {
          lt_foo="/" $lt_i lt_foo;
        } else {
          lt_count--;
        }
      }
    }
  }
  if (lt_foo != "") { lt_freq[lt_foo]++; }
  if (lt_freq[lt_foo] == 1) { print lt_foo; }
}'`
  sys_lib_search_path_spec=`echo $lt_search_path_spec`
else
  sys_lib_search_path_spec="/lib /usr/lib /usr/local/lib"
fi
need_lib_prefix=unknown
hardcode_into_libs=no

# when you set need_version to no, make sure it does not cause -set_version
# flags to be left without arguments
need_version=unknown

case $host_os in
aix3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
  shlibpath_var=LIBPATH

  # AIX 3 has no versioning support, so we append a major version to the name.
  soname_spec='${libname}${release}${shared_ext}$major'
  ;;

aix[4-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  hardcode_into_libs=yes
  if test "$host_cpu" = ia64; then
    # AIX 5 supports IA64
    library_names_spec='${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext}$versuffix $libname${shared_ext}'
    shlibpath_var=LD_LIBRARY_PATH
  else
    # With GCC up to 2.95.x, collect2 would create an import file
    # for dependence libraries.  The import file would start with
    # the line `#! .'.  This would cause the generated library to
    # depend on `.', always an invalid library.  This was fixed in
    # development snapshots of GCC prior to 3.0.
    case $host_os in
      aix4 | aix4.[01] | aix4.[01].*)
      if { echo '#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 97)'
	   echo ' yes '
	   echo '#endif'; } | ${CC} -E - | grep yes > /dev/null; then
	:
      else
	can_build_shared=no
      fi
      ;;
    esac
    # AIX (on Power*) has no versioning support, so currently we can not hardcode correct
    # soname into executable. Probably we can add versioning support to
    # collect2, so additional links can be useful in future.
    if test "$aix_use_runtimelinking" = yes; then
      # If using run time linking (on AIX 4.2 or later) use lib<name>.so
      # instead of lib<name>.a to let people know that these are not
      # typical AIX shared libraries.
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    else
      # We preserve .a as extension for shared libraries through AIX4.2
      # and later when we are not doing run time linking.
      library_names_spec='${libname}${release}.a $libname.a'
      soname_spec='${libname}${release}${shared_ext}$major'
    fi
    shlibpath_var=LIBPATH
  fi
  ;;

amigaos*)
  library_names_spec='$libname.ixlibrary $libname.a'
  # Create ${libname}_ixlibrary.a entries in /sys/libs.
  finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$echo "X$lib" | $Xsed -e '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
  ;;

beos*)
  library_names_spec='${libname}${shared_ext}'
  dynamic_linker="$host_os ld.so"
  shlibpath_var=LIBRARY_PATH
  ;;

bsdi[45]*)
  version_type=linux
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
  sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
  # the default ld.so.conf also contains /usr/contrib/lib and
  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
  # libtool to hard-code these into programs
  ;;

cygwin* | mingw* | pw32*)
  version_type=windows
  shrext_cmds=".dll"
  need_version=no
  need_lib_prefix=no

  case $GCC,$host_os in
  yes,cygwin* | yes,mingw* | yes,pw32*)
    library_names_spec='$libname.dll.a'
    # DLL is installed to $(libdir)/../bin by postinstall_cmds
    postinstall_cmds='base_file=`basename \${file}`~
      dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
      dldir=$destdir/`dirname \$dlpath`~
      test -d \$dldir || mkdir -p \$dldir~
      $install_prog $dir/$dlname \$dldir/$dlname~
      chmod a+x \$dldir/$dlname'
    postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
      dlpath=$dir/\$dldll~
       $rm \$dlpath'
    shlibpath_overrides_runpath=yes

    case $host_os in
    cygwin*)
      # Cygwin DLLs use 'cyg' prefix rather than 'lib'
      soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
      ;;
    mingw*)
      # MinGW DLLs use traditional 'lib' prefix
      soname_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec=`$CC -print-search-dirs | grep "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
      if echo "$sys_lib_search_path_spec" | grep ';[c-zC-Z]:/' >/dev/null; then
        # It is most probably a Windows format PATH printed by
        # mingw gcc, but we are running on Cygwin. Gcc prints its search
        # path with ; separators, and with drive letters. We can handle the
        # drive letters (cygwin fileutils understands them), so leave them,
        # especially as we might pass files found there to a mingw objdump,
        # which wouldn't understand a cygwinified path. Ahh.
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED -e 's/;/ /g'`
      else
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
      fi
      ;;
    pw32*)
      # pw32 DLLs use 'pw' prefix rather than 'lib'
      library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      ;;
    esac
    ;;

  *)
    library_names_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext} $libname.lib'
    ;;
  esac
  dynamic_linker='Win32 ld.exe'
  # FIXME: first we should search . and the directory the executable is in
  shlibpath_var=PATH
  ;;

darwin* | rhapsody*)
  dynamic_linker="$host_os dyld"
  version_type=darwin
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${versuffix}$shared_ext ${libname}${release}${major}$shared_ext ${libname}$shared_ext'
  soname_spec='${libname}${release}${major}$shared_ext'
  shlibpath_overrides_runpath=yes
  shlibpath_var=DYLD_LIBRARY_PATH
  shrext_cmds='`test .$module = .yes && echo .so || echo .dylib`'

  sys_lib_search_path_spec="$sys_lib_search_path_spec /usr/local/lib"
  sys_lib_dlsearch_path_spec='/usr/local/lib /lib /usr/lib'
  ;;

dgux*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

freebsd* | dragonfly*)
  # DragonFly does not have aout.  When/if they implement a new
  # versioning mechanism, adjust this.
  if test -x /usr/bin/objformat; then
    objformat=`/usr/bin/objformat`
  else
    case $host_os in
    freebsd[123]*) objformat=aout ;;
    *) objformat=elf ;;
    esac
  fi
  version_type=freebsd-$objformat
  case $version_type in
    freebsd-elf*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
      need_version=no
      need_lib_prefix=no
      ;;
    freebsd-*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
      need_version=yes
      ;;
  esac
  shlibpath_var=LD_LIBRARY_PATH
  case $host_os in
  freebsd2*)
    shlibpath_overrides_runpath=yes
    ;;
  freebsd3.[01]* | freebsdelf3.[01]*)
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
    shlibpath_overrides_runpath=no
    hardcode_into_libs=yes
    ;;
  *) # from 4.6 on, and DragonFly
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  esac
  ;;

gnu*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  ;;

hpux9* | hpux10* | hpux11*)
  # Give a soname corresponding to the major version so that dld.sl refuses to
  # link against other versions.
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  case $host_cpu in
  ia64*)
    shrext_cmds='.so'
    hardcode_into_libs=yes
    dynamic_linker="$host_os dld.so"
    shlibpath_var=LD_LIBRARY_PATH
    shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    if test "X$HPUX_IA64_MODE" = X32; then
      sys_lib_search_path_spec="/usr/lib/hpux32 /usr/local/lib/hpux32 /usr/local/lib"
    else
      sys_lib_search_path_spec="/usr/lib/hpux64 /usr/local/lib/hpux64"
    fi
    sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
    ;;
   hppa*64*)
     shrext_cmds='.sl'
     hardcode_into_libs=yes
     dynamic_linker="$host_os dld.sl"
     shlibpath_var=LD_LIBRARY_PATH # How should we handle SHLIB_PATH
     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
     soname_spec='${libname}${release}${shared_ext}$major'
     sys_lib_search_path_spec="/usr/lib/pa20_64 /usr/ccs/lib/pa20_64"
     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
     ;;
   *)
    shrext_cmds='.sl'
    dynamic_linker="$host_os dld.sl"
    shlibpath_var=SHLIB_PATH
    shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    ;;
  esac
  # HP-UX runs *really* slowly unless shared libraries are mode 555.
  postinstall_cmds='chmod 555 $lib'
  ;;

interix[3-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  hardcode_into_libs=yes
  ;;

irix5* | irix6* | nonstopux*)
  case $host_os in
    nonstopux*) version_type=nonstopux ;;
    *)
	if test "$lt_cv_prog_gnu_ld" = yes; then
		version_type=linux
	else
		version_type=irix
	fi ;;
  esac
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} $libname${shared_ext}'
  case $host_os in
  irix5* | nonstopux*)
    libsuff= shlibsuff=
    ;;
  *)
    case $LD in # libtool.m4 will add one of these switches to LD
    *-32|*"-32 "|*-melf32bsmip|*"-melf32bsmip ")
      libsuff= shlibsuff= libmagic=32-bit;;
    *-n32|*"-n32 "|*-melf32bmipn32|*"-melf32bmipn32 ")
      libsuff=32 shlibsuff=N32 libmagic=N32;;
    *-64|*"-64 "|*-melf64bmip|*"-melf64bmip ")
      libsuff=64 shlibsuff=64 libmagic=64-bit;;
    *) libsuff= shlibsuff= libmagic=never-match;;
    esac
    ;;
  esac
  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
  shlibpath_overrides_runpath=no
  sys_lib_search_path_spec="/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}"
  sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
  hardcode_into_libs=yes
  ;;

# No shared lib support for Linux oldld, aout, or coff.
linux*oldld* | linux*aout* | linux*coff*)
  dynamic_linker=no
  ;;

# This must be Linux ELF.
linux* | k*bsd*-gnu)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -n $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  # This implies no fast_install, which is unacceptable.
  # Some rework will be needed to allow for fast_install
  # before this can be enabled.
  hardcode_into_libs=yes

  # Append ld.so.conf contents to the search path
  if test -f /etc/ld.so.conf; then
    lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \$2)); skip = 1; } { if (!skip) print \$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[ 	]*hwcap[ 	]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
    sys_lib_dlsearch_path_spec="/lib /usr/lib $lt_ld_extra"
  fi

  # We used to test for /lib/ld.so.1 and disable shared libraries on
  # powerpc, because MkLinux only supported shared libraries with the
  # GNU dynamic linker.  Since this was broken with cross compilers,
  # most powerpc-linux boxes support dynamic linking these days and
  # people can always --disable-shared, the test was removed, and we
  # assume the GNU/Linux dynamic linker is in use.
  dynamic_linker='GNU/Linux ld.so'
  ;;

netbsd*)
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
    finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
    dynamic_linker='NetBSD (a.out) ld.so'
  else
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    dynamic_linker='NetBSD ld.elf_so'
  fi
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  ;;

newsos6)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

nto-qnx*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

openbsd*)
  version_type=sunos
  sys_lib_dlsearch_path_spec="/usr/lib"
  need_lib_prefix=no
  # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
  case $host_os in
    openbsd3.3 | openbsd3.3.*) need_version=yes ;;
    *)                         need_version=no  ;;
  esac
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    case $host_os in
      openbsd2.[89] | openbsd2.[89].*)
	shlibpath_overrides_runpath=no
	;;
      *)
	shlibpath_overrides_runpath=yes
	;;
      esac
  else
    shlibpath_overrides_runpath=yes
  fi
  ;;

os2*)
  libname_spec='$name'
  shrext_cmds=".dll"
  need_lib_prefix=no
  library_names_spec='$libname${shared_ext} $libname.a'
  dynamic_linker='OS/2 ld.exe'
  shlibpath_var=LIBPATH
  ;;

osf3* | osf4* | osf5*)
  version_type=osf
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
  sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
  ;;

rdos*)
  dynamic_linker=no
  ;;

solaris*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  # ldd complains unless libraries are executable
  postinstall_cmds='chmod +x $lib'
  ;;

sunos4*)
  version_type=sunos
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/usr/etc" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  if test "$with_gnu_ld" = yes; then
    need_lib_prefix=no
  fi
  need_version=yes
  ;;

sysv4 | sysv4.3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  case $host_vendor in
    sni)
      shlibpath_overrides_runpath=no
      need_lib_prefix=no
      export_dynamic_flag_spec='${wl}-Blargedynsym'
      runpath_var=LD_RUN_PATH
      ;;
    siemens)
      need_lib_prefix=no
      ;;
    motorola)
      need_lib_prefix=no
      need_version=no
      shlibpath_overrides_runpath=no
      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
      ;;
  esac
  ;;

sysv4*MP*)
  if test -d /usr/nec ;then
    version_type=linux
    library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
    soname_spec='$libname${shared_ext}.$major'
    shlibpath_var=LD_LIBRARY_PATH
  fi
  ;;

sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
  version_type=freebsd-elf
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  if test "$with_gnu_ld" = yes; then
    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
    shlibpath_overrides_runpath=no
  else
    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
    shlibpath_overrides_runpath=yes
    case $host_os in
      sco3.2v5*)
        sys_lib_search_path_spec="$sys_lib_search_path_spec /lib"
	;;
    esac
  fi
  sys_lib_dlsearch_path_spec='/usr/lib'
  ;;

uts4*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*)
  dynamic_linker=no
  ;;
esac
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
$as_echo "$dynamic_linker" >&6; }
test "$dynamic_linker" = no && can_build_shared=no

if ${lt_cv_sys_lib_search_path_spec+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
fi

sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
if ${lt_cv_sys_lib_dlsearch_path_spec+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
fi

sys_lib_dlsearch_path_spec="$lt_cv_sys_lib_dlsearch_path_spec"

variables_saved_for_relink="PATH $shlibpath_var $runpath_var"
if test "$GCC" = yes; then
  variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
$as_echo_n "checking how to hardcode library paths into programs... " >&6; }
hardcode_action=
if test -n "$hardcode_libdir_flag_spec" || \
   test -n "$runpath_var" || \
   test "X$hardcode_automatic" = "Xyes" ; then

  # We can hardcode non-existent directories.
  if test "$hardcode_direct" != no &&
     # If the only mechanism to avoid hardcoding is shlibpath_var, we
     # have to relink, otherwise we might link with an installed library
     # when we should be linking with a yet-to-be-installed one
     ## test "$_LT_AC_TAGVAR(hardcode_shlibpath_var, )" != no &&
     test "$hardcode_minus_L" != no; then
    # Linking always hardcodes the temporary library directory.
    hardcode_action=relink
  else
    # We can link without hardcoding, and we can hardcode nonexisting dirs.
    hardcode_action=immediate
  fi
else
  # We cannot hardcode anything, or else we can only hardcode existing
  # directories.
  hardcode_action=unsupported
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action" >&5
$as_echo "$hardcode_action" >&6; }

if test "$hardcode_action" = relink; then
  # Fast installation is not supported
  enable_fast_install=no
elif test "$shlibpath_overrides_runpath" = yes ||
     test "$enable_shared" = no; then
  # Fast installation is not necessary
  enable_fast_install=needless
fi

striplib=
old_striplib=
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether stripping libraries is possible" >&5
$as_echo_n "checking whether stripping libraries is possible... " >&6; }
if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
  test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
  test -z "$striplib" && striplib="$STRIP --strip-unneeded"
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
else
# FIXME - insert some real tests, host_os isn't really good enough
  case $host_os in
   darwin*)
       if test -n "$STRIP" ; then
         striplib="$STRIP -x"
         old_striplib="$STRIP -S"
         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
$as_echo "yes" >&6; }
       else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi
       ;;
   *)
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
    ;;
  esac
fi

if test "x$enable_dlopen" != xyes; then
  enable_dlopen=unknown
  enable_dlopen_self=unknown
  enable_dlopen_self_static=unknown
else
  lt_cv_dlopen=no
  lt_cv_dlopen_libs=

  case $host_os in
  beos*)
    lt_cv_dlopen="load_add_on"
    lt_cv_dlopen_libs=
    lt_cv_dlopen_self=yes
    ;;

  mingw* | pw32*)
    lt_cv_dlopen="LoadLibrary"
    lt_cv_dlopen_libs=
   ;;

  cygwin*)
    lt_cv_dlopen="dlopen"
    lt_cv_dlopen_libs=
   ;;

  darwin*)
  # if libdl is installed we need to link against it
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
$as_echo_n "checking for dlopen in -ldl... " >&6; }
if ${ac_cv_lib_dl_dlopen+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dlopen ();
int
main ()
{
return dlopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dl_dlopen=yes
else
  ac_cv_lib_dl_dlopen=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
$as_echo "$ac_cv_lib_dl_dlopen" >&6; }
if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
else

    lt_cv_dlopen="dyld"
    lt_cv_dlopen_libs=
    lt_cv_dlopen_self=yes

fi

   ;;

  *)
    ac_fn_c_check_func "$LINENO" "shl_load" "ac_cv_func_shl_load"
if test "x$ac_cv_func_shl_load" = xyes; then :
  lt_cv_dlopen="shl_load"
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shl_load in -ldld" >&5
$as_echo_n "checking for shl_load in -ldld... " >&6; }
if ${ac_cv_lib_dld_shl_load+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldld  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char shl_load ();
int
main ()
{
return shl_load ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dld_shl_load=yes
else
  ac_cv_lib_dld_shl_load=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_shl_load" >&5
$as_echo "$ac_cv_lib_dld_shl_load" >&6; }
if test "x$ac_cv_lib_dld_shl_load" = xyes; then :
  lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
else
  ac_fn_c_check_func "$LINENO" "dlopen" "ac_cv_func_dlopen"
if test "x$ac_cv_func_dlopen" = xyes; then :
  lt_cv_dlopen="dlopen"
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
$as_echo_n "checking for dlopen in -ldl... " >&6; }
if ${ac_cv_lib_dl_dlopen+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldl  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dlopen ();
int
main ()
{
return dlopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dl_dlopen=yes
else
  ac_cv_lib_dl_dlopen=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
$as_echo "$ac_cv_lib_dl_dlopen" >&6; }
if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -lsvld" >&5
$as_echo_n "checking for dlopen in -lsvld... " >&6; }
if ${ac_cv_lib_svld_dlopen+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-lsvld  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dlopen ();
int
main ()
{
return dlopen ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_svld_dlopen=yes
else
  ac_cv_lib_svld_dlopen=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_svld_dlopen" >&5
$as_echo "$ac_cv_lib_svld_dlopen" >&6; }
if test "x$ac_cv_lib_svld_dlopen" = xyes; then :
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dld_link in -ldld" >&5
$as_echo_n "checking for dld_link in -ldld... " >&6; }
if ${ac_cv_lib_dld_dld_link+:} false; then :
  $as_echo_n "(cached) " >&6
else
  ac_check_lib_save_LIBS=$LIBS
LIBS="-ldld  $LIBS"
cat confdefs.h - <<_ACEOF >conftest.$ac_ext
/* end confdefs.h.  */

/* Override any GCC internal prototype to avoid an error.
   Use char because int might match the return type of a GCC
   builtin and then its argument prototype would still apply.  */
#ifdef __cplusplus
extern "C"
#endif
char dld_link ();
int
main ()
{
return dld_link ();
  ;
  return 0;
}
_ACEOF
if ac_fn_c_try_link "$LINENO"; then :
  ac_cv_lib_dld_dld_link=yes
else
  ac_cv_lib_dld_dld_link=no
fi
rm -f core conftest.err conftest.$ac_objext \
    conftest$ac_exeext conftest.$ac_ext
LIBS=$ac_check_lib_save_LIBS
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_dld_link" >&5
$as_echo "$ac_cv_lib_dld_dld_link" >&6; }
if test "x$ac_cv_lib_dld_dld_link" = xyes; then :
  lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
fi


fi


fi


fi


fi


fi

    ;;
  esac

  if test "x$lt_cv_dlopen" != xno; then
    enable_dlopen=yes
  else
    enable_dlopen=no
  fi

  case $lt_cv_dlopen in
  dlopen)
    save_CPPFLAGS="$CPPFLAGS"
    test "x$ac_cv_header_dlfcn_h" = xyes && CPPFLAGS="$CPPFLAGS -DHAVE_DLFCN_H"

    save_LDFLAGS="$LDFLAGS"
    wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"

    save_LIBS="$LIBS"
    LIBS="$lt_cv_dlopen_libs $LIBS"

    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a program can dlopen itself" >&5
$as_echo_n "checking whether a program can dlopen itself... " >&6; }
if ${lt_cv_dlopen_self+:} false; then :
  $as_echo_n "(cached) " >&6
else
  	  if test "$cross_compiling" = yes; then :
  lt_cv_dlopen_self=cross
else
  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 109308 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }
  else
    puts (dlerror ());

    exit (status);
}
EOF
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) >&5 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
      x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
      x$lt_dlunknown|x*) lt_cv_dlopen_self=no ;;
    esac
  else :
    # compilation failed
    lt_cv_dlopen_self=no
  fi
fi
rm -fr conftest*


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self" >&5
$as_echo "$lt_cv_dlopen_self" >&6; }

    if test "x$lt_cv_dlopen_self" = xyes; then
      wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a statically linked program can dlopen itself" >&5
$as_echo_n "checking whether a statically linked program can dlopen itself... " >&6; }
if ${lt_cv_dlopen_self_static+:} false; then :
  $as_echo_n "(cached) " >&6
else
  	  if test "$cross_compiling" = yes; then :
  lt_cv_dlopen_self_static=cross
else
  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 109408 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }
  else
    puts (dlerror ());

    exit (status);
}
EOF
  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) >&5 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
      x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
      x$lt_dlunknown|x*) lt_cv_dlopen_self_static=no ;;
    esac
  else :
    # compilation failed
    lt_cv_dlopen_self_static=no
  fi
fi
rm -fr conftest*


fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self_static" >&5
$as_echo "$lt_cv_dlopen_self_static" >&6; }
    fi

    CPPFLAGS="$save_CPPFLAGS"
    LDFLAGS="$save_LDFLAGS"
    LIBS="$save_LIBS"
    ;;
  esac

  case $lt_cv_dlopen_self in
  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
  *) enable_dlopen_self=unknown ;;
  esac

  case $lt_cv_dlopen_self_static in
  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
  *) enable_dlopen_self_static=unknown ;;
  esac
fi


# Report which library types will actually be built
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if libtool supports shared libraries" >&5
$as_echo_n "checking if libtool supports shared libraries... " >&6; }
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $can_build_shared" >&5
$as_echo "$can_build_shared" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build shared libraries" >&5
$as_echo_n "checking whether to build shared libraries... " >&6; }
test "$can_build_shared" = "no" && enable_shared=no

# On AIX, shared libraries and static libraries use the same namespace, and
# are all built from PIC.
case $host_os in
aix3*)
  test "$enable_shared" = yes && enable_static=no
  if test -n "$RANLIB"; then
    archive_cmds="$archive_cmds~\$RANLIB \$lib"
    postinstall_cmds='$RANLIB $lib'
  fi
  ;;

aix[4-9]*)
  if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
    test "$enable_shared" = yes && enable_static=no
  fi
    ;;
esac
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_shared" >&5
$as_echo "$enable_shared" >&6; }

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build static libraries" >&5
$as_echo_n "checking whether to build static libraries... " >&6; }
# Make sure either enable_shared or enable_static is yes.
test "$enable_shared" = yes || enable_static=yes
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_static" >&5
$as_echo "$enable_static" >&6; }

# The else clause should only fire when bootstrapping the
# libtool distribution, otherwise you forgot to ship ltmain.sh
# with your package, and you will get complaints that there are
# no rules to generate ltmain.sh.
if test -f "$ltmain"; then
  # See if we are running on zsh, and set the options which allow our commands through
  # without removal of \ escapes.
  if test -n "${ZSH_VERSION+set}" ; then
    setopt NO_GLOB_SUBST
  fi
  # Now quote all the things that may contain metacharacters while being
  # careful not to overquote the AC_SUBSTed values.  We take copies of the
  # variables and quote the copies for generation of the libtool script.
  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
    SED SHELL STRIP \
    libname_spec library_names_spec soname_spec extract_expsyms_cmds \
    old_striplib striplib file_magic_cmd finish_cmds finish_eval \
    deplibs_check_method reload_flag reload_cmds need_locks \
    lt_cv_sys_global_symbol_pipe lt_cv_sys_global_symbol_to_cdecl \
    lt_cv_sys_global_symbol_to_c_name_address \
    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \
    old_postinstall_cmds old_postuninstall_cmds \
    compiler \
    CC \
    LD \
    lt_prog_compiler_wl \
    lt_prog_compiler_pic \
    lt_prog_compiler_static \
    lt_prog_compiler_no_builtin_flag \
    export_dynamic_flag_spec \
    thread_safe_flag_spec \
    whole_archive_flag_spec \
    enable_shared_with_static_runtimes \
    old_archive_cmds \
    old_archive_from_new_cmds \
    predep_objects \
    postdep_objects \
    predeps \
    postdeps \
    compiler_lib_search_path \
    compiler_lib_search_dirs \
    archive_cmds \
    archive_expsym_cmds \
    postinstall_cmds \
    postuninstall_cmds \
    old_archive_from_expsyms_cmds \
    allow_undefined_flag \
    no_undefined_flag \
    export_symbols_cmds \
    hardcode_libdir_flag_spec \
    hardcode_libdir_flag_spec_ld \
    hardcode_libdir_separator \
    hardcode_automatic \
    module_cmds \
    module_expsym_cmds \
    lt_cv_prog_compiler_c_o \
    fix_srcfile_path \
    exclude_expsyms \
    include_expsyms; do

    case $var in
    old_archive_cmds | \
    old_archive_from_new_cmds | \
    archive_cmds | \
    archive_expsym_cmds | \
    module_cmds | \
    module_expsym_cmds | \
    old_archive_from_expsyms_cmds | \
    export_symbols_cmds | \
    extract_expsyms_cmds | reload_cmds | finish_cmds | \
    postinstall_cmds | postuninstall_cmds | \
    old_postinstall_cmds | old_postuninstall_cmds | \
    sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)
      # Double-quote double-evaled strings.
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$double_quote_subst\" -e \"\$sed_quote_subst\" -e \"\$delay_variable_subst\"\`\\\""
      ;;
    *)
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$sed_quote_subst\"\`\\\""
      ;;
    esac
  done

  case $lt_echo in
  *'\$0 --fallback-echo"')
    lt_echo=`$echo "X$lt_echo" | $Xsed -e 's/\\\\\\\$0 --fallback-echo"$/$0 --fallback-echo"/'`
    ;;
  esac

cfgfile="${ofile}T"
  trap "$rm \"$cfgfile\"; exit 1" 1 2 15
  $rm -f "$cfgfile"
  { $as_echo "$as_me:${as_lineno-$LINENO}: result:
creating $ofile" >&5
$as_echo "
creating $ofile" >&6; }

  cat <<__EOF__ >> "$cfgfile"
#! $SHELL

# `$echo "$cfgfile" | sed 's%^.*/%%'` - Provide generalized library-building support services.
# Generated automatically by $PROGRAM (GNU $PACKAGE $VERSION$TIMESTAMP)
# NOTE: Changes made to this file will be lost: look at ltmain.sh.
#
# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008
# Free Software Foundation, Inc.
#
# This file is part of GNU Libtool:
# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
#
# As a special exception to the GNU General Public License, if you
# distribute this file as part of a program that contains a
# configuration script generated by Autoconf, you may include it under
# the same distribution terms that you use for the rest of that program.

# A sed program that does not truncate output.
SED=$lt_SED

# Sed that helps us avoid accidentally triggering echo(1) options like -n.
Xsed="$SED -e 1s/^X//"

# The HP-UX ksh and POSIX shell print the target directory to stdout
# if CDPATH is set.
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH

# The names of the tagged configurations supported by this script.
available_tags=

# ### BEGIN LIBTOOL CONFIG

# Libtool was configured on host `(hostname || uname -n) 2>/dev/null | sed 1q`:

# Shell to use when invoking shell scripts.
SHELL=$lt_SHELL

# Whether or not to build shared libraries.
build_libtool_libs=$enable_shared

# Whether or not to build static libraries.
build_old_libs=$enable_static

# Whether or not to add -lc for building shared libraries.
build_libtool_need_lc=$archive_cmds_need_lc

# Whether or not to disallow shared libs when runtime libs are static
allow_libtool_libs_with_static_runtimes=$enable_shared_with_static_runtimes

# Whether or not to optimize for fast installation.
fast_install=$enable_fast_install

# The host system.
host_alias=$host_alias
host=$host
host_os=$host_os

# The build system.
build_alias=$build_alias
build=$build
build_os=$build_os

# An echo program that does not interpret backslashes.
echo=$lt_echo

# The archiver.
AR=$lt_AR
AR_FLAGS=$lt_AR_FLAGS

# A C compiler.
LTCC=$lt_LTCC

# LTCC compiler flags.
LTCFLAGS=$lt_LTCFLAGS

# A language-specific compiler.
CC=$lt_compiler

# Is the compiler the GNU C compiler?
with_gcc=$GCC

# An ERE matcher.
EGREP=$lt_EGREP

# The linker used to build libraries.
LD=$lt_LD

# Whether we need hard or soft links.
LN_S=$lt_LN_S

# A BSD-compatible nm program.
NM=$lt_NM

# A symbol stripping program
STRIP=$lt_STRIP

# Used to examine libraries when file_magic_cmd begins "file"
MAGIC_CMD=$MAGIC_CMD

# Used on cygwin: DLL creation program.
DLLTOOL="$DLLTOOL"

# Used on cygwin: object dumper.
OBJDUMP="$OBJDUMP"

# Used on cygwin: assembler.
AS="$AS"

# The name of the directory that contains temporary libtool files.
objdir=$objdir

# How to create reloadable object files.
reload_flag=$lt_reload_flag
reload_cmds=$lt_reload_cmds

# How to pass a linker flag through the compiler.
wl=$lt_lt_prog_compiler_wl

# Object file suffix (normally "o").
objext="$ac_objext"

# Old archive suffix (normally "a").
libext="$libext"

# Shared library suffix (normally ".so").
shrext_cmds='$shrext_cmds'

# Executable file suffix (normally "").
exeext="$exeext"

# Additional compiler flags for building library objects.
pic_flag=$lt_lt_prog_compiler_pic
pic_mode=$pic_mode

# What is the maximum length of a command?
max_cmd_len=$lt_cv_sys_max_cmd_len

# Does compiler simultaneously support -c and -o options?
compiler_c_o=$lt_lt_cv_prog_compiler_c_o

# Must we lock files when doing compilation?
need_locks=$lt_need_locks

# Do we need the lib prefix for modules?
need_lib_prefix=$need_lib_prefix

# Do we need a version for libraries?
need_version=$need_version

# Whether dlopen is supported.
dlopen_support=$enable_dlopen

# Whether dlopen of programs is supported.
dlopen_self=$enable_dlopen_self

# Whether dlopen of statically linked programs is supported.
dlopen_self_static=$enable_dlopen_self_static

# Compiler flag to prevent dynamic linking.
link_static_flag=$lt_lt_prog_compiler_static

# Compiler flag to turn off builtin functions.
no_builtin_flag=$lt_lt_prog_compiler_no_builtin_flag

# Compiler flag to allow reflexive dlopens.
export_dynamic_flag_spec=$lt_export_dynamic_flag_spec

# Compiler flag to generate shared objects directly from archives.
whole_archive_flag_spec=$lt_whole_archive_flag_spec

# Compiler flag to generate thread-safe objects.
thread_safe_flag_spec=$lt_thread_safe_flag_spec

# Library versioning type.
version_type=$version_type

# Format of library name prefix.
libname_spec=$lt_libname_spec

# List of archive names.  First name is the real one, the rest are links.
# The last name is the one that the linker finds with -lNAME.
library_names_spec=$lt_library_names_spec

# The coded name of the library, if different from the real name.
soname_spec=$lt_soname_spec

# Commands used to build and install an old-style archive.
RANLIB=$lt_RANLIB
old_archive_cmds=$lt_old_archive_cmds
old_postinstall_cmds=$lt_old_postinstall_cmds
old_postuninstall_cmds=$lt_old_postuninstall_cmds

# Create an old-style archive from a shared archive.
old_archive_from_new_cmds=$lt_old_archive_from_new_cmds

# Create a temporary old-style archive to link instead of a shared archive.
old_archive_from_expsyms_cmds=$lt_old_archive_from_expsyms_cmds

# Commands used to build and install a shared archive.
archive_cmds=$lt_archive_cmds
archive_expsym_cmds=$lt_archive_expsym_cmds
postinstall_cmds=$lt_postinstall_cmds
postuninstall_cmds=$lt_postuninstall_cmds

# Commands used to build a loadable module (assumed same as above if empty)
module_cmds=$lt_module_cmds
module_expsym_cmds=$lt_module_expsym_cmds

# Commands to strip libraries.
old_striplib=$lt_old_striplib
striplib=$lt_striplib

# Dependencies to place before the objects being linked to create a
# shared library.
predep_objects=$lt_predep_objects

# Dependencies to place after the objects being linked to create a
# shared library.
postdep_objects=$lt_postdep_objects

# Dependencies to place before the objects being linked to create a
# shared library.
predeps=$lt_predeps

# Dependencies to place after the objects being linked to create a
# shared library.
postdeps=$lt_postdeps

# The directories searched by this compiler when creating a shared
# library
compiler_lib_search_dirs=$lt_compiler_lib_search_dirs

# The library search path used internally by the compiler when linking
# a shared library.
compiler_lib_search_path=$lt_compiler_lib_search_path

# Method to check whether dependent libraries are shared objects.
deplibs_check_method=$lt_deplibs_check_method

# Command to use when deplibs_check_method == file_magic.
file_magic_cmd=$lt_file_magic_cmd

# Flag that allows shared libraries with undefined symbols to be built.
allow_undefined_flag=$lt_allow_undefined_flag

# Flag that forces no undefined symbols.
no_undefined_flag=$lt_no_undefined_flag

# Commands used to finish a libtool library installation in a directory.
finish_cmds=$lt_finish_cmds

# Same as above, but a single script fragment to be evaled but not shown.
finish_eval=$lt_finish_eval

# Take the output of nm and produce a listing of raw symbols and C names.
global_symbol_pipe=$lt_lt_cv_sys_global_symbol_pipe

# Transform the output of nm in a proper C declaration
global_symbol_to_cdecl=$lt_lt_cv_sys_global_symbol_to_cdecl

# Transform the output of nm in a C name address pair
global_symbol_to_c_name_address=$lt_lt_cv_sys_global_symbol_to_c_name_address

# This is the shared library runtime path variable.
runpath_var=$runpath_var

# This is the shared library path variable.
shlibpath_var=$shlibpath_var

# Is shlibpath searched before the hard-coded library search path?
shlibpath_overrides_runpath=$shlibpath_overrides_runpath

# How to hardcode a shared library path into an executable.
hardcode_action=$hardcode_action

# Whether we should hardcode library paths into libraries.
hardcode_into_libs=$hardcode_into_libs

# Flag to hardcode \$libdir into a binary during linking.
# This must work even if \$libdir does not exist.
hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec

# If ld is used when linking, flag to hardcode \$libdir into
# a binary during linking. This must work even if \$libdir does
# not exist.
hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld

# Whether we need a single -rpath flag with a separated argument.
hardcode_libdir_separator=$lt_hardcode_libdir_separator

# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes DIR into the
# resulting binary.
hardcode_direct=$hardcode_direct

# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
# resulting binary.
hardcode_minus_L=$hardcode_minus_L

# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into
# the resulting binary.
hardcode_shlibpath_var=$hardcode_shlibpath_var

# Set to yes if building a shared library automatically hardcodes DIR into the library
# and all subsequent libraries and executables linked against it.
hardcode_automatic=$hardcode_automatic

# Variables whose values should be saved in libtool wrapper scripts and
# restored at relink time.
variables_saved_for_relink="$variables_saved_for_relink"

# Whether libtool must link a program against all its dependency libraries.
link_all_deplibs=$link_all_deplibs

# Compile-time system search path for libraries
sys_lib_search_path_spec=$lt_sys_lib_search_path_spec

# Run-time system search path for libraries
sys_lib_dlsearch_path_spec=$lt_sys_lib_dlsearch_path_spec

# Fix the shell variable \$srcfile for the compiler.
fix_srcfile_path=$lt_fix_srcfile_path

# Set to yes if exported symbols are required.
always_export_symbols=$always_export_symbols

# The commands to list exported symbols.
export_symbols_cmds=$lt_export_symbols_cmds

# The commands to extract the exported symbol list from a shared archive.
extract_expsyms_cmds=$lt_extract_expsyms_cmds

# Symbols that should not be listed in the preloaded symbols.
exclude_expsyms=$lt_exclude_expsyms

# Symbols that must always be exported.
include_expsyms=$lt_include_expsyms

# ### END LIBTOOL CONFIG

__EOF__


  case $host_os in
  aix3*)
    cat <<\EOF >> "$cfgfile"

# AIX sometimes has problems with the GCC collect2 program.  For some
# reason, if we set the COLLECT_NAMES environment variable, the problems
# vanish in a puff of smoke.
if test "X${COLLECT_NAMES+set}" != Xset; then
  COLLECT_NAMES=
  export COLLECT_NAMES
fi
EOF
    ;;
  esac

  # We use sed instead of cat because bash on DJGPP gets confused if
  # if finds mixed CR/LF and LF-only lines.  Since sed operates in
  # text mode, it properly converts lines to CR/LF.  This bash problem
  # is reportedly fixed, but why not run on old versions too?
  sed '$q' "$ltmain" >> "$cfgfile" || (rm -f "$cfgfile"; exit 1)

  mv -f "$cfgfile" "$ofile" || \
    (rm -f "$ofile" && cp "$cfgfile" "$ofile" && rm -f "$cfgfile")
  chmod +x "$ofile"

else
  # If there is no Makefile yet, we rely on a make rule to execute
  # `config.status --recheck' to rerun these tests and create the
  # libtool script then.
  ltmain_in=`echo $ltmain | sed -e 's/\.sh$/.in/'`
  if test -f "$ltmain_in"; then
    test -f Makefile && make "$ltmain"
  fi
fi


ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

CC="$lt_save_CC"


# Check whether --with-tags was given.
if test "${with_tags+set}" = set; then :
  withval=$with_tags; tagnames="$withval"
fi


if test -f "$ltmain" && test -n "$tagnames"; then
  if test ! -f "${ofile}"; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: output file \`$ofile' does not exist" >&5
$as_echo "$as_me: WARNING: output file \`$ofile' does not exist" >&2;}
  fi

  if test -z "$LTCC"; then
    eval "`$SHELL ${ofile} --config | grep '^LTCC='`"
    if test -z "$LTCC"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: output file \`$ofile' does not look like a libtool script" >&5
$as_echo "$as_me: WARNING: output file \`$ofile' does not look like a libtool script" >&2;}
    else
      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'" >&5
$as_echo "$as_me: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'" >&2;}
    fi
  fi
  if test -z "$LTCFLAGS"; then
    eval "`$SHELL ${ofile} --config | grep '^LTCFLAGS='`"
  fi

  # Extract list of available tagged configurations in $ofile.
  # Note that this assumes the entire list is on one line.
  available_tags=`grep "^available_tags=" "${ofile}" | $SED -e 's/available_tags=\(.*$\)/\1/' -e 's/\"//g'`

  lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
  for tagname in $tagnames; do
    IFS="$lt_save_ifs"
    # Check whether tagname contains only valid characters
    case `$echo "X$tagname" | $Xsed -e 's:[-_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890,/]::g'` in
    "") ;;
    *)  as_fn_error $? "invalid tag name: $tagname" "$LINENO" 5
	;;
    esac

    if grep "^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$" < "${ofile}" > /dev/null
    then
      as_fn_error $? "tag name \"$tagname\" already exists" "$LINENO" 5
    fi

    # Update the list of available tags.
    if test -n "$tagname"; then
      echo appending configuration tag \"$tagname\" to $ofile

      case $tagname in
      CXX)
	if test -n "$CXX" && ( test "X$CXX" != "Xno" &&
	    ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
	    (test "X$CXX" != "Xg++"))) ; then

ac_ext=cpp
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_cxx_compiler_gnu




archive_cmds_need_lc_CXX=no
allow_undefined_flag_CXX=
always_export_symbols_CXX=no
archive_expsym_cmds_CXX=
export_dynamic_flag_spec_CXX=
hardcode_direct_CXX=no
hardcode_libdir_flag_spec_CXX=
hardcode_libdir_flag_spec_ld_CXX=
hardcode_libdir_separator_CXX=
hardcode_minus_L_CXX=no
hardcode_shlibpath_var_CXX=unsupported
hardcode_automatic_CXX=no
module_cmds_CXX=
module_expsym_cmds_CXX=
link_all_deplibs_CXX=unknown
old_archive_cmds_CXX=$old_archive_cmds
no_undefined_flag_CXX=
whole_archive_flag_spec_CXX=
enable_shared_with_static_runtimes_CXX=no

# Dependencies to place before and after the object being linked:
predep_objects_CXX=
postdep_objects_CXX=
predeps_CXX=
postdeps_CXX=
compiler_lib_search_path_CXX=
compiler_lib_search_dirs_CXX=

# Source file extension for C++ test sources.
ac_ext=cpp

# Object file extension for compiled C++ test sources.
objext=o
objext_CXX=$objext

# Code to be used in simple compile tests
lt_simple_compile_test_code="int some_variable = 0;"

# Code to be used in simple link tests
lt_simple_link_test_code='int main(int, char *[]) { return(0); }'

# ltmain only uses $CC for tagged configurations so make sure $CC is set.

# If no C compiler was specified, use CC.
LTCC=${LTCC-"$CC"}

# If no C compiler flags were specified, use CFLAGS.
LTCFLAGS=${LTCFLAGS-"$CFLAGS"}

# Allow CC to be a program name with arguments.
compiler=$CC


# save warnings/boilerplate of simple test code
ac_outfile=conftest.$ac_objext
echo "$lt_simple_compile_test_code" >conftest.$ac_ext
eval "$ac_compile" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_compiler_boilerplate=`cat conftest.err`
$rm conftest*

ac_outfile=conftest.$ac_objext
echo "$lt_simple_link_test_code" >conftest.$ac_ext
eval "$ac_link" 2>&1 >/dev/null | $SED '/^$/d; /^ *+/d' >conftest.err
_lt_linker_boilerplate=`cat conftest.err`
$rm -r conftest*


# Allow CC to be a program name with arguments.
lt_save_CC=$CC
lt_save_LD=$LD
lt_save_GCC=$GCC
GCC=$GXX
lt_save_with_gnu_ld=$with_gnu_ld
lt_save_path_LD=$lt_cv_path_LD
if test -n "${lt_cv_prog_gnu_ldcxx+set}"; then
  lt_cv_prog_gnu_ld=$lt_cv_prog_gnu_ldcxx
else
  unset lt_cv_prog_gnu_ld
fi
if test -n "${lt_cv_path_LDCXX+set}"; then
  lt_cv_path_LD=$lt_cv_path_LDCXX
else
  unset lt_cv_path_LD
fi
test -z "${LDCXX+set}" || LD=$LDCXX
CC=${CXX-"c++"}
compiler=$CC
compiler_CXX=$CC
for cc_temp in $compiler""; do
  case $cc_temp in
    compile | *[\\/]compile | ccache | *[\\/]ccache ) ;;
    distcc | *[\\/]distcc | purify | *[\\/]purify ) ;;
    \-*) ;;
    *) break;;
  esac
done
cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`


# We don't want -fno-exception wen compiling C++ code, so set the
# no_builtin_flag separately
if test "$GXX" = yes; then
  lt_prog_compiler_no_builtin_flag_CXX=' -fno-builtin'
else
  lt_prog_compiler_no_builtin_flag_CXX=
fi

if test "$GXX" = yes; then
  # Set up default GNU C++ configuration


# Check whether --with-gnu-ld was given.
if test "${with_gnu_ld+set}" = set; then :
  withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
else
  with_gnu_ld=no
fi

ac_prog=ld
if test "$GCC" = yes; then
  # Check if gcc -print-prog-name=ld gives a path.
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by $CC" >&5
$as_echo_n "checking for ld used by $CC... " >&6; }
  case $host in
  *-*-mingw*)
    # gcc leaves a trailing carriage return which upsets mingw
    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
  *)
    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;
  esac
  case $ac_prog in
    # Accept absolute paths.
    [\\/]* | ?:[\\/]*)
      re_direlt='/[^/][^/]*/\.\./'
      # Canonicalize the pathname of ld
      ac_prog=`echo $ac_prog| $SED 's%\\\\%/%g'`
      while echo $ac_prog | grep "$re_direlt" > /dev/null 2>&1; do
	ac_prog=`echo $ac_prog| $SED "s%$re_direlt%/%"`
      done
      test -z "$LD" && LD="$ac_prog"
      ;;
  "")
    # If it fails, then pretend we aren't using GCC.
    ac_prog=ld
    ;;
  *)
    # If it is relative, then search for the first ld in PATH.
    with_gnu_ld=unknown
    ;;
  esac
elif test "$with_gnu_ld" = yes; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
$as_echo_n "checking for GNU ld... " >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
$as_echo_n "checking for non-GNU ld... " >&6; }
fi
if ${lt_cv_path_LD+:} false; then :
  $as_echo_n "(cached) " >&6
else
  if test -z "$LD"; then
  lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for ac_dir in $PATH; do
    IFS="$lt_save_ifs"
    test -z "$ac_dir" && ac_dir=.
    if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
      lt_cv_path_LD="$ac_dir/$ac_prog"
      # Check to see if the program is GNU ld.  I'd rather use --version,
      # but apparently some variants of GNU ld only accept -v.
      # Break only if it was the GNU/non-GNU ld that we prefer.
      case `"$lt_cv_path_LD" -v 2>&1 </dev/null` in
      *GNU* | *'with BFD'*)
	test "$with_gnu_ld" != no && break
	;;
      *)
	test "$with_gnu_ld" != yes && break
	;;
      esac
    fi
  done
  IFS="$lt_save_ifs"
else
  lt_cv_path_LD="$LD" # Let the user override the test with a path.
fi
fi

LD="$lt_cv_path_LD"
if test -n "$LD"; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
$as_echo "$LD" >&6; }
else
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
$as_echo "no" >&6; }
fi
test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
$as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
if ${lt_cv_prog_gnu_ld+:} false; then :
  $as_echo_n "(cached) " >&6
else
  # I'd rather use --version here, but apparently some GNU lds only accept -v.
case `$LD -v 2>&1 </dev/null` in
*GNU* | *'with BFD'*)
  lt_cv_prog_gnu_ld=yes
  ;;
*)
  lt_cv_prog_gnu_ld=no
  ;;
esac
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_gnu_ld" >&5
$as_echo "$lt_cv_prog_gnu_ld" >&6; }
with_gnu_ld=$lt_cv_prog_gnu_ld



  # Check if GNU C++ uses GNU ld as the underlying linker, since the
  # archiving commands below assume that GNU ld is being used.
  if test "$with_gnu_ld" = yes; then
    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
    archive_expsym_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'

    hardcode_libdir_flag_spec_CXX='${wl}--rpath ${wl}$libdir'
    export_dynamic_flag_spec_CXX='${wl}--export-dynamic'

    # If archive_cmds runs LD, not CC, wlarc should be empty
    # XXX I think wlarc can be eliminated in ltcf-cxx, but I need to
    #     investigate it a little bit more. (MM)
    wlarc='${wl}'

    # ancient GNU ld didn't support --whole-archive et. al.
    if eval "`$CC -print-prog-name=ld` --help 2>&1" | \
	grep 'no-whole-archive' > /dev/null; then
      whole_archive_flag_spec_CXX="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
    else
      whole_archive_flag_spec_CXX=
    fi
  else
    with_gnu_ld=no
    wlarc=

    # A generic and very simple default shared library creation
    # command for GNU C++ for the case where it uses the native
    # linker, instead of GNU ld.  If possible, this setting should
    # overridden to take advantage of the native linker features on
    # the platform it is being used on.
    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
  fi

  # Commands to make compiler produce verbose output that lists
  # what "hidden" libraries, object files and flags are used when
  # linking a shared library.
  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "\-L"'

else
  GXX=no
  with_gnu_ld=no
  wlarc=
fi

# PORTME: fill in a description of your system's C++ link characteristics
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
$as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
ld_shlibs_CXX=yes
case $host_os in
  aix3*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  aix[4-9]*)
    if test "$host_cpu" = ia64; then
      # On IA64, the linker does run time linking by default, so we don't
      # have to do anything special.
      aix_use_runtimelinking=no
      exp_sym_flag='-Bexport'
      no_entry_flag=""
    else
      aix_use_runtimelinking=no

      # Test if we are trying to use run time linking or normal
      # AIX style linking. If -brtl is somewhere in LDFLAGS, we
      # need to do runtime linking.
      case $host_os in aix4.[23]|aix4.[23].*|aix[5-9]*)
	for ld_flag in $LDFLAGS; do
	  case $ld_flag in
	  *-brtl*)
	    aix_use_runtimelinking=yes
	    break
	    ;;
	  esac
	done
	;;
      esac

      exp_sym_flag='-bexport'
      no_entry_flag='-bnoentry'
    fi

    # When large executables or shared objects are built, AIX ld can
    # have problems creating the table of contents.  If linking a library
    # or program results in "error TOC overflow" add -mminimal-toc to
    # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
    # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.

    archive_cmds_CXX=''
    hardcode_direct_CXX=yes
    hardcode_libdir_separator_CXX=':'
    link_all_deplibs_CXX=yes

    if test "$GXX" = yes; then
      case $host_os in aix4.[012]|aix4.[012].*)
      # We only want to do this on AIX 4.2 and lower, the check
      # below for broken collect2 doesn't work under 4.3+
	collect2name=`${CC} -print-prog-name=collect2`
	if test -f "$collect2name" && \
	   strings "$collect2name" | grep resolve_lib_name >/dev/null
	then
	  # We have reworked collect2
	  :
	else
	  # We have old collect2
	  hardcode_direct_CXX=unsupported
	  # It fails to find uninstalled libraries when the uninstalled
	  # path is not listed in the libpath.  Setting hardcode_minus_L
	  # to unsupported forces relinking
	  hardcode_minus_L_CXX=yes
	  hardcode_libdir_flag_spec_CXX='-L$libdir'
	  hardcode_libdir_separator_CXX=
	fi
	;;
      esac
      shared_flag='-shared'
      if test "$aix_use_runtimelinking" = yes; then
	shared_flag="$shared_flag "'${wl}-G'
      fi
    else
      # not using gcc
      if test "$host_cpu" = ia64; then
	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
	# chokes on -Wl,-G. The following line is correct:
	shared_flag='-G'
      else
	if test "$aix_use_runtimelinking" = yes; then
	  shared_flag='${wl}-G'
	else
	  shared_flag='${wl}-bM:SRE'
	fi
      fi
    fi

    # It seems that -bexpall does not export symbols beginning with
    # underscore (_), so it is better to generate a list of symbols to export.
    always_export_symbols_CXX=yes
    if test "$aix_use_runtimelinking" = yes; then
      # Warning - without using the other runtime loading flags (-brtl),
      # -berok will link without error, but may produce a broken library.
      allow_undefined_flag_CXX='-berok'
      # Determine the default libpath from the value encoded in an empty executable.

cat > conftest.$ac_ext <<EOF
#line 110473 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext}; then

lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

      hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"

      archive_expsym_cmds_CXX="\$CC"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then echo "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$exp_sym_flag:\$export_symbols $shared_flag"
     else
      if test "$host_cpu" = ia64; then
	hardcode_libdir_flag_spec_CXX='${wl}-R $libdir:/usr/lib:/lib'
	allow_undefined_flag_CXX="-z nodefs"
	archive_expsym_cmds_CXX="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
      else
	# Determine the default libpath from the value encoded in an empty executable.

cat > conftest.$ac_ext <<EOF
#line 110516 "configure"
#include "confdefs.h"
int main() {
; return 0; }
EOF
if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
  (eval $ac_link) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && test -s conftest${ac_exeext}; then

lt_aix_libpath_sed='
    /Import File Strings/,/^$/ {
	/^0/ {
	    s/^0  *\(.*\)$/\1/
	    p
	}
    }'
aix_libpath=`dump -H conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
# Check for a 64-bit object if we didn't find anything.
if test -z "$aix_libpath"; then
  aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
fi
  rm -rf conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&6
fi
rm -f conftest*
if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi

	hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"
	# Warning - without using the other run time loading flags,
	# -berok will link without error, but may produce a broken library.
	no_undefined_flag_CXX=' ${wl}-bernotok'
	allow_undefined_flag_CXX=' ${wl}-berok'
	# Exported symbols can be pulled into shared objects from archives
	whole_archive_flag_spec_CXX='$convenience'
	archive_cmds_need_lc_CXX=yes
	# This is similar to how AIX traditionally builds its shared libraries.
	archive_expsym_cmds_CXX="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
      fi
    fi
    ;;

  beos*)
    if $LD --help 2>&1 | grep ': supported targets:.* elf' > /dev/null; then
      allow_undefined_flag_CXX=unsupported
      # Joseph Beckenbach <jrb3@best.com> says some releases of gcc
      # support --undefined.  This deserves some investigation.  FIXME
      archive_cmds_CXX='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
    else
      ld_shlibs_CXX=no
    fi
    ;;

  chorus*)
    case $cc_basename in
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;

  cygwin* | mingw* | pw32*)
    # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, CXX) is actually meaningless,
    # as there is no search path for DLLs.
    hardcode_libdir_flag_spec_CXX='-L$libdir'
    allow_undefined_flag_CXX=unsupported
    always_export_symbols_CXX=no
    enable_shared_with_static_runtimes_CXX=yes

    if $LD --help 2>&1 | grep 'auto-import' > /dev/null; then
      archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
      # If the export-symbols file already is a .def file (1st line
      # is EXPORTS), use it as is; otherwise, prepend...
      archive_expsym_cmds_CXX='if test "x`$SED 1q $export_symbols`" = xEXPORTS; then
	cp $export_symbols $output_objdir/$soname.def;
      else
	echo EXPORTS > $output_objdir/$soname.def;
	cat $export_symbols >> $output_objdir/$soname.def;
      fi~
      $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
    else
      ld_shlibs_CXX=no
    fi
  ;;
      darwin* | rhapsody*)
      archive_cmds_need_lc_CXX=no
      hardcode_direct_CXX=no
      hardcode_automatic_CXX=yes
      hardcode_shlibpath_var_CXX=unsupported
      whole_archive_flag_spec_CXX=''
      link_all_deplibs_CXX=yes
      allow_undefined_flag_CXX="$_lt_dar_allow_undefined"
      if test "$GXX" = yes ; then
      output_verbose_link_cmd='echo'
      archive_cmds_CXX="\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring $_lt_dar_single_mod${_lt_dsymutil}"
      module_cmds_CXX="\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dsymutil}"
      archive_expsym_cmds_CXX="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \$libobjs \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring ${_lt_dar_single_mod}${_lt_dar_export_syms}${_lt_dsymutil}"
      module_expsym_cmds_CXX="sed -e 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC \$allow_undefined_flag -o \$lib -bundle \$libobjs \$deplibs \$compiler_flags${_lt_dar_export_syms}${_lt_dsymutil}"
      if test "$lt_cv_apple_cc_single_mod" != "yes"; then
        archive_cmds_CXX="\$CC -r -keep_private_externs -nostdlib -o \${lib}-master.o \$libobjs~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \${lib}-master.o \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring${_lt_dsymutil}"
        archive_expsym_cmds_CXX="sed 's,^,_,' < \$export_symbols > \$output_objdir/\${libname}-symbols.expsym~\$CC -r -keep_private_externs -nostdlib -o \${lib}-master.o \$libobjs~\$CC -dynamiclib \$allow_undefined_flag -o \$lib \${lib}-master.o \$deplibs \$compiler_flags -install_name \$rpath/\$soname \$verstring${_lt_dar_export_syms}${_lt_dsymutil}"
      fi
      else
      case $cc_basename in
        xlc*)
         output_verbose_link_cmd='echo'
          archive_cmds_CXX='$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $xlcverstring'
          module_cmds_CXX='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
          archive_expsym_cmds_CXX='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $xlcverstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          module_expsym_cmds_CXX='sed -e "s,#.*,," -e "s,^[    ]*,," -e "s,^\(..*\),_&," < $export_symbols > $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
          ;;
       *)
         ld_shlibs_CXX=no
          ;;
      esac
      fi
        ;;

  dgux*)
    case $cc_basename in
      ec++*)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      ghcx*)
	# Green Hills C++ Compiler
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  freebsd[12]*)
    # C++ shared libraries reported to be fairly broken before switch to ELF
    ld_shlibs_CXX=no
    ;;
  freebsd-elf*)
    archive_cmds_need_lc_CXX=no
    ;;
  freebsd* | dragonfly*)
    # FreeBSD 3 and later use GNU C++ and GNU ld with standard ELF
    # conventions
    ld_shlibs_CXX=yes
    ;;
  gnu*)
    ;;
  hpux9*)
    hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
    hardcode_libdir_separator_CXX=:
    export_dynamic_flag_spec_CXX='${wl}-E'
    hardcode_direct_CXX=yes
    hardcode_minus_L_CXX=yes # Not in the search PATH,
				# but as the default
				# location of the library.

    case $cc_basename in
    CC*)
      # FIXME: insert proper C++ library support
      ld_shlibs_CXX=no
      ;;
    aCC*)
      archive_cmds_CXX='$rm $output_objdir/$soname~$CC -b ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      # Commands to make compiler produce verbose output that lists
      # what "hidden" libraries, object files and flags are used when
      # linking a shared library.
      #
      # There doesn't appear to be a way to prevent this compiler from
      # explicitly linking system object files so we need to strip them
      # from the output so that they don't get included in the library
      # dependencies.
      output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | grep "[-]L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
      ;;
    *)
      if test "$GXX" = yes; then
        archive_cmds_CXX='$rm $output_objdir/$soname~$CC -shared -nostdlib -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
      else
        # FIXME: insert proper C++ library support
        ld_shlibs_CXX=no
      fi
      ;;
    esac
    ;;
  hpux10*|hpux11*)
    if test $with_gnu_ld = no; then
      hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
      hardcode_libdir_separator_CXX=:

      case $host_cpu in
      hppa*64*|ia64*) ;;
      *)
	export_dynamic_flag_spec_CXX='${wl}-E'
        ;;
      esac
    fi
    case $host_cpu in
    hppa*64*|ia64*)
      hardcode_direct_CXX=no
      hardcode_shlibpath_var_CXX=no
      ;;
    *)
      hardcode_direct_CXX=yes
      hardcode_minus_L_CXX=yes # Not in the search PATH,
					      # but as the default
					      # location of the library.
      ;;
    esac

    case $cc_basename in
      CC*)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      aCC*)
	case $host_cpu in
	hppa*64*)
	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  ;;
	ia64*)
	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  ;;
	*)
	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  ;;
	esac
	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | grep "\-L"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	if test "$GXX" = yes; then
	  if test $with_gnu_ld = no; then
	    case $host_cpu in
	    hppa*64*)
	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	      ;;
	    ia64*)
	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	      ;;
	    *)
	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	      ;;
	    esac
	  fi
	else
	  # FIXME: insert proper C++ library support
	  ld_shlibs_CXX=no
	fi
	;;
    esac
    ;;
  interix[3-9]*)
    hardcode_direct_CXX=no
    hardcode_shlibpath_var_CXX=no
    hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
    export_dynamic_flag_spec_CXX='${wl}-E'
    # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
    # Instead, shared libraries are loaded at an image base (0x10000000 by
    # default) and relocated if they conflict, which is a slow very memory
    # consuming and fragmenting process.  To avoid this, we pick a random,
    # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
    # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
    archive_cmds_CXX='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
    archive_expsym_cmds_CXX='sed "s,^,_," $export_symbols >$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
    ;;
  irix5* | irix6*)
    case $cc_basename in
      CC*)
	# SGI C++
	archive_cmds_CXX='$CC -shared -all -multigot $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'

	# Archives containing C++ object files must be created using
	# "CC -ar", where "CC" is the IRIX C++ compiler.  This is
	# necessary to make sure instantiated templates are included
	# in the archive.
	old_archive_cmds_CXX='$CC -ar -WR,-u -o $oldlib $oldobjs'
	;;
      *)
	if test "$GXX" = yes; then
	  if test "$with_gnu_ld" = no; then
	    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
	  else
	    archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` -o $lib'
	  fi
	fi
	link_all_deplibs_CXX=yes
	;;
    esac
    hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
    hardcode_libdir_separator_CXX=:
    ;;
  linux* | k*bsd*-gnu)
    case $cc_basename in
      KCC*)
	# Kuck and Associates, Inc. (KAI) C++ Compiler

	# KCC will only create a shared library if the output file
	# ends with ".so" (or ".sl" for HP-UX), so rename the library
	# to its proper name (with version) after linking.
	archive_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'
	archive_expsym_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib ${wl}-retain-symbols-file,$export_symbols; mv \$templib $lib'
	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1 | grep "ld"`; rm -f libconftest$shared_ext; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'

	hardcode_libdir_flag_spec_CXX='${wl}--rpath,$libdir'
	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'

	# Archives containing C++ object files must be created using
	# "CC -Bstatic", where "CC" is the KAI C++ compiler.
	old_archive_cmds_CXX='$CC -Bstatic -o $oldlib $oldobjs'
	;;
      icpc*)
	# Intel C++
	with_gnu_ld=yes
	# version 8.0 and above of icpc choke on multiply defined symbols
	# if we add $predep_objects and $postdep_objects, however 7.1 and
	# earlier do not add the objects themselves.
	case `$CC -V 2>&1` in
	*"Version 7."*)
  	  archive_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
  	  archive_expsym_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
	  ;;
	*)  # Version 8.0 or newer
	  tmp_idyn=
	  case $host_cpu in
	    ia64*) tmp_idyn=' -i_dynamic';;
	  esac
  	  archive_cmds_CXX='$CC -shared'"$tmp_idyn"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
	  archive_expsym_cmds_CXX='$CC -shared'"$tmp_idyn"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
	  ;;
	esac
	archive_cmds_need_lc_CXX=no
	hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'
	whole_archive_flag_spec_CXX='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
	;;
      pgCC* | pgcpp*)
        # Portland Group C++ compiler
	archive_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname -o $lib'
  	archive_expsym_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname ${wl}-retain-symbols-file ${wl}$export_symbols -o $lib'

	hardcode_libdir_flag_spec_CXX='${wl}--rpath ${wl}$libdir'
	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'
	whole_archive_flag_spec_CXX='${wl}--whole-archive`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'
        ;;
      cxx*)
	# Compaq C++
	archive_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'
	archive_expsym_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname  -o $lib ${wl}-retain-symbols-file $wl$export_symbols'

	runpath_var=LD_RUN_PATH
	hardcode_libdir_flag_spec_CXX='-rpath $libdir'
	hardcode_libdir_separator_CXX=:

	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "ld"`; templist=`echo $templist | $SED "s/\(^.*ld.*\)\( .*ld .*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	case `$CC -V 2>&1 | sed 5q` in
	*Sun\ C*)
	  # Sun C++ 5.9
	  no_undefined_flag_CXX=' -zdefs'
	  archive_cmds_CXX='$CC -G${allow_undefined_flag} -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	  archive_expsym_cmds_CXX='$CC -G${allow_undefined_flag} -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file ${wl}$export_symbols'
	  hardcode_libdir_flag_spec_CXX='-R$libdir'
	  whole_archive_flag_spec_CXX='${wl}--whole-archive`new_convenience=; for conv in $convenience\"\"; do test -z \"$conv\" || new_convenience=\"$new_convenience,$conv\"; done; $echo \"$new_convenience\"` ${wl}--no-whole-archive'

	  # Not sure whether something based on
	  # $CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2>&1
	  # would be better.
	  output_verbose_link_cmd='echo'

	  # Archives containing C++ object files must be created using
	  # "CC -xar", where "CC" is the Sun C++ compiler.  This is
	  # necessary to make sure instantiated templates are included
	  # in the archive.
	  old_archive_cmds_CXX='$CC -xar -o $oldlib $oldobjs'
	  ;;
	esac
	;;
    esac
    ;;
  lynxos*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  m88k*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  mvs*)
    case $cc_basename in
      cxx*)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  netbsd*)
    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
      archive_cmds_CXX='$LD -Bshareable  -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags'
      wlarc=
      hardcode_libdir_flag_spec_CXX='-R$libdir'
      hardcode_direct_CXX=yes
      hardcode_shlibpath_var_CXX=no
    fi
    # Workaround some broken pre-1.5 toolchains
    output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep conftest.$objext | $SED -e "s:-lgcc -lc -lgcc::"'
    ;;
  openbsd2*)
    # C++ shared libraries are fairly broken
    ld_shlibs_CXX=no
    ;;
  openbsd*)
    if test -f /usr/libexec/ld.so; then
      hardcode_direct_CXX=yes
      hardcode_shlibpath_var_CXX=no
      archive_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
      hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
      if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
	archive_expsym_cmds_CXX='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file,$export_symbols -o $lib'
	export_dynamic_flag_spec_CXX='${wl}-E'
	whole_archive_flag_spec_CXX="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
      fi
      output_verbose_link_cmd='echo'
    else
      ld_shlibs_CXX=no
    fi
    ;;
  osf3*)
    case $cc_basename in
      KCC*)
	# Kuck and Associates, Inc. (KAI) C++ Compiler

	# KCC will only create a shared library if the output file
	# ends with ".so" (or ".sl" for HP-UX), so rename the library
	# to its proper name (with version) after linking.
	archive_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'

	hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
	hardcode_libdir_separator_CXX=:

	# Archives containing C++ object files must be created using
	# "CC -Bstatic", where "CC" is the KAI C++ compiler.
	old_archive_cmds_CXX='$CC -Bstatic -o $oldlib $oldobjs'

	;;
      RCC*)
	# Rational C++ 2.4.1
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      cxx*)
	allow_undefined_flag_CXX=' ${wl}-expect_unresolved ${wl}\*'
	archive_cmds_CXX='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $soname `test -n "$verstring" && echo ${wl}-set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'

	hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
	hardcode_libdir_separator_CXX=:

	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "ld" | grep -v "ld:"`; templist=`echo $templist | $SED "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	if test "$GXX" = yes && test "$with_gnu_ld" = no; then
	  allow_undefined_flag_CXX=' ${wl}-expect_unresolved ${wl}\*'
	  archive_cmds_CXX='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'

	  hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
	  hardcode_libdir_separator_CXX=:

	  # Commands to make compiler produce verbose output that lists
	  # what "hidden" libraries, object files and flags are used when
	  # linking a shared library.
	  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "\-L"'

	else
	  # FIXME: insert proper C++ library support
	  ld_shlibs_CXX=no
	fi
	;;
    esac
    ;;
  osf4* | osf5*)
    case $cc_basename in
      KCC*)
	# Kuck and Associates, Inc. (KAI) C++ Compiler

	# KCC will only create a shared library if the output file
	# ends with ".so" (or ".sl" for HP-UX), so rename the library
	# to its proper name (with version) after linking.
	archive_cmds_CXX='tempext=`echo $shared_ext | $SED -e '\''s/\([^()0-9A-Za-z{}]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e "s/\${tempext}\..*/.so/"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags --soname $soname -o \$templib; mv \$templib $lib'

	hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
	hardcode_libdir_separator_CXX=:

	# Archives containing C++ object files must be created using
	# the KAI C++ compiler.
	old_archive_cmds_CXX='$CC -o $oldlib $oldobjs'
	;;
      RCC*)
	# Rational C++ 2.4.1
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      cxx*)
	allow_undefined_flag_CXX=' -expect_unresolved \*'
	archive_cmds_CXX='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
	archive_expsym_cmds_CXX='for i in `cat $export_symbols`; do printf "%s %s\\n" -exported_symbol "\$i" >> $lib.exp; done~
	  echo "-hidden">> $lib.exp~
	  $CC -shared$allow_undefined_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -msym -soname $soname -Wl,-input -Wl,$lib.exp  `test -n "$verstring" && echo -set_version	$verstring` -update_registry ${output_objdir}/so_locations -o $lib~
	  $rm $lib.exp'

	hardcode_libdir_flag_spec_CXX='-rpath $libdir'
	hardcode_libdir_separator_CXX=:

	# Commands to make compiler produce verbose output that lists
	# what "hidden" libraries, object files and flags are used when
	# linking a shared library.
	#
	# There doesn't appear to be a way to prevent this compiler from
	# explicitly linking system object files so we need to strip them
	# from the output so that they don't get included in the library
	# dependencies.
	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "ld" | grep -v "ld:"`; templist=`echo $templist | $SED "s/\(^.*ld.*\)\( .*ld.*$\)/\1/"`; list=""; for z in $templist; do case $z in conftest.$objext) list="$list $z";; *.$objext);; *) list="$list $z";;esac; done; echo $list'
	;;
      *)
	if test "$GXX" = yes && test "$with_gnu_ld" = no; then
	  allow_undefined_flag_CXX=' ${wl}-expect_unresolved ${wl}\*'
	 archive_cmds_CXX='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'

	  hardcode_libdir_flag_spec_CXX='${wl}-rpath ${wl}$libdir'
	  hardcode_libdir_separator_CXX=:

	  # Commands to make compiler produce verbose output that lists
	  # what "hidden" libraries, object files and flags are used when
	  # linking a shared library.
	  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep "\-L"'

	else
	  # FIXME: insert proper C++ library support
	  ld_shlibs_CXX=no
	fi
	;;
    esac
    ;;
  psos*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  sunos4*)
    case $cc_basename in
      CC*)
	# Sun C++ 4.x
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      lcc*)
	# Lucid
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  solaris*)
    case $cc_basename in
      CC*)
	# Sun C++ 4.2, 5.x and Centerline C++
        archive_cmds_need_lc_CXX=yes
	no_undefined_flag_CXX=' -zdefs'
	archive_cmds_CXX='$CC -G${allow_undefined_flag}  -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
	archive_expsym_cmds_CXX='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
	$CC -G${allow_undefined_flag}  ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'

	hardcode_libdir_flag_spec_CXX='-R$libdir'
	hardcode_shlibpath_var_CXX=no
	case $host_os in
	  solaris2.[0-5] | solaris2.[0-5].*) ;;
	  *)
	    # The compiler driver will combine and reorder linker options,
	    # but understands `-z linker_flag'.
	    # Supported since Solaris 2.6 (maybe 2.5.1?)
	    whole_archive_flag_spec_CXX='-z allextract$convenience -z defaultextract'
	    ;;
	esac
	link_all_deplibs_CXX=yes

	output_verbose_link_cmd='echo'

	# Archives containing C++ object files must be created using
	# "CC -xar", where "CC" is the Sun C++ compiler.  This is
	# necessary to make sure instantiated templates are included
	# in the archive.
	old_archive_cmds_CXX='$CC -xar -o $oldlib $oldobjs'
	;;
      gcx*)
	# Green Hills C++ Compiler
	archive_cmds_CXX='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'

	# The C++ compiler must be used to create the archive.
	old_archive_cmds_CXX='$CC $LDFLAGS -archive -o $oldlib $oldobjs'
	;;
      *)
	# GNU C++ compiler with Solaris linker
	if test "$GXX" = yes && test "$with_gnu_ld" = no; then
	  no_undefined_flag_CXX=' ${wl}-z ${wl}defs'
	  if $CC --version | grep -v '^2\.7' > /dev/null; then
	    archive_cmds_CXX='$CC -shared -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
	    archive_expsym_cmds_CXX='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
		$CC -shared -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'

	    # Commands to make compiler produce verbose output that lists
	    # what "hidden" libraries, object files and flags are used when
	    # linking a shared library.
	    output_verbose_link_cmd="$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep \"\-L\""
	  else
	    # g++ 2.7 appears to require `-G' NOT `-shared' on this
	    # platform.
	    archive_cmds_CXX='$CC -G -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-h $wl$soname -o $lib'
	    archive_expsym_cmds_CXX='$echo "{ global:" > $lib.exp~cat $export_symbols | $SED -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
		$CC -G -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'

	    # Commands to make compiler produce verbose output that lists
	    # what "hidden" libraries, object files and flags are used when
	    # linking a shared library.
	    output_verbose_link_cmd="$CC -G $CFLAGS -v conftest.$objext 2>&1 | grep \"\-L\""
	  fi

	  hardcode_libdir_flag_spec_CXX='${wl}-R $wl$libdir'
	  case $host_os in
	  solaris2.[0-5] | solaris2.[0-5].*) ;;
	  *)
	    whole_archive_flag_spec_CXX='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
	    ;;
	  esac
	fi
	;;
    esac
    ;;
  sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7* | sco3.2v5.0.[024]*)
    no_undefined_flag_CXX='${wl}-z,text'
    archive_cmds_need_lc_CXX=no
    hardcode_shlibpath_var_CXX=no
    runpath_var='LD_RUN_PATH'

    case $cc_basename in
      CC*)
	archive_cmds_CXX='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
      *)
	archive_cmds_CXX='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
    esac
    ;;
  sysv5* | sco3.2v5* | sco5v6*)
    # Note: We can NOT use -z defs as we might desire, because we do not
    # link with -lc, and that would cause any symbols used from libc to
    # always be unresolved, which means just about no library would
    # ever link correctly.  If we're not using GNU ld we use -z text
    # though, which does catch some bad symbols but isn't as heavy-handed
    # as -z defs.
    # For security reasons, it is highly recommended that you always
    # use absolute paths for naming shared libraries, and exclude the
    # DT_RUNPATH tag from executables and libraries.  But doing so
    # requires that you compile everything twice, which is a pain.
    # So that behaviour is only enabled if SCOABSPATH is set to a
    # non-empty value in the environment.  Most likely only useful for
    # creating official distributions of packages.
    # This is a hack until libtool officially supports absolute path
    # names for shared libraries.
    no_undefined_flag_CXX='${wl}-z,text'
    allow_undefined_flag_CXX='${wl}-z,nodefs'
    archive_cmds_need_lc_CXX=no
    hardcode_shlibpath_var_CXX=no
    hardcode_libdir_flag_spec_CXX='`test -z "$SCOABSPATH" && echo ${wl}-R,$libdir`'
    hardcode_libdir_separator_CXX=':'
    link_all_deplibs_CXX=yes
    export_dynamic_flag_spec_CXX='${wl}-Bexport'
    runpath_var='LD_RUN_PATH'

    case $cc_basename in
      CC*)
	archive_cmds_CXX='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
      *)
	archive_cmds_CXX='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	archive_expsym_cmds_CXX='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
	;;
    esac
    ;;
  tandem*)
    case $cc_basename in
      NCC*)
	# NonStop-UX NCC 3.20
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
      *)
	# FIXME: insert proper C++ library support
	ld_shlibs_CXX=no
	;;
    esac
    ;;
  vxworks*)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
  *)
    # FIXME: insert proper C++ library support
    ld_shlibs_CXX=no
    ;;
esac
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs_CXX" >&5
$as_echo "$ld_shlibs_CXX" >&6; }
test "$ld_shlibs_CXX" = no && can_build_shared=no

GCC_CXX="$GXX"
LD_CXX="$LD"

## CAVEAT EMPTOR:
## There is no encapsulation within the following macros, do not change
## the running order or otherwise move them around unless you know exactly
## what you are doing...
cat > conftest.$ac_ext <<EOF
class Foo
{
public:
  Foo (void) { a = 0; }
private:
  int a;
};
EOF

if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then
  # Parse the compiler output and extract the necessary
  # objects, libraries and library flags.

  # Sentinel used to keep track of whether or not we are before
  # the conftest object file.
  pre_test_object_deps_done=no

  # The `*' in the case matches for architectures that use `case' in
  # $output_verbose_cmd can trigger glob expansion during the loop
  # eval without this substitution.
  output_verbose_link_cmd=`$echo "X$output_verbose_link_cmd" | $Xsed -e "$no_glob_subst"`

  for p in `eval $output_verbose_link_cmd`; do
    case $p in

    -L* | -R* | -l*)
       # Some compilers place space between "-{L,R}" and the path.
       # Remove the space.
       if test $p = "-L" \
	  || test $p = "-R"; then
	 prev=$p
	 continue
       else
	 prev=
       fi

       if test "$pre_test_object_deps_done" = no; then
	 case $p in
	 -L* | -R*)
	   # Internal compiler library paths should come after those
	   # provided the user.  The postdeps already come after the
	   # user supplied libs so there is no need to process them.
	   if test -z "$compiler_lib_search_path_CXX"; then
	     compiler_lib_search_path_CXX="${prev}${p}"
	   else
	     compiler_lib_search_path_CXX="${compiler_lib_search_path_CXX} ${prev}${p}"
	   fi
	   ;;
	 # The "-l" case would never come before the object being
	 # linked, so don't bother handling this case.
	 esac
       else
	 if test -z "$postdeps_CXX"; then
	   postdeps_CXX="${prev}${p}"
	 else
	   postdeps_CXX="${postdeps_CXX} ${prev}${p}"
	 fi
       fi
       ;;

    *.$objext)
       # This assumes that the test object file only shows up
       # once in the compiler output.
       if test "$p" = "conftest.$objext"; then
	 pre_test_object_deps_done=yes
	 continue
       fi

       if test "$pre_test_object_deps_done" = no; then
	 if test -z "$predep_objects_CXX"; then
	   predep_objects_CXX="$p"
	 else
	   predep_objects_CXX="$predep_objects_CXX $p"
	 fi
       else
	 if test -z "$postdep_objects_CXX"; then
	   postdep_objects_CXX="$p"
	 else
	   postdep_objects_CXX="$postdep_objects_CXX $p"
	 fi
       fi
       ;;

    *) ;; # Ignore the rest.

    esac
  done

  # Clean up.
  rm -f a.out a.exe
else
  echo "libtool.m4: error: problem compiling CXX test program"
fi

$rm -f confest.$objext

compiler_lib_search_dirs_CXX=
if test -n "$compiler_lib_search_path_CXX"; then
  compiler_lib_search_dirs_CXX=`echo " ${compiler_lib_search_path_CXX}" | ${SED} -e 's! -L! !g' -e 's!^ !!'`
fi

# PORTME: override above test on systems where it is broken
case $host_os in
interix[3-9]*)
  # Interix 3.5 installs completely hosed .la files for C++, so rather than
  # hack all around it, let's just trust "g++" to DTRT.
  predep_objects_CXX=
  postdep_objects_CXX=
  postdeps_CXX=
  ;;

linux*)
  case `$CC -V 2>&1 | sed 5q` in
  *Sun\ C*)
    # Sun C++ 5.9
    #
    # The more standards-conforming stlport4 library is
    # incompatible with the Cstd library. Avoid specifying
    # it if it's in CXXFLAGS. Ignore libCrun as
    # -library=stlport4 depends on it.
    case " $CXX $CXXFLAGS " in
    *" -library=stlport4 "*)
      solaris_use_stlport4=yes
      ;;
    esac
    if test "$solaris_use_stlport4" != yes; then
      postdeps_CXX='-library=Cstd -library=Crun'
    fi
    ;;
  esac
  ;;

solaris*)
  case $cc_basename in
  CC*)
    # The more standards-conforming stlport4 library is
    # incompatible with the Cstd library. Avoid specifying
    # it if it's in CXXFLAGS. Ignore libCrun as
    # -library=stlport4 depends on it.
    case " $CXX $CXXFLAGS " in
    *" -library=stlport4 "*)
      solaris_use_stlport4=yes
      ;;
    esac

    # Adding this requires a known-good setup of shared libraries for
    # Sun compiler versions before 5.6, else PIC objects from an old
    # archive will be linked into the output, leading to subtle bugs.
    if test "$solaris_use_stlport4" != yes; then
      postdeps_CXX='-library=Cstd -library=Crun'
    fi
    ;;
  esac
  ;;
esac

case " $postdeps_CXX " in
*" -lc "*) archive_cmds_need_lc_CXX=no ;;
esac

lt_prog_compiler_wl_CXX=
lt_prog_compiler_pic_CXX=
lt_prog_compiler_static_CXX=

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
$as_echo_n "checking for $compiler option to produce PIC... " >&6; }

  # C++ specific cases for pic, static, wl, etc.
  if test "$GXX" = yes; then
    lt_prog_compiler_wl_CXX='-Wl,'
    lt_prog_compiler_static_CXX='-static'

    case $host_os in
    aix*)
      # All AIX code is PIC.
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_prog_compiler_static_CXX='-Bstatic'
      fi
      ;;
    amigaos*)
      # FIXME: we need at least 68020 code to build shared libraries, but
      # adding the `-m68020' flag to GCC prevents building anything better,
      # like `-m68040'.
      lt_prog_compiler_pic_CXX='-m68020 -resident32 -malways-restore-a4'
      ;;
    beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
      # PIC is the default for these OSes.
      ;;
    mingw* | cygwin* | os2* | pw32*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
      # Although the cygwin gcc ignores -fPIC, still need this for old-style
      # (--disable-auto-import) libraries
	  lt_prog_compiler_pic_CXX='-DDLL_EXPORT'
      ;;
    darwin* | rhapsody*)
      # PIC is the default on this platform
      # Common symbols not allowed in MH_DYLIB files
      lt_prog_compiler_pic_CXX='-fno-common'
      ;;
    *djgpp*)
      # DJGPP does not support shared libraries at all
      lt_prog_compiler_pic_CXX=
      ;;
    interix[3-9]*)
      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
      # Instead, we relocate shared libraries at runtime.
      ;;
    sysv4*MP*)
      if test -d /usr/nec; then
	lt_prog_compiler_pic_CXX=-Kconform_pic
      fi
      ;;
    hpux*)
      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
      # not for PA HP-UX.
      case $host_cpu in
      hppa*64*|ia64*)
	;;
      *)
	lt_prog_compiler_pic_CXX='-fPIC'
	;;
      esac
      ;;
    *)
      lt_prog_compiler_pic_CXX='-fPIC'
      ;;
    esac
  else
    case $host_os in
      aix[4-9]*)
	# All AIX code is PIC.
	if test "$host_cpu" = ia64; then
	  # AIX 5 now supports IA64 processor
	  lt_prog_compiler_static_CXX='-Bstatic'
	else
	  lt_prog_compiler_static_CXX='-bnso -bI:/lib/syscalls.exp'
	fi
	;;
      chorus*)
	case $cc_basename in
	cxch68*)
	  # Green Hills C++ Compiler
	  # _LT_AC_TAGVAR(lt_prog_compiler_static, CXX)="--no_auto_instantiation -u __main -u __premain -u _abort -r $COOL_DIR/lib/libOrb.a $MVME_DIR/lib/CC/libC.a $MVME_DIR/lib/classix/libcx.s.a"
	  ;;
	esac
	;;
       darwin*)
         # PIC is the default on this platform
         # Common symbols not allowed in MH_DYLIB files
         case $cc_basename in
           xlc*)
           lt_prog_compiler_pic_CXX='-qnocommon'
           lt_prog_compiler_wl_CXX='-Wl,'
           ;;
         esac
       ;;
      dgux*)
	case $cc_basename in
	  ec++*)
	    lt_prog_compiler_pic_CXX='-KPIC'
	    ;;
	  ghcx*)
	    # Green Hills C++ Compiler
	    lt_prog_compiler_pic_CXX='-pic'
	    ;;
	  *)
	    ;;
	esac
	;;
      freebsd* | dragonfly*)
	# FreeBSD uses GNU C++
	;;
      hpux9* | hpux10* | hpux11*)
	case $cc_basename in
	  CC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_static_CXX='${wl}-a ${wl}archive'
	    if test "$host_cpu" != ia64; then
	      lt_prog_compiler_pic_CXX='+Z'
	    fi
	    ;;
	  aCC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_static_CXX='${wl}-a ${wl}archive'
	    case $host_cpu in
	    hppa*64*|ia64*)
	      # +Z the default
	      ;;
	    *)
	      lt_prog_compiler_pic_CXX='+Z'
	      ;;
	    esac
	    ;;
	  *)
	    ;;
	esac
	;;
      interix*)
	# This is c89, which is MS Visual C++ (no shared libs)
	# Anyone wants to do a port?
	;;
      irix5* | irix6* | nonstopux*)
	case $cc_basename in
	  CC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_static_CXX='-non_shared'
	    # CC pic flag -KPIC is the default.
	    ;;
	  *)
	    ;;
	esac
	;;
      linux* | k*bsd*-gnu)
	case $cc_basename in
	  KCC*)
	    # KAI C++ Compiler
	    lt_prog_compiler_wl_CXX='--backend -Wl,'
	    lt_prog_compiler_pic_CXX='-fPIC'
	    ;;
      ecpc*)
        # old Intel C++ for x86_64 which still supported -KPIC.
        lt_prog_compiler_wl_CXX='-Wl,'
        lt_prog_compiler_pic_CXX='-KPIC'
        lt_prog_compiler_static_CXX='-static'
        ;;
      icpc*)
        # Intel C++, used to be incompatible with GCC.
        lt_prog_compiler_wl_CXX='-Wl,'
        lt_prog_compiler_pic_CXX='-fPIC'
        lt_prog_compiler_static_CXX='-static'
        ;;
	  pgCC* | pgcpp*)
	    # Portland Group C++ compiler.
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_pic_CXX='-fpic'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    ;;
	  cxx*)
	    # Compaq C++
	    # Make sure the PIC flag is empty.  It appears that all Alpha
	    # Linux and Compaq Tru64 Unix objects are PIC.
	    lt_prog_compiler_pic_CXX=
	    lt_prog_compiler_static_CXX='-non_shared'
	    ;;
	  *)
	    case `$CC -V 2>&1 | sed 5q` in
	    *Sun\ C*)
	      # Sun C++ 5.9
	      lt_prog_compiler_pic_CXX='-KPIC'
	      lt_prog_compiler_static_CXX='-Bstatic'
	      lt_prog_compiler_wl_CXX='-Qoption ld '
	      ;;
	    esac
	    ;;
	esac
	;;
      lynxos*)
	;;
      m88k*)
	;;
      mvs*)
	case $cc_basename in
	  cxx*)
	    lt_prog_compiler_pic_CXX='-W c,exportall'
	    ;;
	  *)
	    ;;
	esac
	;;
      netbsd*)
	;;
      osf3* | osf4* | osf5*)
	case $cc_basename in
	  KCC*)
	    lt_prog_compiler_wl_CXX='--backend -Wl,'
	    ;;
	  RCC*)
	    # Rational C++ 2.4.1
	    lt_prog_compiler_pic_CXX='-pic'
	    ;;
	  cxx*)
	    # Digital/Compaq C++
	    lt_prog_compiler_wl_CXX='-Wl,'
	    # Make sure the PIC flag is empty.  It appears that all Alpha
	    # Linux and Compaq Tru64 Unix objects are PIC.
	    lt_prog_compiler_pic_CXX=
	    lt_prog_compiler_static_CXX='-non_shared'
	    ;;
	  *)
	    ;;
	esac
	;;
      psos*)
	;;
      solaris*)
	case $cc_basename in
	  CC*)
	    # Sun C++ 4.2, 5.x and Centerline C++
	    lt_prog_compiler_pic_CXX='-KPIC'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    lt_prog_compiler_wl_CXX='-Qoption ld '
	    ;;
	  gcx*)
	    # Green Hills C++ Compiler
	    lt_prog_compiler_pic_CXX='-PIC'
	    ;;
	  *)
	    ;;
	esac
	;;
      sunos4*)
	case $cc_basename in
	  CC*)
	    # Sun C++ 4.x
	    lt_prog_compiler_pic_CXX='-pic'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    ;;
	  lcc*)
	    # Lucid
	    lt_prog_compiler_pic_CXX='-pic'
	    ;;
	  *)
	    ;;
	esac
	;;
      tandem*)
	case $cc_basename in
	  NCC*)
	    # NonStop-UX NCC 3.20
	    lt_prog_compiler_pic_CXX='-KPIC'
	    ;;
	  *)
	    ;;
	esac
	;;
      sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
	case $cc_basename in
	  CC*)
	    lt_prog_compiler_wl_CXX='-Wl,'
	    lt_prog_compiler_pic_CXX='-KPIC'
	    lt_prog_compiler_static_CXX='-Bstatic'
	    ;;
	esac
	;;
      vxworks*)
	;;
      *)
	lt_prog_compiler_can_build_shared_CXX=no
	;;
    esac
  fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic_CXX" >&5
$as_echo "$lt_prog_compiler_pic_CXX" >&6; }

#
# Check to make sure the PIC flag actually works.
#
if test -n "$lt_prog_compiler_pic_CXX"; then

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
$as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works... " >&6; }
if ${lt_cv_prog_compiler_pic_works_CXX+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_pic_works_CXX=no
  ac_outfile=conftest.$ac_objext
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext
   lt_compiler_flag="$lt_prog_compiler_pic_CXX -DPIC"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   # The option is referenced via a variable to avoid confusing sed.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:111768: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>conftest.err)
   ac_status=$?
   cat conftest.err >&5
   echo "configure:111772: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s "$ac_outfile"; then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings other than the usual output.
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
     $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_pic_works_CXX=yes
     fi
   fi
   $rm conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works_CXX" >&5
$as_echo "$lt_cv_prog_compiler_pic_works_CXX" >&6; }

if test x"$lt_cv_prog_compiler_pic_works_CXX" = xyes; then
    case $lt_prog_compiler_pic_CXX in
     "" | " "*) ;;
     *) lt_prog_compiler_pic_CXX=" $lt_prog_compiler_pic_CXX" ;;
     esac
else
    lt_prog_compiler_pic_CXX=
     lt_prog_compiler_can_build_shared_CXX=no
fi

fi
case $host_os in
  # For platforms which do not support PIC, -DPIC is meaningless:
  *djgpp*)
    lt_prog_compiler_pic_CXX=
    ;;
  *)
    lt_prog_compiler_pic_CXX="$lt_prog_compiler_pic_CXX -DPIC"
    ;;
esac

#
# Check to make sure the static flag actually works.
#
wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\"$lt_prog_compiler_static_CXX\"
{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
$as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
if ${lt_cv_prog_compiler_static_works_CXX+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_static_works_CXX=no
   save_LDFLAGS="$LDFLAGS"
   LDFLAGS="$LDFLAGS $lt_tmp_static_flag"
   echo "$lt_simple_link_test_code" > conftest.$ac_ext
   if (eval $ac_link 2>conftest.err) && test -s conftest$ac_exeext; then
     # The linker can only warn and ignore the option if not recognized
     # So say no if there are warnings
     if test -s conftest.err; then
       # Append any errors to the config.log.
       cat conftest.err 1>&5
       $echo "X$_lt_linker_boilerplate" | $Xsed -e '/^$/d' > conftest.exp
       $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
       if diff conftest.exp conftest.er2 >/dev/null; then
         lt_cv_prog_compiler_static_works_CXX=yes
       fi
     else
       lt_cv_prog_compiler_static_works_CXX=yes
     fi
   fi
   $rm -r conftest*
   LDFLAGS="$save_LDFLAGS"

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works_CXX" >&5
$as_echo "$lt_cv_prog_compiler_static_works_CXX" >&6; }

if test x"$lt_cv_prog_compiler_static_works_CXX" = xyes; then
    :
else
    lt_prog_compiler_static_CXX=
fi


{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
$as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
if ${lt_cv_prog_compiler_c_o_CXX+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_prog_compiler_c_o_CXX=no
   $rm -r conftest 2>/dev/null
   mkdir conftest
   cd conftest
   mkdir out
   echo "$lt_simple_compile_test_code" > conftest.$ac_ext

   lt_compiler_flag="-o out/conftest2.$ac_objext"
   # Insert the option either (1) after the last *FLAGS variable, or
   # (2) before a word containing "conftest.", or (3) at the end.
   # Note that $ac_compile itself does not contain backslashes and begins
   # with a dollar sign (not a hyphen), so the echo should work correctly.
   lt_compile=`echo "$ac_compile" | $SED \
   -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
   -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
   -e 's:$: $lt_compiler_flag:'`
   (eval echo "\"configure:111872: $lt_compile\"" >&5)
   (eval "$lt_compile" 2>out/conftest.err)
   ac_status=$?
   cat out/conftest.err >&5
   echo "configure:111876: \$? = $ac_status" >&5
   if (exit $ac_status) && test -s out/conftest2.$ac_objext
   then
     # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings
     $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
     $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 >/dev/null; then
       lt_cv_prog_compiler_c_o_CXX=yes
     fi
   fi
   chmod u+w . 2>&5
   $rm conftest*
   # SGI C++ compiler will create directory out/ii_files/ for
   # template instantiation
   test -d out/ii_files && $rm out/ii_files/* && rmdir out/ii_files
   $rm out/* && rmdir out
   cd ..
   rmdir conftest
   $rm conftest*

fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o_CXX" >&5
$as_echo "$lt_cv_prog_compiler_c_o_CXX" >&6; }


hard_links="nottested"
if test "$lt_cv_prog_compiler_c_o_CXX" = no && test "$need_locks" != no; then
  # do not overwrite the value of need_locks provided by the user
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
$as_echo_n "checking if we can lock with hard links... " >&6; }
  hard_links=yes
  $rm conftest*
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  touch conftest.a
  ln conftest.a conftest.b 2>&5 || hard_links=no
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
$as_echo "$hard_links" >&6; }
  if test "$hard_links" = no; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
$as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
    need_locks=warn
  fi
else
  need_locks=no
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
$as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }

  export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
  case $host_os in
  aix[4-9]*)
    # If we're using GNU nm, then we don't want the "-C" option.
    # -C means demangle to AIX nm, but means don't demangle with GNU nm
    if $NM -V 2>&1 | grep 'GNU' > /dev/null; then
      export_symbols_cmds_CXX='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
    else
      export_symbols_cmds_CXX='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\$2 == "T") || (\$2 == "D") || (\$2 == "B")) && (substr(\$3,1,1) != ".")) { print \$3 } }'\'' | sort -u > $export_symbols'
    fi
    ;;
  pw32*)
    export_symbols_cmds_CXX="$ltdll_cmds"
  ;;
  cygwin* | mingw*)
    export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1 DATA/;/^.*[ ]__nm__/s/^.*[ ]__nm__\([^ ]*\)[ ][^ ]*/\1 DATA/;/^I[ ]/d;/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'
  ;;
  *)
    export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
  ;;
  esac
  exclude_expsyms_CXX='_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*'

{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs_CXX" >&5
$as_echo "$ld_shlibs_CXX" >&6; }
test "$ld_shlibs_CXX" = no && can_build_shared=no

#
# Do we need to explicitly link libc?
#
case "x$archive_cmds_need_lc_CXX" in
x|xyes)
  # Assume -lc should be added
  archive_cmds_need_lc_CXX=yes

  if test "$enable_shared" = yes && test "$GCC" = yes; then
    case $archive_cmds_CXX in
    *'~'*)
      # FIXME: we may have to deal with multi-command sequences.
      ;;
    '$CC '*)
      # Test whether the compiler implicitly links with -lc since on some
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
$as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
      $rm conftest*
      echo "$lt_simple_compile_test_code" > conftest.$ac_ext

      if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
  (eval $ac_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } 2>conftest.err; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
        deplibs=
        wl=$lt_prog_compiler_wl_CXX
	pic_flag=$lt_prog_compiler_pic_CXX
        compiler_flags=-v
        linker_flags=-v
        verstring=
        output_objdir=.
        libname=conftest
        lt_save_allow_undefined_flag=$allow_undefined_flag_CXX
        allow_undefined_flag_CXX=
        if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\""; } >&5
  (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }
        then
	  archive_cmds_need_lc_CXX=no
        else
	  archive_cmds_need_lc_CXX=yes
        fi
        allow_undefined_flag_CXX=$lt_save_allow_undefined_flag
      else
        cat conftest.err 1>&5
      fi
      $rm conftest*
      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc_CXX" >&5
$as_echo "$archive_cmds_need_lc_CXX" >&6; }
      ;;
    esac
  fi
  ;;
esac

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
$as_echo_n "checking dynamic linker characteristics... " >&6; }
library_names_spec=
libname_spec='lib$name'
soname_spec=
shrext_cmds=".so"
postinstall_cmds=
postuninstall_cmds=
finish_cmds=
finish_eval=
shlibpath_var=
shlibpath_overrides_runpath=unknown
version_type=none
dynamic_linker="$host_os ld.so"
sys_lib_dlsearch_path_spec="/lib /usr/lib"

need_lib_prefix=unknown
hardcode_into_libs=no

# when you set need_version to no, make sure it does not cause -set_version
# flags to be left without arguments
need_version=unknown

case $host_os in
aix3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
  shlibpath_var=LIBPATH

  # AIX 3 has no versioning support, so we append a major version to the name.
  soname_spec='${libname}${release}${shared_ext}$major'
  ;;

aix[4-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  hardcode_into_libs=yes
  if test "$host_cpu" = ia64; then
    # AIX 5 supports IA64
    library_names_spec='${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext}$versuffix $libname${shared_ext}'
    shlibpath_var=LD_LIBRARY_PATH
  else
    # With GCC up to 2.95.x, collect2 would create an import file
    # for dependence libraries.  The import file would start with
    # the line `#! .'.  This would cause the generated library to
    # depend on `.', always an invalid library.  This was fixed in
    # development snapshots of GCC prior to 3.0.
    case $host_os in
      aix4 | aix4.[01] | aix4.[01].*)
      if { echo '#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 97)'
	   echo ' yes '
	   echo '#endif'; } | ${CC} -E - | grep yes > /dev/null; then
	:
      else
	can_build_shared=no
      fi
      ;;
    esac
    # AIX (on Power*) has no versioning support, so currently we can not hardcode correct
    # soname into executable. Probably we can add versioning support to
    # collect2, so additional links can be useful in future.
    if test "$aix_use_runtimelinking" = yes; then
      # If using run time linking (on AIX 4.2 or later) use lib<name>.so
      # instead of lib<name>.a to let people know that these are not
      # typical AIX shared libraries.
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    else
      # We preserve .a as extension for shared libraries through AIX4.2
      # and later when we are not doing run time linking.
      library_names_spec='${libname}${release}.a $libname.a'
      soname_spec='${libname}${release}${shared_ext}$major'
    fi
    shlibpath_var=LIBPATH
  fi
  ;;

amigaos*)
  library_names_spec='$libname.ixlibrary $libname.a'
  # Create ${libname}_ixlibrary.a entries in /sys/libs.
  finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$echo "X$lib" | $Xsed -e '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show "cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a"; cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a || exit 1; done'
  ;;

beos*)
  library_names_spec='${libname}${shared_ext}'
  dynamic_linker="$host_os ld.so"
  shlibpath_var=LIBRARY_PATH
  ;;

bsdi[45]*)
  version_type=linux
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
  sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
  # the default ld.so.conf also contains /usr/contrib/lib and
  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
  # libtool to hard-code these into programs
  ;;

cygwin* | mingw* | pw32*)
  version_type=windows
  shrext_cmds=".dll"
  need_version=no
  need_lib_prefix=no

  case $GCC,$host_os in
  yes,cygwin* | yes,mingw* | yes,pw32*)
    library_names_spec='$libname.dll.a'
    # DLL is installed to $(libdir)/../bin by postinstall_cmds
    postinstall_cmds='base_file=`basename \${file}`~
      dlpath=`$SHELL 2>&1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
      dldir=$destdir/`dirname \$dlpath`~
      test -d \$dldir || mkdir -p \$dldir~
      $install_prog $dir/$dlname \$dldir/$dlname~
      chmod a+x \$dldir/$dlname'
    postuninstall_cmds='dldll=`$SHELL 2>&1 -c '\''. $file; echo \$dlname'\''`~
      dlpath=$dir/\$dldll~
       $rm \$dlpath'
    shlibpath_overrides_runpath=yes

    case $host_os in
    cygwin*)
      # Cygwin DLLs use 'cyg' prefix rather than 'lib'
      soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec="/usr/lib /lib/w32api /lib /usr/local/lib"
      ;;
    mingw*)
      # MinGW DLLs use traditional 'lib' prefix
      soname_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      sys_lib_search_path_spec=`$CC -print-search-dirs | grep "^libraries:" | $SED -e "s/^libraries://" -e "s,=/,/,g"`
      if echo "$sys_lib_search_path_spec" | grep ';[c-zC-Z]:/' >/dev/null; then
        # It is most probably a Windows format PATH printed by
        # mingw gcc, but we are running on Cygwin. Gcc prints its search
        # path with ; separators, and with drive letters. We can handle the
        # drive letters (cygwin fileutils understands them), so leave them,
        # especially as we might pass files found there to a mingw objdump,
        # which wouldn't understand a cygwinified path. Ahh.
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED -e 's/;/ /g'`
      else
        sys_lib_search_path_spec=`echo "$sys_lib_search_path_spec" | $SED  -e "s/$PATH_SEPARATOR/ /g"`
      fi
      ;;
    pw32*)
      # pw32 DLLs use 'pw' prefix rather than 'lib'
      library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
      ;;
    esac
    ;;

  *)
    library_names_spec='${libname}`echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext} $libname.lib'
    ;;
  esac
  dynamic_linker='Win32 ld.exe'
  # FIXME: first we should search . and the directory the executable is in
  shlibpath_var=PATH
  ;;

darwin* | rhapsody*)
  dynamic_linker="$host_os dyld"
  version_type=darwin
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${versuffix}$shared_ext ${libname}${release}${major}$shared_ext ${libname}$shared_ext'
  soname_spec='${libname}${release}${major}$shared_ext'
  shlibpath_overrides_runpath=yes
  shlibpath_var=DYLD_LIBRARY_PATH
  shrext_cmds='`test .$module = .yes && echo .so || echo .dylib`'

  sys_lib_dlsearch_path_spec='/usr/local/lib /lib /usr/lib'
  ;;

dgux*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

freebsd* | dragonfly*)
  # DragonFly does not have aout.  When/if they implement a new
  # versioning mechanism, adjust this.
  if test -x /usr/bin/objformat; then
    objformat=`/usr/bin/objformat`
  else
    case $host_os in
    freebsd[123]*) objformat=aout ;;
    *) objformat=elf ;;
    esac
  fi
  version_type=freebsd-$objformat
  case $version_type in
    freebsd-elf*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
      need_version=no
      need_lib_prefix=no
      ;;
    freebsd-*)
      library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
      need_version=yes
      ;;
  esac
  shlibpath_var=LD_LIBRARY_PATH
  case $host_os in
  freebsd2*)
    shlibpath_overrides_runpath=yes
    ;;
  freebsd3.[01]* | freebsdelf3.[01]*)
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
    shlibpath_overrides_runpath=no
    hardcode_into_libs=yes
    ;;
  *) # from 4.6 on, and DragonFly
    shlibpath_overrides_runpath=yes
    hardcode_into_libs=yes
    ;;
  esac
  ;;

gnu*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  ;;

hpux9* | hpux10* | hpux11*)
  # Give a soname corresponding to the major version so that dld.sl refuses to
  # link against other versions.
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  case $host_cpu in
  ia64*)
    shrext_cmds='.so'
    hardcode_into_libs=yes
    dynamic_linker="$host_os dld.so"
    shlibpath_var=LD_LIBRARY_PATH
    shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    if test "X$HPUX_IA64_MODE" = X32; then
      sys_lib_search_path_spec="/usr/lib/hpux32 /usr/local/lib/hpux32 /usr/local/lib"
    else
      sys_lib_search_path_spec="/usr/lib/hpux64 /usr/local/lib/hpux64"
    fi
    sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
    ;;
   hppa*64*)
     shrext_cmds='.sl'
     hardcode_into_libs=yes
     dynamic_linker="$host_os dld.sl"
     shlibpath_var=LD_LIBRARY_PATH # How should we handle SHLIB_PATH
     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
     soname_spec='${libname}${release}${shared_ext}$major'
     sys_lib_search_path_spec="/usr/lib/pa20_64 /usr/ccs/lib/pa20_64"
     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
     ;;
   *)
    shrext_cmds='.sl'
    dynamic_linker="$host_os dld.sl"
    shlibpath_var=SHLIB_PATH
    shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    ;;
  esac
  # HP-UX runs *really* slowly unless shared libraries are mode 555.
  postinstall_cmds='chmod 555 $lib'
  ;;

interix[3-9]*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  hardcode_into_libs=yes
  ;;

irix5* | irix6* | nonstopux*)
  case $host_os in
    nonstopux*) version_type=nonstopux ;;
    *)
	if test "$lt_cv_prog_gnu_ld" = yes; then
		version_type=linux
	else
		version_type=irix
	fi ;;
  esac
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} $libname${shared_ext}'
  case $host_os in
  irix5* | nonstopux*)
    libsuff= shlibsuff=
    ;;
  *)
    case $LD in # libtool.m4 will add one of these switches to LD
    *-32|*"-32 "|*-melf32bsmip|*"-melf32bsmip ")
      libsuff= shlibsuff= libmagic=32-bit;;
    *-n32|*"-n32 "|*-melf32bmipn32|*"-melf32bmipn32 ")
      libsuff=32 shlibsuff=N32 libmagic=N32;;
    *-64|*"-64 "|*-melf64bmip|*"-melf64bmip ")
      libsuff=64 shlibsuff=64 libmagic=64-bit;;
    *) libsuff= shlibsuff= libmagic=never-match;;
    esac
    ;;
  esac
  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
  shlibpath_overrides_runpath=no
  sys_lib_search_path_spec="/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}"
  sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
  hardcode_into_libs=yes
  ;;

# No shared lib support for Linux oldld, aout, or coff.
linux*oldld* | linux*aout* | linux*coff*)
  dynamic_linker=no
  ;;

# This must be Linux ELF.
linux* | k*bsd*-gnu)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -n $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  # This implies no fast_install, which is unacceptable.
  # Some rework will be needed to allow for fast_install
  # before this can be enabled.
  hardcode_into_libs=yes

  # Append ld.so.conf contents to the search path
  if test -f /etc/ld.so.conf; then
    lt_ld_extra=`awk '/^include / { system(sprintf("cd /etc; cat %s 2>/dev/null", \$2)); skip = 1; } { if (!skip) print \$0; skip = 0; }' < /etc/ld.so.conf | $SED -e 's/#.*//;/^[ 	]*hwcap[ 	]/d;s/[:,	]/ /g;s/=[^=]*$//;s/=[^= ]* / /g;/^$/d' | tr '\n' ' '`
    sys_lib_dlsearch_path_spec="/lib /usr/lib $lt_ld_extra"
  fi

  # We used to test for /lib/ld.so.1 and disable shared libraries on
  # powerpc, because MkLinux only supported shared libraries with the
  # GNU dynamic linker.  Since this was broken with cross compilers,
  # most powerpc-linux boxes support dynamic linking these days and
  # people can always --disable-shared, the test was removed, and we
  # assume the GNU/Linux dynamic linker is in use.
  dynamic_linker='GNU/Linux ld.so'
  ;;

netbsd*)
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
    finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
    dynamic_linker='NetBSD (a.out) ld.so'
  else
    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
    soname_spec='${libname}${release}${shared_ext}$major'
    dynamic_linker='NetBSD ld.elf_so'
  fi
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  ;;

newsos6)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

nto-qnx*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

openbsd*)
  version_type=sunos
  sys_lib_dlsearch_path_spec="/usr/lib"
  need_lib_prefix=no
  # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
  case $host_os in
    openbsd3.3 | openbsd3.3.*) need_version=yes ;;
    *)                         need_version=no  ;;
  esac
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    case $host_os in
      openbsd2.[89] | openbsd2.[89].*)
	shlibpath_overrides_runpath=no
	;;
      *)
	shlibpath_overrides_runpath=yes
	;;
      esac
  else
    shlibpath_overrides_runpath=yes
  fi
  ;;

os2*)
  libname_spec='$name'
  shrext_cmds=".dll"
  need_lib_prefix=no
  library_names_spec='$libname${shared_ext} $libname.a'
  dynamic_linker='OS/2 ld.exe'
  shlibpath_var=LIBPATH
  ;;

osf3* | osf4* | osf5*)
  version_type=osf
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}${shared_ext}$major'
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
  sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
  ;;

rdos*)
  dynamic_linker=no
  ;;

solaris*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  # ldd complains unless libraries are executable
  postinstall_cmds='chmod +x $lib'
  ;;

sunos4*)
  version_type=sunos
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
  finish_cmds='PATH="\$PATH:/usr/etc" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  if test "$with_gnu_ld" = yes; then
    need_lib_prefix=no
  fi
  need_version=yes
  ;;

sysv4 | sysv4.3*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  case $host_vendor in
    sni)
      shlibpath_overrides_runpath=no
      need_lib_prefix=no
      export_dynamic_flag_spec='${wl}-Blargedynsym'
      runpath_var=LD_RUN_PATH
      ;;
    siemens)
      need_lib_prefix=no
      ;;
    motorola)
      need_lib_prefix=no
      need_version=no
      shlibpath_overrides_runpath=no
      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
      ;;
  esac
  ;;

sysv4*MP*)
  if test -d /usr/nec ;then
    version_type=linux
    library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
    soname_spec='$libname${shared_ext}.$major'
    shlibpath_var=LD_LIBRARY_PATH
  fi
  ;;

sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
  version_type=freebsd-elf
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  if test "$with_gnu_ld" = yes; then
    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
    shlibpath_overrides_runpath=no
  else
    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
    shlibpath_overrides_runpath=yes
    case $host_os in
      sco3.2v5*)
        sys_lib_search_path_spec="$sys_lib_search_path_spec /lib"
	;;
    esac
  fi
  sys_lib_dlsearch_path_spec='/usr/lib'
  ;;

uts4*)
  version_type=linux
  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
  soname_spec='${libname}${release}${shared_ext}$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*)
  dynamic_linker=no
  ;;
esac
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
$as_echo "$dynamic_linker" >&6; }
test "$dynamic_linker" = no && can_build_shared=no

if ${lt_cv_sys_lib_search_path_spec+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
fi

sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
if ${lt_cv_sys_lib_dlsearch_path_spec+:} false; then :
  $as_echo_n "(cached) " >&6
else
  lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
fi

sys_lib_dlsearch_path_spec="$lt_cv_sys_lib_dlsearch_path_spec"

variables_saved_for_relink="PATH $shlibpath_var $runpath_var"
if test "$GCC" = yes; then
  variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
fi

{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
$as_echo_n "checking how to hardcode library paths into programs... " >&6; }
hardcode_action_CXX=
if test -n "$hardcode_libdir_flag_spec_CXX" || \
   test -n "$runpath_var_CXX" || \
   test "X$hardcode_automatic_CXX" = "Xyes" ; then

  # We can hardcode non-existent directories.
  if test "$hardcode_direct_CXX" != no &&
     # If the only mechanism to avoid hardcoding is shlibpath_var, we
     # have to relink, otherwise we might link with an installed library
     # when we should be linking with a yet-to-be-installed one
     ## test "$_LT_AC_TAGVAR(hardcode_shlibpath_var, CXX)" != no &&
     test "$hardcode_minus_L_CXX" != no; then
    # Linking always hardcodes the temporary library directory.
    hardcode_action_CXX=relink
  else
    # We can link without hardcoding, and we can hardcode nonexisting dirs.
    hardcode_action_CXX=immediate
  fi
else
  # We cannot hardcode anything, or else we can only hardcode existing
  # directories.
  hardcode_action_CXX=unsupported
fi
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action_CXX" >&5
$as_echo "$hardcode_action_CXX" >&6; }

if test "$hardcode_action_CXX" = relink; then
  # Fast installation is not supported
  enable_fast_install=no
elif test "$shlibpath_overrides_runpath" = yes ||
     test "$enable_shared" = no; then
  # Fast installation is not necessary
  enable_fast_install=needless
fi


# The else clause should only fire when bootstrapping the
# libtool distribution, otherwise you forgot to ship ltmain.sh
# with your package, and you will get complaints that there are
# no rules to generate ltmain.sh.
if test -f "$ltmain"; then
  # See if we are running on zsh, and set the options which allow our commands through
  # without removal of \ escapes.
  if test -n "${ZSH_VERSION+set}" ; then
    setopt NO_GLOB_SUBST
  fi
  # Now quote all the things that may contain metacharacters while being
  # careful not to overquote the AC_SUBSTed values.  We take copies of the
  # variables and quote the copies for generation of the libtool script.
  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
    SED SHELL STRIP \
    libname_spec library_names_spec soname_spec extract_expsyms_cmds \
    old_striplib striplib file_magic_cmd finish_cmds finish_eval \
    deplibs_check_method reload_flag reload_cmds need_locks \
    lt_cv_sys_global_symbol_pipe lt_cv_sys_global_symbol_to_cdecl \
    lt_cv_sys_global_symbol_to_c_name_address \
    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \
    old_postinstall_cmds old_postuninstall_cmds \
    compiler_CXX \
    CC_CXX \
    LD_CXX \
    lt_prog_compiler_wl_CXX \
    lt_prog_compiler_pic_CXX \
    lt_prog_compiler_static_CXX \
    lt_prog_compiler_no_builtin_flag_CXX \
    export_dynamic_flag_spec_CXX \
    thread_safe_flag_spec_CXX \
    whole_archive_flag_spec_CXX \
    enable_shared_with_static_runtimes_CXX \
    old_archive_cmds_CXX \
    old_archive_from_new_cmds_CXX \
    predep_objects_CXX \
    postdep_objects_CXX \
    predeps_CXX \
    postdeps_CXX \
    compiler_lib_search_path_CXX \
    compiler_lib_search_dirs_CXX \
    archive_cmds_CXX \
    archive_expsym_cmds_CXX \
    postinstall_cmds_CXX \
    postuninstall_cmds_CXX \
    old_archive_from_expsyms_cmds_CXX \
    allow_undefined_flag_CXX \
    no_undefined_flag_CXX \
    export_symbols_cmds_CXX \
    hardcode_libdir_flag_spec_CXX \
    hardcode_libdir_flag_spec_ld_CXX \
    hardcode_libdir_separator_CXX \
    hardcode_automatic_CXX \
    module_cmds_CXX \
    module_expsym_cmds_CXX \
    lt_cv_prog_compiler_c_o_CXX \
    fix_srcfile_path_CXX \
    exclude_expsyms_CXX \
    include_expsyms_CXX; do

    case $var in
    old_archive_cmds_CXX | \
    old_archive_from_new_cmds_CXX | \
    archive_cmds_CXX | \
    archive_expsym_cmds_CXX | \
    module_cmds_CXX | \
    module_expsym_cmds_CXX | \
    old_archive_from_expsyms_cmds_CXX | \
    export_symbols_cmds_CXX | \
    extract_expsyms_cmds | reload_cmds | finish_cmds | \
    postinstall_cmds | postuninstall_cmds | \
    old_postinstall_cmds | old_postuninstall_cmds | \
    sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)
      # Double-quote double-evaled strings.
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$double_quote_subst\" -e \"\$sed_quote_subst\" -e \"\$delay_variable_subst\"\`\\\""
      ;;
    *)
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$sed_quote_subst\"\`\\\""
      ;;
    esac
  done

  case $lt_echo in
  *'\$0 --fallback-echo"')
    lt_echo=`$echo "X$lt_echo" | $Xsed -e 's/\\\\\\\$0 --fallback-echo"$/$0 --fallback-echo"/'`
    ;;
  esac

cfgfile="$ofile"

  cat <<__EOF__ >> "$cfgfile"
# ### BEGIN LIBTOOL TAG CONFIG: $tagname

# Libtool was configured on host `(hostname || uname -n) 2>/dev/null | sed 1q`:

# Shell to use when invoking shell scripts.
SHELL=$lt_SHELL

# Whether or not to build shared libraries.
build_libtool_libs=$enable_shared

# Whether or not to build static libraries.
build_old_libs=$enable_static

# Whether or not to add -lc for building shared libraries.
build_libtool_need_lc=$archive_cmds_need_lc_CXX

# Whether or not to disallow shared libs when runtime libs are static
allow_libtool_libs_with_static_runtimes=$enable_shared_with_static_runtimes_CXX

# Whether or not to optimize for fast installation.
fast_install=$enable_fast_install

# The host system.
host_alias=$host_alias
host=$host
host_os=$host_os

# The build system.
build_alias=$build_alias
build=$build
build_os=$build_os

# An echo program that does not interpret backslashes.
echo=$lt_echo

# The archiver.
AR=$lt_AR
AR_FLAGS=$lt_AR_FLAGS

# A C compiler.
LTCC=$lt_LTCC

# LTCC compiler flags.
LTCFLAGS=$lt_LTCFLAGS

# A language-specific compiler.
CC=$lt_compiler_CXX

# Is the compiler the GNU C compiler?
with_gcc=$GCC_CXX

# An ERE matcher.
EGREP=$lt_EGREP

# The linker used to build libraries.
LD=$lt_LD_CXX

# Whether we need hard or soft links.
LN_S=$lt_LN_S

# A BSD-compatible nm program.
NM=$lt_NM

# A symbol stripping program
STRIP=$lt_STRIP

# Used to examine libraries when file_magic_cmd begins "file"
MAGIC_CMD=$MAGIC_CMD

# Used on cygwin: DLL creation program.
DLLTOOL="$DLLTOOL"

# Used on cygwin: object dumper.
OBJDUMP="$OBJDUMP"

# Used on cygwin: assembler.
AS="$AS"

# The name of the directory that contains temporary libtool files.
objdir=$objdir

# How to create reloadable object files.
reload_flag=$lt_reload_flag
reload_cmds=$lt_reload_cmds

# How to pass a linker flag through the compiler.
wl=$lt_lt_prog_compiler_wl_CXX

# Object file suffix (normally "o").
objext="$ac_objext"

# Old archive suffix (normally "a").
libext="$libext"

# Shared library suffix (normally ".so").
shrext_cmds='$shrext_cmds'

# Executable file suffix (normally "").
exeext="$exeext"

# Additional compiler flags for building library objects.
pic_flag=$lt_lt_prog_compiler_pic_CXX
pic_mode=$pic_mode

# What is the maximum length of a command?
max_cmd_len=$lt_cv_sys_max_cmd_len

# Does compiler simultaneously support -c and -o options?
compiler_c_o=$lt_lt_cv_prog_compiler_c_o_CXX

# Must we lock files when doing compilation?
need_locks=$lt_need_locks

# Do we need the lib prefix for modules?
need_lib_prefix=$need_lib_prefix

# Do we need a version for libraries?
need_version=$need_version

# Whether dlopen is supported.
dlopen_support=$enable_dlopen

# Whether dlopen of programs is supported.
dlopen_self=$enable_dlopen_self

# Whether dlopen of statically linked programs is supported.
dlopen_self_static=$enable_dlopen_self_static

# Compiler flag to prevent dynamic linking.
link_static_flag=$lt_lt_prog_compiler_static_CXX

# Compiler flag to turn off builtin functions.
no_builtin_flag=$lt_lt_prog_compiler_no_builtin_flag_CXX

# Compiler flag to allow reflexive dlopens.
export_dynamic_flag_spec=$lt_export_dynamic_flag_spec_CXX

# Compiler flag to generate shared objects directly from archives.
whole_archive_flag_spec=$lt_whole_archive_flag_spec_CXX

# Compiler flag to generate thread-safe objects.
thread_safe_flag_spec=$lt_thread_safe_flag_spec_CXX

# Library versioning type.
version_type=$version_type

# Format of library name prefix.
libname_spec=$lt_libname_spec

# List of archive names.  First name is the real one, the rest are links.
# The last name is the one that the linker finds with -lNAME.
library_names_spec=$lt_library_names_spec

# The coded name of the library, if different from the real name.
soname_spec=$lt_soname_spec

# Commands used to build and install an old-style archive.
RANLIB=$lt_RANLIB
old_archive_cmds=$lt_old_archive_cmds_CXX
old_postinstall_cmds=$lt_old_postinstall_cmds
old_postuninstall_cmds=$lt_old_postuninstall_cmds

# Create an old-style archive from a shared archive.
old_archive_from_new_cmds=$lt_old_archive_from_new_cmds_CXX

# Create a temporary old-style archive to link instead of a shared archive.
old_archive_from_expsyms_cmds=$lt_old_archive_from_expsyms_cmds_CXX

# Commands used to build and install a shared archive.
archive_cmds=$lt_archive_cmds_CXX
archive_expsym_cmds=$lt_archive_expsym_cmds_CXX
postinstall_cmds=$lt_postinstall_cmds
postuninstall_cmds=$lt_postuninstall_cmds

# Commands used to build a loadable module (assumed same as above if empty)
module_cmds=$lt_module_cmds_CXX
module_expsym_cmds=$lt_module_expsym_cmds_CXX

# Commands to strip libraries.
old_striplib=$lt_old_striplib
striplib=$lt_striplib

# Dependencies to place before the objects being linked to create a
# shared library.
predep_objects=$lt_predep_objects_CXX

# Dependencies to place after the objects being linked to create a
# shared library.
postdep_objects=$lt_postdep_objects_CXX

# Dependencies to place before the objects being linked to create a
# shared library.
predeps=$lt_predeps_CXX

# Dependencies to place after the objects being linked to create a
# shared library.
postdeps=$lt_postdeps_CXX

# The directories searched by this compiler when creating a shared
# library
compiler_lib_search_dirs=$lt_compiler_lib_search_dirs_CXX

# The library search path used internally by the compiler when linking
# a shared library.
compiler_lib_search_path=$lt_compiler_lib_search_path_CXX

# Method to check whether dependent libraries are shared objects.
deplibs_check_method=$lt_deplibs_check_method

# Command to use when deplibs_check_method == file_magic.
file_magic_cmd=$lt_file_magic_cmd

# Flag that allows shared libraries with undefined symbols to be built.
allow_undefined_flag=$lt_allow_undefined_flag_CXX

# Flag that forces no undefined symbols.
no_undefined_flag=$lt_no_undefined_flag_CXX

# Commands used to finish a libtool library installation in a directory.
finish_cmds=$lt_finish_cmds

# Same as above, but a single script fragment to be evaled but not shown.
finish_eval=$lt_finish_eval

# Take the output of nm and produce a listing of raw symbols and C names.
global_symbol_pipe=$lt_lt_cv_sys_global_symbol_pipe

# Transform the output of nm in a proper C declaration
global_symbol_to_cdecl=$lt_lt_cv_sys_global_symbol_to_cdecl

# Transform the output of nm in a C name address pair
global_symbol_to_c_name_address=$lt_lt_cv_sys_global_symbol_to_c_name_address

# This is the shared library runtime path variable.
runpath_var=$runpath_var

# This is the shared library path variable.
shlibpath_var=$shlibpath_var

# Is shlibpath searched before the hard-coded library search path?
shlibpath_overrides_runpath=$shlibpath_overrides_runpath

# How to hardcode a shared library path into an executable.
hardcode_action=$hardcode_action_CXX

# Whether we should hardcode library paths into libraries.
hardcode_into_libs=$hardcode_into_libs

# Flag to hardcode \$libdir into a binary during linking.
# This must work even if \$libdir does not exist.
hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec_CXX

# If ld is used when linking, flag to hardcode \$libdir into
# a binary during linking. This must work even if \$libdir does
# not exist.
hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld_CXX

# Whether we need a single -rpath flag with a separated argument.
hardcode_libdir_separator=$lt_hardcode_libdir_separator_CXX

# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes DIR into the
# resulting binary.
hardcode_direct=$hardcode_direct_CXX

# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
# resulting binary.
hardcode_minus_L=$hardcode_minus_L_CXX

# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into
# the resulting binary.
hardcode_shlibpath_var=$hardcode_shlibpath_var_CXX

# Set to yes if building a shared library automatically hardcodes DIR into the library
# and all subsequent libraries and executables linked against it.
hardcode_automatic=$hardcode_automatic_CXX

# Variables whose values should be saved in libtool wrapper scripts and
# restored at relink time.
variables_saved_for_relink="$variables_saved_for_relink"

# Whether libtool must link a program against all its dependency libraries.
link_all_deplibs=$link_all_deplibs_CXX

# Compile-time system search path for libraries
sys_lib_search_path_spec=$lt_sys_lib_search_path_spec

# Run-time system search path for libraries
sys_lib_dlsearch_path_spec=$lt_sys_lib_dlsearch_path_spec

# Fix the shell variable \$srcfile for the compiler.
fix_srcfile_path=$lt_fix_srcfile_path

# Set to yes if exported symbols are required.
always_export_symbols=$always_export_symbols_CXX

# The commands to list exported symbols.
export_symbols_cmds=$lt_export_symbols_cmds_CXX

# The commands to extract the exported symbol list from a shared archive.
extract_expsyms_cmds=$lt_extract_expsyms_cmds

# Symbols that should not be listed in the preloaded symbols.
exclude_expsyms=$lt_exclude_expsyms_CXX

# Symbols that must always be exported.
include_expsyms=$lt_include_expsyms_CXX

# ### END LIBTOOL TAG CONFIG: $tagname

__EOF__


else
  # If there is no Makefile yet, we rely on a make rule to execute
  # `config.status --recheck' to rerun these tests and create the
  # libtool script then.
  ltmain_in=`echo $ltmain | sed -e 's/\.sh$/.in/'`
  if test -f "$ltmain_in"; then
    test -f Makefile && make "$ltmain"
  fi
fi


ac_ext=c
ac_cpp='$CPP $CPPFLAGS'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compiler_gnu=$ac_cv_c_compiler_gnu

CC=$lt_save_CC
LDCXX=$LD
LD=$lt_save_LD
GCC=$lt_save_GCC
with_gnu_ldcxx=$with_gnu_ld
with_gnu_ld=$lt_save_with_gnu_ld
lt_cv_path_LDCXX=$lt_cv_path_LD
lt_cv_path_LD=$lt_save_path_LD
lt_cv_prog_gnu_ldcxx=$lt_cv_prog_gnu_ld
lt_cv_prog_gnu_ld=$lt_save_with_gnu_ld

	else
	  tagname=""
	fi
	;;

      *)
	as_fn_error $? "Unsupported tag name: $tagname" "$LINENO" 5
	;;
      esac

      # Append the new tag name to the list of available tags.
      if test -n "$tagname" ; then
      available_tags="$available_tags $tagname"
    fi
    fi
  done
  IFS="$lt_save_ifs"

  # Now substitute the updated list of available tags.
  if eval "sed -e 's/^available_tags=.*\$/available_tags=\"$available_tags\"/' \"$ofile\" > \"${ofile}T\""; then
    mv "${ofile}T" "$ofile"
    chmod +x "$ofile"
  else
    rm -f "${ofile}T"
    as_fn_error $? "unable to update list of available tagged configurations." "$LINENO" 5
  fi
fi



# This can be used to rebuild libtool when needed
LIBTOOL_DEPS="$ac_aux_dir/ltmain.sh"

# Always use our own libtool.
LIBTOOL='$(SHELL) $(top_builddir)/libtool'

# Prevent multiple expansion











if test "$enable_debug" != "yes"; then

  if test -z "$LIBTOOL"; then
    LIBTOOL='$(SHELL) $(top_builddir)/libtool --silent'
  else
    LIBTOOL="$LIBTOOL --silent"
  fi

fi


  if test -z "$LIBTOOL"; then
    LIBTOOL='$(SHELL) $(top_builddir)/libtool --preserve-dup-deps'
  else
    LIBTOOL="$LIBTOOL --preserve-dup-deps"
  fi


test -z "$PHP_COMPILE" && PHP_COMPILE='$(LIBTOOL) --mode=compile $(COMPILE) -c $<'
test -z "$CXX_PHP_COMPILE" && CXX_PHP_COMPILE='$(LIBTOOL) --mode=compile $(CXX_COMPILE) -c $<'
SHARED_LIBTOOL='$(LIBTOOL)'

CC=$old_CC


  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
$as_echo "" >&6; }
  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${T_MD}Generating files${T_ME}" >&5
$as_echo "${T_MD}Generating files${T_ME}" >&6; }


CXXFLAGS_CLEAN=$CXXFLAGS
CFLAGS_CLEAN=$CFLAGS
CFLAGS="\$(CFLAGS_CLEAN) $standard_libtool_flag"
INLINE_CFLAGS="$INLINE_CFLAGS $standard_libtool_flag"
CXXFLAGS="$CXXFLAGS $standard_libtool_flag"

if test "$PHP_PHAR" != "no" && test "$PHP_CLI" != "no"; then
  pharcmd=pharcmd
  pharcmd_install=install-pharcmd
else
  pharcmd=
  pharcmd_install=
fi;

all_targets="$lcov_target \$(OVERALL_TARGET) \$(PHP_MODULES) \$(PHP_ZEND_EX) \$(PHP_BINARIES) $pharcmd"
install_targets="$install_sapi $install_modules $install_binaries install-build install-headers install-programs $install_pear $pharcmd_install"


  PHP_VAR_SUBST="$PHP_VAR_SUBST all_targets"


  PHP_VAR_SUBST="$PHP_VAR_SUBST install_targets"


  PHP_VAR_SUBST="$PHP_VAR_SUBST install_binary_targets"




    for header_file in Zend/ TSRM/ include/ main/ main/streams/; do


  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`

  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INSTALLHEADERS$unique=set"

        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"

  fi

    done





  case TSRM in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "TSRM"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/TSRM/"; ac_bdir="TSRM/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in TSRM.c tsrm_strtok_r.c tsrm_virtual_cwd.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  case main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/main/"; ac_bdir="main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in main.c snprintf.c spprintf.c php_sprintf.c \
       fopen_wrappers.c alloca.c  php_scandir.c \
       php_ini.c SAPI.c rfc1867.c php_content_types.c strlcpy.c \
       strlcat.c mergesort.c reentrancy.c php_variables.c php_ticks.c \
       network.c php_open_temporary_file.c \
       output.c getopt.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  case main/streams in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "main/streams"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/main/streams/"; ac_bdir="main/streams/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in streams.c cast.c memory.c filter.c \
       plain_wrapper.c userspace.c transports.c xp_socket.c mmap.c \
       glob_wrapper.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done





  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



case $host_alias in
  *netware*)


    BUILD_DIR="$BUILD_DIR win32"




    BUILD_DIR="$BUILD_DIR netware"


    ;;
  *)

  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions_cli.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_BINARY_OBJS="$PHP_BINARY_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

    ;;
esac



  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in \
    zend_language_parser.c zend_language_scanner.c \
    zend_ini_parser.c zend_ini_scanner.c \
    zend_alloc.c zend_compile.c zend_constants.c zend_dynamic_array.c zend_dtrace.c \
    zend_execute_API.c zend_highlight.c zend_llist.c \
    zend_vm_opcodes.c zend_opcode.c zend_operators.c zend_ptr_stack.c zend_stack.c \
    zend_variables.c zend.c zend_API.c zend_extensions.c zend_hash.c \
    zend_list.c zend_indent.c zend_builtin_functions.c zend_sprintf.c \
    zend_ini.c zend_qsort.c zend_multibyte.c zend_ts_hash.c zend_stream.c \
    zend_iterators.c zend_interfaces.c zend_exceptions.c zend_strtod.c zend_gc.c \
    zend_closures.c zend_float.c zend_string.c zend_signal.c zend_generators.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



if test -r "$abs_srcdir/Zend/zend_objects.c"; then


  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_objects.c zend_object_handlers.c zend_objects_API.c zend_default_classes.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


fi

if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  flag=-O0
else
  flag=
fi


  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac



  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_execute.c; do

      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS

      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_cxx_post" ;;
      esac

    cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    BUILD_DIR="$BUILD_DIR main main/streams"




    BUILD_DIR="$BUILD_DIR TSRM"




    BUILD_DIR="$BUILD_DIR Zend"




  src=$abs_srcdir/scripts/Makefile.frag
  ac_srcdir=$abs_srcdir/scripts
  ac_builddir=scripts
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  src=$abs_srcdir/Makefile.frag
  ac_srcdir=$abs_srcdir/Zend
  ac_builddir=Zend
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  src=$abs_srcdir/Zend/Makefile.frag
  ac_srcdir=$abs_srcdir/Zend
  ac_builddir=Zend
  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments



  $php_shtool mkdir -p $BUILD_DIR


  cat >Makefile <<EOF
srcdir = $abs_srcdir
builddir = $abs_builddir
top_srcdir = $abs_srcdir
top_builddir = $abs_builddir
EOF
  for i in $PHP_VAR_SUBST; do
    eval echo "$i = \$$i" >> Makefile
  done

  cat $abs_srcdir/Makefile.global Makefile.fragments Makefile.objects >> Makefile



$as_echo "#define HAVE_BUILD_DEFS_H 1" >>confdefs.h


$php_shtool mkdir -p pear/scripts
$php_shtool mkdir -p scripts
$php_shtool mkdir -p scripts/man1

ALL_OUTPUT_FILES="php5.spec main/build-defs.h \
scripts/phpize scripts/man1/phpize.1 \
scripts/php-config scripts/man1/php-config.1 \
$PHP_OUTPUT_FILES"


  for arg in $ac_configure_args; do
    case $arg in
      --with-*)
        arg_name="`echo $arg | $SED -e 's/--with-/with-/g' -e 's/=.*//g'`"
        ;;
      --without-*)
        arg_name="`echo $arg | $SED -e 's/--without-/with-/g' -e 's/=.*//g'`"
        ;;
      --enable-*)
        arg_name="`echo $arg | $SED -e 's/--enable-/enable-/g' -e 's/=.*//g'`"
        ;;
      --disable-*)
        arg_name="`echo $arg | $SED -e 's/--disable-/enable-/g' -e 's/=.*//g'`"
        ;;
      *)
        continue
        ;;
    esac
    case $arg_name in
      # Allow --disable-all / --enable-all
      enable-all);;

      # Allow certain libtool options
      enable-libtool-lock | with-pic | with-tags | enable-shared | enable-static | enable-fast-install | with-gnu-ld);;

      # Allow certain TSRM options
      with-tsrm-pth | with-tsrm-st | with-tsrm-pthreads);;

      # Allow certain Zend options
      with-zend-vm | enable-maintainer-zts | enable-inline-optimization);;

      # All the rest must be set using the PHP_ARG_* macros
      # PHP_ARG_* macros set php_enable_<arg_name> or php_with_<arg_name>
      *)
        # Options that exist before PHP 6
        if test "$PHP_MAJOR_VERSION" -lt "6"; then
          case $arg_name in
            enable-zend-multibyte) continue;;
          esac
        fi

        is_arg_set=php_`echo $arg_name | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ-' 'abcdefghijklmnopqrstuvwxyz_'`
        if eval test "x\$$is_arg_set" = "x"; then
          PHP_UNKNOWN_CONFIGURE_OPTIONS="$PHP_UNKNOWN_CONFIGURE_OPTIONS
$arg"
        fi
        ;;
    esac
  done


ac_config_files="$ac_config_files $ALL_OUTPUT_FILES"

ac_config_commands="$ac_config_commands default"

cat >confcache <<\_ACEOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs, see configure's option --config-cache.
# It is not useful on other systems.  If it contains results you don't
# want to keep, you may remove or edit it.
#
# config.status only pays attention to the cache file if you give it
# the --recheck option to rerun configure.
#
# `ac_cv_env_foo' variables (set or unset) will be overridden when
# loading this file, other *unset* `ac_cv_foo' will be assigned the
# following values.

_ACEOF

# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, we kill variables containing newlines.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(
  for ac_var in `(set) 2>&1 | sed -n 's/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'`; do
    eval ac_val=\$$ac_var
    case $ac_val in #(
    *${as_nl}*)
      case $ac_var in #(
      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
$as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
      esac
      case $ac_var in #(
      _ | IFS | as_nl) ;; #(
      BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
      *) { eval $ac_var=; unset $ac_var;} ;;
      esac ;;
    esac
  done

  (set) 2>&1 |
    case $as_nl`(ac_space=' '; set) 2>&1` in #(
    *${as_nl}ac_space=\ *)
      # `set' does not quote correctly, so add quotes: double-quote
      # substitution turns \\\\ into \\, and sed turns \\ into \.
      sed -n \
	"s/'/'\\\\''/g;
	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
      ;; #(
    *)
      # `set' quotes correctly as required by POSIX, so do not add quotes.
      sed -n "/^[_$as_cr_alnum]*_cv_[_$as_cr_alnum]*=/p"
      ;;
    esac |
    sort
) |
  sed '
     /^ac_cv_env_/b end
     t clear
     :clear
     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
     t end
     s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
     :end' >>confcache
if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
  if test -w "$cache_file"; then
    if test "x$cache_file" != "x/dev/null"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
$as_echo "$as_me: updating cache $cache_file" >&6;}
      if test ! -f "$cache_file" || test -h "$cache_file"; then
	cat confcache >"$cache_file"
      else
        case $cache_file in #(
        */* | ?:*)
	  mv -f confcache "$cache_file"$$ &&
	  mv -f "$cache_file"$$ "$cache_file" ;; #(
        *)
	  mv -f confcache "$cache_file" ;;
	esac
      fi
    fi
  else
    { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
$as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
  fi
fi
rm -f confcache

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

DEFS=-DHAVE_CONFIG_H

ac_libobjs=
ac_ltlibobjs=
U=
for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
  # 1. Remove the extension, and $U if already installed.
  ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
  ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
  # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
  #    will be set to the directory where LIBOBJS objects are built.
  as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
  as_fn_append ac_ltlibobjs " \${LIBOBJDIR}$ac_i"'$U.lo'
done
LIBOBJS=$ac_libobjs

LTLIBOBJS=$ac_ltlibobjs



: "${CONFIG_STATUS=./config.status}"
ac_write_fail=0
ac_clean_files_save=$ac_clean_files
ac_clean_files="$ac_clean_files $CONFIG_STATUS"
{ $as_echo "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
$as_echo "$as_me: creating $CONFIG_STATUS" >&6;}
as_write_fail=0
cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
#! $SHELL
# Generated by $as_me.
# Run this file to recreate the current configuration.
# Compiler output produced by configure, useful for debugging
# configure, is in config.log if it exists.

debug=false
ac_cs_recheck=false
ac_cs_silent=false

SHELL=\${CONFIG_SHELL-$SHELL}
export SHELL
_ASEOF
cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
## -------------------- ##
## M4sh Initialization. ##
## -------------------- ##

# Be more Bourne compatible
DUALCASE=1; export DUALCASE # for MKS sh
if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
  emulate sh
  NULLCMD=:
  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
  # is contrary to our usage.  Disable this feature.
  alias -g '${1+"$@"}'='"$@"'
  setopt NO_GLOB_SUBST
else
  case `(set -o) 2>/dev/null` in #(
  *posix*) :
    set -o posix ;; #(
  *) :
     ;;
esac
fi


as_nl='
'
export as_nl
# Printing a long string crashes Solaris 7 /usr/bin/printf.
as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
# Prefer a ksh shell builtin over an external printf program on Solaris,
# but without wasting forks for bash or zsh.
if test -z "$BASH_VERSION$ZSH_VERSION" \
    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
  as_echo='print -r --'
  as_echo_n='print -rn --'
elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
  as_echo='printf %s\n'
  as_echo_n='printf %s'
else
  if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
    as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
    as_echo_n='/usr/ucb/echo -n'
  else
    as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
    as_echo_n_body='eval
      arg=$1;
      case $arg in #(
      *"$as_nl"*)
	expr "X$arg" : "X\\(.*\\)$as_nl";
	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
      esac;
      expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
    '
    export as_echo_n_body
    as_echo_n='sh -c $as_echo_n_body as_echo'
  fi
  export as_echo_body
  as_echo='sh -c $as_echo_body as_echo'
fi

# The user is always right.
if test "${PATH_SEPARATOR+set}" != set; then
  PATH_SEPARATOR=:
  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
    (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
      PATH_SEPARATOR=';'
  }
fi


# IFS
# We need space, tab and new line, in precisely that order.  Quoting is
# there to prevent editors from complaining about space-tab.
# (If _AS_PATH_WALK were called with IFS unset, it would disable word
# splitting by setting IFS to empty value.)
IFS=" ""	$as_nl"

# Find who we are.  Look in the path if we contain no directory separator.
as_myself=
case $0 in #((
  *[\\/]* ) as_myself=$0 ;;
  *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
  done
IFS=$as_save_IFS

     ;;
esac
# We did not find ourselves, most probably we were run as `sh COMMAND'
# in which case we are not to be found in the path.
if test "x$as_myself" = x; then
  as_myself=$0
fi
if test ! -f "$as_myself"; then
  $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
  exit 1
fi

# Unset variables that we do not need and which cause bugs (e.g. in
# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
# suppresses any "Segmentation fault" message there.  '((' could
# trigger a bug in pdksh 5.2.14.
for as_var in BASH_ENV ENV MAIL MAILPATH
do eval test x\${$as_var+set} = xset \
  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
done
PS1='$ '
PS2='> '
PS4='+ '

# NLS nuisances.
LC_ALL=C
export LC_ALL
LANGUAGE=C
export LANGUAGE

# CDPATH.
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH


# as_fn_error STATUS ERROR [LINENO LOG_FD]
# ----------------------------------------
# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
# script with STATUS, using 1 if that was 0.
as_fn_error ()
{
  as_status=$1; test $as_status -eq 0 && as_status=1
  if test "$4"; then
    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
  fi
  $as_echo "$as_me: error: $2" >&2
  as_fn_exit $as_status
} # as_fn_error


# as_fn_set_status STATUS
# -----------------------
# Set $? to STATUS, without forking.
as_fn_set_status ()
{
  return $1
} # as_fn_set_status

# as_fn_exit STATUS
# -----------------
# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
as_fn_exit ()
{
  set +e
  as_fn_set_status $1
  exit $1
} # as_fn_exit

# as_fn_unset VAR
# ---------------
# Portably unset VAR.
as_fn_unset ()
{
  { eval $1=; unset $1;}
}
as_unset=as_fn_unset
# as_fn_append VAR VALUE
# ----------------------
# Append the text in VALUE to the end of the definition contained in VAR. Take
# advantage of any shell optimizations that allow amortized linear growth over
# repeated appends, instead of the typical quadratic growth present in naive
# implementations.
if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
  eval 'as_fn_append ()
  {
    eval $1+=\$2
  }'
else
  as_fn_append ()
  {
    eval $1=\$$1\$2
  }
fi # as_fn_append

# as_fn_arith ARG...
# ------------------
# Perform arithmetic evaluation on the ARGs, and store the result in the
# global $as_val. Take advantage of shells that can avoid forks. The arguments
# must be portable across $(()) and expr.
if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
  eval 'as_fn_arith ()
  {
    as_val=$(( $* ))
  }'
else
  as_fn_arith ()
  {
    as_val=`expr "$@" || test $? -eq 1`
  }
fi # as_fn_arith


if expr a : '\(a\)' >/dev/null 2>&1 &&
   test "X`expr 00001 : '.*\(...\)'`" = X001; then
  as_expr=expr
else
  as_expr=false
fi

if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
  as_basename=basename
else
  as_basename=false
fi

if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
  as_dirname=dirname
else
  as_dirname=false
fi

as_me=`$as_basename -- "$0" ||
$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
	 X"$0" : 'X\(//\)$' \| \
	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
$as_echo X/"$0" |
    sed '/^.*\/\([^/][^/]*\)\/*$/{
	    s//\1/
	    q
	  }
	  /^X\/\(\/\/\)$/{
	    s//\1/
	    q
	  }
	  /^X\/\(\/\).*/{
	    s//\1/
	    q
	  }
	  s/.*/./; q'`

# Avoid depending upon Character Ranges.
as_cr_letters='abcdefghijklmnopqrstuvwxyz'
as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
as_cr_Letters=$as_cr_letters$as_cr_LETTERS
as_cr_digits='0123456789'
as_cr_alnum=$as_cr_Letters$as_cr_digits

ECHO_C= ECHO_N= ECHO_T=
case `echo -n x` in #(((((
-n*)
  case `echo 'xy\c'` in
  *c*) ECHO_T='	';;	# ECHO_T is single tab character.
  xy)  ECHO_C='\c';;
  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
       ECHO_T='	';;
  esac;;
*)
  ECHO_N='-n';;
esac

rm -f conf$$ conf$$.exe conf$$.file
if test -d conf$$.dir; then
  rm -f conf$$.dir/conf$$.file
else
  rm -f conf$$.dir
  mkdir conf$$.dir 2>/dev/null
fi
if (echo >conf$$.file) 2>/dev/null; then
  if ln -s conf$$.file conf$$ 2>/dev/null; then
    as_ln_s='ln -s'
    # ... but there are two gotchas:
    # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
    # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
    # In both cases, we have to default to `cp -pR'.
    ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
      as_ln_s='cp -pR'
  elif ln conf$$.file conf$$ 2>/dev/null; then
    as_ln_s=ln
  else
    as_ln_s='cp -pR'
  fi
else
  as_ln_s='cp -pR'
fi
rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
rmdir conf$$.dir 2>/dev/null


# as_fn_mkdir_p
# -------------
# Create "$as_dir" as a directory, including parents if necessary.
as_fn_mkdir_p ()
{

  case $as_dir in #(
  -*) as_dir=./$as_dir;;
  esac
  test -d "$as_dir" || eval $as_mkdir_p || {
    as_dirs=
    while :; do
      case $as_dir in #(
      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
      *) as_qdir=$as_dir;;
      esac
      as_dirs="'$as_qdir' $as_dirs"
      as_dir=`$as_dirname -- "$as_dir" ||
$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
	 X"$as_dir" : 'X\(//\)[^/]' \| \
	 X"$as_dir" : 'X\(//\)$' \| \
	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
$as_echo X"$as_dir" |
    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)[^/].*/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\).*/{
	    s//\1/
	    q
	  }
	  s/.*/./; q'`
      test -d "$as_dir" && break
    done
    test -z "$as_dirs" || eval "mkdir $as_dirs"
  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"


} # as_fn_mkdir_p
if mkdir -p . 2>/dev/null; then
  as_mkdir_p='mkdir -p "$as_dir"'
else
  test -d ./-p && rmdir ./-p
  as_mkdir_p=false
fi


# as_fn_executable_p FILE
# -----------------------
# Test if FILE is an executable regular file.
as_fn_executable_p ()
{
  test -f "$1" && test -x "$1"
} # as_fn_executable_p
as_test_x='test -x'
as_executable_p=as_fn_executable_p

# Sed expression to map a string onto a valid CPP name.
as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"

# Sed expression to map a string onto a valid variable name.
as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"


exec 6>&1
## ----------------------------------- ##
## Main body of $CONFIG_STATUS script. ##
## ----------------------------------- ##
_ASEOF
test $as_write_fail = 0 && chmod +x $CONFIG_STATUS || ac_write_fail=1

cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
# Save the log message, to keep $0 and so on meaningful, and to
# report actual input values of CONFIG_FILES etc. instead of their
# values after options handling.
ac_log="
This file was extended by $as_me, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = $CONFIG_FILES
  CONFIG_HEADERS  = $CONFIG_HEADERS
  CONFIG_LINKS    = $CONFIG_LINKS
  CONFIG_COMMANDS = $CONFIG_COMMANDS
  $ $0 $@

on `(hostname || uname -n) 2>/dev/null | sed 1q`
"

_ACEOF

case $ac_config_files in *"
"*) set x $ac_config_files; shift; ac_config_files=$*;;
esac

case $ac_config_headers in *"
"*) set x $ac_config_headers; shift; ac_config_headers=$*;;
esac


cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
# Files that config.status was made for.
config_files="$ac_config_files"
config_headers="$ac_config_headers"
config_commands="$ac_config_commands"

_ACEOF

cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
ac_cs_usage="\
\`$as_me' instantiates files and other configuration actions
from templates according to the current configuration.  Unless the files
and actions are specified as TAGs, all are instantiated by default.

Usage: $0 [OPTION]... [TAG]...

  -h, --help       print this help, then exit
  -V, --version    print version number and configuration settings, then exit
      --config     print configuration, then exit
  -q, --quiet, --silent
                   do not print progress messages
  -d, --debug      don't remove temporary files
      --recheck    update $as_me by reconfiguring in the same conditions
      --file=FILE[:TEMPLATE]
                   instantiate the configuration file FILE
      --header=FILE[:TEMPLATE]
                   instantiate the configuration header FILE

Configuration files:
$config_files

Configuration headers:
$config_headers

Configuration commands:
$config_commands

Report bugs to the package provider."

_ACEOF
cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
ac_cs_version="\\
config.status
configured by $0, generated by GNU Autoconf 2.69,
  with options \\"\$ac_cs_config\\"

Copyright (C) 2012 Free Software Foundation, Inc.
This config.status script is free software; the Free Software Foundation
gives unlimited permission to copy, distribute and modify it."

ac_pwd='$ac_pwd'
srcdir='$srcdir'
test -n "\$AWK" || AWK=awk
_ACEOF

cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
# The default lists apply if the user does not specify any file.
ac_need_defaults=:
while test $# != 0
do
  case $1 in
  --*=?*)
    ac_option=`expr "X$1" : 'X\([^=]*\)='`
    ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
    ac_shift=:
    ;;
  --*=)
    ac_option=`expr "X$1" : 'X\([^=]*\)='`
    ac_optarg=
    ac_shift=:
    ;;
  *)
    ac_option=$1
    ac_optarg=$2
    ac_shift=shift
    ;;
  esac

  case $ac_option in
  # Handling of the options.
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    ac_cs_recheck=: ;;
  --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
    $as_echo "$ac_cs_version"; exit ;;
  --config | --confi | --conf | --con | --co | --c )
    $as_echo "$ac_cs_config"; exit ;;
  --debug | --debu | --deb | --de | --d | -d )
    debug=: ;;
  --file | --fil | --fi | --f )
    $ac_shift
    case $ac_optarg in
    *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
    '') as_fn_error $? "missing file argument" ;;
    esac
    as_fn_append CONFIG_FILES " '$ac_optarg'"
    ac_need_defaults=false;;
  --header | --heade | --head | --hea )
    $ac_shift
    case $ac_optarg in
    *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
    esac
    as_fn_append CONFIG_HEADERS " '$ac_optarg'"
    ac_need_defaults=false;;
  --he | --h)
    # Conflict between --help and --header
    as_fn_error $? "ambiguous option: \`$1'
Try \`$0 --help' for more information.";;
  --help | --hel | -h )
    $as_echo "$ac_cs_usage"; exit ;;
  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil | --si | --s)
    ac_cs_silent=: ;;

  # This is an error.
  -*) as_fn_error $? "unrecognized option: \`$1'
Try \`$0 --help' for more information." ;;

  *) as_fn_append ac_config_targets " $1"
     ac_need_defaults=false ;;

  esac
  shift
done

ac_configure_extra_args=

if $ac_cs_silent; then
  exec 6>/dev/null
  ac_configure_extra_args="$ac_configure_extra_args --silent"
fi

_ACEOF
cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
if \$ac_cs_recheck; then
  set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
  shift
  \$as_echo "running CONFIG_SHELL=$SHELL \$*" >&6
  CONFIG_SHELL='$SHELL'
  export CONFIG_SHELL
  exec "\$@"
fi

_ACEOF
cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
exec 5>>config.log
{
  echo
  sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
## Running $as_me. ##
_ASBOX
  $as_echo "$ac_log"
} >&5

_ACEOF
cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
#
# INIT-COMMANDS
#


if test "\$CONFIG_FILES" = "$ALL_OUTPUT_FILES" || test "\$CONFIG_FILES" = " $ALL_OUTPUT_FILES" || test -z "\$CONFIG_FILES"; then
  REDO_ALL=yes
fi

################################################################
# Create configuration headers
#

test -d TSRM || $php_shtool mkdir TSRM
echo '#include <../main/php_config.h>' > TSRM/tsrm_config.h

test -d Zend || $php_shtool mkdir Zend

cat >Zend/zend_config.h <<FEO
#include <../main/php_config.h>
#if defined(APACHE) && defined(PHP_API_VERSION)
#undef HAVE_DLFCN_H
#endif
FEO

# run this only when generating all the files?
if test -n "\$REDO_ALL"; then
  # Hacking while airborne considered harmful.
  #
  echo "creating main/internal_functions.c"
  extensions="$EXT_STATIC"
  sh $srcdir/build/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" $AWK \$extensions > main/internal_functions.c

  echo "creating main/internal_functions_cli.c"
  cli_extensions="$EXT_CLI_STATIC"
  sh $srcdir/build/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" $AWK \$cli_extensions > main/internal_functions_cli.c

  if test "$UNAME" = "FreeBSD" && test "$PHP_SAPI" = "apache2filter" && test "$TSRM_PTH" != "pth-config" ; then
    echo "+--------------------------------------------------------------------+"
    echo "|                        *** WARNING ***                             |"
    echo "|                                                                    |"
    echo "| In order to build PHP as a Apache2 module on FreeBSD, you have to  |"
    echo "| add  --with-tsrm-pth to your ./configure line. Therefore you need  |"
    echo "| to install gnu-pth from /usr/ports/devel/pth.                      |"
  fi

  if test -n "$PHP_APXS_BROKEN"; then
    echo "+--------------------------------------------------------------------+"
    echo "| WARNING: Your $APXS script is most likely broken."
    echo "|                                                                    |"
    echo "| Please go read http://www.php.net/faq.build#faq.build.apxs         |"
    echo "| and make the changes described there and try again.                |"
  fi

  if test -n "$DEBUG_LOG"; then
    rm -f config.cache
cat <<X
+--------------------------------------------------------------------+
|                       *** ATTENTION ***                            |
|                                                                    |
| Something is likely to be messed up here, because the configure    |
| script was not able to detect a simple feature on your platform.   |
| This is often caused by incorrect configuration parameters. Please |
| see the file debug.log for error messages.                         |
|                                                                    |
| If you are unable to fix this, send the file debug.log to the      |
| php-install@lists.php.net mailing list and include appropriate      |
| information about your setup.                                      |
X
  fi

    if test "$PHP_SAPI" = "apache2handler" || test "$PHP_SAPI" = "apache2filter"; then
      if test "$APACHE_VERSION" -ge 2004001; then
        if test -z "$APACHE_THREADED_MPM"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| You have built PHP for Apache's current non-threaded MPM.          |
| If you change Apache to use a threaded MPM you must reconfigure    |
| PHP with --enable-maintainer-zts                                   |
X
        fi
      fi
    fi

  # Warn about linking Apache with libpthread if oci8 extension is enabled on linux.
  if test "$PHP_OCI8" != "no"; then
    if test "$PHP_SAPI" = "apache"; then
      if test `uname` = "Linux"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| Please check that your Apache (httpd) is linked with libpthread.   |
| If not, you have to recompile Apache with pthread. For more        |
| details, see this page: http://www.php.net/manual/ref.oci8.php     |
X
      fi
    fi

    if test "$PHP_SIGCHILD" != "yes"; then
      if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then
cat <<X
+--------------------------------------------------------------------+
| Notice:                                                            |
| If you encounter <defunc> processes when using a local Oracle      |
| database, set the value BEQUEATH_DETACH=YES in Oracle Net's        |
| sqlnet.ora file on the PHP host, or set the environment variable   |
| BEQUEATH_DETACH to YES before starting Apache.  If the problem     |
| still occurs, then recompile PHP and specify --enable-sigchild     |
| when configuring.                                                  |
X
      fi
    fi
  fi

cat <<X
+--------------------------------------------------------------------+
| License:                                                           |
| This software is subject to the PHP License, available in this     |
| distribution in the file LICENSE.  By continuing this installation |
| process, you are bound by the terms of this license agreement.     |
| If you do not agree with the terms of this license, you must abort |
| the installation process at this point.                            |
+--------------------------------------------------------------------+

Thank you for using PHP.

X

  # Output unknown configure options
  if test "$PHP_UNKNOWN_CONFIGURE_OPTIONS"; then
    echo "Notice: Following unknown configure options were used:
$PHP_UNKNOWN_CONFIGURE_OPTIONS

Check '$0 --help' for available options
"
  fi

fi


_ACEOF

cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1

# Handling of arguments.
for ac_config_target in $ac_config_targets
do
  case $ac_config_target in
    "main/php_config.h") CONFIG_HEADERS="$CONFIG_HEADERS main/php_config.h" ;;
    "$ALL_OUTPUT_FILES") CONFIG_FILES="$CONFIG_FILES $ALL_OUTPUT_FILES" ;;
    "default") CONFIG_COMMANDS="$CONFIG_COMMANDS default" ;;

  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
  esac
done


# If the user did not use the arguments to specify the items to instantiate,
# then the envvar interface is used.  Set only those that are not.
# We use the long form for the default assignment because of an extremely
# bizarre bug on SunOS 4.1.3.
if $ac_need_defaults; then
  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
  test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
fi

# Have a temporary directory for convenience.  Make it in the build tree
# simply because there is no reason against having it here, and in addition,
# creating and moving files from /tmp can sometimes cause problems.
# Hook for its removal unless debugging.
# Note that there is a small window in which the directory will not be cleaned:
# after its creation but before its name has been assigned to `$tmp'.
$debug ||
{
  tmp= ac_tmp=
  trap 'exit_status=$?
  : "${ac_tmp:=$tmp}"
  { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
' 0
  trap 'as_fn_exit 1' 1 2 13 15
}
# Create a (secure) tmp directory for tmp files.

{
  tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
  test -d "$tmp"
}  ||
{
  tmp=./conf$$-$RANDOM
  (umask 077 && mkdir "$tmp")
} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
ac_tmp=$tmp

# Set up the scripts for CONFIG_FILES section.
# No need to generate them if there are no CONFIG_FILES.
# This happens for instance with `./config.status config.h'.
if test -n "$CONFIG_FILES"; then


ac_cr=`echo X | tr X '\015'`
# On cygwin, bash can eat \r inside `` if the user requested igncr.
# But we know of no other shell where ac_cr would be empty at this
# point, so we can use a bashism as a fallback.
if test "x$ac_cr" = x; then
  eval ac_cr=\$\'\\r\'
fi
ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
  ac_cs_awk_cr='\\r'
else
  ac_cs_awk_cr=$ac_cr
fi

echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
_ACEOF


{
  echo "cat >conf$$subs.awk <<_ACEOF" &&
  echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
  echo "_ACEOF"
} >conf$$subs.sh ||
  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
ac_delim='%!_!# '
for ac_last_try in false false false false false :; do
  . ./conf$$subs.sh ||
    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5

  ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
  if test $ac_delim_n = $ac_delim_num; then
    break
  elif $ac_last_try; then
    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
  else
    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
  fi
done
rm -f conf$$subs.sh

cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
_ACEOF
sed -n '
h
s/^/S["/; s/!.*/"]=/
p
g
s/^[^!]*!//
:repl
t repl
s/'"$ac_delim"'$//
t delim
:nl
h
s/\(.\{148\}\)..*/\1/
t more1
s/["\\]/\\&/g; s/^/"/; s/$/\\n"\\/
p
n
b repl
:more1
s/["\\]/\\&/g; s/^/"/; s/$/"\\/
p
g
s/.\{148\}//
t nl
:delim
h
s/\(.\{148\}\)..*/\1/
t more2
s/["\\]/\\&/g; s/^/"/; s/$/"/
p
b
:more2
s/["\\]/\\&/g; s/^/"/; s/$/"\\/
p
g
s/.\{148\}//
t delim
' <conf$$subs.awk | sed '
/^[^""]/{
  N
  s/\n//
}
' >>$CONFIG_STATUS || ac_write_fail=1
rm -f conf$$subs.awk
cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
_ACAWK
cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
  for (key in S) S_is_set[key] = 1
  FS = ""

}
{
  line = $ 0
  nfields = split(line, field, "@")
  substed = 0
  len = length(field[1])
  for (i = 2; i < nfields; i++) {
    key = field[i]
    keylen = length(key)
    if (S_is_set[key]) {
      value = S[key]
      line = substr(line, 1, len) "" value "" substr(line, len + keylen + 3)
      len += length(value) + length(field[++i])
      substed = 1
    } else
      len += 1 + keylen
  }

  print line
}

_ACAWK
_ACEOF
cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
if sed "s/$ac_cr//" < /dev/null > /dev/null 2>&1; then
  sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
else
  cat
fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
_ACEOF

# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
# trailing colons and then remove the whole line if VPATH becomes empty
# (actually we leave an empty line to preserve line numbers).
if test "x$srcdir" = x.; then
  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
h
s///
s/^/:/
s/[	 ]*$/:/
s/:\$(srcdir):/:/g
s/:\${srcdir}:/:/g
s/:@srcdir@:/:/g
s/^:*//
s/:*$//
x
s/\(=[	 ]*\).*/\1/
G
s/\n//
s/^[^=]*=[	 ]*$//
}'
fi

cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
fi # test -n "$CONFIG_FILES"

# Set up the scripts for CONFIG_HEADERS section.
# No need to generate them if there are no CONFIG_HEADERS.
# This happens for instance with `./config.status Makefile'.
if test -n "$CONFIG_HEADERS"; then
cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
BEGIN {
_ACEOF

# Transform confdefs.h into an awk script `defines.awk', embedded as
# here-document in config.status, that substitutes the proper values into
# config.h.in to produce config.h.

# Create a delimiter string that does not exist in confdefs.h, to ease
# handling of long lines.
ac_delim='%!_!# '
for ac_last_try in false false :; do
  ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
  if test -z "$ac_tt"; then
    break
  elif $ac_last_try; then
    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
  else
    ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
  fi
done

# For the awk script, D is an array of macro values keyed by name,
# likewise P contains macro parameters if any.  Preserve backslash
# newline sequences.

ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
sed -n '
s/.\{148\}/&'"$ac_delim"'/g
t rset
:rset
s/^[	 ]*#[	 ]*define[	 ][	 ]*/ /
t def
d
:def
s/\\$//
t bsnl
s/["\\]/\\&/g
s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
D["\1"]=" \3"/p
s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2"/p
d
:bsnl
s/["\\]/\\&/g
s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
D["\1"]=" \3\\\\\\n"\\/p
t cont
s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2\\\\\\n"\\/p
t cont
d
:cont
n
s/.\{148\}/&'"$ac_delim"'/g
t clear
:clear
s/\\$//
t bsnlc
s/["\\]/\\&/g; s/^/"/; s/$/"/p
d
:bsnlc
s/["\\]/\\&/g; s/^/"/; s/$/\\\\\\n"\\/p
b cont
' <confdefs.h | sed '
s/'"$ac_delim"'/"\\\
"/g' >>$CONFIG_STATUS || ac_write_fail=1

cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
  for (key in D) D_is_set[key] = 1
  FS = ""
}
/^[\t ]*#[\t ]*(define|undef)[\t ]+$ac_word_re([\t (]|\$)/ {
  line = \$ 0
  split(line, arg, " ")
  if (arg[1] == "#") {
    defundef = arg[2]
    mac1 = arg[3]
  } else {
    defundef = substr(arg[1], 2)
    mac1 = arg[2]
  }
  split(mac1, mac2, "(") #)
  macro = mac2[1]
  prefix = substr(line, 1, index(line, defundef) - 1)
  if (D_is_set[macro]) {
    # Preserve the white space surrounding the "#".
    print prefix "define", macro P[macro] D[macro]
    next
  } else {
    # Replace #undef with comments.  This is necessary, for example,
    # in the case of _POSIX_SOURCE, which is predefined and required
    # on some systems where configure will not decide to define it.
    if (defundef == "undef") {
      print "/*", prefix defundef, macro, "*/"
      next
    }
  }
}
{ print }
_ACAWK
_ACEOF
cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
fi # test -n "$CONFIG_HEADERS"


eval set X "  :F $CONFIG_FILES  :H $CONFIG_HEADERS    :C $CONFIG_COMMANDS"
shift
for ac_tag
do
  case $ac_tag in
  :[FHLC]) ac_mode=$ac_tag; continue;;
  esac
  case $ac_mode$ac_tag in
  :[FHL]*:*);;
  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
  :[FH]-) ac_tag=-:-;;
  :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
  esac
  ac_save_IFS=$IFS
  IFS=:
  set x $ac_tag
  IFS=$ac_save_IFS
  shift
  ac_file=$1
  shift

  case $ac_mode in
  :L) ac_source=$1;;
  :[FH])
    ac_file_inputs=
    for ac_f
    do
      case $ac_f in
      -) ac_f="$ac_tmp/stdin";;
      *) # Look for the file first in the build tree, then in the source tree
	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
	 # because $ac_f cannot contain `:'.
	 test -f "$ac_f" ||
	   case $ac_f in
	   [\\/$]*) false;;
	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
	   esac ||
	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
      esac
      case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
      as_fn_append ac_file_inputs " '$ac_f'"
    done

    # Let's still pretend it is `configure' which instantiates (i.e., don't
    # use $as_me), people would be surprised to read:
    #    /* config.h.  Generated by config.status.  */
    configure_input='Generated from '`
	  $as_echo "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
	`' by configure.'
    if test x"$ac_file" != x-; then
      configure_input="$ac_file.  $configure_input"
      { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
$as_echo "$as_me: creating $ac_file" >&6;}
    fi
    # Neutralize special characters interpreted by sed in replacement strings.
    case $configure_input in #(
    *\&* | *\|* | *\\* )
       ac_sed_conf_input=`$as_echo "$configure_input" |
       sed 's/[\\\\&|]/\\\\&/g'`;; #(
    *) ac_sed_conf_input=$configure_input;;
    esac

    case $ac_tag in
    *:-:* | *:-) cat >"$ac_tmp/stdin" \
      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
    esac
    ;;
  esac

  ac_dir=`$as_dirname -- "$ac_file" ||
$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
	 X"$ac_file" : 'X\(//\)[^/]' \| \
	 X"$ac_file" : 'X\(//\)$' \| \
	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
$as_echo X"$ac_file" |
    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)[^/].*/{
	    s//\1/
	    q
	  }
	  /^X\(\/\/\)$/{
	    s//\1/
	    q
	  }
	  /^X\(\/\).*/{
	    s//\1/
	    q
	  }
	  s/.*/./; q'`
  as_dir="$ac_dir"; as_fn_mkdir_p
  ac_builddir=.

case "$ac_dir" in
.) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
*)
  ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
  # A ".." for each directory in $ac_dir_suffix.
  ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
  case $ac_top_builddir_sub in
  "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
  *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
  esac ;;
esac
ac_abs_top_builddir=$ac_pwd
ac_abs_builddir=$ac_pwd$ac_dir_suffix
# for backward compatibility:
ac_top_builddir=$ac_top_build_prefix

case $srcdir in
  .)  # We are building in place.
    ac_srcdir=.
    ac_top_srcdir=$ac_top_builddir_sub
    ac_abs_top_srcdir=$ac_pwd ;;
  [\\/]* | ?:[\\/]* )  # Absolute name.
    ac_srcdir=$srcdir$ac_dir_suffix;
    ac_top_srcdir=$srcdir
    ac_abs_top_srcdir=$srcdir ;;
  *) # Relative name.
    ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix
    ac_top_srcdir=$ac_top_build_prefix$srcdir
    ac_abs_top_srcdir=$ac_pwd/$srcdir ;;
esac
ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix


  case $ac_mode in
  :F)
  #
  # CONFIG_FILE
  #

_ACEOF

cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
# If the template does not know about datarootdir, expand it.
# FIXME: This hack should be removed a few years after 2.60.
ac_datarootdir_hack=; ac_datarootdir_seen=
ac_sed_dataroot='
/datarootdir/ {
  p
  q
}
/@datadir@/p
/@docdir@/p
/@infodir@/p
/@localedir@/p
/@mandir@/p'
case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
*datarootdir*) ac_datarootdir_seen=yes;;
*@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
$as_echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
_ACEOF
cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
  ac_datarootdir_hack='
  s&@datadir@&$datadir&g
  s&@docdir@&$docdir&g
  s&@infodir@&$infodir&g
  s&@localedir@&$localedir&g
  s&@mandir@&$mandir&g
  s&\\\${datarootdir}&$datarootdir&g' ;;
esac
_ACEOF

# Neutralize VPATH when `$srcdir' = `.'.
# Shell code in configure.ac might set extrasub.
# FIXME: do we really want to maintain this feature?
cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
ac_sed_extra="$ac_vpsub
$extrasub
_ACEOF
cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
:t
/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
s|@configure_input@|$ac_sed_conf_input|;t t
s&@top_builddir@&$ac_top_builddir_sub&;t t
s&@top_build_prefix@&$ac_top_build_prefix&;t t
s&@srcdir@&$ac_srcdir&;t t
s&@abs_srcdir@&$ac_abs_srcdir&;t t
s&@top_srcdir@&$ac_top_srcdir&;t t
s&@abs_top_srcdir@&$ac_abs_top_srcdir&;t t
s&@builddir@&$ac_builddir&;t t
s&@abs_builddir@&$ac_abs_builddir&;t t
s&@abs_top_builddir@&$ac_abs_top_builddir&;t t
$ac_datarootdir_hack
"
eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
  >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5

test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
  { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
      "$ac_tmp/out"`; test -z "$ac_out"; } &&
  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
which seems to be undefined.  Please make sure it is defined" >&5
$as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
which seems to be undefined.  Please make sure it is defined" >&2;}

  rm -f "$ac_tmp/stdin"
  case $ac_file in
  -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
  *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
  esac \
  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
 ;;
  :H)
  #
  # CONFIG_HEADER
  #
  if test x"$ac_file" != x-; then
    {
      $as_echo "/* $configure_input  */" \
      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
    } >"$ac_tmp/config.h" \
      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
    if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
$as_echo "$as_me: $ac_file is unchanged" >&6;}
    else
      rm -f "$ac_file"
      mv "$ac_tmp/config.h" "$ac_file" \
	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
    fi
  else
    $as_echo "/* $configure_input  */" \
      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
      || as_fn_error $? "could not create -" "$LINENO" 5
  fi
 ;;

  :C)  { $as_echo "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
$as_echo "$as_me: executing $ac_file commands" >&6;}
 ;;
  esac

done # for ac_tag


as_fn_exit 0
_ACEOF
ac_clean_files=$ac_clean_files_save

test $ac_write_fail = 0 ||
  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5


# configure is writing to config.log, and then calls config.status.
# config.status does its own redirection, appending to config.log.
# Unfortunately, on DOS this fails, as config.log is still kept open
# by configure, so config.status won't be able to write to it; its
# output is simply discarded.  So we exec the FD to /dev/null,
# effectively closing config.log, so it can be properly (re)opened and
# appended to by config.status.  When coming back to configure, we
# need to make the FD available again.
if test "$no_create" != yes; then
  ac_cs_success=:
  ac_config_status_args=
  test "$silent" = yes &&
    ac_config_status_args="$ac_config_status_args --quiet"
  exec 5>/dev/null
  $SHELL $CONFIG_STATUS $ac_config_status_args || ac_cs_success=false
  exec 5>>config.log
  # Use ||, not &&, to avoid exiting from the if with $? = 1, which
  # would make configure fail if this is the last instruction.
  $ac_cs_success || as_fn_exit 1
fi
if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
$as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
fi


